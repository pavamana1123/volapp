/*! For license information please see main.c6da4b9b.js.LICENSE.txt */
!function(){var g={757:function(g,e,I){g.exports=I(727)},426:function(g,e,I){(g=I.nmd(g)).exports=function(){"use strict";var e,I;function C(){return e.apply(null,arguments)}function n(g){e=g}function t(g){return g instanceof Array||"[object Array]"===Object.prototype.toString.call(g)}function l(g){return null!=g&&"[object Object]"===Object.prototype.toString.call(g)}function a(g,e){return Object.prototype.hasOwnProperty.call(g,e)}function o(g){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(g).length;var e;for(e in g)if(a(g,e))return!1;return!0}function c(g){return void 0===g}function A(g){return"number"===typeof g||"[object Number]"===Object.prototype.toString.call(g)}function r(g){return g instanceof Date||"[object Date]"===Object.prototype.toString.call(g)}function i(g,e){var I,C=[],n=g.length;for(I=0;I<n;++I)C.push(e(g[I],I));return C}function s(g,e){for(var I in e)a(e,I)&&(g[I]=e[I]);return a(e,"toString")&&(g.toString=e.toString),a(e,"valueOf")&&(g.valueOf=e.valueOf),g}function d(g,e,I,C){return QI(g,e,I,C,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(g){return null==g._pf&&(g._pf=u()),g._pf}function h(g){if(null==g._isValid){var e=m(g),C=I.call(e.parsedDateParts,(function(g){return null!=g})),n=!isNaN(g._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&C);if(g._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(g))return n;g._isValid=n}return g._isValid}function b(g){var e=d(NaN);return null!=g?s(m(e),g):m(e).userInvalidated=!0,e}I=Array.prototype.some?Array.prototype.some:function(g){var e,I=Object(this),C=I.length>>>0;for(e=0;e<C;e++)if(e in I&&g.call(this,I[e],e,I))return!0;return!1};var Z=C.momentProperties=[],G=!1;function p(g,e){var I,C,n,t=Z.length;if(c(e._isAMomentObject)||(g._isAMomentObject=e._isAMomentObject),c(e._i)||(g._i=e._i),c(e._f)||(g._f=e._f),c(e._l)||(g._l=e._l),c(e._strict)||(g._strict=e._strict),c(e._tzm)||(g._tzm=e._tzm),c(e._isUTC)||(g._isUTC=e._isUTC),c(e._offset)||(g._offset=e._offset),c(e._pf)||(g._pf=m(e)),c(e._locale)||(g._locale=e._locale),t>0)for(I=0;I<t;I++)c(n=e[C=Z[I]])||(g[C]=n);return g}function B(g){p(this,g),this._d=new Date(null!=g._d?g._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===G&&(G=!0,C.updateOffset(this),G=!1)}function y(g){return g instanceof B||null!=g&&null!=g._isAMomentObject}function S(g){!1===C.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+g)}function f(g,e){var I=!0;return s((function(){if(null!=C.deprecationHandler&&C.deprecationHandler(null,g),I){var n,t,l,o=[],c=arguments.length;for(t=0;t<c;t++){if(n="","object"===typeof arguments[t]){for(l in n+="\n["+t+"] ",arguments[0])a(arguments[0],l)&&(n+=l+": "+arguments[0][l]+", ");n=n.slice(0,-2)}else n=arguments[t];o.push(n)}S(g+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),I=!1}return e.apply(this,arguments)}),e)}var W,V={};function v(g,e){null!=C.deprecationHandler&&C.deprecationHandler(g,e),V[g]||(S(e),V[g]=!0)}function R(g){return"undefined"!==typeof Function&&g instanceof Function||"[object Function]"===Object.prototype.toString.call(g)}function X(g){var e,I;for(I in g)a(g,I)&&(R(e=g[I])?this[I]=e:this["_"+I]=e);this._config=g,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function k(g,e){var I,C=s({},g);for(I in e)a(e,I)&&(l(g[I])&&l(e[I])?(C[I]={},s(C[I],g[I]),s(C[I],e[I])):null!=e[I]?C[I]=e[I]:delete C[I]);for(I in g)a(g,I)&&!a(e,I)&&l(g[I])&&(C[I]=s({},C[I]));return C}function J(g){null!=g&&this.set(g)}C.suppressDeprecationWarnings=!1,C.deprecationHandler=null,W=Object.keys?Object.keys:function(g){var e,I=[];for(e in g)a(g,e)&&I.push(e);return I};var Y={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function H(g,e,I){var C=this._calendar[g]||this._calendar.sameElse;return R(C)?C.call(e,I):C}function w(g,e,I){var C=""+Math.abs(g),n=e-C.length;return(g>=0?I?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+C}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,K={},E={};function T(g,e,I,C){var n=C;"string"===typeof C&&(n=function(){return this[C]()}),g&&(E[g]=n),e&&(E[e[0]]=function(){return w(n.apply(this,arguments),e[1],e[2])}),I&&(E[I]=function(){return this.localeData().ordinal(n.apply(this,arguments),g)})}function M(g){return g.match(/\[[\s\S]/)?g.replace(/^\[|\]$/g,""):g.replace(/\\/g,"")}function x(g){var e,I,C=g.match(N);for(e=0,I=C.length;e<I;e++)E[C[e]]?C[e]=E[C[e]]:C[e]=M(C[e]);return function(e){var n,t="";for(n=0;n<I;n++)t+=R(C[n])?C[n].call(e,g):C[n];return t}}function U(g,e){return g.isValid()?(e=D(e,g.localeData()),K[e]=K[e]||x(e),K[e](g)):g.localeData().invalidDate()}function D(g,e){var I=5;function C(g){return e.longDateFormat(g)||g}for(F.lastIndex=0;I>=0&&F.test(g);)g=g.replace(F,C),F.lastIndex=0,I-=1;return g}var L={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function z(g){var e=this._longDateFormat[g],I=this._longDateFormat[g.toUpperCase()];return e||!I?e:(this._longDateFormat[g]=I.match(N).map((function(g){return"MMMM"===g||"MM"===g||"DD"===g||"dddd"===g?g.slice(1):g})).join(""),this._longDateFormat[g])}var Q="Invalid date";function P(){return this._invalidDate}var O="%d",j=/\d{1,2}/;function _(g){return this._ordinal.replace("%d",g)}var q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $(g,e,I,C){var n=this._relativeTime[I];return R(n)?n(g,e,I,C):n.replace(/%d/i,g)}function gg(g,e){var I=this._relativeTime[g>0?"future":"past"];return R(I)?I(e):I.replace(/%s/i,e)}var eg={};function Ig(g,e){var I=g.toLowerCase();eg[I]=eg[I+"s"]=eg[e]=g}function Cg(g){return"string"===typeof g?eg[g]||eg[g.toLowerCase()]:void 0}function ng(g){var e,I,C={};for(I in g)a(g,I)&&(e=Cg(I))&&(C[e]=g[I]);return C}var tg={};function lg(g,e){tg[g]=e}function ag(g){var e,I=[];for(e in g)a(g,e)&&I.push({unit:e,priority:tg[e]});return I.sort((function(g,e){return g.priority-e.priority})),I}function og(g){return g%4===0&&g%100!==0||g%400===0}function cg(g){return g<0?Math.ceil(g)||0:Math.floor(g)}function Ag(g){var e=+g,I=0;return 0!==e&&isFinite(e)&&(I=cg(e)),I}function rg(g,e){return function(I){return null!=I?(sg(this,g,I),C.updateOffset(this,e),this):ig(this,g)}}function ig(g,e){return g.isValid()?g._d["get"+(g._isUTC?"UTC":"")+e]():NaN}function sg(g,e,I){g.isValid()&&!isNaN(I)&&("FullYear"===e&&og(g.year())&&1===g.month()&&29===g.date()?(I=Ag(I),g._d["set"+(g._isUTC?"UTC":"")+e](I,g.month(),$g(I,g.month()))):g._d["set"+(g._isUTC?"UTC":"")+e](I))}function dg(g){return R(this[g=Cg(g)])?this[g]():this}function ug(g,e){if("object"===typeof g){var I,C=ag(g=ng(g)),n=C.length;for(I=0;I<n;I++)this[C[I].unit](g[C[I].unit])}else if(R(this[g=Cg(g)]))return this[g](e);return this}var mg,hg=/\d/,bg=/\d\d/,Zg=/\d{3}/,Gg=/\d{4}/,pg=/[+-]?\d{6}/,Bg=/\d\d?/,yg=/\d\d\d\d?/,Sg=/\d\d\d\d\d\d?/,fg=/\d{1,3}/,Wg=/\d{1,4}/,Vg=/[+-]?\d{1,6}/,vg=/\d+/,Rg=/[+-]?\d+/,Xg=/Z|[+-]\d\d:?\d\d/gi,kg=/Z|[+-]\d\d(?::?\d\d)?/gi,Jg=/[+-]?\d+(\.\d{1,3})?/,Yg=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Hg(g,e,I){mg[g]=R(e)?e:function(g,C){return g&&I?I:e}}function wg(g,e){return a(mg,g)?mg[g](e._strict,e._locale):new RegExp(Ng(g))}function Ng(g){return Fg(g.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(g,e,I,C,n){return e||I||C||n})))}function Fg(g){return g.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}mg={};var Kg={};function Eg(g,e){var I,C,n=e;for("string"===typeof g&&(g=[g]),A(e)&&(n=function(g,I){I[e]=Ag(g)}),C=g.length,I=0;I<C;I++)Kg[g[I]]=n}function Tg(g,e){Eg(g,(function(g,I,C,n){C._w=C._w||{},e(g,C._w,C,n)}))}function Mg(g,e,I){null!=e&&a(Kg,g)&&Kg[g](e,I._a,I,g)}var xg,Ug=0,Dg=1,Lg=2,zg=3,Qg=4,Pg=5,Og=6,jg=7,_g=8;function qg(g,e){return(g%e+e)%e}function $g(g,e){if(isNaN(g)||isNaN(e))return NaN;var I=qg(e,12);return g+=(e-I)/12,1===I?og(g)?29:28:31-I%7%2}xg=Array.prototype.indexOf?Array.prototype.indexOf:function(g){var e;for(e=0;e<this.length;++e)if(this[e]===g)return e;return-1},T("M",["MM",2],"Mo",(function(){return this.month()+1})),T("MMM",0,0,(function(g){return this.localeData().monthsShort(this,g)})),T("MMMM",0,0,(function(g){return this.localeData().months(this,g)})),Ig("month","M"),lg("month",8),Hg("M",Bg),Hg("MM",Bg,bg),Hg("MMM",(function(g,e){return e.monthsShortRegex(g)})),Hg("MMMM",(function(g,e){return e.monthsRegex(g)})),Eg(["M","MM"],(function(g,e){e[Dg]=Ag(g)-1})),Eg(["MMM","MMMM"],(function(g,e,I,C){var n=I._locale.monthsParse(g,C,I._strict);null!=n?e[Dg]=n:m(I).invalidMonth=g}));var ge="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ee="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ie=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ce=Yg,ne=Yg;function te(g,e){return g?t(this._months)?this._months[g.month()]:this._months[(this._months.isFormat||Ie).test(e)?"format":"standalone"][g.month()]:t(this._months)?this._months:this._months.standalone}function le(g,e){return g?t(this._monthsShort)?this._monthsShort[g.month()]:this._monthsShort[Ie.test(e)?"format":"standalone"][g.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ae(g,e,I){var C,n,t,l=g.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],C=0;C<12;++C)t=d([2e3,C]),this._shortMonthsParse[C]=this.monthsShort(t,"").toLocaleLowerCase(),this._longMonthsParse[C]=this.months(t,"").toLocaleLowerCase();return I?"MMM"===e?-1!==(n=xg.call(this._shortMonthsParse,l))?n:null:-1!==(n=xg.call(this._longMonthsParse,l))?n:null:"MMM"===e?-1!==(n=xg.call(this._shortMonthsParse,l))||-1!==(n=xg.call(this._longMonthsParse,l))?n:null:-1!==(n=xg.call(this._longMonthsParse,l))||-1!==(n=xg.call(this._shortMonthsParse,l))?n:null}function oe(g,e,I){var C,n,t;if(this._monthsParseExact)return ae.call(this,g,e,I);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),C=0;C<12;C++){if(n=d([2e3,C]),I&&!this._longMonthsParse[C]&&(this._longMonthsParse[C]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[C]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),I||this._monthsParse[C]||(t="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[C]=new RegExp(t.replace(".",""),"i")),I&&"MMMM"===e&&this._longMonthsParse[C].test(g))return C;if(I&&"MMM"===e&&this._shortMonthsParse[C].test(g))return C;if(!I&&this._monthsParse[C].test(g))return C}}function ce(g,e){var I;if(!g.isValid())return g;if("string"===typeof e)if(/^\d+$/.test(e))e=Ag(e);else if(!A(e=g.localeData().monthsParse(e)))return g;return I=Math.min(g.date(),$g(g.year(),e)),g._d["set"+(g._isUTC?"UTC":"")+"Month"](e,I),g}function Ae(g){return null!=g?(ce(this,g),C.updateOffset(this,!0),this):ig(this,"Month")}function re(){return $g(this.year(),this.month())}function ie(g){return this._monthsParseExact?(a(this,"_monthsRegex")||de.call(this),g?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=Ce),this._monthsShortStrictRegex&&g?this._monthsShortStrictRegex:this._monthsShortRegex)}function se(g){return this._monthsParseExact?(a(this,"_monthsRegex")||de.call(this),g?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=ne),this._monthsStrictRegex&&g?this._monthsStrictRegex:this._monthsRegex)}function de(){function g(g,e){return e.length-g.length}var e,I,C=[],n=[],t=[];for(e=0;e<12;e++)I=d([2e3,e]),C.push(this.monthsShort(I,"")),n.push(this.months(I,"")),t.push(this.months(I,"")),t.push(this.monthsShort(I,""));for(C.sort(g),n.sort(g),t.sort(g),e=0;e<12;e++)C[e]=Fg(C[e]),n[e]=Fg(n[e]);for(e=0;e<24;e++)t[e]=Fg(t[e]);this._monthsRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+C.join("|")+")","i")}function ue(g){return og(g)?366:365}T("Y",0,0,(function(){var g=this.year();return g<=9999?w(g,4):"+"+g})),T(0,["YY",2],0,(function(){return this.year()%100})),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),Ig("year","y"),lg("year",1),Hg("Y",Rg),Hg("YY",Bg,bg),Hg("YYYY",Wg,Gg),Hg("YYYYY",Vg,pg),Hg("YYYYYY",Vg,pg),Eg(["YYYYY","YYYYYY"],Ug),Eg("YYYY",(function(g,e){e[Ug]=2===g.length?C.parseTwoDigitYear(g):Ag(g)})),Eg("YY",(function(g,e){e[Ug]=C.parseTwoDigitYear(g)})),Eg("Y",(function(g,e){e[Ug]=parseInt(g,10)})),C.parseTwoDigitYear=function(g){return Ag(g)+(Ag(g)>68?1900:2e3)};var me=rg("FullYear",!0);function he(){return og(this.year())}function be(g,e,I,C,n,t,l){var a;return g<100&&g>=0?(a=new Date(g+400,e,I,C,n,t,l),isFinite(a.getFullYear())&&a.setFullYear(g)):a=new Date(g,e,I,C,n,t,l),a}function Ze(g){var e,I;return g<100&&g>=0?((I=Array.prototype.slice.call(arguments))[0]=g+400,e=new Date(Date.UTC.apply(null,I)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(g)):e=new Date(Date.UTC.apply(null,arguments)),e}function Ge(g,e,I){var C=7+e-I;return-(7+Ze(g,0,C).getUTCDay()-e)%7+C-1}function pe(g,e,I,C,n){var t,l,a=1+7*(e-1)+(7+I-C)%7+Ge(g,C,n);return a<=0?l=ue(t=g-1)+a:a>ue(g)?(t=g+1,l=a-ue(g)):(t=g,l=a),{year:t,dayOfYear:l}}function Be(g,e,I){var C,n,t=Ge(g.year(),e,I),l=Math.floor((g.dayOfYear()-t-1)/7)+1;return l<1?C=l+ye(n=g.year()-1,e,I):l>ye(g.year(),e,I)?(C=l-ye(g.year(),e,I),n=g.year()+1):(n=g.year(),C=l),{week:C,year:n}}function ye(g,e,I){var C=Ge(g,e,I),n=Ge(g+1,e,I);return(ue(g)-C+n)/7}function Se(g){return Be(g,this._week.dow,this._week.doy).week}T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),Ig("week","w"),Ig("isoWeek","W"),lg("week",5),lg("isoWeek",5),Hg("w",Bg),Hg("ww",Bg,bg),Hg("W",Bg),Hg("WW",Bg,bg),Tg(["w","ww","W","WW"],(function(g,e,I,C){e[C.substr(0,1)]=Ag(g)}));var fe={dow:0,doy:6};function We(){return this._week.dow}function Ve(){return this._week.doy}function ve(g){var e=this.localeData().week(this);return null==g?e:this.add(7*(g-e),"d")}function Re(g){var e=Be(this,1,4).week;return null==g?e:this.add(7*(g-e),"d")}function Xe(g,e){return"string"!==typeof g?g:isNaN(g)?"number"===typeof(g=e.weekdaysParse(g))?g:null:parseInt(g,10)}function ke(g,e){return"string"===typeof g?e.weekdaysParse(g)%7||7:isNaN(g)?null:g}function Je(g,e){return g.slice(e,7).concat(g.slice(0,e))}T("d",0,"do","day"),T("dd",0,0,(function(g){return this.localeData().weekdaysMin(this,g)})),T("ddd",0,0,(function(g){return this.localeData().weekdaysShort(this,g)})),T("dddd",0,0,(function(g){return this.localeData().weekdays(this,g)})),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),Ig("day","d"),Ig("weekday","e"),Ig("isoWeekday","E"),lg("day",11),lg("weekday",11),lg("isoWeekday",11),Hg("d",Bg),Hg("e",Bg),Hg("E",Bg),Hg("dd",(function(g,e){return e.weekdaysMinRegex(g)})),Hg("ddd",(function(g,e){return e.weekdaysShortRegex(g)})),Hg("dddd",(function(g,e){return e.weekdaysRegex(g)})),Tg(["dd","ddd","dddd"],(function(g,e,I,C){var n=I._locale.weekdaysParse(g,C,I._strict);null!=n?e.d=n:m(I).invalidWeekday=g})),Tg(["d","e","E"],(function(g,e,I,C){e[C]=Ag(g)}));var Ye="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),He="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),we="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ne=Yg,Fe=Yg,Ke=Yg;function Ee(g,e){var I=t(this._weekdays)?this._weekdays:this._weekdays[g&&!0!==g&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===g?Je(I,this._week.dow):g?I[g.day()]:I}function Te(g){return!0===g?Je(this._weekdaysShort,this._week.dow):g?this._weekdaysShort[g.day()]:this._weekdaysShort}function Me(g){return!0===g?Je(this._weekdaysMin,this._week.dow):g?this._weekdaysMin[g.day()]:this._weekdaysMin}function xe(g,e,I){var C,n,t,l=g.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],C=0;C<7;++C)t=d([2e3,1]).day(C),this._minWeekdaysParse[C]=this.weekdaysMin(t,"").toLocaleLowerCase(),this._shortWeekdaysParse[C]=this.weekdaysShort(t,"").toLocaleLowerCase(),this._weekdaysParse[C]=this.weekdays(t,"").toLocaleLowerCase();return I?"dddd"===e?-1!==(n=xg.call(this._weekdaysParse,l))?n:null:"ddd"===e?-1!==(n=xg.call(this._shortWeekdaysParse,l))?n:null:-1!==(n=xg.call(this._minWeekdaysParse,l))?n:null:"dddd"===e?-1!==(n=xg.call(this._weekdaysParse,l))||-1!==(n=xg.call(this._shortWeekdaysParse,l))||-1!==(n=xg.call(this._minWeekdaysParse,l))?n:null:"ddd"===e?-1!==(n=xg.call(this._shortWeekdaysParse,l))||-1!==(n=xg.call(this._weekdaysParse,l))||-1!==(n=xg.call(this._minWeekdaysParse,l))?n:null:-1!==(n=xg.call(this._minWeekdaysParse,l))||-1!==(n=xg.call(this._weekdaysParse,l))||-1!==(n=xg.call(this._shortWeekdaysParse,l))?n:null}function Ue(g,e,I){var C,n,t;if(this._weekdaysParseExact)return xe.call(this,g,e,I);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),C=0;C<7;C++){if(n=d([2e3,1]).day(C),I&&!this._fullWeekdaysParse[C]&&(this._fullWeekdaysParse[C]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[C]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[C]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[C]||(t="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[C]=new RegExp(t.replace(".",""),"i")),I&&"dddd"===e&&this._fullWeekdaysParse[C].test(g))return C;if(I&&"ddd"===e&&this._shortWeekdaysParse[C].test(g))return C;if(I&&"dd"===e&&this._minWeekdaysParse[C].test(g))return C;if(!I&&this._weekdaysParse[C].test(g))return C}}function De(g){if(!this.isValid())return null!=g?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=g?(g=Xe(g,this.localeData()),this.add(g-e,"d")):e}function Le(g){if(!this.isValid())return null!=g?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==g?e:this.add(g-e,"d")}function ze(g){if(!this.isValid())return null!=g?this:NaN;if(null!=g){var e=ke(g,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Qe(g){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||je.call(this),g?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Ne),this._weekdaysStrictRegex&&g?this._weekdaysStrictRegex:this._weekdaysRegex)}function Pe(g){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||je.call(this),g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Fe),this._weekdaysShortStrictRegex&&g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Oe(g){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||je.call(this),g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ke),this._weekdaysMinStrictRegex&&g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function je(){function g(g,e){return e.length-g.length}var e,I,C,n,t,l=[],a=[],o=[],c=[];for(e=0;e<7;e++)I=d([2e3,1]).day(e),C=Fg(this.weekdaysMin(I,"")),n=Fg(this.weekdaysShort(I,"")),t=Fg(this.weekdays(I,"")),l.push(C),a.push(n),o.push(t),c.push(C),c.push(n),c.push(t);l.sort(g),a.sort(g),o.sort(g),c.sort(g),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+l.join("|")+")","i")}function _e(){return this.hours()%12||12}function qe(){return this.hours()||24}function $e(g,e){T(g,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function gI(g,e){return e._meridiemParse}function eI(g){return"p"===(g+"").toLowerCase().charAt(0)}T("H",["HH",2],0,"hour"),T("h",["hh",2],0,_e),T("k",["kk",2],0,qe),T("hmm",0,0,(function(){return""+_e.apply(this)+w(this.minutes(),2)})),T("hmmss",0,0,(function(){return""+_e.apply(this)+w(this.minutes(),2)+w(this.seconds(),2)})),T("Hmm",0,0,(function(){return""+this.hours()+w(this.minutes(),2)})),T("Hmmss",0,0,(function(){return""+this.hours()+w(this.minutes(),2)+w(this.seconds(),2)})),$e("a",!0),$e("A",!1),Ig("hour","h"),lg("hour",13),Hg("a",gI),Hg("A",gI),Hg("H",Bg),Hg("h",Bg),Hg("k",Bg),Hg("HH",Bg,bg),Hg("hh",Bg,bg),Hg("kk",Bg,bg),Hg("hmm",yg),Hg("hmmss",Sg),Hg("Hmm",yg),Hg("Hmmss",Sg),Eg(["H","HH"],zg),Eg(["k","kk"],(function(g,e,I){var C=Ag(g);e[zg]=24===C?0:C})),Eg(["a","A"],(function(g,e,I){I._isPm=I._locale.isPM(g),I._meridiem=g})),Eg(["h","hh"],(function(g,e,I){e[zg]=Ag(g),m(I).bigHour=!0})),Eg("hmm",(function(g,e,I){var C=g.length-2;e[zg]=Ag(g.substr(0,C)),e[Qg]=Ag(g.substr(C)),m(I).bigHour=!0})),Eg("hmmss",(function(g,e,I){var C=g.length-4,n=g.length-2;e[zg]=Ag(g.substr(0,C)),e[Qg]=Ag(g.substr(C,2)),e[Pg]=Ag(g.substr(n)),m(I).bigHour=!0})),Eg("Hmm",(function(g,e,I){var C=g.length-2;e[zg]=Ag(g.substr(0,C)),e[Qg]=Ag(g.substr(C))})),Eg("Hmmss",(function(g,e,I){var C=g.length-4,n=g.length-2;e[zg]=Ag(g.substr(0,C)),e[Qg]=Ag(g.substr(C,2)),e[Pg]=Ag(g.substr(n))}));var II=/[ap]\.?m?\.?/i,CI=rg("Hours",!0);function nI(g,e,I){return g>11?I?"pm":"PM":I?"am":"AM"}var tI,lI={calendar:Y,longDateFormat:L,invalidDate:Q,ordinal:O,dayOfMonthOrdinalParse:j,relativeTime:q,months:ge,monthsShort:ee,week:fe,weekdays:Ye,weekdaysMin:we,weekdaysShort:He,meridiemParse:II},aI={},oI={};function cI(g,e){var I,C=Math.min(g.length,e.length);for(I=0;I<C;I+=1)if(g[I]!==e[I])return I;return C}function AI(g){return g?g.toLowerCase().replace("_","-"):g}function rI(g){for(var e,I,C,n,t=0;t<g.length;){for(e=(n=AI(g[t]).split("-")).length,I=(I=AI(g[t+1]))?I.split("-"):null;e>0;){if(C=sI(n.slice(0,e).join("-")))return C;if(I&&I.length>=e&&cI(n,I)>=e-1)break;e--}t++}return tI}function iI(g){return null!=g.match("^[^/\\\\]*$")}function sI(e){var I=null;if(void 0===aI[e]&&g&&g.exports&&iI(e))try{I=tI._abbr,Object(function(){var g=new Error("Cannot find module 'undefined'");throw g.code="MODULE_NOT_FOUND",g}()),dI(I)}catch(C){aI[e]=null}return aI[e]}function dI(g,e){var I;return g&&((I=c(e)?hI(g):uI(g,e))?tI=I:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+g+" not found. Did you forget to load it?")),tI._abbr}function uI(g,e){if(null!==e){var I,C=lI;if(e.abbr=g,null!=aI[g])v("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),C=aI[g]._config;else if(null!=e.parentLocale)if(null!=aI[e.parentLocale])C=aI[e.parentLocale]._config;else{if(null==(I=sI(e.parentLocale)))return oI[e.parentLocale]||(oI[e.parentLocale]=[]),oI[e.parentLocale].push({name:g,config:e}),null;C=I._config}return aI[g]=new J(k(C,e)),oI[g]&&oI[g].forEach((function(g){uI(g.name,g.config)})),dI(g),aI[g]}return delete aI[g],null}function mI(g,e){if(null!=e){var I,C,n=lI;null!=aI[g]&&null!=aI[g].parentLocale?aI[g].set(k(aI[g]._config,e)):(null!=(C=sI(g))&&(n=C._config),e=k(n,e),null==C&&(e.abbr=g),(I=new J(e)).parentLocale=aI[g],aI[g]=I),dI(g)}else null!=aI[g]&&(null!=aI[g].parentLocale?(aI[g]=aI[g].parentLocale,g===dI()&&dI(g)):null!=aI[g]&&delete aI[g]);return aI[g]}function hI(g){var e;if(g&&g._locale&&g._locale._abbr&&(g=g._locale._abbr),!g)return tI;if(!t(g)){if(e=sI(g))return e;g=[g]}return rI(g)}function bI(){return W(aI)}function ZI(g){var e,I=g._a;return I&&-2===m(g).overflow&&(e=I[Dg]<0||I[Dg]>11?Dg:I[Lg]<1||I[Lg]>$g(I[Ug],I[Dg])?Lg:I[zg]<0||I[zg]>24||24===I[zg]&&(0!==I[Qg]||0!==I[Pg]||0!==I[Og])?zg:I[Qg]<0||I[Qg]>59?Qg:I[Pg]<0||I[Pg]>59?Pg:I[Og]<0||I[Og]>999?Og:-1,m(g)._overflowDayOfYear&&(e<Ug||e>Lg)&&(e=Lg),m(g)._overflowWeeks&&-1===e&&(e=jg),m(g)._overflowWeekday&&-1===e&&(e=_g),m(g).overflow=e),g}var GI=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pI=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,BI=/Z|[+-]\d\d(?::?\d\d)?/,yI=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],SI=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],fI=/^\/?Date\((-?\d+)/i,WI=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,VI={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function vI(g){var e,I,C,n,t,l,a=g._i,o=GI.exec(a)||pI.exec(a),c=yI.length,A=SI.length;if(o){for(m(g).iso=!0,e=0,I=c;e<I;e++)if(yI[e][1].exec(o[1])){n=yI[e][0],C=!1!==yI[e][2];break}if(null==n)return void(g._isValid=!1);if(o[3]){for(e=0,I=A;e<I;e++)if(SI[e][1].exec(o[3])){t=(o[2]||" ")+SI[e][0];break}if(null==t)return void(g._isValid=!1)}if(!C&&null!=t)return void(g._isValid=!1);if(o[4]){if(!BI.exec(o[4]))return void(g._isValid=!1);l="Z"}g._f=n+(t||"")+(l||""),TI(g)}else g._isValid=!1}function RI(g,e,I,C,n,t){var l=[XI(g),ee.indexOf(e),parseInt(I,10),parseInt(C,10),parseInt(n,10)];return t&&l.push(parseInt(t,10)),l}function XI(g){var e=parseInt(g,10);return e<=49?2e3+e:e<=999?1900+e:e}function kI(g){return g.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function JI(g,e,I){return!g||He.indexOf(g)===new Date(e[0],e[1],e[2]).getDay()||(m(I).weekdayMismatch=!0,I._isValid=!1,!1)}function YI(g,e,I){if(g)return VI[g];if(e)return 0;var C=parseInt(I,10),n=C%100;return(C-n)/100*60+n}function HI(g){var e,I=WI.exec(kI(g._i));if(I){if(e=RI(I[4],I[3],I[2],I[5],I[6],I[7]),!JI(I[1],e,g))return;g._a=e,g._tzm=YI(I[8],I[9],I[10]),g._d=Ze.apply(null,g._a),g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),m(g).rfc2822=!0}else g._isValid=!1}function wI(g){var e=fI.exec(g._i);null===e?(vI(g),!1===g._isValid&&(delete g._isValid,HI(g),!1===g._isValid&&(delete g._isValid,g._strict?g._isValid=!1:C.createFromInputFallback(g)))):g._d=new Date(+e[1])}function NI(g,e,I){return null!=g?g:null!=e?e:I}function FI(g){var e=new Date(C.now());return g._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function KI(g){var e,I,C,n,t,l=[];if(!g._d){for(C=FI(g),g._w&&null==g._a[Lg]&&null==g._a[Dg]&&EI(g),null!=g._dayOfYear&&(t=NI(g._a[Ug],C[Ug]),(g._dayOfYear>ue(t)||0===g._dayOfYear)&&(m(g)._overflowDayOfYear=!0),I=Ze(t,0,g._dayOfYear),g._a[Dg]=I.getUTCMonth(),g._a[Lg]=I.getUTCDate()),e=0;e<3&&null==g._a[e];++e)g._a[e]=l[e]=C[e];for(;e<7;e++)g._a[e]=l[e]=null==g._a[e]?2===e?1:0:g._a[e];24===g._a[zg]&&0===g._a[Qg]&&0===g._a[Pg]&&0===g._a[Og]&&(g._nextDay=!0,g._a[zg]=0),g._d=(g._useUTC?Ze:be).apply(null,l),n=g._useUTC?g._d.getUTCDay():g._d.getDay(),null!=g._tzm&&g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),g._nextDay&&(g._a[zg]=24),g._w&&"undefined"!==typeof g._w.d&&g._w.d!==n&&(m(g).weekdayMismatch=!0)}}function EI(g){var e,I,C,n,t,l,a,o,c;null!=(e=g._w).GG||null!=e.W||null!=e.E?(t=1,l=4,I=NI(e.GG,g._a[Ug],Be(PI(),1,4).year),C=NI(e.W,1),((n=NI(e.E,1))<1||n>7)&&(o=!0)):(t=g._locale._week.dow,l=g._locale._week.doy,c=Be(PI(),t,l),I=NI(e.gg,g._a[Ug],c.year),C=NI(e.w,c.week),null!=e.d?((n=e.d)<0||n>6)&&(o=!0):null!=e.e?(n=e.e+t,(e.e<0||e.e>6)&&(o=!0)):n=t),C<1||C>ye(I,t,l)?m(g)._overflowWeeks=!0:null!=o?m(g)._overflowWeekday=!0:(a=pe(I,C,n,t,l),g._a[Ug]=a.year,g._dayOfYear=a.dayOfYear)}function TI(g){if(g._f!==C.ISO_8601)if(g._f!==C.RFC_2822){g._a=[],m(g).empty=!0;var e,I,n,t,l,a,o,c=""+g._i,A=c.length,r=0;for(o=(n=D(g._f,g._locale).match(N)||[]).length,e=0;e<o;e++)t=n[e],(I=(c.match(wg(t,g))||[])[0])&&((l=c.substr(0,c.indexOf(I))).length>0&&m(g).unusedInput.push(l),c=c.slice(c.indexOf(I)+I.length),r+=I.length),E[t]?(I?m(g).empty=!1:m(g).unusedTokens.push(t),Mg(t,I,g)):g._strict&&!I&&m(g).unusedTokens.push(t);m(g).charsLeftOver=A-r,c.length>0&&m(g).unusedInput.push(c),g._a[zg]<=12&&!0===m(g).bigHour&&g._a[zg]>0&&(m(g).bigHour=void 0),m(g).parsedDateParts=g._a.slice(0),m(g).meridiem=g._meridiem,g._a[zg]=MI(g._locale,g._a[zg],g._meridiem),null!==(a=m(g).era)&&(g._a[Ug]=g._locale.erasConvertYear(a,g._a[Ug])),KI(g),ZI(g)}else HI(g);else vI(g)}function MI(g,e,I){var C;return null==I?e:null!=g.meridiemHour?g.meridiemHour(e,I):null!=g.isPM?((C=g.isPM(I))&&e<12&&(e+=12),C||12!==e||(e=0),e):e}function xI(g){var e,I,C,n,t,l,a=!1,o=g._f.length;if(0===o)return m(g).invalidFormat=!0,void(g._d=new Date(NaN));for(n=0;n<o;n++)t=0,l=!1,e=p({},g),null!=g._useUTC&&(e._useUTC=g._useUTC),e._f=g._f[n],TI(e),h(e)&&(l=!0),t+=m(e).charsLeftOver,t+=10*m(e).unusedTokens.length,m(e).score=t,a?t<C&&(C=t,I=e):(null==C||t<C||l)&&(C=t,I=e,l&&(a=!0));s(g,I||e)}function UI(g){if(!g._d){var e=ng(g._i),I=void 0===e.day?e.date:e.day;g._a=i([e.year,e.month,I,e.hour,e.minute,e.second,e.millisecond],(function(g){return g&&parseInt(g,10)})),KI(g)}}function DI(g){var e=new B(ZI(LI(g)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function LI(g){var e=g._i,I=g._f;return g._locale=g._locale||hI(g._l),null===e||void 0===I&&""===e?b({nullInput:!0}):("string"===typeof e&&(g._i=e=g._locale.preparse(e)),y(e)?new B(ZI(e)):(r(e)?g._d=e:t(I)?xI(g):I?TI(g):zI(g),h(g)||(g._d=null),g))}function zI(g){var e=g._i;c(e)?g._d=new Date(C.now()):r(e)?g._d=new Date(e.valueOf()):"string"===typeof e?wI(g):t(e)?(g._a=i(e.slice(0),(function(g){return parseInt(g,10)})),KI(g)):l(e)?UI(g):A(e)?g._d=new Date(e):C.createFromInputFallback(g)}function QI(g,e,I,C,n){var a={};return!0!==e&&!1!==e||(C=e,e=void 0),!0!==I&&!1!==I||(C=I,I=void 0),(l(g)&&o(g)||t(g)&&0===g.length)&&(g=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=n,a._l=I,a._i=g,a._f=e,a._strict=C,DI(a)}function PI(g,e,I,C){return QI(g,e,I,C,!1)}C.createFromInputFallback=f("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(g){g._d=new Date(g._i+(g._useUTC?" UTC":""))})),C.ISO_8601=function(){},C.RFC_2822=function(){};var OI=f("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var g=PI.apply(null,arguments);return this.isValid()&&g.isValid()?g<this?this:g:b()})),jI=f("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var g=PI.apply(null,arguments);return this.isValid()&&g.isValid()?g>this?this:g:b()}));function _I(g,e){var I,C;if(1===e.length&&t(e[0])&&(e=e[0]),!e.length)return PI();for(I=e[0],C=1;C<e.length;++C)e[C].isValid()&&!e[C][g](I)||(I=e[C]);return I}function qI(){return _I("isBefore",[].slice.call(arguments,0))}function $I(){return _I("isAfter",[].slice.call(arguments,0))}var gC=function(){return Date.now?Date.now():+new Date},eC=["year","quarter","month","week","day","hour","minute","second","millisecond"];function IC(g){var e,I,C=!1,n=eC.length;for(e in g)if(a(g,e)&&(-1===xg.call(eC,e)||null!=g[e]&&isNaN(g[e])))return!1;for(I=0;I<n;++I)if(g[eC[I]]){if(C)return!1;parseFloat(g[eC[I]])!==Ag(g[eC[I]])&&(C=!0)}return!0}function CC(){return this._isValid}function nC(){return VC(NaN)}function tC(g){var e=ng(g),I=e.year||0,C=e.quarter||0,n=e.month||0,t=e.week||e.isoWeek||0,l=e.day||0,a=e.hour||0,o=e.minute||0,c=e.second||0,A=e.millisecond||0;this._isValid=IC(e),this._milliseconds=+A+1e3*c+6e4*o+1e3*a*60*60,this._days=+l+7*t,this._months=+n+3*C+12*I,this._data={},this._locale=hI(),this._bubble()}function lC(g){return g instanceof tC}function aC(g){return g<0?-1*Math.round(-1*g):Math.round(g)}function oC(g,e,I){var C,n=Math.min(g.length,e.length),t=Math.abs(g.length-e.length),l=0;for(C=0;C<n;C++)(I&&g[C]!==e[C]||!I&&Ag(g[C])!==Ag(e[C]))&&l++;return l+t}function cC(g,e){T(g,0,0,(function(){var g=this.utcOffset(),I="+";return g<0&&(g=-g,I="-"),I+w(~~(g/60),2)+e+w(~~g%60,2)}))}cC("Z",":"),cC("ZZ",""),Hg("Z",kg),Hg("ZZ",kg),Eg(["Z","ZZ"],(function(g,e,I){I._useUTC=!0,I._tzm=rC(kg,g)}));var AC=/([\+\-]|\d\d)/gi;function rC(g,e){var I,C,n=(e||"").match(g);return null===n?null:0===(C=60*(I=((n[n.length-1]||[])+"").match(AC)||["-",0,0])[1]+Ag(I[2]))?0:"+"===I[0]?C:-C}function iC(g,e){var I,n;return e._isUTC?(I=e.clone(),n=(y(g)||r(g)?g.valueOf():PI(g).valueOf())-I.valueOf(),I._d.setTime(I._d.valueOf()+n),C.updateOffset(I,!1),I):PI(g).local()}function sC(g){return-Math.round(g._d.getTimezoneOffset())}function dC(g,e,I){var n,t=this._offset||0;if(!this.isValid())return null!=g?this:NaN;if(null!=g){if("string"===typeof g){if(null===(g=rC(kg,g)))return this}else Math.abs(g)<16&&!I&&(g*=60);return!this._isUTC&&e&&(n=sC(this)),this._offset=g,this._isUTC=!0,null!=n&&this.add(n,"m"),t!==g&&(!e||this._changeInProgress?JC(this,VC(g-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,C.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?t:sC(this)}function uC(g,e){return null!=g?("string"!==typeof g&&(g=-g),this.utcOffset(g,e),this):-this.utcOffset()}function mC(g){return this.utcOffset(0,g)}function hC(g){return this._isUTC&&(this.utcOffset(0,g),this._isUTC=!1,g&&this.subtract(sC(this),"m")),this}function bC(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var g=rC(Xg,this._i);null!=g?this.utcOffset(g):this.utcOffset(0,!0)}return this}function ZC(g){return!!this.isValid()&&(g=g?PI(g).utcOffset():0,(this.utcOffset()-g)%60===0)}function GC(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function pC(){if(!c(this._isDSTShifted))return this._isDSTShifted;var g,e={};return p(e,this),(e=LI(e))._a?(g=e._isUTC?d(e._a):PI(e._a),this._isDSTShifted=this.isValid()&&oC(e._a,g.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function BC(){return!!this.isValid()&&!this._isUTC}function yC(){return!!this.isValid()&&this._isUTC}function SC(){return!!this.isValid()&&this._isUTC&&0===this._offset}C.updateOffset=function(){};var fC=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,WC=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function VC(g,e){var I,C,n,t=g,l=null;return lC(g)?t={ms:g._milliseconds,d:g._days,M:g._months}:A(g)||!isNaN(+g)?(t={},e?t[e]=+g:t.milliseconds=+g):(l=fC.exec(g))?(I="-"===l[1]?-1:1,t={y:0,d:Ag(l[Lg])*I,h:Ag(l[zg])*I,m:Ag(l[Qg])*I,s:Ag(l[Pg])*I,ms:Ag(aC(1e3*l[Og]))*I}):(l=WC.exec(g))?(I="-"===l[1]?-1:1,t={y:vC(l[2],I),M:vC(l[3],I),w:vC(l[4],I),d:vC(l[5],I),h:vC(l[6],I),m:vC(l[7],I),s:vC(l[8],I)}):null==t?t={}:"object"===typeof t&&("from"in t||"to"in t)&&(n=XC(PI(t.from),PI(t.to)),(t={}).ms=n.milliseconds,t.M=n.months),C=new tC(t),lC(g)&&a(g,"_locale")&&(C._locale=g._locale),lC(g)&&a(g,"_isValid")&&(C._isValid=g._isValid),C}function vC(g,e){var I=g&&parseFloat(g.replace(",","."));return(isNaN(I)?0:I)*e}function RC(g,e){var I={};return I.months=e.month()-g.month()+12*(e.year()-g.year()),g.clone().add(I.months,"M").isAfter(e)&&--I.months,I.milliseconds=+e-+g.clone().add(I.months,"M"),I}function XC(g,e){var I;return g.isValid()&&e.isValid()?(e=iC(e,g),g.isBefore(e)?I=RC(g,e):((I=RC(e,g)).milliseconds=-I.milliseconds,I.months=-I.months),I):{milliseconds:0,months:0}}function kC(g,e){return function(I,C){var n;return null===C||isNaN(+C)||(v(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=I,I=C,C=n),JC(this,VC(I,C),g),this}}function JC(g,e,I,n){var t=e._milliseconds,l=aC(e._days),a=aC(e._months);g.isValid()&&(n=null==n||n,a&&ce(g,ig(g,"Month")+a*I),l&&sg(g,"Date",ig(g,"Date")+l*I),t&&g._d.setTime(g._d.valueOf()+t*I),n&&C.updateOffset(g,l||a))}VC.fn=tC.prototype,VC.invalid=nC;var YC=kC(1,"add"),HC=kC(-1,"subtract");function wC(g){return"string"===typeof g||g instanceof String}function NC(g){return y(g)||r(g)||wC(g)||A(g)||KC(g)||FC(g)||null===g||void 0===g}function FC(g){var e,I,C=l(g)&&!o(g),n=!1,t=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=t.length;for(e=0;e<c;e+=1)I=t[e],n=n||a(g,I);return C&&n}function KC(g){var e=t(g),I=!1;return e&&(I=0===g.filter((function(e){return!A(e)&&wC(g)})).length),e&&I}function EC(g){var e,I,C=l(g)&&!o(g),n=!1,t=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<t.length;e+=1)I=t[e],n=n||a(g,I);return C&&n}function TC(g,e){var I=g.diff(e,"days",!0);return I<-6?"sameElse":I<-1?"lastWeek":I<0?"lastDay":I<1?"sameDay":I<2?"nextDay":I<7?"nextWeek":"sameElse"}function MC(g,e){1===arguments.length&&(arguments[0]?NC(arguments[0])?(g=arguments[0],e=void 0):EC(arguments[0])&&(e=arguments[0],g=void 0):(g=void 0,e=void 0));var I=g||PI(),n=iC(I,this).startOf("day"),t=C.calendarFormat(this,n)||"sameElse",l=e&&(R(e[t])?e[t].call(this,I):e[t]);return this.format(l||this.localeData().calendar(t,this,PI(I)))}function xC(){return new B(this)}function UC(g,e){var I=y(g)?g:PI(g);return!(!this.isValid()||!I.isValid())&&("millisecond"===(e=Cg(e)||"millisecond")?this.valueOf()>I.valueOf():I.valueOf()<this.clone().startOf(e).valueOf())}function DC(g,e){var I=y(g)?g:PI(g);return!(!this.isValid()||!I.isValid())&&("millisecond"===(e=Cg(e)||"millisecond")?this.valueOf()<I.valueOf():this.clone().endOf(e).valueOf()<I.valueOf())}function LC(g,e,I,C){var n=y(g)?g:PI(g),t=y(e)?e:PI(e);return!!(this.isValid()&&n.isValid()&&t.isValid())&&("("===(C=C||"()")[0]?this.isAfter(n,I):!this.isBefore(n,I))&&(")"===C[1]?this.isBefore(t,I):!this.isAfter(t,I))}function zC(g,e){var I,C=y(g)?g:PI(g);return!(!this.isValid()||!C.isValid())&&("millisecond"===(e=Cg(e)||"millisecond")?this.valueOf()===C.valueOf():(I=C.valueOf(),this.clone().startOf(e).valueOf()<=I&&I<=this.clone().endOf(e).valueOf()))}function QC(g,e){return this.isSame(g,e)||this.isAfter(g,e)}function PC(g,e){return this.isSame(g,e)||this.isBefore(g,e)}function OC(g,e,I){var C,n,t;if(!this.isValid())return NaN;if(!(C=iC(g,this)).isValid())return NaN;switch(n=6e4*(C.utcOffset()-this.utcOffset()),e=Cg(e)){case"year":t=jC(this,C)/12;break;case"month":t=jC(this,C);break;case"quarter":t=jC(this,C)/3;break;case"second":t=(this-C)/1e3;break;case"minute":t=(this-C)/6e4;break;case"hour":t=(this-C)/36e5;break;case"day":t=(this-C-n)/864e5;break;case"week":t=(this-C-n)/6048e5;break;default:t=this-C}return I?t:cg(t)}function jC(g,e){if(g.date()<e.date())return-jC(e,g);var I=12*(e.year()-g.year())+(e.month()-g.month()),C=g.clone().add(I,"months");return-(I+(e-C<0?(e-C)/(C-g.clone().add(I-1,"months")):(e-C)/(g.clone().add(I+1,"months")-C)))||0}function _C(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function qC(g){if(!this.isValid())return null;var e=!0!==g,I=e?this.clone().utc():this;return I.year()<0||I.year()>9999?U(I,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):R(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(I,"Z")):U(I,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function $C(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var g,e,I,C,n="moment",t="";return this.isLocal()||(n=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z"),g="["+n+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",I="-MM-DD[T]HH:mm:ss.SSS",C=t+'[")]',this.format(g+e+I+C)}function gn(g){g||(g=this.isUtc()?C.defaultFormatUtc:C.defaultFormat);var e=U(this,g);return this.localeData().postformat(e)}function en(g,e){return this.isValid()&&(y(g)&&g.isValid()||PI(g).isValid())?VC({to:this,from:g}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function In(g){return this.from(PI(),g)}function Cn(g,e){return this.isValid()&&(y(g)&&g.isValid()||PI(g).isValid())?VC({from:this,to:g}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function nn(g){return this.to(PI(),g)}function tn(g){var e;return void 0===g?this._locale._abbr:(null!=(e=hI(g))&&(this._locale=e),this)}C.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",C.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ln=f("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(g){return void 0===g?this.localeData():this.locale(g)}));function an(){return this._locale}var on=1e3,cn=60*on,An=60*cn,rn=3506328*An;function sn(g,e){return(g%e+e)%e}function dn(g,e,I){return g<100&&g>=0?new Date(g+400,e,I)-rn:new Date(g,e,I).valueOf()}function un(g,e,I){return g<100&&g>=0?Date.UTC(g+400,e,I)-rn:Date.UTC(g,e,I)}function mn(g){var e,I;if(void 0===(g=Cg(g))||"millisecond"===g||!this.isValid())return this;switch(I=this._isUTC?un:dn,g){case"year":e=I(this.year(),0,1);break;case"quarter":e=I(this.year(),this.month()-this.month()%3,1);break;case"month":e=I(this.year(),this.month(),1);break;case"week":e=I(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=I(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=I(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=sn(e+(this._isUTC?0:this.utcOffset()*cn),An);break;case"minute":e=this._d.valueOf(),e-=sn(e,cn);break;case"second":e=this._d.valueOf(),e-=sn(e,on)}return this._d.setTime(e),C.updateOffset(this,!0),this}function hn(g){var e,I;if(void 0===(g=Cg(g))||"millisecond"===g||!this.isValid())return this;switch(I=this._isUTC?un:dn,g){case"year":e=I(this.year()+1,0,1)-1;break;case"quarter":e=I(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=I(this.year(),this.month()+1,1)-1;break;case"week":e=I(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=I(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=I(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=An-sn(e+(this._isUTC?0:this.utcOffset()*cn),An)-1;break;case"minute":e=this._d.valueOf(),e+=cn-sn(e,cn)-1;break;case"second":e=this._d.valueOf(),e+=on-sn(e,on)-1}return this._d.setTime(e),C.updateOffset(this,!0),this}function bn(){return this._d.valueOf()-6e4*(this._offset||0)}function Zn(){return Math.floor(this.valueOf()/1e3)}function Gn(){return new Date(this.valueOf())}function pn(){var g=this;return[g.year(),g.month(),g.date(),g.hour(),g.minute(),g.second(),g.millisecond()]}function Bn(){var g=this;return{years:g.year(),months:g.month(),date:g.date(),hours:g.hours(),minutes:g.minutes(),seconds:g.seconds(),milliseconds:g.milliseconds()}}function yn(){return this.isValid()?this.toISOString():null}function Sn(){return h(this)}function fn(){return s({},m(this))}function Wn(){return m(this).overflow}function Vn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function vn(g,e){var I,n,t,l=this._eras||hI("en")._eras;for(I=0,n=l.length;I<n;++I)switch("string"===typeof l[I].since&&(t=C(l[I].since).startOf("day"),l[I].since=t.valueOf()),typeof l[I].until){case"undefined":l[I].until=1/0;break;case"string":t=C(l[I].until).startOf("day").valueOf(),l[I].until=t.valueOf()}return l}function Rn(g,e,I){var C,n,t,l,a,o=this.eras();for(g=g.toUpperCase(),C=0,n=o.length;C<n;++C)if(t=o[C].name.toUpperCase(),l=o[C].abbr.toUpperCase(),a=o[C].narrow.toUpperCase(),I)switch(e){case"N":case"NN":case"NNN":if(l===g)return o[C];break;case"NNNN":if(t===g)return o[C];break;case"NNNNN":if(a===g)return o[C]}else if([t,l,a].indexOf(g)>=0)return o[C]}function Xn(g,e){var I=g.since<=g.until?1:-1;return void 0===e?C(g.since).year():C(g.since).year()+(e-g.offset)*I}function kn(){var g,e,I,C=this.localeData().eras();for(g=0,e=C.length;g<e;++g){if(I=this.clone().startOf("day").valueOf(),C[g].since<=I&&I<=C[g].until)return C[g].name;if(C[g].until<=I&&I<=C[g].since)return C[g].name}return""}function Jn(){var g,e,I,C=this.localeData().eras();for(g=0,e=C.length;g<e;++g){if(I=this.clone().startOf("day").valueOf(),C[g].since<=I&&I<=C[g].until)return C[g].narrow;if(C[g].until<=I&&I<=C[g].since)return C[g].narrow}return""}function Yn(){var g,e,I,C=this.localeData().eras();for(g=0,e=C.length;g<e;++g){if(I=this.clone().startOf("day").valueOf(),C[g].since<=I&&I<=C[g].until)return C[g].abbr;if(C[g].until<=I&&I<=C[g].since)return C[g].abbr}return""}function Hn(){var g,e,I,n,t=this.localeData().eras();for(g=0,e=t.length;g<e;++g)if(I=t[g].since<=t[g].until?1:-1,n=this.clone().startOf("day").valueOf(),t[g].since<=n&&n<=t[g].until||t[g].until<=n&&n<=t[g].since)return(this.year()-C(t[g].since).year())*I+t[g].offset;return this.year()}function wn(g){return a(this,"_erasNameRegex")||xn.call(this),g?this._erasNameRegex:this._erasRegex}function Nn(g){return a(this,"_erasAbbrRegex")||xn.call(this),g?this._erasAbbrRegex:this._erasRegex}function Fn(g){return a(this,"_erasNarrowRegex")||xn.call(this),g?this._erasNarrowRegex:this._erasRegex}function Kn(g,e){return e.erasAbbrRegex(g)}function En(g,e){return e.erasNameRegex(g)}function Tn(g,e){return e.erasNarrowRegex(g)}function Mn(g,e){return e._eraYearOrdinalRegex||vg}function xn(){var g,e,I=[],C=[],n=[],t=[],l=this.eras();for(g=0,e=l.length;g<e;++g)C.push(Fg(l[g].name)),I.push(Fg(l[g].abbr)),n.push(Fg(l[g].narrow)),t.push(Fg(l[g].name)),t.push(Fg(l[g].abbr)),t.push(Fg(l[g].narrow));this._erasRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+C.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+I.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function Un(g,e){T(0,[g,g.length],0,e)}function Dn(g){return jn.call(this,g,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ln(g){return jn.call(this,g,this.isoWeek(),this.isoWeekday(),1,4)}function zn(){return ye(this.year(),1,4)}function Qn(){return ye(this.isoWeekYear(),1,4)}function Pn(){var g=this.localeData()._week;return ye(this.year(),g.dow,g.doy)}function On(){var g=this.localeData()._week;return ye(this.weekYear(),g.dow,g.doy)}function jn(g,e,I,C,n){var t;return null==g?Be(this,C,n).year:(e>(t=ye(g,C,n))&&(e=t),_n.call(this,g,e,I,C,n))}function _n(g,e,I,C,n){var t=pe(g,e,I,C,n),l=Ze(t.year,0,t.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}function qn(g){return null==g?Math.ceil((this.month()+1)/3):this.month(3*(g-1)+this.month()%3)}T("N",0,0,"eraAbbr"),T("NN",0,0,"eraAbbr"),T("NNN",0,0,"eraAbbr"),T("NNNN",0,0,"eraName"),T("NNNNN",0,0,"eraNarrow"),T("y",["y",1],"yo","eraYear"),T("y",["yy",2],0,"eraYear"),T("y",["yyy",3],0,"eraYear"),T("y",["yyyy",4],0,"eraYear"),Hg("N",Kn),Hg("NN",Kn),Hg("NNN",Kn),Hg("NNNN",En),Hg("NNNNN",Tn),Eg(["N","NN","NNN","NNNN","NNNNN"],(function(g,e,I,C){var n=I._locale.erasParse(g,C,I._strict);n?m(I).era=n:m(I).invalidEra=g})),Hg("y",vg),Hg("yy",vg),Hg("yyy",vg),Hg("yyyy",vg),Hg("yo",Mn),Eg(["y","yy","yyy","yyyy"],Ug),Eg(["yo"],(function(g,e,I,C){var n;I._locale._eraYearOrdinalRegex&&(n=g.match(I._locale._eraYearOrdinalRegex)),I._locale.eraYearOrdinalParse?e[Ug]=I._locale.eraYearOrdinalParse(g,n):e[Ug]=parseInt(g,10)})),T(0,["gg",2],0,(function(){return this.weekYear()%100})),T(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Un("gggg","weekYear"),Un("ggggg","weekYear"),Un("GGGG","isoWeekYear"),Un("GGGGG","isoWeekYear"),Ig("weekYear","gg"),Ig("isoWeekYear","GG"),lg("weekYear",1),lg("isoWeekYear",1),Hg("G",Rg),Hg("g",Rg),Hg("GG",Bg,bg),Hg("gg",Bg,bg),Hg("GGGG",Wg,Gg),Hg("gggg",Wg,Gg),Hg("GGGGG",Vg,pg),Hg("ggggg",Vg,pg),Tg(["gggg","ggggg","GGGG","GGGGG"],(function(g,e,I,C){e[C.substr(0,2)]=Ag(g)})),Tg(["gg","GG"],(function(g,e,I,n){e[n]=C.parseTwoDigitYear(g)})),T("Q",0,"Qo","quarter"),Ig("quarter","Q"),lg("quarter",7),Hg("Q",hg),Eg("Q",(function(g,e){e[Dg]=3*(Ag(g)-1)})),T("D",["DD",2],"Do","date"),Ig("date","D"),lg("date",9),Hg("D",Bg),Hg("DD",Bg,bg),Hg("Do",(function(g,e){return g?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Eg(["D","DD"],Lg),Eg("Do",(function(g,e){e[Lg]=Ag(g.match(Bg)[0])}));var $n=rg("Date",!0);function gt(g){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==g?e:this.add(g-e,"d")}T("DDD",["DDDD",3],"DDDo","dayOfYear"),Ig("dayOfYear","DDD"),lg("dayOfYear",4),Hg("DDD",fg),Hg("DDDD",Zg),Eg(["DDD","DDDD"],(function(g,e,I){I._dayOfYear=Ag(g)})),T("m",["mm",2],0,"minute"),Ig("minute","m"),lg("minute",14),Hg("m",Bg),Hg("mm",Bg,bg),Eg(["m","mm"],Qg);var et=rg("Minutes",!1);T("s",["ss",2],0,"second"),Ig("second","s"),lg("second",15),Hg("s",Bg),Hg("ss",Bg,bg),Eg(["s","ss"],Pg);var It,Ct,nt=rg("Seconds",!1);for(T("S",0,0,(function(){return~~(this.millisecond()/100)})),T(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),T(0,["SSS",3],0,"millisecond"),T(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),T(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),T(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),T(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),T(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),T(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),Ig("millisecond","ms"),lg("millisecond",16),Hg("S",fg,hg),Hg("SS",fg,bg),Hg("SSS",fg,Zg),It="SSSS";It.length<=9;It+="S")Hg(It,vg);function tt(g,e){e[Og]=Ag(1e3*("0."+g))}for(It="S";It.length<=9;It+="S")Eg(It,tt);function lt(){return this._isUTC?"UTC":""}function at(){return this._isUTC?"Coordinated Universal Time":""}Ct=rg("Milliseconds",!1),T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");var ot=B.prototype;function ct(g){return PI(1e3*g)}function At(){return PI.apply(null,arguments).parseZone()}function rt(g){return g}ot.add=YC,ot.calendar=MC,ot.clone=xC,ot.diff=OC,ot.endOf=hn,ot.format=gn,ot.from=en,ot.fromNow=In,ot.to=Cn,ot.toNow=nn,ot.get=dg,ot.invalidAt=Wn,ot.isAfter=UC,ot.isBefore=DC,ot.isBetween=LC,ot.isSame=zC,ot.isSameOrAfter=QC,ot.isSameOrBefore=PC,ot.isValid=Sn,ot.lang=ln,ot.locale=tn,ot.localeData=an,ot.max=jI,ot.min=OI,ot.parsingFlags=fn,ot.set=ug,ot.startOf=mn,ot.subtract=HC,ot.toArray=pn,ot.toObject=Bn,ot.toDate=Gn,ot.toISOString=qC,ot.inspect=$C,"undefined"!==typeof Symbol&&null!=Symbol.for&&(ot[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ot.toJSON=yn,ot.toString=_C,ot.unix=Zn,ot.valueOf=bn,ot.creationData=Vn,ot.eraName=kn,ot.eraNarrow=Jn,ot.eraAbbr=Yn,ot.eraYear=Hn,ot.year=me,ot.isLeapYear=he,ot.weekYear=Dn,ot.isoWeekYear=Ln,ot.quarter=ot.quarters=qn,ot.month=Ae,ot.daysInMonth=re,ot.week=ot.weeks=ve,ot.isoWeek=ot.isoWeeks=Re,ot.weeksInYear=Pn,ot.weeksInWeekYear=On,ot.isoWeeksInYear=zn,ot.isoWeeksInISOWeekYear=Qn,ot.date=$n,ot.day=ot.days=De,ot.weekday=Le,ot.isoWeekday=ze,ot.dayOfYear=gt,ot.hour=ot.hours=CI,ot.minute=ot.minutes=et,ot.second=ot.seconds=nt,ot.millisecond=ot.milliseconds=Ct,ot.utcOffset=dC,ot.utc=mC,ot.local=hC,ot.parseZone=bC,ot.hasAlignedHourOffset=ZC,ot.isDST=GC,ot.isLocal=BC,ot.isUtcOffset=yC,ot.isUtc=SC,ot.isUTC=SC,ot.zoneAbbr=lt,ot.zoneName=at,ot.dates=f("dates accessor is deprecated. Use date instead.",$n),ot.months=f("months accessor is deprecated. Use month instead",Ae),ot.years=f("years accessor is deprecated. Use year instead",me),ot.zone=f("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",uC),ot.isDSTShifted=f("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",pC);var it=J.prototype;function st(g,e,I,C){var n=hI(),t=d().set(C,e);return n[I](t,g)}function dt(g,e,I){if(A(g)&&(e=g,g=void 0),g=g||"",null!=e)return st(g,e,I,"month");var C,n=[];for(C=0;C<12;C++)n[C]=st(g,C,I,"month");return n}function ut(g,e,I,C){"boolean"===typeof g?(A(e)&&(I=e,e=void 0),e=e||""):(I=e=g,g=!1,A(e)&&(I=e,e=void 0),e=e||"");var n,t=hI(),l=g?t._week.dow:0,a=[];if(null!=I)return st(e,(I+l)%7,C,"day");for(n=0;n<7;n++)a[n]=st(e,(n+l)%7,C,"day");return a}function mt(g,e){return dt(g,e,"months")}function ht(g,e){return dt(g,e,"monthsShort")}function bt(g,e,I){return ut(g,e,I,"weekdays")}function Zt(g,e,I){return ut(g,e,I,"weekdaysShort")}function Gt(g,e,I){return ut(g,e,I,"weekdaysMin")}it.calendar=H,it.longDateFormat=z,it.invalidDate=P,it.ordinal=_,it.preparse=rt,it.postformat=rt,it.relativeTime=$,it.pastFuture=gg,it.set=X,it.eras=vn,it.erasParse=Rn,it.erasConvertYear=Xn,it.erasAbbrRegex=Nn,it.erasNameRegex=wn,it.erasNarrowRegex=Fn,it.months=te,it.monthsShort=le,it.monthsParse=oe,it.monthsRegex=se,it.monthsShortRegex=ie,it.week=Se,it.firstDayOfYear=Ve,it.firstDayOfWeek=We,it.weekdays=Ee,it.weekdaysMin=Me,it.weekdaysShort=Te,it.weekdaysParse=Ue,it.weekdaysRegex=Qe,it.weekdaysShortRegex=Pe,it.weekdaysMinRegex=Oe,it.isPM=eI,it.meridiem=nI,dI("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(g){var e=g%10;return g+(1===Ag(g%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),C.lang=f("moment.lang is deprecated. Use moment.locale instead.",dI),C.langData=f("moment.langData is deprecated. Use moment.localeData instead.",hI);var pt=Math.abs;function Bt(){var g=this._data;return this._milliseconds=pt(this._milliseconds),this._days=pt(this._days),this._months=pt(this._months),g.milliseconds=pt(g.milliseconds),g.seconds=pt(g.seconds),g.minutes=pt(g.minutes),g.hours=pt(g.hours),g.months=pt(g.months),g.years=pt(g.years),this}function yt(g,e,I,C){var n=VC(e,I);return g._milliseconds+=C*n._milliseconds,g._days+=C*n._days,g._months+=C*n._months,g._bubble()}function St(g,e){return yt(this,g,e,1)}function ft(g,e){return yt(this,g,e,-1)}function Wt(g){return g<0?Math.floor(g):Math.ceil(g)}function Vt(){var g,e,I,C,n,t=this._milliseconds,l=this._days,a=this._months,o=this._data;return t>=0&&l>=0&&a>=0||t<=0&&l<=0&&a<=0||(t+=864e5*Wt(Rt(a)+l),l=0,a=0),o.milliseconds=t%1e3,g=cg(t/1e3),o.seconds=g%60,e=cg(g/60),o.minutes=e%60,I=cg(e/60),o.hours=I%24,l+=cg(I/24),a+=n=cg(vt(l)),l-=Wt(Rt(n)),C=cg(a/12),a%=12,o.days=l,o.months=a,o.years=C,this}function vt(g){return 4800*g/146097}function Rt(g){return 146097*g/4800}function Xt(g){if(!this.isValid())return NaN;var e,I,C=this._milliseconds;if("month"===(g=Cg(g))||"quarter"===g||"year"===g)switch(e=this._days+C/864e5,I=this._months+vt(e),g){case"month":return I;case"quarter":return I/3;case"year":return I/12}else switch(e=this._days+Math.round(Rt(this._months)),g){case"week":return e/7+C/6048e5;case"day":return e+C/864e5;case"hour":return 24*e+C/36e5;case"minute":return 1440*e+C/6e4;case"second":return 86400*e+C/1e3;case"millisecond":return Math.floor(864e5*e)+C;default:throw new Error("Unknown unit "+g)}}function kt(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Ag(this._months/12):NaN}function Jt(g){return function(){return this.as(g)}}var Yt=Jt("ms"),Ht=Jt("s"),wt=Jt("m"),Nt=Jt("h"),Ft=Jt("d"),Kt=Jt("w"),Et=Jt("M"),Tt=Jt("Q"),Mt=Jt("y");function xt(){return VC(this)}function Ut(g){return g=Cg(g),this.isValid()?this[g+"s"]():NaN}function Dt(g){return function(){return this.isValid()?this._data[g]:NaN}}var Lt=Dt("milliseconds"),zt=Dt("seconds"),Qt=Dt("minutes"),Pt=Dt("hours"),Ot=Dt("days"),jt=Dt("months"),_t=Dt("years");function qt(){return cg(this.days()/7)}var $t=Math.round,gl={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function el(g,e,I,C,n){return n.relativeTime(e||1,!!I,g,C)}function Il(g,e,I,C){var n=VC(g).abs(),t=$t(n.as("s")),l=$t(n.as("m")),a=$t(n.as("h")),o=$t(n.as("d")),c=$t(n.as("M")),A=$t(n.as("w")),r=$t(n.as("y")),i=t<=I.ss&&["s",t]||t<I.s&&["ss",t]||l<=1&&["m"]||l<I.m&&["mm",l]||a<=1&&["h"]||a<I.h&&["hh",a]||o<=1&&["d"]||o<I.d&&["dd",o];return null!=I.w&&(i=i||A<=1&&["w"]||A<I.w&&["ww",A]),(i=i||c<=1&&["M"]||c<I.M&&["MM",c]||r<=1&&["y"]||["yy",r])[2]=e,i[3]=+g>0,i[4]=C,el.apply(null,i)}function Cl(g){return void 0===g?$t:"function"===typeof g&&($t=g,!0)}function nl(g,e){return void 0!==gl[g]&&(void 0===e?gl[g]:(gl[g]=e,"s"===g&&(gl.ss=e-1),!0))}function tl(g,e){if(!this.isValid())return this.localeData().invalidDate();var I,C,n=!1,t=gl;return"object"===typeof g&&(e=g,g=!1),"boolean"===typeof g&&(n=g),"object"===typeof e&&(t=Object.assign({},gl,e),null!=e.s&&null==e.ss&&(t.ss=e.s-1)),C=Il(this,!n,t,I=this.localeData()),n&&(C=I.pastFuture(+this,C)),I.postformat(C)}var ll=Math.abs;function al(g){return(g>0)-(g<0)||+g}function ol(){if(!this.isValid())return this.localeData().invalidDate();var g,e,I,C,n,t,l,a,o=ll(this._milliseconds)/1e3,c=ll(this._days),A=ll(this._months),r=this.asSeconds();return r?(g=cg(o/60),e=cg(g/60),o%=60,g%=60,I=cg(A/12),A%=12,C=o?o.toFixed(3).replace(/\.?0+$/,""):"",n=r<0?"-":"",t=al(this._months)!==al(r)?"-":"",l=al(this._days)!==al(r)?"-":"",a=al(this._milliseconds)!==al(r)?"-":"",n+"P"+(I?t+I+"Y":"")+(A?t+A+"M":"")+(c?l+c+"D":"")+(e||g||o?"T":"")+(e?a+e+"H":"")+(g?a+g+"M":"")+(o?a+C+"S":"")):"P0D"}var cl=tC.prototype;return cl.isValid=CC,cl.abs=Bt,cl.add=St,cl.subtract=ft,cl.as=Xt,cl.asMilliseconds=Yt,cl.asSeconds=Ht,cl.asMinutes=wt,cl.asHours=Nt,cl.asDays=Ft,cl.asWeeks=Kt,cl.asMonths=Et,cl.asQuarters=Tt,cl.asYears=Mt,cl.valueOf=kt,cl._bubble=Vt,cl.clone=xt,cl.get=Ut,cl.milliseconds=Lt,cl.seconds=zt,cl.minutes=Qt,cl.hours=Pt,cl.days=Ot,cl.weeks=qt,cl.months=jt,cl.years=_t,cl.humanize=tl,cl.toISOString=ol,cl.toString=ol,cl.toJSON=ol,cl.locale=tn,cl.localeData=an,cl.toIsoString=f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ol),cl.lang=ln,T("X",0,0,"unix"),T("x",0,0,"valueOf"),Hg("x",Rg),Hg("X",Jg),Eg("X",(function(g,e,I){I._d=new Date(1e3*parseFloat(g))})),Eg("x",(function(g,e,I){I._d=new Date(Ag(g))})),C.version="2.29.4",n(PI),C.fn=ot,C.min=qI,C.max=$I,C.now=gC,C.utc=d,C.unix=ct,C.months=mt,C.isDate=r,C.locale=dI,C.invalid=b,C.duration=VC,C.isMoment=y,C.weekdays=bt,C.parseZone=At,C.localeData=hI,C.isDuration=lC,C.monthsShort=ht,C.weekdaysMin=Gt,C.defineLocale=uI,C.updateLocale=mI,C.locales=bI,C.weekdaysShort=Zt,C.normalizeUnits=Cg,C.relativeTimeRounding=Cl,C.relativeTimeThreshold=nl,C.calendarFormat=TC,C.prototype=ot,C.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},C}()},725:function(g){"use strict";var e=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;function n(g){if(null===g||void 0===g)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}g.exports=function(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de","5"===Object.getOwnPropertyNames(g)[0])return!1;for(var e={},I=0;I<10;I++)e["_"+String.fromCharCode(I)]=I;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(g){return e[g]})).join(""))return!1;var C={};return"abcdefghijklmnopqrst".split("").forEach((function(g){C[g]=g})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},C)).join("")}catch(n){return!1}}()?Object.assign:function(g,t){for(var l,a,o=n(g),c=1;c<arguments.length;c++){for(var A in l=Object(arguments[c]))I.call(l,A)&&(o[A]=l[A]);if(e){a=e(l);for(var r=0;r<a.length;r++)C.call(l,a[r])&&(o[a[r]]=l[a[r]])}}return o}},463:function(g,e,I){"use strict";var C=I(791),n=I(725),t=I(296);function l(g){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)e+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!C)throw Error(l(227));var a=new Set,o={};function c(g,e){A(g,e),A(g+"Capture",e)}function A(g,e){for(o[g]=e,g=0;g<e.length;g++)a.add(e[g])}var r=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),i=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s=Object.prototype.hasOwnProperty,d={},u={};function m(g,e,I,C,n,t,l){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=C,this.attributeNamespace=n,this.mustUseProperty=I,this.propertyName=g,this.type=e,this.sanitizeURL=t,this.removeEmptyString=l}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(g){h[g]=new m(g,0,!1,g,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(g){var e=g[0];h[e]=new m(e,1,!1,g[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(g){h[g]=new m(g,2,!1,g.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(g){h[g]=new m(g,2,!1,g,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(g){h[g]=new m(g,3,!1,g.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(g){h[g]=new m(g,3,!0,g,null,!1,!1)})),["capture","download"].forEach((function(g){h[g]=new m(g,4,!1,g,null,!1,!1)})),["cols","rows","size","span"].forEach((function(g){h[g]=new m(g,6,!1,g,null,!1,!1)})),["rowSpan","start"].forEach((function(g){h[g]=new m(g,5,!1,g.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function Z(g){return g[1].toUpperCase()}function G(g,e,I,C){var n=h.hasOwnProperty(e)?h[e]:null;(null!==n?0===n.type:!C&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(g,e,I,C){if(null===e||"undefined"===typeof e||function(g,e,I,C){if(null!==I&&0===I.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!C&&(null!==I?!I.acceptsBooleans:"data-"!==(g=g.toLowerCase().slice(0,5))&&"aria-"!==g);default:return!1}}(g,e,I,C))return!0;if(C)return!1;if(null!==I)switch(I.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,I,n,C)&&(I=null),C||null===n?function(g){return!!s.call(u,g)||!s.call(d,g)&&(i.test(g)?u[g]=!0:(d[g]=!0,!1))}(e)&&(null===I?g.removeAttribute(e):g.setAttribute(e,""+I)):n.mustUseProperty?g[n.propertyName]=null===I?3!==n.type&&"":I:(e=n.attributeName,C=n.attributeNamespace,null===I?g.removeAttribute(e):(I=3===(n=n.type)||4===n&&!0===I?"":""+I,C?g.setAttributeNS(C,e,I):g.setAttribute(e,I))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(g){var e=g.replace(b,Z);h[e]=new m(e,1,!1,g,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(g){var e=g.replace(b,Z);h[e]=new m(e,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(g){var e=g.replace(b,Z);h[e]=new m(e,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(g){h[g]=new m(g,1,!1,g.toLowerCase(),null,!1,!1)})),h.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(g){h[g]=new m(g,1,!1,g.toLowerCase(),null,!0,!0)}));var p=C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=60103,y=60106,S=60107,f=60108,W=60114,V=60109,v=60110,R=60112,X=60113,k=60120,J=60115,Y=60116,H=60121,w=60128,N=60129,F=60130,K=60131;if("function"===typeof Symbol&&Symbol.for){var E=Symbol.for;B=E("react.element"),y=E("react.portal"),S=E("react.fragment"),f=E("react.strict_mode"),W=E("react.profiler"),V=E("react.provider"),v=E("react.context"),R=E("react.forward_ref"),X=E("react.suspense"),k=E("react.suspense_list"),J=E("react.memo"),Y=E("react.lazy"),H=E("react.block"),E("react.scope"),w=E("react.opaque.id"),N=E("react.debug_trace_mode"),F=E("react.offscreen"),K=E("react.legacy_hidden")}var T,M="function"===typeof Symbol&&Symbol.iterator;function x(g){return null===g||"object"!==typeof g?null:"function"===typeof(g=M&&g[M]||g["@@iterator"])?g:null}function U(g){if(void 0===T)try{throw Error()}catch(I){var e=I.stack.trim().match(/\n( *(at )?)/);T=e&&e[1]||""}return"\n"+T+g}var D=!1;function L(g,e){if(!g||D)return"";D=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(o){var C=o}Reflect.construct(g,[],e)}else{try{e.call()}catch(o){C=o}g.call(e.prototype)}else{try{throw Error()}catch(o){C=o}g()}}catch(o){if(o&&C&&"string"===typeof o.stack){for(var n=o.stack.split("\n"),t=C.stack.split("\n"),l=n.length-1,a=t.length-1;1<=l&&0<=a&&n[l]!==t[a];)a--;for(;1<=l&&0<=a;l--,a--)if(n[l]!==t[a]){if(1!==l||1!==a)do{if(l--,0>--a||n[l]!==t[a])return"\n"+n[l].replace(" at new "," at ")}while(1<=l&&0<=a);break}}}finally{D=!1,Error.prepareStackTrace=I}return(g=g?g.displayName||g.name:"")?U(g):""}function z(g){switch(g.tag){case 5:return U(g.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return g=L(g.type,!1);case 11:return g=L(g.type.render,!1);case 22:return g=L(g.type._render,!1);case 1:return g=L(g.type,!0);default:return""}}function Q(g){if(null==g)return null;if("function"===typeof g)return g.displayName||g.name||null;if("string"===typeof g)return g;switch(g){case S:return"Fragment";case y:return"Portal";case W:return"Profiler";case f:return"StrictMode";case X:return"Suspense";case k:return"SuspenseList"}if("object"===typeof g)switch(g.$$typeof){case v:return(g.displayName||"Context")+".Consumer";case V:return(g._context.displayName||"Context")+".Provider";case R:var e=g.render;return e=e.displayName||e.name||"",g.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case J:return Q(g.type);case H:return Q(g._render);case Y:e=g._payload,g=g._init;try{return Q(g(e))}catch(I){}}return null}function P(g){switch(typeof g){case"boolean":case"number":case"object":case"string":case"undefined":return g;default:return""}}function O(g){var e=g.type;return(g=g.nodeName)&&"input"===g.toLowerCase()&&("checkbox"===e||"radio"===e)}function j(g){g._valueTracker||(g._valueTracker=function(g){var e=O(g)?"checked":"value",I=Object.getOwnPropertyDescriptor(g.constructor.prototype,e),C=""+g[e];if(!g.hasOwnProperty(e)&&"undefined"!==typeof I&&"function"===typeof I.get&&"function"===typeof I.set){var n=I.get,t=I.set;return Object.defineProperty(g,e,{configurable:!0,get:function(){return n.call(this)},set:function(g){C=""+g,t.call(this,g)}}),Object.defineProperty(g,e,{enumerable:I.enumerable}),{getValue:function(){return C},setValue:function(g){C=""+g},stopTracking:function(){g._valueTracker=null,delete g[e]}}}}(g))}function _(g){if(!g)return!1;var e=g._valueTracker;if(!e)return!0;var I=e.getValue(),C="";return g&&(C=O(g)?g.checked?"true":"false":g.value),(g=C)!==I&&(e.setValue(g),!0)}function q(g){if("undefined"===typeof(g=g||("undefined"!==typeof document?document:void 0)))return null;try{return g.activeElement||g.body}catch(e){return g.body}}function $(g,e){var I=e.checked;return n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=I?I:g._wrapperState.initialChecked})}function gg(g,e){var I=null==e.defaultValue?"":e.defaultValue,C=null!=e.checked?e.checked:e.defaultChecked;I=P(null!=e.value?e.value:I),g._wrapperState={initialChecked:C,initialValue:I,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function eg(g,e){null!=(e=e.checked)&&G(g,"checked",e,!1)}function Ig(g,e){eg(g,e);var I=P(e.value),C=e.type;if(null!=I)"number"===C?(0===I&&""===g.value||g.value!=I)&&(g.value=""+I):g.value!==""+I&&(g.value=""+I);else if("submit"===C||"reset"===C)return void g.removeAttribute("value");e.hasOwnProperty("value")?ng(g,e.type,I):e.hasOwnProperty("defaultValue")&&ng(g,e.type,P(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(g.defaultChecked=!!e.defaultChecked)}function Cg(g,e,I){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var C=e.type;if(!("submit"!==C&&"reset"!==C||void 0!==e.value&&null!==e.value))return;e=""+g._wrapperState.initialValue,I||e===g.value||(g.value=e),g.defaultValue=e}""!==(I=g.name)&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,""!==I&&(g.name=I)}function ng(g,e,I){"number"===e&&q(g.ownerDocument)===g||(null==I?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+I&&(g.defaultValue=""+I))}function tg(g,e){return g=n({children:void 0},e),(e=function(g){var e="";return C.Children.forEach(g,(function(g){null!=g&&(e+=g)})),e}(e.children))&&(g.children=e),g}function lg(g,e,I,C){if(g=g.options,e){e={};for(var n=0;n<I.length;n++)e["$"+I[n]]=!0;for(I=0;I<g.length;I++)n=e.hasOwnProperty("$"+g[I].value),g[I].selected!==n&&(g[I].selected=n),n&&C&&(g[I].defaultSelected=!0)}else{for(I=""+P(I),e=null,n=0;n<g.length;n++){if(g[n].value===I)return g[n].selected=!0,void(C&&(g[n].defaultSelected=!0));null!==e||g[n].disabled||(e=g[n])}null!==e&&(e.selected=!0)}}function ag(g,e){if(null!=e.dangerouslySetInnerHTML)throw Error(l(91));return n({},e,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function og(g,e){var I=e.value;if(null==I){if(I=e.children,e=e.defaultValue,null!=I){if(null!=e)throw Error(l(92));if(Array.isArray(I)){if(!(1>=I.length))throw Error(l(93));I=I[0]}e=I}null==e&&(e=""),I=e}g._wrapperState={initialValue:P(I)}}function cg(g,e){var I=P(e.value),C=P(e.defaultValue);null!=I&&((I=""+I)!==g.value&&(g.value=I),null==e.defaultValue&&g.defaultValue!==I&&(g.defaultValue=I)),null!=C&&(g.defaultValue=""+C)}function Ag(g){var e=g.textContent;e===g._wrapperState.initialValue&&""!==e&&null!==e&&(g.value=e)}var rg="http://www.w3.org/1999/xhtml",ig="http://www.w3.org/2000/svg";function sg(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dg(g,e){return null==g||"http://www.w3.org/1999/xhtml"===g?sg(e):"http://www.w3.org/2000/svg"===g&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":g}var ug,mg,hg=(mg=function(g,e){if(g.namespaceURI!==ig||"innerHTML"in g)g.innerHTML=e;else{for((ug=ug||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ug.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;e.firstChild;)g.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(g,e,I,C){MSApp.execUnsafeLocalFunction((function(){return mg(g,e)}))}:mg);function bg(g,e){if(e){var I=g.firstChild;if(I&&I===g.lastChild&&3===I.nodeType)return void(I.nodeValue=e)}g.textContent=e}var Zg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gg=["Webkit","ms","Moz","O"];function pg(g,e,I){return null==e||"boolean"===typeof e||""===e?"":I||"number"!==typeof e||0===e||Zg.hasOwnProperty(g)&&Zg[g]?(""+e).trim():e+"px"}function Bg(g,e){for(var I in g=g.style,e)if(e.hasOwnProperty(I)){var C=0===I.indexOf("--"),n=pg(I,e[I],C);"float"===I&&(I="cssFloat"),C?g.setProperty(I,n):g[I]=n}}Object.keys(Zg).forEach((function(g){Gg.forEach((function(e){e=e+g.charAt(0).toUpperCase()+g.substring(1),Zg[e]=Zg[g]}))}));var yg=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sg(g,e){if(e){if(yg[g]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(l(137,g));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(l(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(l(62))}}function fg(g,e){if(-1===g.indexOf("-"))return"string"===typeof e.is;switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Wg(g){return(g=g.target||g.srcElement||window).correspondingUseElement&&(g=g.correspondingUseElement),3===g.nodeType?g.parentNode:g}var Vg=null,vg=null,Rg=null;function Xg(g){if(g=In(g)){if("function"!==typeof Vg)throw Error(l(280));var e=g.stateNode;e&&(e=nn(e),Vg(g.stateNode,g.type,e))}}function kg(g){vg?Rg?Rg.push(g):Rg=[g]:vg=g}function Jg(){if(vg){var g=vg,e=Rg;if(Rg=vg=null,Xg(g),e)for(g=0;g<e.length;g++)Xg(e[g])}}function Yg(g,e){return g(e)}function Hg(g,e,I,C,n){return g(e,I,C,n)}function wg(){}var Ng=Yg,Fg=!1,Kg=!1;function Eg(){null===vg&&null===Rg||(wg(),Jg())}function Tg(g,e){var I=g.stateNode;if(null===I)return null;var C=nn(I);if(null===C)return null;I=C[e];g:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(C=!("button"===(g=g.type)||"input"===g||"select"===g||"textarea"===g)),g=!C;break g;default:g=!1}if(g)return null;if(I&&"function"!==typeof I)throw Error(l(231,e,typeof I));return I}var Mg=!1;if(r)try{var xg={};Object.defineProperty(xg,"passive",{get:function(){Mg=!0}}),window.addEventListener("test",xg,xg),window.removeEventListener("test",xg,xg)}catch(mg){Mg=!1}function Ug(g,e,I,C,n,t,l,a,o){var c=Array.prototype.slice.call(arguments,3);try{e.apply(I,c)}catch(A){this.onError(A)}}var Dg=!1,Lg=null,zg=!1,Qg=null,Pg={onError:function(g){Dg=!0,Lg=g}};function Og(g,e,I,C,n,t,l,a,o){Dg=!1,Lg=null,Ug.apply(Pg,arguments)}function jg(g){var e=g,I=g;if(g.alternate)for(;e.return;)e=e.return;else{g=e;do{0!==(1026&(e=g).flags)&&(I=e.return),g=e.return}while(g)}return 3===e.tag?I:null}function _g(g){if(13===g.tag){var e=g.memoizedState;if(null===e&&(null!==(g=g.alternate)&&(e=g.memoizedState)),null!==e)return e.dehydrated}return null}function qg(g){if(jg(g)!==g)throw Error(l(188))}function $g(g){if(g=function(g){var e=g.alternate;if(!e){if(null===(e=jg(g)))throw Error(l(188));return e!==g?null:g}for(var I=g,C=e;;){var n=I.return;if(null===n)break;var t=n.alternate;if(null===t){if(null!==(C=n.return)){I=C;continue}break}if(n.child===t.child){for(t=n.child;t;){if(t===I)return qg(n),g;if(t===C)return qg(n),e;t=t.sibling}throw Error(l(188))}if(I.return!==C.return)I=n,C=t;else{for(var a=!1,o=n.child;o;){if(o===I){a=!0,I=n,C=t;break}if(o===C){a=!0,C=n,I=t;break}o=o.sibling}if(!a){for(o=t.child;o;){if(o===I){a=!0,I=t,C=n;break}if(o===C){a=!0,C=t,I=n;break}o=o.sibling}if(!a)throw Error(l(189))}}if(I.alternate!==C)throw Error(l(190))}if(3!==I.tag)throw Error(l(188));return I.stateNode.current===I?g:e}(g),!g)return null;for(var e=g;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===g)break;for(;!e.sibling;){if(!e.return||e.return===g)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function ge(g,e){for(var I=g.alternate;null!==e;){if(e===g||e===I)return!0;e=e.return}return!1}var ee,Ie,Ce,ne,te=!1,le=[],ae=null,oe=null,ce=null,Ae=new Map,re=new Map,ie=[],se="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function de(g,e,I,C,n){return{blockedOn:g,domEventName:e,eventSystemFlags:16|I,nativeEvent:n,targetContainers:[C]}}function ue(g,e){switch(g){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":oe=null;break;case"mouseover":case"mouseout":ce=null;break;case"pointerover":case"pointerout":Ae.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":re.delete(e.pointerId)}}function me(g,e,I,C,n,t){return null===g||g.nativeEvent!==t?(g=de(e,I,C,n,t),null!==e&&(null!==(e=In(e))&&Ie(e)),g):(g.eventSystemFlags|=C,e=g.targetContainers,null!==n&&-1===e.indexOf(n)&&e.push(n),g)}function he(g){var e=en(g.target);if(null!==e){var I=jg(e);if(null!==I)if(13===(e=I.tag)){if(null!==(e=_g(I)))return g.blockedOn=e,void ne(g.lanePriority,(function(){t.unstable_runWithPriority(g.priority,(function(){Ce(I)}))}))}else if(3===e&&I.stateNode.hydrate)return void(g.blockedOn=3===I.tag?I.stateNode.containerInfo:null)}g.blockedOn=null}function be(g){if(null!==g.blockedOn)return!1;for(var e=g.targetContainers;0<e.length;){var I=$e(g.domEventName,g.eventSystemFlags,e[0],g.nativeEvent);if(null!==I)return null!==(e=In(I))&&Ie(e),g.blockedOn=I,!1;e.shift()}return!0}function Ze(g,e,I){be(g)&&I.delete(e)}function Ge(){for(te=!1;0<le.length;){var g=le[0];if(null!==g.blockedOn){null!==(g=In(g.blockedOn))&&ee(g);break}for(var e=g.targetContainers;0<e.length;){var I=$e(g.domEventName,g.eventSystemFlags,e[0],g.nativeEvent);if(null!==I){g.blockedOn=I;break}e.shift()}null===g.blockedOn&&le.shift()}null!==ae&&be(ae)&&(ae=null),null!==oe&&be(oe)&&(oe=null),null!==ce&&be(ce)&&(ce=null),Ae.forEach(Ze),re.forEach(Ze)}function pe(g,e){g.blockedOn===e&&(g.blockedOn=null,te||(te=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ge)))}function Be(g){function e(e){return pe(e,g)}if(0<le.length){pe(le[0],g);for(var I=1;I<le.length;I++){var C=le[I];C.blockedOn===g&&(C.blockedOn=null)}}for(null!==ae&&pe(ae,g),null!==oe&&pe(oe,g),null!==ce&&pe(ce,g),Ae.forEach(e),re.forEach(e),I=0;I<ie.length;I++)(C=ie[I]).blockedOn===g&&(C.blockedOn=null);for(;0<ie.length&&null===(I=ie[0]).blockedOn;)he(I),null===I.blockedOn&&ie.shift()}function ye(g,e){var I={};return I[g.toLowerCase()]=e.toLowerCase(),I["Webkit"+g]="webkit"+e,I["Moz"+g]="moz"+e,I}var Se={animationend:ye("Animation","AnimationEnd"),animationiteration:ye("Animation","AnimationIteration"),animationstart:ye("Animation","AnimationStart"),transitionend:ye("Transition","TransitionEnd")},fe={},We={};function Ve(g){if(fe[g])return fe[g];if(!Se[g])return g;var e,I=Se[g];for(e in I)if(I.hasOwnProperty(e)&&e in We)return fe[g]=I[e];return g}r&&(We=document.createElement("div").style,"AnimationEvent"in window||(delete Se.animationend.animation,delete Se.animationiteration.animation,delete Se.animationstart.animation),"TransitionEvent"in window||delete Se.transitionend.transition);var ve=Ve("animationend"),Re=Ve("animationiteration"),Xe=Ve("animationstart"),ke=Ve("transitionend"),Je=new Map,Ye=new Map,He=["abort","abort",ve,"animationEnd",Re,"animationIteration",Xe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ke,"transitionEnd","waiting","waiting"];function we(g,e){for(var I=0;I<g.length;I+=2){var C=g[I],n=g[I+1];n="on"+(n[0].toUpperCase()+n.slice(1)),Ye.set(C,e),Je.set(C,n),c(n,[C])}}(0,t.unstable_now)();var Ne=8;function Fe(g){if(0!==(1&g))return Ne=15,1;if(0!==(2&g))return Ne=14,2;if(0!==(4&g))return Ne=13,4;var e=24&g;return 0!==e?(Ne=12,e):0!==(32&g)?(Ne=11,32):0!==(e=192&g)?(Ne=10,e):0!==(256&g)?(Ne=9,256):0!==(e=3584&g)?(Ne=8,e):0!==(4096&g)?(Ne=7,4096):0!==(e=4186112&g)?(Ne=6,e):0!==(e=62914560&g)?(Ne=5,e):67108864&g?(Ne=4,67108864):0!==(134217728&g)?(Ne=3,134217728):0!==(e=805306368&g)?(Ne=2,e):0!==(1073741824&g)?(Ne=1,1073741824):(Ne=8,g)}function Ke(g,e){var I=g.pendingLanes;if(0===I)return Ne=0;var C=0,n=0,t=g.expiredLanes,l=g.suspendedLanes,a=g.pingedLanes;if(0!==t)C=t,n=Ne=15;else if(0!==(t=134217727&I)){var o=t&~l;0!==o?(C=Fe(o),n=Ne):0!==(a&=t)&&(C=Fe(a),n=Ne)}else 0!==(t=I&~l)?(C=Fe(t),n=Ne):0!==a&&(C=Fe(a),n=Ne);if(0===C)return 0;if(C=I&((0>(C=31-De(C))?0:1<<C)<<1)-1,0!==e&&e!==C&&0===(e&l)){if(Fe(e),n<=Ne)return e;Ne=n}if(0!==(e=g.entangledLanes))for(g=g.entanglements,e&=C;0<e;)n=1<<(I=31-De(e)),C|=g[I],e&=~n;return C}function Ee(g){return 0!==(g=-1073741825&g.pendingLanes)?g:1073741824&g?1073741824:0}function Te(g,e){switch(g){case 15:return 1;case 14:return 2;case 12:return 0===(g=Me(24&~e))?Te(10,e):g;case 10:return 0===(g=Me(192&~e))?Te(8,e):g;case 8:return 0===(g=Me(3584&~e))&&(0===(g=Me(4186112&~e))&&(g=512)),g;case 2:return 0===(e=Me(805306368&~e))&&(e=268435456),e}throw Error(l(358,g))}function Me(g){return g&-g}function xe(g){for(var e=[],I=0;31>I;I++)e.push(g);return e}function Ue(g,e,I){g.pendingLanes|=e;var C=e-1;g.suspendedLanes&=C,g.pingedLanes&=C,(g=g.eventTimes)[e=31-De(e)]=I}var De=Math.clz32?Math.clz32:function(g){return 0===g?32:31-(Le(g)/ze|0)|0},Le=Math.log,ze=Math.LN2;var Qe=t.unstable_UserBlockingPriority,Pe=t.unstable_runWithPriority,Oe=!0;function je(g,e,I,C){Fg||wg();var n=qe,t=Fg;Fg=!0;try{Hg(n,g,e,I,C)}finally{(Fg=t)||Eg()}}function _e(g,e,I,C){Pe(Qe,qe.bind(null,g,e,I,C))}function qe(g,e,I,C){var n;if(Oe)if((n=0===(4&e))&&0<le.length&&-1<se.indexOf(g))g=de(null,g,e,I,C),le.push(g);else{var t=$e(g,e,I,C);if(null===t)n&&ue(g,C);else{if(n){if(-1<se.indexOf(g))return g=de(t,g,e,I,C),void le.push(g);if(function(g,e,I,C,n){switch(e){case"focusin":return ae=me(ae,g,e,I,C,n),!0;case"dragenter":return oe=me(oe,g,e,I,C,n),!0;case"mouseover":return ce=me(ce,g,e,I,C,n),!0;case"pointerover":var t=n.pointerId;return Ae.set(t,me(Ae.get(t)||null,g,e,I,C,n)),!0;case"gotpointercapture":return t=n.pointerId,re.set(t,me(re.get(t)||null,g,e,I,C,n)),!0}return!1}(t,g,e,I,C))return;ue(g,C)}HC(g,e,C,null,I)}}}function $e(g,e,I,C){var n=Wg(C);if(null!==(n=en(n))){var t=jg(n);if(null===t)n=null;else{var l=t.tag;if(13===l){if(null!==(n=_g(t)))return n;n=null}else if(3===l){if(t.stateNode.hydrate)return 3===t.tag?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null)}}return HC(g,e,C,n,I),null}var gI=null,eI=null,II=null;function CI(){if(II)return II;var g,e,I=eI,C=I.length,n="value"in gI?gI.value:gI.textContent,t=n.length;for(g=0;g<C&&I[g]===n[g];g++);var l=C-g;for(e=1;e<=l&&I[C-e]===n[t-e];e++);return II=n.slice(g,1<e?1-e:void 0)}function nI(g){var e=g.keyCode;return"charCode"in g?0===(g=g.charCode)&&13===e&&(g=13):g=e,10===g&&(g=13),32<=g||13===g?g:0}function tI(){return!0}function lI(){return!1}function aI(g){function e(e,I,C,n,t){for(var l in this._reactName=e,this._targetInst=C,this.type=I,this.nativeEvent=n,this.target=t,this.currentTarget=null,g)g.hasOwnProperty(l)&&(e=g[l],this[l]=e?e(n):n[l]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?tI:lI,this.isPropagationStopped=lI,this}return n(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():"unknown"!==typeof g.returnValue&&(g.returnValue=!1),this.isDefaultPrevented=tI)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():"unknown"!==typeof g.cancelBubble&&(g.cancelBubble=!0),this.isPropagationStopped=tI)},persist:function(){},isPersistent:tI}),e}var oI,cI,AI,rI={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iI=aI(rI),sI=n({},rI,{view:0,detail:0}),dI=aI(sI),uI=n({},sI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:VI,button:0,buttons:0,relatedTarget:function(g){return void 0===g.relatedTarget?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==AI&&(AI&&"mousemove"===g.type?(oI=g.screenX-AI.screenX,cI=g.screenY-AI.screenY):cI=oI=0,AI=g),oI)},movementY:function(g){return"movementY"in g?g.movementY:cI}}),mI=aI(uI),hI=aI(n({},uI,{dataTransfer:0})),bI=aI(n({},sI,{relatedTarget:0})),ZI=aI(n({},rI,{animationName:0,elapsedTime:0,pseudoElement:0})),GI=n({},rI,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),pI=aI(GI),BI=aI(n({},rI,{data:0})),yI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WI(g){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(g):!!(g=fI[g])&&!!e[g]}function VI(){return WI}var vI=n({},sI,{key:function(g){if(g.key){var e=yI[g.key]||g.key;if("Unidentified"!==e)return e}return"keypress"===g.type?13===(g=nI(g))?"Enter":String.fromCharCode(g):"keydown"===g.type||"keyup"===g.type?SI[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:VI,charCode:function(g){return"keypress"===g.type?nI(g):0},keyCode:function(g){return"keydown"===g.type||"keyup"===g.type?g.keyCode:0},which:function(g){return"keypress"===g.type?nI(g):"keydown"===g.type||"keyup"===g.type?g.keyCode:0}}),RI=aI(vI),XI=aI(n({},uI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kI=aI(n({},sI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:VI})),JI=aI(n({},rI,{propertyName:0,elapsedTime:0,pseudoElement:0})),YI=n({},uI,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),HI=aI(YI),wI=[9,13,27,32],NI=r&&"CompositionEvent"in window,FI=null;r&&"documentMode"in document&&(FI=document.documentMode);var KI=r&&"TextEvent"in window&&!FI,EI=r&&(!NI||FI&&8<FI&&11>=FI),TI=String.fromCharCode(32),MI=!1;function xI(g,e){switch(g){case"keyup":return-1!==wI.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UI(g){return"object"===typeof(g=g.detail)&&"data"in g?g.data:null}var DI=!1;var LI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zI(g){var e=g&&g.nodeName&&g.nodeName.toLowerCase();return"input"===e?!!LI[g.type]:"textarea"===e}function QI(g,e,I,C){kg(C),0<(e=NC(e,"onChange")).length&&(I=new iI("onChange","change",null,I,C),g.push({event:I,listeners:e}))}var PI=null,OI=null;function jI(g){vC(g,0)}function _I(g){if(_(Cn(g)))return g}function qI(g,e){if("change"===g)return e}var $I=!1;if(r){var gC;if(r){var eC="oninput"in document;if(!eC){var IC=document.createElement("div");IC.setAttribute("oninput","return;"),eC="function"===typeof IC.oninput}gC=eC}else gC=!1;$I=gC&&(!document.documentMode||9<document.documentMode)}function CC(){PI&&(PI.detachEvent("onpropertychange",nC),OI=PI=null)}function nC(g){if("value"===g.propertyName&&_I(OI)){var e=[];if(QI(e,OI,g,Wg(g)),g=jI,Fg)g(e);else{Fg=!0;try{Yg(g,e)}finally{Fg=!1,Eg()}}}}function tC(g,e,I){"focusin"===g?(CC(),OI=I,(PI=e).attachEvent("onpropertychange",nC)):"focusout"===g&&CC()}function lC(g){if("selectionchange"===g||"keyup"===g||"keydown"===g)return _I(OI)}function aC(g,e){if("click"===g)return _I(e)}function oC(g,e){if("input"===g||"change"===g)return _I(e)}var cC="function"===typeof Object.is?Object.is:function(g,e){return g===e&&(0!==g||1/g===1/e)||g!==g&&e!==e},AC=Object.prototype.hasOwnProperty;function rC(g,e){if(cC(g,e))return!0;if("object"!==typeof g||null===g||"object"!==typeof e||null===e)return!1;var I=Object.keys(g),C=Object.keys(e);if(I.length!==C.length)return!1;for(C=0;C<I.length;C++)if(!AC.call(e,I[C])||!cC(g[I[C]],e[I[C]]))return!1;return!0}function iC(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function sC(g,e){var I,C=iC(g);for(g=0;C;){if(3===C.nodeType){if(I=g+C.textContent.length,g<=e&&I>=e)return{node:C,offset:e-g};g=I}g:{for(;C;){if(C.nextSibling){C=C.nextSibling;break g}C=C.parentNode}C=void 0}C=iC(C)}}function dC(g,e){return!(!g||!e)&&(g===e||(!g||3!==g.nodeType)&&(e&&3===e.nodeType?dC(g,e.parentNode):"contains"in g?g.contains(e):!!g.compareDocumentPosition&&!!(16&g.compareDocumentPosition(e))))}function uC(){for(var g=window,e=q();e instanceof g.HTMLIFrameElement;){try{var I="string"===typeof e.contentWindow.location.href}catch(C){I=!1}if(!I)break;e=q((g=e.contentWindow).document)}return e}function mC(g){var e=g&&g.nodeName&&g.nodeName.toLowerCase();return e&&("input"===e&&("text"===g.type||"search"===g.type||"tel"===g.type||"url"===g.type||"password"===g.type)||"textarea"===e||"true"===g.contentEditable)}var hC=r&&"documentMode"in document&&11>=document.documentMode,bC=null,ZC=null,GC=null,pC=!1;function BC(g,e,I){var C=I.window===I?I.document:9===I.nodeType?I:I.ownerDocument;pC||null==bC||bC!==q(C)||("selectionStart"in(C=bC)&&mC(C)?C={start:C.selectionStart,end:C.selectionEnd}:C={anchorNode:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset},GC&&rC(GC,C)||(GC=C,0<(C=NC(ZC,"onSelect")).length&&(e=new iI("onSelect","select",null,e,I),g.push({event:e,listeners:C}),e.target=bC)))}we("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),we("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),we(He,2);for(var yC="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),SC=0;SC<yC.length;SC++)Ye.set(yC[SC],0);A("onMouseEnter",["mouseout","mouseover"]),A("onMouseLeave",["mouseout","mouseover"]),A("onPointerEnter",["pointerout","pointerover"]),A("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WC=new Set("cancel close invalid load scroll toggle".split(" ").concat(fC));function VC(g,e,I){var C=g.type||"unknown-event";g.currentTarget=I,function(g,e,I,C,n,t,a,o,c){if(Og.apply(this,arguments),Dg){if(!Dg)throw Error(l(198));var A=Lg;Dg=!1,Lg=null,zg||(zg=!0,Qg=A)}}(C,e,void 0,g),g.currentTarget=null}function vC(g,e){e=0!==(4&e);for(var I=0;I<g.length;I++){var C=g[I],n=C.event;C=C.listeners;g:{var t=void 0;if(e)for(var l=C.length-1;0<=l;l--){var a=C[l],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==t&&n.isPropagationStopped())break g;VC(n,a,c),t=o}else for(l=0;l<C.length;l++){if(o=(a=C[l]).instance,c=a.currentTarget,a=a.listener,o!==t&&n.isPropagationStopped())break g;VC(n,a,c),t=o}}}if(zg)throw g=Qg,zg=!1,Qg=null,g}function RC(g,e){var I=tn(e),C=g+"__bubble";I.has(C)||(YC(e,g,2,!1),I.add(C))}var XC="_reactListening"+Math.random().toString(36).slice(2);function kC(g){g[XC]||(g[XC]=!0,a.forEach((function(e){WC.has(e)||JC(e,!1,g,null),JC(e,!0,g,null)})))}function JC(g,e,I,C){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,t=I;if("selectionchange"===g&&9!==I.nodeType&&(t=I.ownerDocument),null!==C&&!e&&WC.has(g)){if("scroll"!==g)return;n|=2,t=C}var l=tn(t),a=g+"__"+(e?"capture":"bubble");l.has(a)||(e&&(n|=4),YC(t,g,n,e),l.add(a))}function YC(g,e,I,C){var n=Ye.get(e);switch(void 0===n?2:n){case 0:n=je;break;case 1:n=_e;break;default:n=qe}I=n.bind(null,e,I,g),n=void 0,!Mg||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(n=!0),C?void 0!==n?g.addEventListener(e,I,{capture:!0,passive:n}):g.addEventListener(e,I,!0):void 0!==n?g.addEventListener(e,I,{passive:n}):g.addEventListener(e,I,!1)}function HC(g,e,I,C,n){var t=C;if(0===(1&e)&&0===(2&e)&&null!==C)g:for(;;){if(null===C)return;var l=C.tag;if(3===l||4===l){var a=C.stateNode.containerInfo;if(a===n||8===a.nodeType&&a.parentNode===n)break;if(4===l)for(l=C.return;null!==l;){var o=l.tag;if((3===o||4===o)&&((o=l.stateNode.containerInfo)===n||8===o.nodeType&&o.parentNode===n))return;l=l.return}for(;null!==a;){if(null===(l=en(a)))return;if(5===(o=l.tag)||6===o){C=t=l;continue g}a=a.parentNode}}C=C.return}!function(g,e,I){if(Kg)return g(e,I);Kg=!0;try{Ng(g,e,I)}finally{Kg=!1,Eg()}}((function(){var C=t,n=Wg(I),l=[];g:{var a=Je.get(g);if(void 0!==a){var o=iI,c=g;switch(g){case"keypress":if(0===nI(I))break g;case"keydown":case"keyup":o=RI;break;case"focusin":c="focus",o=bI;break;case"focusout":c="blur",o=bI;break;case"beforeblur":case"afterblur":o=bI;break;case"click":if(2===I.button)break g;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=mI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=hI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=kI;break;case ve:case Re:case Xe:o=ZI;break;case ke:o=JI;break;case"scroll":o=dI;break;case"wheel":o=HI;break;case"copy":case"cut":case"paste":o=pI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=XI}var A=0!==(4&e),r=!A&&"scroll"===g,i=A?null!==a?a+"Capture":null:a;A=[];for(var s,d=C;null!==d;){var u=(s=d).stateNode;if(5===s.tag&&null!==u&&(s=u,null!==i&&(null!=(u=Tg(d,i))&&A.push(wC(d,u,s)))),r)break;d=d.return}0<A.length&&(a=new o(a,c,null,I,n),l.push({event:a,listeners:A}))}}if(0===(7&e)){if(o="mouseout"===g||"pointerout"===g,(!(a="mouseover"===g||"pointerover"===g)||0!==(16&e)||!(c=I.relatedTarget||I.fromElement)||!en(c)&&!c[$C])&&(o||a)&&(a=n.window===n?n:(a=n.ownerDocument)?a.defaultView||a.parentWindow:window,o?(o=C,null!==(c=(c=I.relatedTarget||I.toElement)?en(c):null)&&(c!==(r=jg(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=C),o!==c)){if(A=mI,u="onMouseLeave",i="onMouseEnter",d="mouse","pointerout"!==g&&"pointerover"!==g||(A=XI,u="onPointerLeave",i="onPointerEnter",d="pointer"),r=null==o?a:Cn(o),s=null==c?a:Cn(c),(a=new A(u,d+"leave",o,I,n)).target=r,a.relatedTarget=s,u=null,en(n)===C&&((A=new A(i,d+"enter",c,I,n)).target=s,A.relatedTarget=r,u=A),r=u,o&&c)g:{for(i=c,d=0,s=A=o;s;s=FC(s))d++;for(s=0,u=i;u;u=FC(u))s++;for(;0<d-s;)A=FC(A),d--;for(;0<s-d;)i=FC(i),s--;for(;d--;){if(A===i||null!==i&&A===i.alternate)break g;A=FC(A),i=FC(i)}A=null}else A=null;null!==o&&KC(l,a,o,A,!1),null!==c&&null!==r&&KC(l,r,c,A,!0)}if("select"===(o=(a=C?Cn(C):window).nodeName&&a.nodeName.toLowerCase())||"input"===o&&"file"===a.type)var m=qI;else if(zI(a))if($I)m=oC;else{m=lC;var h=tC}else(o=a.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=aC);switch(m&&(m=m(g,C))?QI(l,m,I,n):(h&&h(g,a,C),"focusout"===g&&(h=a._wrapperState)&&h.controlled&&"number"===a.type&&ng(a,"number",a.value)),h=C?Cn(C):window,g){case"focusin":(zI(h)||"true"===h.contentEditable)&&(bC=h,ZC=C,GC=null);break;case"focusout":GC=ZC=bC=null;break;case"mousedown":pC=!0;break;case"contextmenu":case"mouseup":case"dragend":pC=!1,BC(l,I,n);break;case"selectionchange":if(hC)break;case"keydown":case"keyup":BC(l,I,n)}var b;if(NI)g:{switch(g){case"compositionstart":var Z="onCompositionStart";break g;case"compositionend":Z="onCompositionEnd";break g;case"compositionupdate":Z="onCompositionUpdate";break g}Z=void 0}else DI?xI(g,I)&&(Z="onCompositionEnd"):"keydown"===g&&229===I.keyCode&&(Z="onCompositionStart");Z&&(EI&&"ko"!==I.locale&&(DI||"onCompositionStart"!==Z?"onCompositionEnd"===Z&&DI&&(b=CI()):(eI="value"in(gI=n)?gI.value:gI.textContent,DI=!0)),0<(h=NC(C,Z)).length&&(Z=new BI(Z,g,null,I,n),l.push({event:Z,listeners:h}),b?Z.data=b:null!==(b=UI(I))&&(Z.data=b))),(b=KI?function(g,e){switch(g){case"compositionend":return UI(e);case"keypress":return 32!==e.which?null:(MI=!0,TI);case"textInput":return(g=e.data)===TI&&MI?null:g;default:return null}}(g,I):function(g,e){if(DI)return"compositionend"===g||!NI&&xI(g,e)?(g=CI(),II=eI=gI=null,DI=!1,g):null;switch(g){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EI&&"ko"!==e.locale?null:e.data}}(g,I))&&(0<(C=NC(C,"onBeforeInput")).length&&(n=new BI("onBeforeInput","beforeinput",null,I,n),l.push({event:n,listeners:C}),n.data=b))}vC(l,e)}))}function wC(g,e,I){return{instance:g,listener:e,currentTarget:I}}function NC(g,e){for(var I=e+"Capture",C=[];null!==g;){var n=g,t=n.stateNode;5===n.tag&&null!==t&&(n=t,null!=(t=Tg(g,I))&&C.unshift(wC(g,t,n)),null!=(t=Tg(g,e))&&C.push(wC(g,t,n))),g=g.return}return C}function FC(g){if(null===g)return null;do{g=g.return}while(g&&5!==g.tag);return g||null}function KC(g,e,I,C,n){for(var t=e._reactName,l=[];null!==I&&I!==C;){var a=I,o=a.alternate,c=a.stateNode;if(null!==o&&o===C)break;5===a.tag&&null!==c&&(a=c,n?null!=(o=Tg(I,t))&&l.unshift(wC(I,o,a)):n||null!=(o=Tg(I,t))&&l.push(wC(I,o,a))),I=I.return}0!==l.length&&g.push({event:e,listeners:l})}function EC(){}var TC=null,MC=null;function xC(g,e){switch(g){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function UC(g,e){return"textarea"===g||"option"===g||"noscript"===g||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var DC="function"===typeof setTimeout?setTimeout:void 0,LC="function"===typeof clearTimeout?clearTimeout:void 0;function zC(g){1===g.nodeType?g.textContent="":9===g.nodeType&&(null!=(g=g.body)&&(g.textContent=""))}function QC(g){for(;null!=g;g=g.nextSibling){var e=g.nodeType;if(1===e||3===e)break}return g}function PC(g){g=g.previousSibling;for(var e=0;g;){if(8===g.nodeType){var I=g.data;if("$"===I||"$!"===I||"$?"===I){if(0===e)return g;e--}else"/$"===I&&e++}g=g.previousSibling}return null}var OC=0;var jC=Math.random().toString(36).slice(2),_C="__reactFiber$"+jC,qC="__reactProps$"+jC,$C="__reactContainer$"+jC,gn="__reactEvents$"+jC;function en(g){var e=g[_C];if(e)return e;for(var I=g.parentNode;I;){if(e=I[$C]||I[_C]){if(I=e.alternate,null!==e.child||null!==I&&null!==I.child)for(g=PC(g);null!==g;){if(I=g[_C])return I;g=PC(g)}return e}I=(g=I).parentNode}return null}function In(g){return!(g=g[_C]||g[$C])||5!==g.tag&&6!==g.tag&&13!==g.tag&&3!==g.tag?null:g}function Cn(g){if(5===g.tag||6===g.tag)return g.stateNode;throw Error(l(33))}function nn(g){return g[qC]||null}function tn(g){var e=g[gn];return void 0===e&&(e=g[gn]=new Set),e}var ln=[],an=-1;function on(g){return{current:g}}function cn(g){0>an||(g.current=ln[an],ln[an]=null,an--)}function An(g,e){an++,ln[an]=g.current,g.current=e}var rn={},sn=on(rn),dn=on(!1),un=rn;function mn(g,e){var I=g.type.contextTypes;if(!I)return rn;var C=g.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===e)return C.__reactInternalMemoizedMaskedChildContext;var n,t={};for(n in I)t[n]=e[n];return C&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,g.__reactInternalMemoizedMaskedChildContext=t),t}function hn(g){return null!==(g=g.childContextTypes)&&void 0!==g}function bn(){cn(dn),cn(sn)}function Zn(g,e,I){if(sn.current!==rn)throw Error(l(168));An(sn,e),An(dn,I)}function Gn(g,e,I){var C=g.stateNode;if(g=e.childContextTypes,"function"!==typeof C.getChildContext)return I;for(var t in C=C.getChildContext())if(!(t in g))throw Error(l(108,Q(e)||"Unknown",t));return n({},I,C)}function pn(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||rn,un=sn.current,An(sn,g),An(dn,dn.current),!0}function Bn(g,e,I){var C=g.stateNode;if(!C)throw Error(l(169));I?(g=Gn(g,e,un),C.__reactInternalMemoizedMergedChildContext=g,cn(dn),cn(sn),An(sn,g)):cn(dn),An(dn,I)}var yn=null,Sn=null,fn=t.unstable_runWithPriority,Wn=t.unstable_scheduleCallback,Vn=t.unstable_cancelCallback,vn=t.unstable_shouldYield,Rn=t.unstable_requestPaint,Xn=t.unstable_now,kn=t.unstable_getCurrentPriorityLevel,Jn=t.unstable_ImmediatePriority,Yn=t.unstable_UserBlockingPriority,Hn=t.unstable_NormalPriority,wn=t.unstable_LowPriority,Nn=t.unstable_IdlePriority,Fn={},Kn=void 0!==Rn?Rn:function(){},En=null,Tn=null,Mn=!1,xn=Xn(),Un=1e4>xn?Xn:function(){return Xn()-xn};function Dn(){switch(kn()){case Jn:return 99;case Yn:return 98;case Hn:return 97;case wn:return 96;case Nn:return 95;default:throw Error(l(332))}}function Ln(g){switch(g){case 99:return Jn;case 98:return Yn;case 97:return Hn;case 96:return wn;case 95:return Nn;default:throw Error(l(332))}}function zn(g,e){return g=Ln(g),fn(g,e)}function Qn(g,e,I){return g=Ln(g),Wn(g,e,I)}function Pn(){if(null!==Tn){var g=Tn;Tn=null,Vn(g)}On()}function On(){if(!Mn&&null!==En){Mn=!0;var g=0;try{var e=En;zn(99,(function(){for(;g<e.length;g++){var I=e[g];do{I=I(!0)}while(null!==I)}})),En=null}catch(I){throw null!==En&&(En=En.slice(g+1)),Wn(Jn,Pn),I}finally{Mn=!1}}}var jn=p.ReactCurrentBatchConfig;function _n(g,e){if(g&&g.defaultProps){for(var I in e=n({},e),g=g.defaultProps)void 0===e[I]&&(e[I]=g[I]);return e}return e}var qn=on(null),$n=null,gt=null,et=null;function It(){et=gt=$n=null}function Ct(g){var e=qn.current;cn(qn),g.type._context._currentValue=e}function nt(g,e){for(;null!==g;){var I=g.alternate;if((g.childLanes&e)===e){if(null===I||(I.childLanes&e)===e)break;I.childLanes|=e}else g.childLanes|=e,null!==I&&(I.childLanes|=e);g=g.return}}function tt(g,e){$n=g,et=gt=null,null!==(g=g.dependencies)&&null!==g.firstContext&&(0!==(g.lanes&e)&&(Nl=!0),g.firstContext=null)}function lt(g,e){if(et!==g&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(et=g,e=1073741823),e={context:g,observedBits:e,next:null},null===gt){if(null===$n)throw Error(l(308));gt=e,$n.dependencies={lanes:0,firstContext:e,responders:null}}else gt=gt.next=e;return g._currentValue}var at=!1;function ot(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ct(g,e){g=g.updateQueue,e.updateQueue===g&&(e.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function At(g,e){return{eventTime:g,lane:e,tag:0,payload:null,callback:null,next:null}}function rt(g,e){if(null!==(g=g.updateQueue)){var I=(g=g.shared).pending;null===I?e.next=e:(e.next=I.next,I.next=e),g.pending=e}}function it(g,e){var I=g.updateQueue,C=g.alternate;if(null!==C&&I===(C=C.updateQueue)){var n=null,t=null;if(null!==(I=I.firstBaseUpdate)){do{var l={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};null===t?n=t=l:t=t.next=l,I=I.next}while(null!==I);null===t?n=t=e:t=t.next=e}else n=t=e;return I={baseState:C.baseState,firstBaseUpdate:n,lastBaseUpdate:t,shared:C.shared,effects:C.effects},void(g.updateQueue=I)}null===(g=I.lastBaseUpdate)?I.firstBaseUpdate=e:g.next=e,I.lastBaseUpdate=e}function st(g,e,I,C){var t=g.updateQueue;at=!1;var l=t.firstBaseUpdate,a=t.lastBaseUpdate,o=t.shared.pending;if(null!==o){t.shared.pending=null;var c=o,A=c.next;c.next=null,null===a?l=A:a.next=A,a=c;var r=g.alternate;if(null!==r){var i=(r=r.updateQueue).lastBaseUpdate;i!==a&&(null===i?r.firstBaseUpdate=A:i.next=A,r.lastBaseUpdate=c)}}if(null!==l){for(i=t.baseState,a=0,r=A=c=null;;){o=l.lane;var s=l.eventTime;if((C&o)===o){null!==r&&(r=r.next={eventTime:s,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});g:{var d=g,u=l;switch(o=e,s=I,u.tag){case 1:if("function"===typeof(d=u.payload)){i=d.call(s,i,o);break g}i=d;break g;case 3:d.flags=-4097&d.flags|64;case 0:if(null===(o="function"===typeof(d=u.payload)?d.call(s,i,o):d)||void 0===o)break g;i=n({},i,o);break g;case 2:at=!0}}null!==l.callback&&(g.flags|=32,null===(o=t.effects)?t.effects=[l]:o.push(l))}else s={eventTime:s,lane:o,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===r?(A=r=s,c=i):r=r.next=s,a|=o;if(null===(l=l.next)){if(null===(o=t.shared.pending))break;l=o.next,o.next=null,t.lastBaseUpdate=o,t.shared.pending=null}}null===r&&(c=i),t.baseState=c,t.firstBaseUpdate=A,t.lastBaseUpdate=r,Ta|=a,g.lanes=a,g.memoizedState=i}}function dt(g,e,I){if(g=e.effects,e.effects=null,null!==g)for(e=0;e<g.length;e++){var C=g[e],n=C.callback;if(null!==n){if(C.callback=null,C=I,"function"!==typeof n)throw Error(l(191,n));n.call(C)}}}var ut=(new C.Component).refs;function mt(g,e,I,C){I=null===(I=I(C,e=g.memoizedState))||void 0===I?e:n({},e,I),g.memoizedState=I,0===g.lanes&&(g.updateQueue.baseState=I)}var ht={isMounted:function(g){return!!(g=g._reactInternals)&&jg(g)===g},enqueueSetState:function(g,e,I){g=g._reactInternals;var C=ro(),n=io(g),t=At(C,n);t.payload=e,void 0!==I&&null!==I&&(t.callback=I),rt(g,t),so(g,n,C)},enqueueReplaceState:function(g,e,I){g=g._reactInternals;var C=ro(),n=io(g),t=At(C,n);t.tag=1,t.payload=e,void 0!==I&&null!==I&&(t.callback=I),rt(g,t),so(g,n,C)},enqueueForceUpdate:function(g,e){g=g._reactInternals;var I=ro(),C=io(g),n=At(I,C);n.tag=2,void 0!==e&&null!==e&&(n.callback=e),rt(g,n),so(g,C,I)}};function bt(g,e,I,C,n,t,l){return"function"===typeof(g=g.stateNode).shouldComponentUpdate?g.shouldComponentUpdate(C,t,l):!e.prototype||!e.prototype.isPureReactComponent||(!rC(I,C)||!rC(n,t))}function Zt(g,e,I){var C=!1,n=rn,t=e.contextType;return"object"===typeof t&&null!==t?t=lt(t):(n=hn(e)?un:sn.current,t=(C=null!==(C=e.contextTypes)&&void 0!==C)?mn(g,n):rn),e=new e(I,t),g.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ht,g.stateNode=e,e._reactInternals=g,C&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,g.__reactInternalMemoizedMaskedChildContext=t),e}function Gt(g,e,I,C){g=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(I,C),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(I,C),e.state!==g&&ht.enqueueReplaceState(e,e.state,null)}function pt(g,e,I,C){var n=g.stateNode;n.props=I,n.state=g.memoizedState,n.refs=ut,ot(g);var t=e.contextType;"object"===typeof t&&null!==t?n.context=lt(t):(t=hn(e)?un:sn.current,n.context=mn(g,t)),st(g,I,n,C),n.state=g.memoizedState,"function"===typeof(t=e.getDerivedStateFromProps)&&(mt(g,e,t,I),n.state=g.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(e=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),e!==n.state&&ht.enqueueReplaceState(n,n.state,null),st(g,I,n,C),n.state=g.memoizedState),"function"===typeof n.componentDidMount&&(g.flags|=4)}var Bt=Array.isArray;function yt(g,e,I){if(null!==(g=I.ref)&&"function"!==typeof g&&"object"!==typeof g){if(I._owner){if(I=I._owner){if(1!==I.tag)throw Error(l(309));var C=I.stateNode}if(!C)throw Error(l(147,g));var n=""+g;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===n?e.ref:(e=function(g){var e=C.refs;e===ut&&(e=C.refs={}),null===g?delete e[n]:e[n]=g},e._stringRef=n,e)}if("string"!==typeof g)throw Error(l(284));if(!I._owner)throw Error(l(290,g))}return g}function St(g,e){if("textarea"!==g.type)throw Error(l(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function ft(g){function e(e,I){if(g){var C=e.lastEffect;null!==C?(C.nextEffect=I,e.lastEffect=I):e.firstEffect=e.lastEffect=I,I.nextEffect=null,I.flags=8}}function I(I,C){if(!g)return null;for(;null!==C;)e(I,C),C=C.sibling;return null}function C(g,e){for(g=new Map;null!==e;)null!==e.key?g.set(e.key,e):g.set(e.index,e),e=e.sibling;return g}function n(g,e){return(g=zo(g,e)).index=0,g.sibling=null,g}function t(e,I,C){return e.index=C,g?null!==(C=e.alternate)?(C=C.index)<I?(e.flags=2,I):C:(e.flags=2,I):I}function a(e){return g&&null===e.alternate&&(e.flags=2),e}function o(g,e,I,C){return null===e||6!==e.tag?((e=jo(I,g.mode,C)).return=g,e):((e=n(e,I)).return=g,e)}function c(g,e,I,C){return null!==e&&e.elementType===I.type?((C=n(e,I.props)).ref=yt(g,e,I),C.return=g,C):((C=Qo(I.type,I.key,I.props,null,g.mode,C)).ref=yt(g,e,I),C.return=g,C)}function A(g,e,I,C){return null===e||4!==e.tag||e.stateNode.containerInfo!==I.containerInfo||e.stateNode.implementation!==I.implementation?((e=_o(I,g.mode,C)).return=g,e):((e=n(e,I.children||[])).return=g,e)}function r(g,e,I,C,t){return null===e||7!==e.tag?((e=Po(I,g.mode,C,t)).return=g,e):((e=n(e,I)).return=g,e)}function i(g,e,I){if("string"===typeof e||"number"===typeof e)return(e=jo(""+e,g.mode,I)).return=g,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case B:return(I=Qo(e.type,e.key,e.props,null,g.mode,I)).ref=yt(g,null,e),I.return=g,I;case y:return(e=_o(e,g.mode,I)).return=g,e}if(Bt(e)||x(e))return(e=Po(e,g.mode,I,null)).return=g,e;St(g,e)}return null}function s(g,e,I,C){var n=null!==e?e.key:null;if("string"===typeof I||"number"===typeof I)return null!==n?null:o(g,e,""+I,C);if("object"===typeof I&&null!==I){switch(I.$$typeof){case B:return I.key===n?I.type===S?r(g,e,I.props.children,C,n):c(g,e,I,C):null;case y:return I.key===n?A(g,e,I,C):null}if(Bt(I)||x(I))return null!==n?null:r(g,e,I,C,null);St(g,I)}return null}function d(g,e,I,C,n){if("string"===typeof C||"number"===typeof C)return o(e,g=g.get(I)||null,""+C,n);if("object"===typeof C&&null!==C){switch(C.$$typeof){case B:return g=g.get(null===C.key?I:C.key)||null,C.type===S?r(e,g,C.props.children,n,C.key):c(e,g,C,n);case y:return A(e,g=g.get(null===C.key?I:C.key)||null,C,n)}if(Bt(C)||x(C))return r(e,g=g.get(I)||null,C,n,null);St(e,C)}return null}function u(n,l,a,o){for(var c=null,A=null,r=l,u=l=0,m=null;null!==r&&u<a.length;u++){r.index>u?(m=r,r=null):m=r.sibling;var h=s(n,r,a[u],o);if(null===h){null===r&&(r=m);break}g&&r&&null===h.alternate&&e(n,r),l=t(h,l,u),null===A?c=h:A.sibling=h,A=h,r=m}if(u===a.length)return I(n,r),c;if(null===r){for(;u<a.length;u++)null!==(r=i(n,a[u],o))&&(l=t(r,l,u),null===A?c=r:A.sibling=r,A=r);return c}for(r=C(n,r);u<a.length;u++)null!==(m=d(r,n,u,a[u],o))&&(g&&null!==m.alternate&&r.delete(null===m.key?u:m.key),l=t(m,l,u),null===A?c=m:A.sibling=m,A=m);return g&&r.forEach((function(g){return e(n,g)})),c}function m(n,a,o,c){var A=x(o);if("function"!==typeof A)throw Error(l(150));if(null==(o=A.call(o)))throw Error(l(151));for(var r=A=null,u=a,m=a=0,h=null,b=o.next();null!==u&&!b.done;m++,b=o.next()){u.index>m?(h=u,u=null):h=u.sibling;var Z=s(n,u,b.value,c);if(null===Z){null===u&&(u=h);break}g&&u&&null===Z.alternate&&e(n,u),a=t(Z,a,m),null===r?A=Z:r.sibling=Z,r=Z,u=h}if(b.done)return I(n,u),A;if(null===u){for(;!b.done;m++,b=o.next())null!==(b=i(n,b.value,c))&&(a=t(b,a,m),null===r?A=b:r.sibling=b,r=b);return A}for(u=C(n,u);!b.done;m++,b=o.next())null!==(b=d(u,n,m,b.value,c))&&(g&&null!==b.alternate&&u.delete(null===b.key?m:b.key),a=t(b,a,m),null===r?A=b:r.sibling=b,r=b);return g&&u.forEach((function(g){return e(n,g)})),A}return function(g,C,t,o){var c="object"===typeof t&&null!==t&&t.type===S&&null===t.key;c&&(t=t.props.children);var A="object"===typeof t&&null!==t;if(A)switch(t.$$typeof){case B:g:{for(A=t.key,c=C;null!==c;){if(c.key===A){if(7===c.tag){if(t.type===S){I(g,c.sibling),(C=n(c,t.props.children)).return=g,g=C;break g}}else if(c.elementType===t.type){I(g,c.sibling),(C=n(c,t.props)).ref=yt(g,c,t),C.return=g,g=C;break g}I(g,c);break}e(g,c),c=c.sibling}t.type===S?((C=Po(t.props.children,g.mode,o,t.key)).return=g,g=C):((o=Qo(t.type,t.key,t.props,null,g.mode,o)).ref=yt(g,C,t),o.return=g,g=o)}return a(g);case y:g:{for(c=t.key;null!==C;){if(C.key===c){if(4===C.tag&&C.stateNode.containerInfo===t.containerInfo&&C.stateNode.implementation===t.implementation){I(g,C.sibling),(C=n(C,t.children||[])).return=g,g=C;break g}I(g,C);break}e(g,C),C=C.sibling}(C=_o(t,g.mode,o)).return=g,g=C}return a(g)}if("string"===typeof t||"number"===typeof t)return t=""+t,null!==C&&6===C.tag?(I(g,C.sibling),(C=n(C,t)).return=g,g=C):(I(g,C),(C=jo(t,g.mode,o)).return=g,g=C),a(g);if(Bt(t))return u(g,C,t,o);if(x(t))return m(g,C,t,o);if(A&&St(g,t),"undefined"===typeof t&&!c)switch(g.tag){case 1:case 22:case 0:case 11:case 15:throw Error(l(152,Q(g.type)||"Component"))}return I(g,C)}}var Wt=ft(!0),Vt=ft(!1),vt={},Rt=on(vt),Xt=on(vt),kt=on(vt);function Jt(g){if(g===vt)throw Error(l(174));return g}function Yt(g,e){switch(An(kt,e),An(Xt,g),An(Rt,vt),g=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dg(null,"");break;default:e=dg(e=(g=8===g?e.parentNode:e).namespaceURI||null,g=g.tagName)}cn(Rt),An(Rt,e)}function Ht(){cn(Rt),cn(Xt),cn(kt)}function wt(g){Jt(kt.current);var e=Jt(Rt.current),I=dg(e,g.type);e!==I&&(An(Xt,g),An(Rt,I))}function Nt(g){Xt.current===g&&(cn(Rt),cn(Xt))}var Ft=on(0);function Kt(g){for(var e=g;null!==e;){if(13===e.tag){var I=e.memoizedState;if(null!==I&&(null===(I=I.dehydrated)||"$?"===I.data||"$!"===I.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===g)break;for(;null===e.sibling;){if(null===e.return||e.return===g)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Et=null,Tt=null,Mt=!1;function xt(g,e){var I=Do(5,null,null,0);I.elementType="DELETED",I.type="DELETED",I.stateNode=e,I.return=g,I.flags=8,null!==g.lastEffect?(g.lastEffect.nextEffect=I,g.lastEffect=I):g.firstEffect=g.lastEffect=I}function Ut(g,e){switch(g.tag){case 5:var I=g.type;return null!==(e=1!==e.nodeType||I.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(g.stateNode=e,!0);case 6:return null!==(e=""===g.pendingProps||3!==e.nodeType?null:e)&&(g.stateNode=e,!0);default:return!1}}function Dt(g){if(Mt){var e=Tt;if(e){var I=e;if(!Ut(g,e)){if(!(e=QC(I.nextSibling))||!Ut(g,e))return g.flags=-1025&g.flags|2,Mt=!1,void(Et=g);xt(Et,I)}Et=g,Tt=QC(e.firstChild)}else g.flags=-1025&g.flags|2,Mt=!1,Et=g}}function Lt(g){for(g=g.return;null!==g&&5!==g.tag&&3!==g.tag&&13!==g.tag;)g=g.return;Et=g}function zt(g){if(g!==Et)return!1;if(!Mt)return Lt(g),Mt=!0,!1;var e=g.type;if(5!==g.tag||"head"!==e&&"body"!==e&&!UC(e,g.memoizedProps))for(e=Tt;e;)xt(g,e),e=QC(e.nextSibling);if(Lt(g),13===g.tag){if(!(g=null!==(g=g.memoizedState)?g.dehydrated:null))throw Error(l(317));g:{for(g=g.nextSibling,e=0;g;){if(8===g.nodeType){var I=g.data;if("/$"===I){if(0===e){Tt=QC(g.nextSibling);break g}e--}else"$"!==I&&"$!"!==I&&"$?"!==I||e++}g=g.nextSibling}Tt=null}}else Tt=Et?QC(g.stateNode.nextSibling):null;return!0}function Qt(){Tt=Et=null,Mt=!1}var Pt=[];function Ot(){for(var g=0;g<Pt.length;g++)Pt[g]._workInProgressVersionPrimary=null;Pt.length=0}var jt=p.ReactCurrentDispatcher,_t=p.ReactCurrentBatchConfig,qt=0,$t=null,gl=null,el=null,Il=!1,Cl=!1;function nl(){throw Error(l(321))}function tl(g,e){if(null===e)return!1;for(var I=0;I<e.length&&I<g.length;I++)if(!cC(g[I],e[I]))return!1;return!0}function ll(g,e,I,C,n,t){if(qt=t,$t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jt.current=null===g||null===g.memoizedState?Jl:Yl,g=I(C,n),Cl){t=0;do{if(Cl=!1,!(25>t))throw Error(l(301));t+=1,el=gl=null,e.updateQueue=null,jt.current=Hl,g=I(C,n)}while(Cl)}if(jt.current=kl,e=null!==gl&&null!==gl.next,qt=0,el=gl=$t=null,Il=!1,e)throw Error(l(300));return g}function al(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===el?$t.memoizedState=el=g:el=el.next=g,el}function ol(){if(null===gl){var g=$t.alternate;g=null!==g?g.memoizedState:null}else g=gl.next;var e=null===el?$t.memoizedState:el.next;if(null!==e)el=e,gl=g;else{if(null===g)throw Error(l(310));g={memoizedState:(gl=g).memoizedState,baseState:gl.baseState,baseQueue:gl.baseQueue,queue:gl.queue,next:null},null===el?$t.memoizedState=el=g:el=el.next=g}return el}function cl(g,e){return"function"===typeof e?e(g):e}function Al(g){var e=ol(),I=e.queue;if(null===I)throw Error(l(311));I.lastRenderedReducer=g;var C=gl,n=C.baseQueue,t=I.pending;if(null!==t){if(null!==n){var a=n.next;n.next=t.next,t.next=a}C.baseQueue=n=t,I.pending=null}if(null!==n){n=n.next,C=C.baseState;var o=a=t=null,c=n;do{var A=c.lane;if((qt&A)===A)null!==o&&(o=o.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),C=c.eagerReducer===g?c.eagerState:g(C,c.action);else{var r={lane:A,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===o?(a=o=r,t=C):o=o.next=r,$t.lanes|=A,Ta|=A}c=c.next}while(null!==c&&c!==n);null===o?t=C:o.next=a,cC(C,e.memoizedState)||(Nl=!0),e.memoizedState=C,e.baseState=t,e.baseQueue=o,I.lastRenderedState=C}return[e.memoizedState,I.dispatch]}function rl(g){var e=ol(),I=e.queue;if(null===I)throw Error(l(311));I.lastRenderedReducer=g;var C=I.dispatch,n=I.pending,t=e.memoizedState;if(null!==n){I.pending=null;var a=n=n.next;do{t=g(t,a.action),a=a.next}while(a!==n);cC(t,e.memoizedState)||(Nl=!0),e.memoizedState=t,null===e.baseQueue&&(e.baseState=t),I.lastRenderedState=t}return[t,C]}function il(g,e,I){var C=e._getVersion;C=C(e._source);var n=e._workInProgressVersionPrimary;if(null!==n?g=n===C:(g=g.mutableReadLanes,(g=(qt&g)===g)&&(e._workInProgressVersionPrimary=C,Pt.push(e))),g)return I(e._source);throw Pt.push(e),Error(l(350))}function sl(g,e,I,C){var n=Ja;if(null===n)throw Error(l(349));var t=e._getVersion,a=t(e._source),o=jt.current,c=o.useState((function(){return il(n,e,I)})),A=c[1],r=c[0];c=el;var i=g.memoizedState,s=i.refs,d=s.getSnapshot,u=i.source;i=i.subscribe;var m=$t;return g.memoizedState={refs:s,source:e,subscribe:C},o.useEffect((function(){s.getSnapshot=I,s.setSnapshot=A;var g=t(e._source);if(!cC(a,g)){g=I(e._source),cC(r,g)||(A(g),g=io(m),n.mutableReadLanes|=g&n.pendingLanes),g=n.mutableReadLanes,n.entangledLanes|=g;for(var C=n.entanglements,l=g;0<l;){var o=31-De(l),c=1<<o;C[o]|=g,l&=~c}}}),[I,e,C]),o.useEffect((function(){return C(e._source,(function(){var g=s.getSnapshot,I=s.setSnapshot;try{I(g(e._source));var C=io(m);n.mutableReadLanes|=C&n.pendingLanes}catch(t){I((function(){throw t}))}}))}),[e,C]),cC(d,I)&&cC(u,e)&&cC(i,C)||((g={pending:null,dispatch:null,lastRenderedReducer:cl,lastRenderedState:r}).dispatch=A=Xl.bind(null,$t,g),c.queue=g,c.baseQueue=null,r=il(n,e,I),c.memoizedState=c.baseState=r),r}function dl(g,e,I){return sl(ol(),g,e,I)}function ul(g){var e=al();return"function"===typeof g&&(g=g()),e.memoizedState=e.baseState=g,g=(g=e.queue={pending:null,dispatch:null,lastRenderedReducer:cl,lastRenderedState:g}).dispatch=Xl.bind(null,$t,g),[e.memoizedState,g]}function ml(g,e,I,C){return g={tag:g,create:e,destroy:I,deps:C,next:null},null===(e=$t.updateQueue)?(e={lastEffect:null},$t.updateQueue=e,e.lastEffect=g.next=g):null===(I=e.lastEffect)?e.lastEffect=g.next=g:(C=I.next,I.next=g,g.next=C,e.lastEffect=g),g}function hl(g){return g={current:g},al().memoizedState=g}function bl(){return ol().memoizedState}function Zl(g,e,I,C){var n=al();$t.flags|=g,n.memoizedState=ml(1|e,I,void 0,void 0===C?null:C)}function Gl(g,e,I,C){var n=ol();C=void 0===C?null:C;var t=void 0;if(null!==gl){var l=gl.memoizedState;if(t=l.destroy,null!==C&&tl(C,l.deps))return void ml(e,I,t,C)}$t.flags|=g,n.memoizedState=ml(1|e,I,t,C)}function pl(g,e){return Zl(516,4,g,e)}function Bl(g,e){return Gl(516,4,g,e)}function yl(g,e){return Gl(4,2,g,e)}function Sl(g,e){return"function"===typeof e?(g=g(),e(g),function(){e(null)}):null!==e&&void 0!==e?(g=g(),e.current=g,function(){e.current=null}):void 0}function fl(g,e,I){return I=null!==I&&void 0!==I?I.concat([g]):null,Gl(4,2,Sl.bind(null,e,g),I)}function Wl(){}function Vl(g,e){var I=ol();e=void 0===e?null:e;var C=I.memoizedState;return null!==C&&null!==e&&tl(e,C[1])?C[0]:(I.memoizedState=[g,e],g)}function vl(g,e){var I=ol();e=void 0===e?null:e;var C=I.memoizedState;return null!==C&&null!==e&&tl(e,C[1])?C[0]:(g=g(),I.memoizedState=[g,e],g)}function Rl(g,e){var I=Dn();zn(98>I?98:I,(function(){g(!0)})),zn(97<I?97:I,(function(){var I=_t.transition;_t.transition=1;try{g(!1),e()}finally{_t.transition=I}}))}function Xl(g,e,I){var C=ro(),n=io(g),t={lane:n,action:I,eagerReducer:null,eagerState:null,next:null},l=e.pending;if(null===l?t.next=t:(t.next=l.next,l.next=t),e.pending=t,l=g.alternate,g===$t||null!==l&&l===$t)Cl=Il=!0;else{if(0===g.lanes&&(null===l||0===l.lanes)&&null!==(l=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=l(a,I);if(t.eagerReducer=l,t.eagerState=o,cC(o,a))return}catch(c){}so(g,n,C)}}var kl={readContext:lt,useCallback:nl,useContext:nl,useEffect:nl,useImperativeHandle:nl,useLayoutEffect:nl,useMemo:nl,useReducer:nl,useRef:nl,useState:nl,useDebugValue:nl,useDeferredValue:nl,useTransition:nl,useMutableSource:nl,useOpaqueIdentifier:nl,unstable_isNewReconciler:!1},Jl={readContext:lt,useCallback:function(g,e){return al().memoizedState=[g,void 0===e?null:e],g},useContext:lt,useEffect:pl,useImperativeHandle:function(g,e,I){return I=null!==I&&void 0!==I?I.concat([g]):null,Zl(4,2,Sl.bind(null,e,g),I)},useLayoutEffect:function(g,e){return Zl(4,2,g,e)},useMemo:function(g,e){var I=al();return e=void 0===e?null:e,g=g(),I.memoizedState=[g,e],g},useReducer:function(g,e,I){var C=al();return e=void 0!==I?I(e):e,C.memoizedState=C.baseState=e,g=(g=C.queue={pending:null,dispatch:null,lastRenderedReducer:g,lastRenderedState:e}).dispatch=Xl.bind(null,$t,g),[C.memoizedState,g]},useRef:hl,useState:ul,useDebugValue:Wl,useDeferredValue:function(g){var e=ul(g),I=e[0],C=e[1];return pl((function(){var e=_t.transition;_t.transition=1;try{C(g)}finally{_t.transition=e}}),[g]),I},useTransition:function(){var g=ul(!1),e=g[0];return hl(g=Rl.bind(null,g[1])),[g,e]},useMutableSource:function(g,e,I){var C=al();return C.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:g,subscribe:I},sl(C,g,e,I)},useOpaqueIdentifier:function(){if(Mt){var g=!1,e=function(g){return{$$typeof:w,toString:g,valueOf:g}}((function(){throw g||(g=!0,I("r:"+(OC++).toString(36))),Error(l(355))})),I=ul(e)[1];return 0===(2&$t.mode)&&($t.flags|=516,ml(5,(function(){I("r:"+(OC++).toString(36))}),void 0,null)),e}return ul(e="r:"+(OC++).toString(36)),e},unstable_isNewReconciler:!1},Yl={readContext:lt,useCallback:Vl,useContext:lt,useEffect:Bl,useImperativeHandle:fl,useLayoutEffect:yl,useMemo:vl,useReducer:Al,useRef:bl,useState:function(){return Al(cl)},useDebugValue:Wl,useDeferredValue:function(g){var e=Al(cl),I=e[0],C=e[1];return Bl((function(){var e=_t.transition;_t.transition=1;try{C(g)}finally{_t.transition=e}}),[g]),I},useTransition:function(){var g=Al(cl)[0];return[bl().current,g]},useMutableSource:dl,useOpaqueIdentifier:function(){return Al(cl)[0]},unstable_isNewReconciler:!1},Hl={readContext:lt,useCallback:Vl,useContext:lt,useEffect:Bl,useImperativeHandle:fl,useLayoutEffect:yl,useMemo:vl,useReducer:rl,useRef:bl,useState:function(){return rl(cl)},useDebugValue:Wl,useDeferredValue:function(g){var e=rl(cl),I=e[0],C=e[1];return Bl((function(){var e=_t.transition;_t.transition=1;try{C(g)}finally{_t.transition=e}}),[g]),I},useTransition:function(){var g=rl(cl)[0];return[bl().current,g]},useMutableSource:dl,useOpaqueIdentifier:function(){return rl(cl)[0]},unstable_isNewReconciler:!1},wl=p.ReactCurrentOwner,Nl=!1;function Fl(g,e,I,C){e.child=null===g?Vt(e,null,I,C):Wt(e,g.child,I,C)}function Kl(g,e,I,C,n){I=I.render;var t=e.ref;return tt(e,n),C=ll(g,e,I,C,t,n),null===g||Nl?(e.flags|=1,Fl(g,e,C,n),e.child):(e.updateQueue=g.updateQueue,e.flags&=-517,g.lanes&=~n,na(g,e,n))}function El(g,e,I,C,n,t){if(null===g){var l=I.type;return"function"!==typeof l||Lo(l)||void 0!==l.defaultProps||null!==I.compare||void 0!==I.defaultProps?((g=Qo(I.type,null,C,e,e.mode,t)).ref=e.ref,g.return=e,e.child=g):(e.tag=15,e.type=l,Tl(g,e,l,C,n,t))}return l=g.child,0===(n&t)&&(n=l.memoizedProps,(I=null!==(I=I.compare)?I:rC)(n,C)&&g.ref===e.ref)?na(g,e,t):(e.flags|=1,(g=zo(l,C)).ref=e.ref,g.return=e,e.child=g)}function Tl(g,e,I,C,n,t){if(null!==g&&rC(g.memoizedProps,C)&&g.ref===e.ref){if(Nl=!1,0===(t&n))return e.lanes=g.lanes,na(g,e,t);0!==(16384&g.flags)&&(Nl=!0)}return Ul(g,e,I,C,t)}function Ml(g,e,I){var C=e.pendingProps,n=C.children,t=null!==g?g.memoizedState:null;if("hidden"===C.mode||"unstable-defer-without-hiding"===C.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},Bo(e,I);else{if(0===(1073741824&I))return g=null!==t?t.baseLanes|I:I,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:g},Bo(e,g),null;e.memoizedState={baseLanes:0},Bo(e,null!==t?t.baseLanes:I)}else null!==t?(C=t.baseLanes|I,e.memoizedState=null):C=I,Bo(e,C);return Fl(g,e,n,I),e.child}function xl(g,e){var I=e.ref;(null===g&&null!==I||null!==g&&g.ref!==I)&&(e.flags|=128)}function Ul(g,e,I,C,n){var t=hn(I)?un:sn.current;return t=mn(e,t),tt(e,n),I=ll(g,e,I,C,t,n),null===g||Nl?(e.flags|=1,Fl(g,e,I,n),e.child):(e.updateQueue=g.updateQueue,e.flags&=-517,g.lanes&=~n,na(g,e,n))}function Dl(g,e,I,C,n){if(hn(I)){var t=!0;pn(e)}else t=!1;if(tt(e,n),null===e.stateNode)null!==g&&(g.alternate=null,e.alternate=null,e.flags|=2),Zt(e,I,C),pt(e,I,C,n),C=!0;else if(null===g){var l=e.stateNode,a=e.memoizedProps;l.props=a;var o=l.context,c=I.contextType;"object"===typeof c&&null!==c?c=lt(c):c=mn(e,c=hn(I)?un:sn.current);var A=I.getDerivedStateFromProps,r="function"===typeof A||"function"===typeof l.getSnapshotBeforeUpdate;r||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(a!==C||o!==c)&&Gt(e,l,C,c),at=!1;var i=e.memoizedState;l.state=i,st(e,C,l,n),o=e.memoizedState,a!==C||i!==o||dn.current||at?("function"===typeof A&&(mt(e,I,A,C),o=e.memoizedState),(a=at||bt(e,I,a,C,i,o,c))?(r||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(e.flags|=4)):("function"===typeof l.componentDidMount&&(e.flags|=4),e.memoizedProps=C,e.memoizedState=o),l.props=C,l.state=o,l.context=c,C=a):("function"===typeof l.componentDidMount&&(e.flags|=4),C=!1)}else{l=e.stateNode,ct(g,e),a=e.memoizedProps,c=e.type===e.elementType?a:_n(e.type,a),l.props=c,r=e.pendingProps,i=l.context,"object"===typeof(o=I.contextType)&&null!==o?o=lt(o):o=mn(e,o=hn(I)?un:sn.current);var s=I.getDerivedStateFromProps;(A="function"===typeof s||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(a!==r||i!==o)&&Gt(e,l,C,o),at=!1,i=e.memoizedState,l.state=i,st(e,C,l,n);var d=e.memoizedState;a!==r||i!==d||dn.current||at?("function"===typeof s&&(mt(e,I,s,C),d=e.memoizedState),(c=at||bt(e,I,c,C,i,d,o))?(A||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(C,d,o),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(C,d,o)),"function"===typeof l.componentDidUpdate&&(e.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof l.componentDidUpdate||a===g.memoizedProps&&i===g.memoizedState||(e.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||a===g.memoizedProps&&i===g.memoizedState||(e.flags|=256),e.memoizedProps=C,e.memoizedState=d),l.props=C,l.state=d,l.context=o,C=c):("function"!==typeof l.componentDidUpdate||a===g.memoizedProps&&i===g.memoizedState||(e.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||a===g.memoizedProps&&i===g.memoizedState||(e.flags|=256),C=!1)}return Ll(g,e,I,C,t,n)}function Ll(g,e,I,C,n,t){xl(g,e);var l=0!==(64&e.flags);if(!C&&!l)return n&&Bn(e,I,!1),na(g,e,t);C=e.stateNode,wl.current=e;var a=l&&"function"!==typeof I.getDerivedStateFromError?null:C.render();return e.flags|=1,null!==g&&l?(e.child=Wt(e,g.child,null,t),e.child=Wt(e,null,a,t)):Fl(g,e,a,t),e.memoizedState=C.state,n&&Bn(e,I,!0),e.child}function zl(g){var e=g.stateNode;e.pendingContext?Zn(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Zn(0,e.context,!1),Yt(g,e.containerInfo)}var Ql,Pl,Ol,jl={dehydrated:null,retryLane:0};function _l(g,e,I){var C,n=e.pendingProps,t=Ft.current,l=!1;return(C=0!==(64&e.flags))||(C=(null===g||null!==g.memoizedState)&&0!==(2&t)),C?(l=!0,e.flags&=-65):null!==g&&null===g.memoizedState||void 0===n.fallback||!0===n.unstable_avoidThisFallback||(t|=1),An(Ft,1&t),null===g?(void 0!==n.fallback&&Dt(e),g=n.children,t=n.fallback,l?(g=ql(e,g,t,I),e.child.memoizedState={baseLanes:I},e.memoizedState=jl,g):"number"===typeof n.unstable_expectedLoadTime?(g=ql(e,g,t,I),e.child.memoizedState={baseLanes:I},e.memoizedState=jl,e.lanes=33554432,g):((I=Oo({mode:"visible",children:g},e.mode,I,null)).return=e,e.child=I)):(g.memoizedState,l?(n=ga(g,e,n.children,n.fallback,I),l=e.child,t=g.child.memoizedState,l.memoizedState=null===t?{baseLanes:I}:{baseLanes:t.baseLanes|I},l.childLanes=g.childLanes&~I,e.memoizedState=jl,n):(I=$l(g,e,n.children,I),e.memoizedState=null,I))}function ql(g,e,I,C){var n=g.mode,t=g.child;return e={mode:"hidden",children:e},0===(2&n)&&null!==t?(t.childLanes=0,t.pendingProps=e):t=Oo(e,n,0,null),I=Po(I,n,C,null),t.return=g,I.return=g,t.sibling=I,g.child=t,I}function $l(g,e,I,C){var n=g.child;return g=n.sibling,I=zo(n,{mode:"visible",children:I}),0===(2&e.mode)&&(I.lanes=C),I.return=e,I.sibling=null,null!==g&&(g.nextEffect=null,g.flags=8,e.firstEffect=e.lastEffect=g),e.child=I}function ga(g,e,I,C,n){var t=e.mode,l=g.child;g=l.sibling;var a={mode:"hidden",children:I};return 0===(2&t)&&e.child!==l?((I=e.child).childLanes=0,I.pendingProps=a,null!==(l=I.lastEffect)?(e.firstEffect=I.firstEffect,e.lastEffect=l,l.nextEffect=null):e.firstEffect=e.lastEffect=null):I=zo(l,a),null!==g?C=zo(g,C):(C=Po(C,t,n,null)).flags|=2,C.return=e,I.return=e,I.sibling=C,e.child=I,C}function ea(g,e){g.lanes|=e;var I=g.alternate;null!==I&&(I.lanes|=e),nt(g.return,e)}function Ia(g,e,I,C,n,t){var l=g.memoizedState;null===l?g.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:C,tail:I,tailMode:n,lastEffect:t}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=C,l.tail=I,l.tailMode=n,l.lastEffect=t)}function Ca(g,e,I){var C=e.pendingProps,n=C.revealOrder,t=C.tail;if(Fl(g,e,C.children,I),0!==(2&(C=Ft.current)))C=1&C|2,e.flags|=64;else{if(null!==g&&0!==(64&g.flags))g:for(g=e.child;null!==g;){if(13===g.tag)null!==g.memoizedState&&ea(g,I);else if(19===g.tag)ea(g,I);else if(null!==g.child){g.child.return=g,g=g.child;continue}if(g===e)break g;for(;null===g.sibling;){if(null===g.return||g.return===e)break g;g=g.return}g.sibling.return=g.return,g=g.sibling}C&=1}if(An(Ft,C),0===(2&e.mode))e.memoizedState=null;else switch(n){case"forwards":for(I=e.child,n=null;null!==I;)null!==(g=I.alternate)&&null===Kt(g)&&(n=I),I=I.sibling;null===(I=n)?(n=e.child,e.child=null):(n=I.sibling,I.sibling=null),Ia(e,!1,n,I,t,e.lastEffect);break;case"backwards":for(I=null,n=e.child,e.child=null;null!==n;){if(null!==(g=n.alternate)&&null===Kt(g)){e.child=n;break}g=n.sibling,n.sibling=I,I=n,n=g}Ia(e,!0,I,null,t,e.lastEffect);break;case"together":Ia(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function na(g,e,I){if(null!==g&&(e.dependencies=g.dependencies),Ta|=e.lanes,0!==(I&e.childLanes)){if(null!==g&&e.child!==g.child)throw Error(l(153));if(null!==e.child){for(I=zo(g=e.child,g.pendingProps),e.child=I,I.return=e;null!==g.sibling;)g=g.sibling,(I=I.sibling=zo(g,g.pendingProps)).return=e;I.sibling=null}return e.child}return null}function ta(g,e){if(!Mt)switch(g.tailMode){case"hidden":e=g.tail;for(var I=null;null!==e;)null!==e.alternate&&(I=e),e=e.sibling;null===I?g.tail=null:I.sibling=null;break;case"collapsed":I=g.tail;for(var C=null;null!==I;)null!==I.alternate&&(C=I),I=I.sibling;null===C?e||null===g.tail?g.tail=null:g.tail.sibling=null:C.sibling=null}}function la(g,e,I){var C=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return hn(e.type)&&bn(),null;case 3:return Ht(),cn(dn),cn(sn),Ot(),(C=e.stateNode).pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),null!==g&&null!==g.child||(zt(e)?e.flags|=4:C.hydrate||(e.flags|=256)),null;case 5:Nt(e);var t=Jt(kt.current);if(I=e.type,null!==g&&null!=e.stateNode)Pl(g,e,I,C),g.ref!==e.ref&&(e.flags|=128);else{if(!C){if(null===e.stateNode)throw Error(l(166));return null}if(g=Jt(Rt.current),zt(e)){C=e.stateNode,I=e.type;var a=e.memoizedProps;switch(C[_C]=e,C[qC]=a,I){case"dialog":RC("cancel",C),RC("close",C);break;case"iframe":case"object":case"embed":RC("load",C);break;case"video":case"audio":for(g=0;g<fC.length;g++)RC(fC[g],C);break;case"source":RC("error",C);break;case"img":case"image":case"link":RC("error",C),RC("load",C);break;case"details":RC("toggle",C);break;case"input":gg(C,a),RC("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!a.multiple},RC("invalid",C);break;case"textarea":og(C,a),RC("invalid",C)}for(var c in Sg(I,a),g=null,a)a.hasOwnProperty(c)&&(t=a[c],"children"===c?"string"===typeof t?C.textContent!==t&&(g=["children",t]):"number"===typeof t&&C.textContent!==""+t&&(g=["children",""+t]):o.hasOwnProperty(c)&&null!=t&&"onScroll"===c&&RC("scroll",C));switch(I){case"input":j(C),Cg(C,a,!0);break;case"textarea":j(C),Ag(C);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(C.onclick=EC)}C=g,e.updateQueue=C,null!==C&&(e.flags|=4)}else{switch(c=9===t.nodeType?t:t.ownerDocument,g===rg&&(g=sg(I)),g===rg?"script"===I?((g=c.createElement("div")).innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):"string"===typeof C.is?g=c.createElement(I,{is:C.is}):(g=c.createElement(I),"select"===I&&(c=g,C.multiple?c.multiple=!0:C.size&&(c.size=C.size))):g=c.createElementNS(g,I),g[_C]=e,g[qC]=C,Ql(g,e),e.stateNode=g,c=fg(I,C),I){case"dialog":RC("cancel",g),RC("close",g),t=C;break;case"iframe":case"object":case"embed":RC("load",g),t=C;break;case"video":case"audio":for(t=0;t<fC.length;t++)RC(fC[t],g);t=C;break;case"source":RC("error",g),t=C;break;case"img":case"image":case"link":RC("error",g),RC("load",g),t=C;break;case"details":RC("toggle",g),t=C;break;case"input":gg(g,C),t=$(g,C),RC("invalid",g);break;case"option":t=tg(g,C);break;case"select":g._wrapperState={wasMultiple:!!C.multiple},t=n({},C,{value:void 0}),RC("invalid",g);break;case"textarea":og(g,C),t=ag(g,C),RC("invalid",g);break;default:t=C}Sg(I,t);var A=t;for(a in A)if(A.hasOwnProperty(a)){var r=A[a];"style"===a?Bg(g,r):"dangerouslySetInnerHTML"===a?null!=(r=r?r.__html:void 0)&&hg(g,r):"children"===a?"string"===typeof r?("textarea"!==I||""!==r)&&bg(g,r):"number"===typeof r&&bg(g,""+r):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=r&&"onScroll"===a&&RC("scroll",g):null!=r&&G(g,a,r,c))}switch(I){case"input":j(g),Cg(g,C,!1);break;case"textarea":j(g),Ag(g);break;case"option":null!=C.value&&g.setAttribute("value",""+P(C.value));break;case"select":g.multiple=!!C.multiple,null!=(a=C.value)?lg(g,!!C.multiple,a,!1):null!=C.defaultValue&&lg(g,!!C.multiple,C.defaultValue,!0);break;default:"function"===typeof t.onClick&&(g.onclick=EC)}xC(I,C)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(g&&null!=e.stateNode)Ol(0,e,g.memoizedProps,C);else{if("string"!==typeof C&&null===e.stateNode)throw Error(l(166));I=Jt(kt.current),Jt(Rt.current),zt(e)?(C=e.stateNode,I=e.memoizedProps,C[_C]=e,C.nodeValue!==I&&(e.flags|=4)):((C=(9===I.nodeType?I:I.ownerDocument).createTextNode(C))[_C]=e,e.stateNode=C)}return null;case 13:return cn(Ft),C=e.memoizedState,0!==(64&e.flags)?(e.lanes=I,e):(C=null!==C,I=!1,null===g?void 0!==e.memoizedProps.fallback&&zt(e):I=null!==g.memoizedState,C&&!I&&0!==(2&e.mode)&&(null===g&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Ft.current)?0===Fa&&(Fa=3):(0!==Fa&&3!==Fa||(Fa=4),null===Ja||0===(134217727&Ta)&&0===(134217727&Ma)||bo(Ja,Ha))),(C||I)&&(e.flags|=4),null);case 4:return Ht(),null===g&&kC(e.stateNode.containerInfo),null;case 10:return Ct(e),null;case 19:if(cn(Ft),null===(C=e.memoizedState))return null;if(a=0!==(64&e.flags),null===(c=C.rendering))if(a)ta(C,!1);else{if(0!==Fa||null!==g&&0!==(64&g.flags))for(g=e.child;null!==g;){if(null!==(c=Kt(g))){for(e.flags|=64,ta(C,!1),null!==(a=c.updateQueue)&&(e.updateQueue=a,e.flags|=4),null===C.lastEffect&&(e.firstEffect=null),e.lastEffect=C.lastEffect,C=I,I=e.child;null!==I;)g=C,(a=I).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=g,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,g=c.dependencies,a.dependencies=null===g?null:{lanes:g.lanes,firstContext:g.firstContext}),I=I.sibling;return An(Ft,1&Ft.current|2),e.child}g=g.sibling}null!==C.tail&&Un()>La&&(e.flags|=64,a=!0,ta(C,!1),e.lanes=33554432)}else{if(!a)if(null!==(g=Kt(c))){if(e.flags|=64,a=!0,null!==(I=g.updateQueue)&&(e.updateQueue=I,e.flags|=4),ta(C,!0),null===C.tail&&"hidden"===C.tailMode&&!c.alternate&&!Mt)return null!==(e=e.lastEffect=C.lastEffect)&&(e.nextEffect=null),null}else 2*Un()-C.renderingStartTime>La&&1073741824!==I&&(e.flags|=64,a=!0,ta(C,!1),e.lanes=33554432);C.isBackwards?(c.sibling=e.child,e.child=c):(null!==(I=C.last)?I.sibling=c:e.child=c,C.last=c)}return null!==C.tail?(I=C.tail,C.rendering=I,C.tail=I.sibling,C.lastEffect=e.lastEffect,C.renderingStartTime=Un(),I.sibling=null,e=Ft.current,An(Ft,a?1&e|2:1&e),I):null;case 23:case 24:return yo(),null!==g&&null!==g.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==C.mode&&(e.flags|=4),null}throw Error(l(156,e.tag))}function aa(g){switch(g.tag){case 1:hn(g.type)&&bn();var e=g.flags;return 4096&e?(g.flags=-4097&e|64,g):null;case 3:if(Ht(),cn(dn),cn(sn),Ot(),0!==(64&(e=g.flags)))throw Error(l(285));return g.flags=-4097&e|64,g;case 5:return Nt(g),null;case 13:return cn(Ft),4096&(e=g.flags)?(g.flags=-4097&e|64,g):null;case 19:return cn(Ft),null;case 4:return Ht(),null;case 10:return Ct(g),null;case 23:case 24:return yo(),null;default:return null}}function oa(g,e){try{var I="",C=e;do{I+=z(C),C=C.return}while(C);var n=I}catch(t){n="\nError generating stack: "+t.message+"\n"+t.stack}return{value:g,source:e,stack:n}}function ca(g,e){try{console.error(e.value)}catch(I){setTimeout((function(){throw I}))}}Ql=function(g,e){for(var I=e.child;null!==I;){if(5===I.tag||6===I.tag)g.appendChild(I.stateNode);else if(4!==I.tag&&null!==I.child){I.child.return=I,I=I.child;continue}if(I===e)break;for(;null===I.sibling;){if(null===I.return||I.return===e)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},Pl=function(g,e,I,C){var t=g.memoizedProps;if(t!==C){g=e.stateNode,Jt(Rt.current);var l,a=null;switch(I){case"input":t=$(g,t),C=$(g,C),a=[];break;case"option":t=tg(g,t),C=tg(g,C),a=[];break;case"select":t=n({},t,{value:void 0}),C=n({},C,{value:void 0}),a=[];break;case"textarea":t=ag(g,t),C=ag(g,C),a=[];break;default:"function"!==typeof t.onClick&&"function"===typeof C.onClick&&(g.onclick=EC)}for(r in Sg(I,C),I=null,t)if(!C.hasOwnProperty(r)&&t.hasOwnProperty(r)&&null!=t[r])if("style"===r){var c=t[r];for(l in c)c.hasOwnProperty(l)&&(I||(I={}),I[l]="")}else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(o.hasOwnProperty(r)?a||(a=[]):(a=a||[]).push(r,null));for(r in C){var A=C[r];if(c=null!=t?t[r]:void 0,C.hasOwnProperty(r)&&A!==c&&(null!=A||null!=c))if("style"===r)if(c){for(l in c)!c.hasOwnProperty(l)||A&&A.hasOwnProperty(l)||(I||(I={}),I[l]="");for(l in A)A.hasOwnProperty(l)&&c[l]!==A[l]&&(I||(I={}),I[l]=A[l])}else I||(a||(a=[]),a.push(r,I)),I=A;else"dangerouslySetInnerHTML"===r?(A=A?A.__html:void 0,c=c?c.__html:void 0,null!=A&&c!==A&&(a=a||[]).push(r,A)):"children"===r?"string"!==typeof A&&"number"!==typeof A||(a=a||[]).push(r,""+A):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(o.hasOwnProperty(r)?(null!=A&&"onScroll"===r&&RC("scroll",g),a||c===A||(a=[])):"object"===typeof A&&null!==A&&A.$$typeof===w?A.toString():(a=a||[]).push(r,A))}I&&(a=a||[]).push("style",I);var r=a;(e.updateQueue=r)&&(e.flags|=4)}},Ol=function(g,e,I,C){I!==C&&(e.flags|=4)};var Aa="function"===typeof WeakMap?WeakMap:Map;function ra(g,e,I){(I=At(-1,I)).tag=3,I.payload={element:null};var C=e.value;return I.callback=function(){Oa||(Oa=!0,ja=C),ca(0,e)},I}function ia(g,e,I){(I=At(-1,I)).tag=3;var C=g.type.getDerivedStateFromError;if("function"===typeof C){var n=e.value;I.payload=function(){return ca(0,e),C(n)}}var t=g.stateNode;return null!==t&&"function"===typeof t.componentDidCatch&&(I.callback=function(){"function"!==typeof C&&(null===_a?_a=new Set([this]):_a.add(this),ca(0,e));var g=e.stack;this.componentDidCatch(e.value,{componentStack:null!==g?g:""})}),I}var sa="function"===typeof WeakSet?WeakSet:Set;function da(g){var e=g.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(I){To(g,I)}else e.current=null}function ua(g,e){switch(e.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&e.flags&&null!==g){var I=g.memoizedProps,C=g.memoizedState;e=(g=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?I:_n(e.type,I),C),g.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&zC(e.stateNode.containerInfo))}throw Error(l(163))}function ma(g,e,I){switch(I.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=I.updateQueue)?e.lastEffect:null)){g=e=e.next;do{if(3===(3&g.tag)){var C=g.create;g.destroy=C()}g=g.next}while(g!==e)}if(null!==(e=null!==(e=I.updateQueue)?e.lastEffect:null)){g=e=e.next;do{var n=g;C=n.next,0!==(4&(n=n.tag))&&0!==(1&n)&&(Fo(I,g),No(I,g)),g=C}while(g!==e)}return;case 1:return g=I.stateNode,4&I.flags&&(null===e?g.componentDidMount():(C=I.elementType===I.type?e.memoizedProps:_n(I.type,e.memoizedProps),g.componentDidUpdate(C,e.memoizedState,g.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=I.updateQueue)&&dt(I,e,g));case 3:if(null!==(e=I.updateQueue)){if(g=null,null!==I.child)switch(I.child.tag){case 5:case 1:g=I.child.stateNode}dt(I,e,g)}return;case 5:return g=I.stateNode,void(null===e&&4&I.flags&&xC(I.type,I.memoizedProps)&&g.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===I.memoizedState&&(I=I.alternate,null!==I&&(I=I.memoizedState,null!==I&&(I=I.dehydrated,null!==I&&Be(I)))))}throw Error(l(163))}function ha(g,e){for(var I=g;;){if(5===I.tag){var C=I.stateNode;if(e)"function"===typeof(C=C.style).setProperty?C.setProperty("display","none","important"):C.display="none";else{C=I.stateNode;var n=I.memoizedProps.style;n=void 0!==n&&null!==n&&n.hasOwnProperty("display")?n.display:null,C.style.display=pg("display",n)}}else if(6===I.tag)I.stateNode.nodeValue=e?"":I.memoizedProps;else if((23!==I.tag&&24!==I.tag||null===I.memoizedState||I===g)&&null!==I.child){I.child.return=I,I=I.child;continue}if(I===g)break;for(;null===I.sibling;){if(null===I.return||I.return===g)return;I=I.return}I.sibling.return=I.return,I=I.sibling}}function ba(g,e){if(Sn&&"function"===typeof Sn.onCommitFiberUnmount)try{Sn.onCommitFiberUnmount(yn,e)}catch(t){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(g=e.updateQueue)&&null!==(g=g.lastEffect)){var I=g=g.next;do{var C=I,n=C.destroy;if(C=C.tag,void 0!==n)if(0!==(4&C))Fo(e,I);else{C=e;try{n()}catch(t){To(C,t)}}I=I.next}while(I!==g)}break;case 1:if(da(e),"function"===typeof(g=e.stateNode).componentWillUnmount)try{g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(t){To(e,t)}break;case 5:da(e);break;case 4:Sa(g,e)}}function Za(g){g.alternate=null,g.child=null,g.dependencies=null,g.firstEffect=null,g.lastEffect=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.return=null,g.updateQueue=null}function Ga(g){return 5===g.tag||3===g.tag||4===g.tag}function pa(g){g:{for(var e=g.return;null!==e;){if(Ga(e))break g;e=e.return}throw Error(l(160))}var I=e;switch(e=I.stateNode,I.tag){case 5:var C=!1;break;case 3:case 4:e=e.containerInfo,C=!0;break;default:throw Error(l(161))}16&I.flags&&(bg(e,""),I.flags&=-17);g:e:for(I=g;;){for(;null===I.sibling;){if(null===I.return||Ga(I.return)){I=null;break g}I=I.return}for(I.sibling.return=I.return,I=I.sibling;5!==I.tag&&6!==I.tag&&18!==I.tag;){if(2&I.flags)continue e;if(null===I.child||4===I.tag)continue e;I.child.return=I,I=I.child}if(!(2&I.flags)){I=I.stateNode;break g}}C?Ba(g,I,e):ya(g,I,e)}function Ba(g,e,I){var C=g.tag,n=5===C||6===C;if(n)g=n?g.stateNode:g.stateNode.instance,e?8===I.nodeType?I.parentNode.insertBefore(g,e):I.insertBefore(g,e):(8===I.nodeType?(e=I.parentNode).insertBefore(g,I):(e=I).appendChild(g),null!==(I=I._reactRootContainer)&&void 0!==I||null!==e.onclick||(e.onclick=EC));else if(4!==C&&null!==(g=g.child))for(Ba(g,e,I),g=g.sibling;null!==g;)Ba(g,e,I),g=g.sibling}function ya(g,e,I){var C=g.tag,n=5===C||6===C;if(n)g=n?g.stateNode:g.stateNode.instance,e?I.insertBefore(g,e):I.appendChild(g);else if(4!==C&&null!==(g=g.child))for(ya(g,e,I),g=g.sibling;null!==g;)ya(g,e,I),g=g.sibling}function Sa(g,e){for(var I,C,n=e,t=!1;;){if(!t){t=n.return;g:for(;;){if(null===t)throw Error(l(160));switch(I=t.stateNode,t.tag){case 5:C=!1;break g;case 3:case 4:I=I.containerInfo,C=!0;break g}t=t.return}t=!0}if(5===n.tag||6===n.tag){g:for(var a=g,o=n,c=o;;)if(ba(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===o)break g;for(;null===c.sibling;){if(null===c.return||c.return===o)break g;c=c.return}c.sibling.return=c.return,c=c.sibling}C?(a=I,o=n.stateNode,8===a.nodeType?a.parentNode.removeChild(o):a.removeChild(o)):I.removeChild(n.stateNode)}else if(4===n.tag){if(null!==n.child){I=n.stateNode.containerInfo,C=!0,n.child.return=n,n=n.child;continue}}else if(ba(g,n),null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;4===(n=n.return).tag&&(t=!1)}n.sibling.return=n.return,n=n.sibling}}function fa(g,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var I=e.updateQueue;if(null!==(I=null!==I?I.lastEffect:null)){var C=I=I.next;do{3===(3&C.tag)&&(g=C.destroy,C.destroy=void 0,void 0!==g&&g()),C=C.next}while(C!==I)}return;case 1:case 12:case 17:return;case 5:if(null!=(I=e.stateNode)){C=e.memoizedProps;var n=null!==g?g.memoizedProps:C;g=e.type;var t=e.updateQueue;if(e.updateQueue=null,null!==t){for(I[qC]=C,"input"===g&&"radio"===C.type&&null!=C.name&&eg(I,C),fg(g,n),e=fg(g,C),n=0;n<t.length;n+=2){var a=t[n],o=t[n+1];"style"===a?Bg(I,o):"dangerouslySetInnerHTML"===a?hg(I,o):"children"===a?bg(I,o):G(I,a,o,e)}switch(g){case"input":Ig(I,C);break;case"textarea":cg(I,C);break;case"select":g=I._wrapperState.wasMultiple,I._wrapperState.wasMultiple=!!C.multiple,null!=(t=C.value)?lg(I,!!C.multiple,t,!1):g!==!!C.multiple&&(null!=C.defaultValue?lg(I,!!C.multiple,C.defaultValue,!0):lg(I,!!C.multiple,C.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(l(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((I=e.stateNode).hydrate&&(I.hydrate=!1,Be(I.containerInfo)));case 13:return null!==e.memoizedState&&(Da=Un(),ha(e.child,!0)),void Wa(e);case 19:return void Wa(e);case 23:case 24:return void ha(e,null!==e.memoizedState)}throw Error(l(163))}function Wa(g){var e=g.updateQueue;if(null!==e){g.updateQueue=null;var I=g.stateNode;null===I&&(I=g.stateNode=new sa),e.forEach((function(e){var C=xo.bind(null,g,e);I.has(e)||(I.add(e),e.then(C,C))}))}}function Va(g,e){return null!==g&&(null===(g=g.memoizedState)||null!==g.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var va=Math.ceil,Ra=p.ReactCurrentDispatcher,Xa=p.ReactCurrentOwner,ka=0,Ja=null,Ya=null,Ha=0,wa=0,Na=on(0),Fa=0,Ka=null,Ea=0,Ta=0,Ma=0,xa=0,Ua=null,Da=0,La=1/0;function za(){La=Un()+500}var Qa,Pa=null,Oa=!1,ja=null,_a=null,qa=!1,$a=null,go=90,eo=[],Io=[],Co=null,no=0,to=null,lo=-1,ao=0,oo=0,co=null,Ao=!1;function ro(){return 0!==(48&ka)?Un():-1!==lo?lo:lo=Un()}function io(g){if(0===(2&(g=g.mode)))return 1;if(0===(4&g))return 99===Dn()?1:2;if(0===ao&&(ao=Ea),0!==jn.transition){0!==oo&&(oo=null!==Ua?Ua.pendingLanes:0),g=ao;var e=4186112&~oo;return 0===(e&=-e)&&(0===(e=(g=4186112&~g)&-g)&&(e=8192)),e}return g=Dn(),0!==(4&ka)&&98===g?g=Te(12,ao):g=Te(g=function(g){switch(g){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(g),ao),g}function so(g,e,I){if(50<no)throw no=0,to=null,Error(l(185));if(null===(g=uo(g,e)))return null;Ue(g,e,I),g===Ja&&(Ma|=e,4===Fa&&bo(g,Ha));var C=Dn();1===e?0!==(8&ka)&&0===(48&ka)?Zo(g):(mo(g,I),0===ka&&(za(),Pn())):(0===(4&ka)||98!==C&&99!==C||(null===Co?Co=new Set([g]):Co.add(g)),mo(g,I)),Ua=g}function uo(g,e){g.lanes|=e;var I=g.alternate;for(null!==I&&(I.lanes|=e),I=g,g=g.return;null!==g;)g.childLanes|=e,null!==(I=g.alternate)&&(I.childLanes|=e),I=g,g=g.return;return 3===I.tag?I.stateNode:null}function mo(g,e){for(var I=g.callbackNode,C=g.suspendedLanes,n=g.pingedLanes,t=g.expirationTimes,a=g.pendingLanes;0<a;){var o=31-De(a),c=1<<o,A=t[o];if(-1===A){if(0===(c&C)||0!==(c&n)){A=e,Fe(c);var r=Ne;t[o]=10<=r?A+250:6<=r?A+5e3:-1}}else A<=e&&(g.expiredLanes|=c);a&=~c}if(C=Ke(g,g===Ja?Ha:0),e=Ne,0===C)null!==I&&(I!==Fn&&Vn(I),g.callbackNode=null,g.callbackPriority=0);else{if(null!==I){if(g.callbackPriority===e)return;I!==Fn&&Vn(I)}15===e?(I=Zo.bind(null,g),null===En?(En=[I],Tn=Wn(Jn,On)):En.push(I),I=Fn):14===e?I=Qn(99,Zo.bind(null,g)):(I=function(g){switch(g){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(l(358,g))}}(e),I=Qn(I,ho.bind(null,g))),g.callbackPriority=e,g.callbackNode=I}}function ho(g){if(lo=-1,oo=ao=0,0!==(48&ka))throw Error(l(327));var e=g.callbackNode;if(wo()&&g.callbackNode!==e)return null;var I=Ke(g,g===Ja?Ha:0);if(0===I)return null;var C=I,n=ka;ka|=16;var t=Wo();for(Ja===g&&Ha===C||(za(),So(g,C));;)try{Ro();break}catch(o){fo(g,o)}if(It(),Ra.current=t,ka=n,null!==Ya?C=0:(Ja=null,Ha=0,C=Fa),0!==(Ea&Ma))So(g,0);else if(0!==C){if(2===C&&(ka|=64,g.hydrate&&(g.hydrate=!1,zC(g.containerInfo)),0!==(I=Ee(g))&&(C=Vo(g,I))),1===C)throw e=Ka,So(g,0),bo(g,I),mo(g,Un()),e;switch(g.finishedWork=g.current.alternate,g.finishedLanes=I,C){case 0:case 1:throw Error(l(345));case 2:case 5:Jo(g);break;case 3:if(bo(g,I),(62914560&I)===I&&10<(C=Da+500-Un())){if(0!==Ke(g,0))break;if(((n=g.suspendedLanes)&I)!==I){ro(),g.pingedLanes|=g.suspendedLanes&n;break}g.timeoutHandle=DC(Jo.bind(null,g),C);break}Jo(g);break;case 4:if(bo(g,I),(4186112&I)===I)break;for(C=g.eventTimes,n=-1;0<I;){var a=31-De(I);t=1<<a,(a=C[a])>n&&(n=a),I&=~t}if(I=n,10<(I=(120>(I=Un()-I)?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*va(I/1960))-I)){g.timeoutHandle=DC(Jo.bind(null,g),I);break}Jo(g);break;default:throw Error(l(329))}}return mo(g,Un()),g.callbackNode===e?ho.bind(null,g):null}function bo(g,e){for(e&=~xa,e&=~Ma,g.suspendedLanes|=e,g.pingedLanes&=~e,g=g.expirationTimes;0<e;){var I=31-De(e),C=1<<I;g[I]=-1,e&=~C}}function Zo(g){if(0!==(48&ka))throw Error(l(327));if(wo(),g===Ja&&0!==(g.expiredLanes&Ha)){var e=Ha,I=Vo(g,e);0!==(Ea&Ma)&&(I=Vo(g,e=Ke(g,e)))}else I=Vo(g,e=Ke(g,0));if(0!==g.tag&&2===I&&(ka|=64,g.hydrate&&(g.hydrate=!1,zC(g.containerInfo)),0!==(e=Ee(g))&&(I=Vo(g,e))),1===I)throw I=Ka,So(g,0),bo(g,e),mo(g,Un()),I;return g.finishedWork=g.current.alternate,g.finishedLanes=e,Jo(g),mo(g,Un()),null}function Go(g,e){var I=ka;ka|=1;try{return g(e)}finally{0===(ka=I)&&(za(),Pn())}}function po(g,e){var I=ka;ka&=-2,ka|=8;try{return g(e)}finally{0===(ka=I)&&(za(),Pn())}}function Bo(g,e){An(Na,wa),wa|=e,Ea|=e}function yo(){wa=Na.current,cn(Na)}function So(g,e){g.finishedWork=null,g.finishedLanes=0;var I=g.timeoutHandle;if(-1!==I&&(g.timeoutHandle=-1,LC(I)),null!==Ya)for(I=Ya.return;null!==I;){var C=I;switch(C.tag){case 1:null!==(C=C.type.childContextTypes)&&void 0!==C&&bn();break;case 3:Ht(),cn(dn),cn(sn),Ot();break;case 5:Nt(C);break;case 4:Ht();break;case 13:case 19:cn(Ft);break;case 10:Ct(C);break;case 23:case 24:yo()}I=I.return}Ja=g,Ya=zo(g.current,null),Ha=wa=Ea=e,Fa=0,Ka=null,xa=Ma=Ta=0}function fo(g,e){for(;;){var I=Ya;try{if(It(),jt.current=kl,Il){for(var C=$t.memoizedState;null!==C;){var n=C.queue;null!==n&&(n.pending=null),C=C.next}Il=!1}if(qt=0,el=gl=$t=null,Cl=!1,Xa.current=null,null===I||null===I.return){Fa=1,Ka=e,Ya=null;break}g:{var t=g,l=I.return,a=I,o=e;if(e=Ha,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==o&&"object"===typeof o&&"function"===typeof o.then){var c=o;if(0===(2&a.mode)){var A=a.alternate;A?(a.updateQueue=A.updateQueue,a.memoizedState=A.memoizedState,a.lanes=A.lanes):(a.updateQueue=null,a.memoizedState=null)}var r=0!==(1&Ft.current),i=l;do{var s;if(s=13===i.tag){var d=i.memoizedState;if(null!==d)s=null!==d.dehydrated;else{var u=i.memoizedProps;s=void 0!==u.fallback&&(!0!==u.unstable_avoidThisFallback||!r)}}if(s){var m=i.updateQueue;if(null===m){var h=new Set;h.add(c),i.updateQueue=h}else m.add(c);if(0===(2&i.mode)){if(i.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var b=At(-1,1);b.tag=2,rt(a,b)}a.lanes|=1;break g}o=void 0,a=e;var Z=t.pingCache;if(null===Z?(Z=t.pingCache=new Aa,o=new Set,Z.set(c,o)):void 0===(o=Z.get(c))&&(o=new Set,Z.set(c,o)),!o.has(a)){o.add(a);var G=Mo.bind(null,t,c,a);c.then(G,G)}i.flags|=4096,i.lanes=e;break g}i=i.return}while(null!==i);o=Error((Q(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fa&&(Fa=2),o=oa(o,a),i=l;do{switch(i.tag){case 3:t=o,i.flags|=4096,e&=-e,i.lanes|=e,it(i,ra(0,t,e));break g;case 1:t=o;var p=i.type,B=i.stateNode;if(0===(64&i.flags)&&("function"===typeof p.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===_a||!_a.has(B)))){i.flags|=4096,e&=-e,i.lanes|=e,it(i,ia(i,t,e));break g}}i=i.return}while(null!==i)}ko(I)}catch(y){e=y,Ya===I&&null!==I&&(Ya=I=I.return);continue}break}}function Wo(){var g=Ra.current;return Ra.current=kl,null===g?kl:g}function Vo(g,e){var I=ka;ka|=16;var C=Wo();for(Ja===g&&Ha===e||So(g,e);;)try{vo();break}catch(n){fo(g,n)}if(It(),ka=I,Ra.current=C,null!==Ya)throw Error(l(261));return Ja=null,Ha=0,Fa}function vo(){for(;null!==Ya;)Xo(Ya)}function Ro(){for(;null!==Ya&&!vn();)Xo(Ya)}function Xo(g){var e=Qa(g.alternate,g,wa);g.memoizedProps=g.pendingProps,null===e?ko(g):Ya=e,Xa.current=null}function ko(g){var e=g;do{var I=e.alternate;if(g=e.return,0===(2048&e.flags)){if(null!==(I=la(I,e,wa)))return void(Ya=I);if(24!==(I=e).tag&&23!==I.tag||null===I.memoizedState||0!==(1073741824&wa)||0===(4&I.mode)){for(var C=0,n=I.child;null!==n;)C|=n.lanes|n.childLanes,n=n.sibling;I.childLanes=C}null!==g&&0===(2048&g.flags)&&(null===g.firstEffect&&(g.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==g.lastEffect&&(g.lastEffect.nextEffect=e.firstEffect),g.lastEffect=e.lastEffect),1<e.flags&&(null!==g.lastEffect?g.lastEffect.nextEffect=e:g.firstEffect=e,g.lastEffect=e))}else{if(null!==(I=aa(e)))return I.flags&=2047,void(Ya=I);null!==g&&(g.firstEffect=g.lastEffect=null,g.flags|=2048)}if(null!==(e=e.sibling))return void(Ya=e);Ya=e=g}while(null!==e);0===Fa&&(Fa=5)}function Jo(g){var e=Dn();return zn(99,Yo.bind(null,g,e)),null}function Yo(g,e){do{wo()}while(null!==$a);if(0!==(48&ka))throw Error(l(327));var I=g.finishedWork;if(null===I)return null;if(g.finishedWork=null,g.finishedLanes=0,I===g.current)throw Error(l(177));g.callbackNode=null;var C=I.lanes|I.childLanes,n=C,t=g.pendingLanes&~n;g.pendingLanes=n,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=n,g.mutableReadLanes&=n,g.entangledLanes&=n,n=g.entanglements;for(var a=g.eventTimes,o=g.expirationTimes;0<t;){var c=31-De(t),A=1<<c;n[c]=0,a[c]=-1,o[c]=-1,t&=~A}if(null!==Co&&0===(24&C)&&Co.has(g)&&Co.delete(g),g===Ja&&(Ya=Ja=null,Ha=0),1<I.flags?null!==I.lastEffect?(I.lastEffect.nextEffect=I,C=I.firstEffect):C=I:C=I.firstEffect,null!==C){if(n=ka,ka|=32,Xa.current=null,TC=Oe,mC(a=uC())){if("selectionStart"in a)o={start:a.selectionStart,end:a.selectionEnd};else g:if(o=(o=a.ownerDocument)&&o.defaultView||window,(A=o.getSelection&&o.getSelection())&&0!==A.rangeCount){o=A.anchorNode,t=A.anchorOffset,c=A.focusNode,A=A.focusOffset;try{o.nodeType,c.nodeType}catch(W){o=null;break g}var r=0,i=-1,s=-1,d=0,u=0,m=a,h=null;e:for(;;){for(var b;m!==o||0!==t&&3!==m.nodeType||(i=r+t),m!==c||0!==A&&3!==m.nodeType||(s=r+A),3===m.nodeType&&(r+=m.nodeValue.length),null!==(b=m.firstChild);)h=m,m=b;for(;;){if(m===a)break e;if(h===o&&++d===t&&(i=r),h===c&&++u===A&&(s=r),null!==(b=m.nextSibling))break;h=(m=h).parentNode}m=b}o=-1===i||-1===s?null:{start:i,end:s}}else o=null;o=o||{start:0,end:0}}else o=null;MC={focusedElem:a,selectionRange:o},Oe=!1,co=null,Ao=!1,Pa=C;do{try{Ho()}catch(W){if(null===Pa)throw Error(l(330));To(Pa,W),Pa=Pa.nextEffect}}while(null!==Pa);co=null,Pa=C;do{try{for(a=g;null!==Pa;){var Z=Pa.flags;if(16&Z&&bg(Pa.stateNode,""),128&Z){var G=Pa.alternate;if(null!==G){var p=G.ref;null!==p&&("function"===typeof p?p(null):p.current=null)}}switch(1038&Z){case 2:pa(Pa),Pa.flags&=-3;break;case 6:pa(Pa),Pa.flags&=-3,fa(Pa.alternate,Pa);break;case 1024:Pa.flags&=-1025;break;case 1028:Pa.flags&=-1025,fa(Pa.alternate,Pa);break;case 4:fa(Pa.alternate,Pa);break;case 8:Sa(a,o=Pa);var B=o.alternate;Za(o),null!==B&&Za(B)}Pa=Pa.nextEffect}}catch(W){if(null===Pa)throw Error(l(330));To(Pa,W),Pa=Pa.nextEffect}}while(null!==Pa);if(p=MC,G=uC(),Z=p.focusedElem,a=p.selectionRange,G!==Z&&Z&&Z.ownerDocument&&dC(Z.ownerDocument.documentElement,Z)){null!==a&&mC(Z)&&(G=a.start,void 0===(p=a.end)&&(p=G),"selectionStart"in Z?(Z.selectionStart=G,Z.selectionEnd=Math.min(p,Z.value.length)):(p=(G=Z.ownerDocument||document)&&G.defaultView||window).getSelection&&(p=p.getSelection(),o=Z.textContent.length,B=Math.min(a.start,o),a=void 0===a.end?B:Math.min(a.end,o),!p.extend&&B>a&&(o=a,a=B,B=o),o=sC(Z,B),t=sC(Z,a),o&&t&&(1!==p.rangeCount||p.anchorNode!==o.node||p.anchorOffset!==o.offset||p.focusNode!==t.node||p.focusOffset!==t.offset)&&((G=G.createRange()).setStart(o.node,o.offset),p.removeAllRanges(),B>a?(p.addRange(G),p.extend(t.node,t.offset)):(G.setEnd(t.node,t.offset),p.addRange(G))))),G=[];for(p=Z;p=p.parentNode;)1===p.nodeType&&G.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof Z.focus&&Z.focus(),Z=0;Z<G.length;Z++)(p=G[Z]).element.scrollLeft=p.left,p.element.scrollTop=p.top}Oe=!!TC,MC=TC=null,g.current=I,Pa=C;do{try{for(Z=g;null!==Pa;){var y=Pa.flags;if(36&y&&ma(Z,Pa.alternate,Pa),128&y){G=void 0;var S=Pa.ref;if(null!==S){var f=Pa.stateNode;Pa.tag,G=f,"function"===typeof S?S(G):S.current=G}}Pa=Pa.nextEffect}}catch(W){if(null===Pa)throw Error(l(330));To(Pa,W),Pa=Pa.nextEffect}}while(null!==Pa);Pa=null,Kn(),ka=n}else g.current=I;if(qa)qa=!1,$a=g,go=e;else for(Pa=C;null!==Pa;)e=Pa.nextEffect,Pa.nextEffect=null,8&Pa.flags&&((y=Pa).sibling=null,y.stateNode=null),Pa=e;if(0===(C=g.pendingLanes)&&(_a=null),1===C?g===to?no++:(no=0,to=g):no=0,I=I.stateNode,Sn&&"function"===typeof Sn.onCommitFiberRoot)try{Sn.onCommitFiberRoot(yn,I,void 0,64===(64&I.current.flags))}catch(W){}if(mo(g,Un()),Oa)throw Oa=!1,g=ja,ja=null,g;return 0!==(8&ka)||Pn(),null}function Ho(){for(;null!==Pa;){var g=Pa.alternate;Ao||null===co||(0!==(8&Pa.flags)?ge(Pa,co)&&(Ao=!0):13===Pa.tag&&Va(g,Pa)&&ge(Pa,co)&&(Ao=!0));var e=Pa.flags;0!==(256&e)&&ua(g,Pa),0===(512&e)||qa||(qa=!0,Qn(97,(function(){return wo(),null}))),Pa=Pa.nextEffect}}function wo(){if(90!==go){var g=97<go?97:go;return go=90,zn(g,Ko)}return!1}function No(g,e){eo.push(e,g),qa||(qa=!0,Qn(97,(function(){return wo(),null})))}function Fo(g,e){Io.push(e,g),qa||(qa=!0,Qn(97,(function(){return wo(),null})))}function Ko(){if(null===$a)return!1;var g=$a;if($a=null,0!==(48&ka))throw Error(l(331));var e=ka;ka|=32;var I=Io;Io=[];for(var C=0;C<I.length;C+=2){var n=I[C],t=I[C+1],a=n.destroy;if(n.destroy=void 0,"function"===typeof a)try{a()}catch(c){if(null===t)throw Error(l(330));To(t,c)}}for(I=eo,eo=[],C=0;C<I.length;C+=2){n=I[C],t=I[C+1];try{var o=n.create;n.destroy=o()}catch(c){if(null===t)throw Error(l(330));To(t,c)}}for(o=g.current.firstEffect;null!==o;)g=o.nextEffect,o.nextEffect=null,8&o.flags&&(o.sibling=null,o.stateNode=null),o=g;return ka=e,Pn(),!0}function Eo(g,e,I){rt(g,e=ra(0,e=oa(I,e),1)),e=ro(),null!==(g=uo(g,1))&&(Ue(g,1,e),mo(g,e))}function To(g,e){if(3===g.tag)Eo(g,g,e);else for(var I=g.return;null!==I;){if(3===I.tag){Eo(I,g,e);break}if(1===I.tag){var C=I.stateNode;if("function"===typeof I.type.getDerivedStateFromError||"function"===typeof C.componentDidCatch&&(null===_a||!_a.has(C))){var n=ia(I,g=oa(e,g),1);if(rt(I,n),n=ro(),null!==(I=uo(I,1)))Ue(I,1,n),mo(I,n);else if("function"===typeof C.componentDidCatch&&(null===_a||!_a.has(C)))try{C.componentDidCatch(e,g)}catch(t){}break}}I=I.return}}function Mo(g,e,I){var C=g.pingCache;null!==C&&C.delete(e),e=ro(),g.pingedLanes|=g.suspendedLanes&I,Ja===g&&(Ha&I)===I&&(4===Fa||3===Fa&&(62914560&Ha)===Ha&&500>Un()-Da?So(g,0):xa|=I),mo(g,e)}function xo(g,e){var I=g.stateNode;null!==I&&I.delete(e),0===(e=0)&&(0===(2&(e=g.mode))?e=1:0===(4&e)?e=99===Dn()?1:2:(0===ao&&(ao=Ea),0===(e=Me(62914560&~ao))&&(e=4194304))),I=ro(),null!==(g=uo(g,e))&&(Ue(g,e,I),mo(g,I))}function Uo(g,e,I,C){this.tag=g,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Do(g,e,I,C){return new Uo(g,e,I,C)}function Lo(g){return!(!(g=g.prototype)||!g.isReactComponent)}function zo(g,e){var I=g.alternate;return null===I?((I=Do(g.tag,e,g.key,g.mode)).elementType=g.elementType,I.type=g.type,I.stateNode=g.stateNode,I.alternate=g,g.alternate=I):(I.pendingProps=e,I.type=g.type,I.flags=0,I.nextEffect=null,I.firstEffect=null,I.lastEffect=null),I.childLanes=g.childLanes,I.lanes=g.lanes,I.child=g.child,I.memoizedProps=g.memoizedProps,I.memoizedState=g.memoizedState,I.updateQueue=g.updateQueue,e=g.dependencies,I.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},I.sibling=g.sibling,I.index=g.index,I.ref=g.ref,I}function Qo(g,e,I,C,n,t){var a=2;if(C=g,"function"===typeof g)Lo(g)&&(a=1);else if("string"===typeof g)a=5;else g:switch(g){case S:return Po(I.children,n,t,e);case N:a=8,n|=16;break;case f:a=8,n|=1;break;case W:return(g=Do(12,I,e,8|n)).elementType=W,g.type=W,g.lanes=t,g;case X:return(g=Do(13,I,e,n)).type=X,g.elementType=X,g.lanes=t,g;case k:return(g=Do(19,I,e,n)).elementType=k,g.lanes=t,g;case F:return Oo(I,n,t,e);case K:return(g=Do(24,I,e,n)).elementType=K,g.lanes=t,g;default:if("object"===typeof g&&null!==g)switch(g.$$typeof){case V:a=10;break g;case v:a=9;break g;case R:a=11;break g;case J:a=14;break g;case Y:a=16,C=null;break g;case H:a=22;break g}throw Error(l(130,null==g?g:typeof g,""))}return(e=Do(a,I,e,n)).elementType=g,e.type=C,e.lanes=t,e}function Po(g,e,I,C){return(g=Do(7,g,C,e)).lanes=I,g}function Oo(g,e,I,C){return(g=Do(23,g,C,e)).elementType=F,g.lanes=I,g}function jo(g,e,I){return(g=Do(6,g,null,e)).lanes=I,g}function _o(g,e,I){return(e=Do(4,null!==g.children?g.children:[],g.key,e)).lanes=I,e.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},e}function qo(g,e,I){this.tag=e,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=I,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=xe(0),this.expirationTimes=xe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.mutableSourceEagerHydrationData=null}function $o(g,e,I){var C=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==C?null:""+C,children:g,containerInfo:e,implementation:I}}function gc(g,e,I,C){var n=e.current,t=ro(),a=io(n);g:if(I){e:{if(jg(I=I._reactInternals)!==I||1!==I.tag)throw Error(l(170));var o=I;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(hn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(null!==o);throw Error(l(171))}if(1===I.tag){var c=I.type;if(hn(c)){I=Gn(I,c,o);break g}}I=o}else I=rn;return null===e.context?e.context=I:e.pendingContext=I,(e=At(t,a)).payload={element:g},null!==(C=void 0===C?null:C)&&(e.callback=C),rt(n,e),so(n,a,t),a}function ec(g){return(g=g.current).child?(g.child.tag,g.child.stateNode):null}function Ic(g,e){if(null!==(g=g.memoizedState)&&null!==g.dehydrated){var I=g.retryLane;g.retryLane=0!==I&&I<e?I:e}}function Cc(g,e){Ic(g,e),(g=g.alternate)&&Ic(g,e)}function nc(g,e,I){var C=null!=I&&null!=I.hydrationOptions&&I.hydrationOptions.mutableSources||null;if(I=new qo(g,e,null!=I&&!0===I.hydrate),e=Do(3,null,null,2===e?7:1===e?3:0),I.current=e,e.stateNode=I,ot(e),g[$C]=I.current,kC(8===g.nodeType?g.parentNode:g),C)for(g=0;g<C.length;g++){var n=(e=C[g])._getVersion;n=n(e._source),null==I.mutableSourceEagerHydrationData?I.mutableSourceEagerHydrationData=[e,n]:I.mutableSourceEagerHydrationData.push(e,n)}this._internalRoot=I}function tc(g){return!(!g||1!==g.nodeType&&9!==g.nodeType&&11!==g.nodeType&&(8!==g.nodeType||" react-mount-point-unstable "!==g.nodeValue))}function lc(g,e,I,C,n){var t=I._reactRootContainer;if(t){var l=t._internalRoot;if("function"===typeof n){var a=n;n=function(){var g=ec(l);a.call(g)}}gc(e,l,g,n)}else{if(t=I._reactRootContainer=function(g,e){if(e||(e=!(!(e=g?9===g.nodeType?g.documentElement:g.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var I;I=g.lastChild;)g.removeChild(I);return new nc(g,0,e?{hydrate:!0}:void 0)}(I,C),l=t._internalRoot,"function"===typeof n){var o=n;n=function(){var g=ec(l);o.call(g)}}po((function(){gc(e,l,g,n)}))}return ec(l)}function ac(g,e){var I=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!tc(e))throw Error(l(200));return $o(g,e,null,I)}Qa=function(g,e,I){var C=e.lanes;if(null!==g)if(g.memoizedProps!==e.pendingProps||dn.current)Nl=!0;else{if(0===(I&C)){switch(Nl=!1,e.tag){case 3:zl(e),Qt();break;case 5:wt(e);break;case 1:hn(e.type)&&pn(e);break;case 4:Yt(e,e.stateNode.containerInfo);break;case 10:C=e.memoizedProps.value;var n=e.type._context;An(qn,n._currentValue),n._currentValue=C;break;case 13:if(null!==e.memoizedState)return 0!==(I&e.child.childLanes)?_l(g,e,I):(An(Ft,1&Ft.current),null!==(e=na(g,e,I))?e.sibling:null);An(Ft,1&Ft.current);break;case 19:if(C=0!==(I&e.childLanes),0!==(64&g.flags)){if(C)return Ca(g,e,I);e.flags|=64}if(null!==(n=e.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),An(Ft,Ft.current),C)break;return null;case 23:case 24:return e.lanes=0,Ml(g,e,I)}return na(g,e,I)}Nl=0!==(16384&g.flags)}else Nl=!1;switch(e.lanes=0,e.tag){case 2:if(C=e.type,null!==g&&(g.alternate=null,e.alternate=null,e.flags|=2),g=e.pendingProps,n=mn(e,sn.current),tt(e,I),n=ll(null,e,C,g,n,I),e.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(C)){var t=!0;pn(e)}else t=!1;e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,ot(e);var a=C.getDerivedStateFromProps;"function"===typeof a&&mt(e,C,a,g),n.updater=ht,e.stateNode=n,n._reactInternals=e,pt(e,C,g,I),e=Ll(null,e,C,!0,t,I)}else e.tag=0,Fl(null,e,n,I),e=e.child;return e;case 16:n=e.elementType;g:{switch(null!==g&&(g.alternate=null,e.alternate=null,e.flags|=2),g=e.pendingProps,n=(t=n._init)(n._payload),e.type=n,t=e.tag=function(g){if("function"===typeof g)return Lo(g)?1:0;if(void 0!==g&&null!==g){if((g=g.$$typeof)===R)return 11;if(g===J)return 14}return 2}(n),g=_n(n,g),t){case 0:e=Ul(null,e,n,g,I);break g;case 1:e=Dl(null,e,n,g,I);break g;case 11:e=Kl(null,e,n,g,I);break g;case 14:e=El(null,e,n,_n(n.type,g),C,I);break g}throw Error(l(306,n,""))}return e;case 0:return C=e.type,n=e.pendingProps,Ul(g,e,C,n=e.elementType===C?n:_n(C,n),I);case 1:return C=e.type,n=e.pendingProps,Dl(g,e,C,n=e.elementType===C?n:_n(C,n),I);case 3:if(zl(e),C=e.updateQueue,null===g||null===C)throw Error(l(282));if(C=e.pendingProps,n=null!==(n=e.memoizedState)?n.element:null,ct(g,e),st(e,C,null,I),(C=e.memoizedState.element)===n)Qt(),e=na(g,e,I);else{if((t=(n=e.stateNode).hydrate)&&(Tt=QC(e.stateNode.containerInfo.firstChild),Et=e,t=Mt=!0),t){if(null!=(g=n.mutableSourceEagerHydrationData))for(n=0;n<g.length;n+=2)(t=g[n])._workInProgressVersionPrimary=g[n+1],Pt.push(t);for(I=Vt(e,null,C,I),e.child=I;I;)I.flags=-3&I.flags|1024,I=I.sibling}else Fl(g,e,C,I),Qt();e=e.child}return e;case 5:return wt(e),null===g&&Dt(e),C=e.type,n=e.pendingProps,t=null!==g?g.memoizedProps:null,a=n.children,UC(C,n)?a=null:null!==t&&UC(C,t)&&(e.flags|=16),xl(g,e),Fl(g,e,a,I),e.child;case 6:return null===g&&Dt(e),null;case 13:return _l(g,e,I);case 4:return Yt(e,e.stateNode.containerInfo),C=e.pendingProps,null===g?e.child=Wt(e,null,C,I):Fl(g,e,C,I),e.child;case 11:return C=e.type,n=e.pendingProps,Kl(g,e,C,n=e.elementType===C?n:_n(C,n),I);case 7:return Fl(g,e,e.pendingProps,I),e.child;case 8:case 12:return Fl(g,e,e.pendingProps.children,I),e.child;case 10:g:{C=e.type._context,n=e.pendingProps,a=e.memoizedProps,t=n.value;var o=e.type._context;if(An(qn,o._currentValue),o._currentValue=t,null!==a)if(o=a.value,0===(t=cC(o,t)?0:0|("function"===typeof C._calculateChangedBits?C._calculateChangedBits(o,t):1073741823))){if(a.children===n.children&&!dn.current){e=na(g,e,I);break g}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var A=c.firstContext;null!==A;){if(A.context===C&&0!==(A.observedBits&t)){1===o.tag&&((A=At(-1,I&-I)).tag=2,rt(o,A)),o.lanes|=I,null!==(A=o.alternate)&&(A.lanes|=I),nt(o.return,I),c.lanes|=I;break}A=A.next}}else a=10===o.tag&&o.type===e.type?null:o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Fl(g,e,n.children,I),e=e.child}return e;case 9:return n=e.type,C=(t=e.pendingProps).children,tt(e,I),C=C(n=lt(n,t.unstable_observedBits)),e.flags|=1,Fl(g,e,C,I),e.child;case 14:return t=_n(n=e.type,e.pendingProps),El(g,e,n,t=_n(n.type,t),C,I);case 15:return Tl(g,e,e.type,e.pendingProps,C,I);case 17:return C=e.type,n=e.pendingProps,n=e.elementType===C?n:_n(C,n),null!==g&&(g.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,hn(C)?(g=!0,pn(e)):g=!1,tt(e,I),Zt(e,C,n),pt(e,C,n,I),Ll(null,e,C,!0,g,I);case 19:return Ca(g,e,I);case 23:case 24:return Ml(g,e,I)}throw Error(l(156,e.tag))},nc.prototype.render=function(g){gc(g,this._internalRoot,null,null)},nc.prototype.unmount=function(){var g=this._internalRoot,e=g.containerInfo;gc(null,g,null,(function(){e[$C]=null}))},ee=function(g){13===g.tag&&(so(g,4,ro()),Cc(g,4))},Ie=function(g){13===g.tag&&(so(g,67108864,ro()),Cc(g,67108864))},Ce=function(g){if(13===g.tag){var e=ro(),I=io(g);so(g,I,e),Cc(g,I)}},ne=function(g,e){return e()},Vg=function(g,e,I){switch(e){case"input":if(Ig(g,I),e=I.name,"radio"===I.type&&null!=e){for(I=g;I.parentNode;)I=I.parentNode;for(I=I.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<I.length;e++){var C=I[e];if(C!==g&&C.form===g.form){var n=nn(C);if(!n)throw Error(l(90));_(C),Ig(C,n)}}}break;case"textarea":cg(g,I);break;case"select":null!=(e=I.value)&&lg(g,!!I.multiple,e,!1)}},Yg=Go,Hg=function(g,e,I,C,n){var t=ka;ka|=4;try{return zn(98,g.bind(null,e,I,C,n))}finally{0===(ka=t)&&(za(),Pn())}},wg=function(){0===(49&ka)&&(function(){if(null!==Co){var g=Co;Co=null,g.forEach((function(g){g.expiredLanes|=24&g.pendingLanes,mo(g,Un())}))}Pn()}(),wo())},Ng=function(g,e){var I=ka;ka|=2;try{return g(e)}finally{0===(ka=I)&&(za(),Pn())}};var oc={Events:[In,Cn,nn,kg,Jg,wo,{current:!1}]},cc={findFiberByHostInstance:en,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Ac={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:p.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return null===(g=$g(g))?null:g.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{yn=rc.inject(Ac),Sn=rc}catch(mg){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,e.createPortal=ac,e.findDOMNode=function(g){if(null==g)return null;if(1===g.nodeType)return g;var e=g._reactInternals;if(void 0===e){if("function"===typeof g.render)throw Error(l(188));throw Error(l(268,Object.keys(g)))}return g=null===(g=$g(e))?null:g.stateNode},e.flushSync=function(g,e){var I=ka;if(0!==(48&I))return g(e);ka|=1;try{if(g)return zn(99,g.bind(null,e))}finally{ka=I,Pn()}},e.hydrate=function(g,e,I){if(!tc(e))throw Error(l(200));return lc(null,g,e,!0,I)},e.render=function(g,e,I){if(!tc(e))throw Error(l(200));return lc(null,g,e,!1,I)},e.unmountComponentAtNode=function(g){if(!tc(g))throw Error(l(40));return!!g._reactRootContainer&&(po((function(){lc(null,null,g,!1,(function(){g._reactRootContainer=null,g[$C]=null}))})),!0)},e.unstable_batchedUpdates=Go,e.unstable_createPortal=function(g,e){return ac(g,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(g,e,I,C){if(!tc(I))throw Error(l(200));if(null==g||void 0===g._reactInternals)throw Error(l(38));return lc(g,e,I,!1,C)},e.version="17.0.2"},164:function(g,e,I){"use strict";!function g(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(e){console.error(e)}}(),g.exports=I(463)},8:function(g,e,I){g.exports=function(g){"use strict";function e(g){if(g&&g.__esModule)return g;var e=Object.create(null);return g&&Object.keys(g).forEach((function(I){if("default"!==I){var C=Object.getOwnPropertyDescriptor(g,I);Object.defineProperty(e,I,C.get?C:{enumerable:!0,get:function(){return g[I]}})}})),e.default=g,Object.freeze(e)}var I=e(g);function C(){return C=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var C in I)Object.prototype.hasOwnProperty.call(I,C)&&(g[C]=I[C])}return g},C.apply(this,arguments)}function n(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function t(g){if(Array.isArray(g))return g}function l(g,e){var I=null==g?null:"undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var C,n,t=[],l=!0,a=!1;try{for(I=I.call(g);!(l=(C=I.next()).done)&&(t.push(C.value),!e||t.length!==e);l=!0);}catch(o){a=!0,n=o}finally{try{l||null==I.return||I.return()}finally{if(a)throw n}}return t}}function a(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,C=new Array(e);I<e;I++)C[I]=g[I];return C}function o(g,e){if(g){if("string"===typeof g)return a(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?a(g,e):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(g,e){return t(g)||l(g,e)||o(g,e)||c()}function r(g,e){if(null==g)return{};var I,C,n={},t=Object.keys(g);for(C=0;C<t.length;C++)I=t[C],e.indexOf(I)>=0||(n[I]=g[I]);return n}function i(g,e){if(null==g)return{};var I,C,n=r(g,e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);for(C=0;C<t.length;C++)I=t[C],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}var s={exports:{}},d={exports:{}},u={},m="function"===typeof Symbol&&Symbol.for,h=m?Symbol.for("react.element"):60103,b=m?Symbol.for("react.portal"):60106,Z=m?Symbol.for("react.fragment"):60107,G=m?Symbol.for("react.strict_mode"):60108,p=m?Symbol.for("react.profiler"):60114,B=m?Symbol.for("react.provider"):60109,y=m?Symbol.for("react.context"):60110,S=m?Symbol.for("react.async_mode"):60111,f=m?Symbol.for("react.concurrent_mode"):60111,W=m?Symbol.for("react.forward_ref"):60112,V=m?Symbol.for("react.suspense"):60113,v=m?Symbol.for("react.suspense_list"):60120,R=m?Symbol.for("react.memo"):60115,X=m?Symbol.for("react.lazy"):60116,k=m?Symbol.for("react.block"):60121,J=m?Symbol.for("react.fundamental"):60117,Y=m?Symbol.for("react.responder"):60118,H=m?Symbol.for("react.scope"):60119;function w(g){if("object"===typeof g&&null!==g){var e=g.$$typeof;switch(e){case h:switch(g=g.type){case S:case f:case Z:case p:case G:case V:return g;default:switch(g=g&&g.$$typeof){case y:case W:case X:case R:case B:return g;default:return e}}case b:return e}}}function N(g){return w(g)===f}u.AsyncMode=S,u.ConcurrentMode=f,u.ContextConsumer=y,u.ContextProvider=B,u.Element=h,u.ForwardRef=W,u.Fragment=Z,u.Lazy=X,u.Memo=R,u.Portal=b,u.Profiler=p,u.StrictMode=G,u.Suspense=V,u.isAsyncMode=function(g){return N(g)||w(g)===S},u.isConcurrentMode=N,u.isContextConsumer=function(g){return w(g)===y},u.isContextProvider=function(g){return w(g)===B},u.isElement=function(g){return"object"===typeof g&&null!==g&&g.$$typeof===h},u.isForwardRef=function(g){return w(g)===W},u.isFragment=function(g){return w(g)===Z},u.isLazy=function(g){return w(g)===X},u.isMemo=function(g){return w(g)===R},u.isPortal=function(g){return w(g)===b},u.isProfiler=function(g){return w(g)===p},u.isStrictMode=function(g){return w(g)===G},u.isSuspense=function(g){return w(g)===V},u.isValidElementType=function(g){return"string"===typeof g||"function"===typeof g||g===Z||g===f||g===p||g===G||g===V||g===v||"object"===typeof g&&null!==g&&(g.$$typeof===X||g.$$typeof===R||g.$$typeof===B||g.$$typeof===y||g.$$typeof===W||g.$$typeof===J||g.$$typeof===Y||g.$$typeof===H||g.$$typeof===k)},u.typeOf=w,d.exports=u;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function F(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de","5"===Object.getOwnPropertyNames(g)[0])return!1;for(var e={},I=0;I<10;I++)e["_"+String.fromCharCode(I)]=I;var C=Object.getOwnPropertyNames(e).map((function(g){return e[g]}));if("0123456789"!==C.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(g){n[g]=g})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}F()&&Object.assign;var K="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function E(g,e,I,C,n){}Function.call.bind(Object.prototype.hasOwnProperty),E.resetWarningCache=function(){},d.exports;var T=K;function M(){}function x(){}x.resetWarningCache=M;var U=function(){function g(g,e,I,C,n,t){if(t!==T){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function e(){return g}g.isRequired=g;var I={array:g,bigint:g,bool:g,func:g,number:g,object:g,string:g,symbol:g,any:g,arrayOf:e,element:g,elementType:g,instanceOf:e,node:g,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:x,resetWarningCache:M};return I.PropTypes=I,I};s.exports=U();var D=s.exports;function L(g,e){var I=atob(g);if(e){for(var C=new Uint8Array(I.length),n=0,t=I.length;n<t;++n)C[n]=I.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(C.buffer))}return I}function z(g,e,I){var C=void 0===e?null:e,n=L(g,void 0!==I&&I),t=n.indexOf("\n",10)+1,l=n.substring(t)+(C?"//# sourceMappingURL="+C:""),a=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(a)}function Q(g,e,I){var C;return function(n){return C=C||z(g,e,I),new Worker(C,n)}}var P=Q("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),O=["constraints","onError","onLoad","onScan","resolution","qrArea"];function j(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);e&&(C=C.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,C)}return I}function _(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?j(Object(I),!0).forEach((function(e){n(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):j(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}var q=function(){return new P},$=function(g){g&&(g.getVideoTracks&&g.getAudioTracks?(g.getVideoTracks().forEach((function(e){g.removeTrack(e),e.stop()})),g.getAudioTracks().forEach((function(e){g.removeTrack(e),e.stop()}))):g.stop())},gg=function(g){var e=g.constraints,n=g.onError,t=g.onLoad,l=g.onScan,a=g.resolution,o=g.qrArea,c=i(g,O),r=I.useRef(null),s=I.useRef(null),d=I.useRef(document.createElement("canvas")),u=I.useRef(null),m=I.useRef(),h=A(I.useState(null),2),b=h[0],Z=h[1],G=I.useRef(!1),p=I.useRef();I.useEffect((function(){p.current=q();var g=p.current;return g.onmessage=function(g){l&&l(g.data?_(_({},g.data),{},{canvas:d.current}):null),G.current=!1},function(){g.terminate()}}),[l]);var B=JSON.stringify(o),y=I.useCallback((function(){var g=JSON.parse(B),e=p.current,I=s.current&&s.current.readyState===s.current.HAVE_ENOUGH_DATA;if(!G.current&&I){G.current=!0;var C,n=s.current.videoWidth,t=s.current.videoHeight,l=n>t?n:t,o=Math.floor(a/l*100)/100;t=Math.floor(o*t),n=Math.floor(o*n),d.current.width=n,d.current.height=t,u.current=d.current.getContext("2d"),u.current.drawImage(s.current,0,0,n,t),C=g&&2===g.length&&g[0]>0&&g[1]>0?u.current.getImageData(Math.floor((n-g[0])/2),Math.floor((t-g[1])/2),g[0],g[1]):u.current.getImageData(0,0,n,t),e.postMessage(C)}m.current=requestAnimationFrame(y)}),[a,B]),S=JSON.stringify(e);return I.useEffect((function(){var g=JSON.parse(S),e=!0;return navigator.mediaDevices.getUserMedia(g).then((function(g){if(e){r.current=g;try{s.current&&(s.current.srcObject=g,s.current.setAttribute("playsinline",!0))}catch(I){Z(window.URL.createObjectURL(g))}t&&t(),m.current=requestAnimationFrame(y)}else $(g)})).catch((function(g){return e?n(g):null})),function(){cancelAnimationFrame(m.current),e=!1,$(r.current),b&&window.URL.revokeObjectURL(b)}}),[y,S,n,t,b]),I.createElement("video",C({autoPlay:!0,playsInline:!0,src:b,ref:s},c))};return gg.propTypes={constraints:D.object,onError:D.func.isRequired,onLoad:D.func,onScan:D.func.isRequired,resolution:D.number,qrArea:D.array},gg.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},gg}(I(791))},374:function(g,e,I){"use strict";I(725);var C=I(791),n=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var t=Symbol.for;n=t("react.element"),t("react.fragment")}var l=C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,o={key:!0,ref:!0,__self:!0,__source:!0};function c(g,e,I){var C,t={},c=null,A=null;for(C in void 0!==I&&(c=""+I),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(A=e.ref),e)a.call(e,C)&&!o.hasOwnProperty(C)&&(t[C]=e[C]);if(g&&g.defaultProps)for(C in e=g.defaultProps)void 0===t[C]&&(t[C]=e[C]);return{$$typeof:n,type:g,key:c,ref:A,props:t,_owner:l.current}}e.jsx=c,e.jsxs=c},117:function(g,e,I){"use strict";var C=I(725),n=60103,t=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var l=60109,a=60110,o=60112;e.Suspense=60113;var c=60115,A=60116;if("function"===typeof Symbol&&Symbol.for){var r=Symbol.for;n=r("react.element"),t=r("react.portal"),e.Fragment=r("react.fragment"),e.StrictMode=r("react.strict_mode"),e.Profiler=r("react.profiler"),l=r("react.provider"),a=r("react.context"),o=r("react.forward_ref"),e.Suspense=r("react.suspense"),c=r("react.memo"),A=r("react.lazy")}var i="function"===typeof Symbol&&Symbol.iterator;function s(g){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)e+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u={};function m(g,e,I){this.props=g,this.context=e,this.refs=u,this.updater=I||d}function h(){}function b(g,e,I){this.props=g,this.context=e,this.refs=u,this.updater=I||d}m.prototype.isReactComponent={},m.prototype.setState=function(g,e){if("object"!==typeof g&&"function"!==typeof g&&null!=g)throw Error(s(85));this.updater.enqueueSetState(this,g,e,"setState")},m.prototype.forceUpdate=function(g){this.updater.enqueueForceUpdate(this,g,"forceUpdate")},h.prototype=m.prototype;var Z=b.prototype=new h;Z.constructor=b,C(Z,m.prototype),Z.isPureReactComponent=!0;var G={current:null},p=Object.prototype.hasOwnProperty,B={key:!0,ref:!0,__self:!0,__source:!0};function y(g,e,I){var C,t={},l=null,a=null;if(null!=e)for(C in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(l=""+e.key),e)p.call(e,C)&&!B.hasOwnProperty(C)&&(t[C]=e[C]);var o=arguments.length-2;if(1===o)t.children=I;else if(1<o){for(var c=Array(o),A=0;A<o;A++)c[A]=arguments[A+2];t.children=c}if(g&&g.defaultProps)for(C in o=g.defaultProps)void 0===t[C]&&(t[C]=o[C]);return{$$typeof:n,type:g,key:l,ref:a,props:t,_owner:G.current}}function S(g){return"object"===typeof g&&null!==g&&g.$$typeof===n}var f=/\/+/g;function W(g,e){return"object"===typeof g&&null!==g&&null!=g.key?function(g){var e={"=":"=0",":":"=2"};return"$"+g.replace(/[=:]/g,(function(g){return e[g]}))}(""+g.key):e.toString(36)}function V(g,e,I,C,l){var a=typeof g;"undefined"!==a&&"boolean"!==a||(g=null);var o=!1;if(null===g)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(g.$$typeof){case n:case t:o=!0}}if(o)return l=l(o=g),g=""===C?"."+W(o,0):C,Array.isArray(l)?(I="",null!=g&&(I=g.replace(f,"$&/")+"/"),V(l,e,I,"",(function(g){return g}))):null!=l&&(S(l)&&(l=function(g,e){return{$$typeof:n,type:g.type,key:e,ref:g.ref,props:g.props,_owner:g._owner}}(l,I+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(f,"$&/")+"/")+g)),e.push(l)),1;if(o=0,C=""===C?".":C+":",Array.isArray(g))for(var c=0;c<g.length;c++){var A=C+W(a=g[c],c);o+=V(a,e,I,A,l)}else if(A=function(g){return null===g||"object"!==typeof g?null:"function"===typeof(g=i&&g[i]||g["@@iterator"])?g:null}(g),"function"===typeof A)for(g=A.call(g),c=0;!(a=g.next()).done;)o+=V(a=a.value,e,I,A=C+W(a,c++),l);else if("object"===a)throw e=""+g,Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(g).join(", ")+"}":e));return o}function v(g,e,I){if(null==g)return g;var C=[],n=0;return V(g,C,"","",(function(g){return e.call(I,g,n++)})),C}function R(g){if(-1===g._status){var e=g._result;e=e(),g._status=0,g._result=e,e.then((function(e){0===g._status&&(e=e.default,g._status=1,g._result=e)}),(function(e){0===g._status&&(g._status=2,g._result=e)}))}if(1===g._status)return g._result;throw g._result}var X={current:null};function k(){var g=X.current;if(null===g)throw Error(s(321));return g}var J={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:C};e.Children={map:v,forEach:function(g,e,I){v(g,(function(){e.apply(this,arguments)}),I)},count:function(g){var e=0;return v(g,(function(){e++})),e},toArray:function(g){return v(g,(function(g){return g}))||[]},only:function(g){if(!S(g))throw Error(s(143));return g}},e.Component=m,e.PureComponent=b,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,e.cloneElement=function(g,e,I){if(null===g||void 0===g)throw Error(s(267,g));var t=C({},g.props),l=g.key,a=g.ref,o=g._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,o=G.current),void 0!==e.key&&(l=""+e.key),g.type&&g.type.defaultProps)var c=g.type.defaultProps;for(A in e)p.call(e,A)&&!B.hasOwnProperty(A)&&(t[A]=void 0===e[A]&&void 0!==c?c[A]:e[A])}var A=arguments.length-2;if(1===A)t.children=I;else if(1<A){c=Array(A);for(var r=0;r<A;r++)c[r]=arguments[r+2];t.children=c}return{$$typeof:n,type:g.type,key:l,ref:a,props:t,_owner:o}},e.createContext=function(g,e){return void 0===e&&(e=null),(g={$$typeof:a,_calculateChangedBits:e,_currentValue:g,_currentValue2:g,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:g},g.Consumer=g},e.createElement=y,e.createFactory=function(g){var e=y.bind(null,g);return e.type=g,e},e.createRef=function(){return{current:null}},e.forwardRef=function(g){return{$$typeof:o,render:g}},e.isValidElement=S,e.lazy=function(g){return{$$typeof:A,_payload:{_status:-1,_result:g},_init:R}},e.memo=function(g,e){return{$$typeof:c,type:g,compare:void 0===e?null:e}},e.useCallback=function(g,e){return k().useCallback(g,e)},e.useContext=function(g,e){return k().useContext(g,e)},e.useDebugValue=function(){},e.useEffect=function(g,e){return k().useEffect(g,e)},e.useImperativeHandle=function(g,e,I){return k().useImperativeHandle(g,e,I)},e.useLayoutEffect=function(g,e){return k().useLayoutEffect(g,e)},e.useMemo=function(g,e){return k().useMemo(g,e)},e.useReducer=function(g,e,I){return k().useReducer(g,e,I)},e.useRef=function(g){return k().useRef(g)},e.useState=function(g){return k().useState(g)},e.version="17.0.2"},791:function(g,e,I){"use strict";g.exports=I(117)},184:function(g,e,I){"use strict";g.exports=I(374)},727:function(g){var e=function(g){"use strict";var e,I=Object.prototype,C=I.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},t=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function o(g,e,I){return Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}),g[e]}try{o({},"")}catch(k){o=function(g,e,I){return g[e]=I}}function c(g,e,I,C){var n=e&&e.prototype instanceof m?e:m,t=Object.create(n.prototype),l=new v(C||[]);return t._invoke=function(g,e,I){var C=r;return function(n,t){if(C===s)throw new Error("Generator is already running");if(C===d){if("throw"===n)throw t;return X()}for(I.method=n,I.arg=t;;){var l=I.delegate;if(l){var a=f(l,I);if(a){if(a===u)continue;return a}}if("next"===I.method)I.sent=I._sent=I.arg;else if("throw"===I.method){if(C===r)throw C=d,I.arg;I.dispatchException(I.arg)}else"return"===I.method&&I.abrupt("return",I.arg);C=s;var o=A(g,e,I);if("normal"===o.type){if(C=I.done?d:i,o.arg===u)continue;return{value:o.arg,done:I.done}}"throw"===o.type&&(C=d,I.method="throw",I.arg=o.arg)}}}(g,I,l),t}function A(g,e,I){try{return{type:"normal",arg:g.call(e,I)}}catch(k){return{type:"throw",arg:k}}}g.wrap=c;var r="suspendedStart",i="suspendedYield",s="executing",d="completed",u={};function m(){}function h(){}function b(){}var Z={};o(Z,t,(function(){return this}));var G=Object.getPrototypeOf,p=G&&G(G(R([])));p&&p!==I&&C.call(p,t)&&(Z=p);var B=b.prototype=m.prototype=Object.create(Z);function y(g){["next","throw","return"].forEach((function(e){o(g,e,(function(g){return this._invoke(e,g)}))}))}function S(g,e){function I(n,t,l,a){var o=A(g[n],g,t);if("throw"!==o.type){var c=o.arg,r=c.value;return r&&"object"===typeof r&&C.call(r,"__await")?e.resolve(r.__await).then((function(g){I("next",g,l,a)}),(function(g){I("throw",g,l,a)})):e.resolve(r).then((function(g){c.value=g,l(c)}),(function(g){return I("throw",g,l,a)}))}a(o.arg)}var n;this._invoke=function(g,C){function t(){return new e((function(e,n){I(g,C,e,n)}))}return n=n?n.then(t,t):t()}}function f(g,I){var C=g.iterator[I.method];if(C===e){if(I.delegate=null,"throw"===I.method){if(g.iterator.return&&(I.method="return",I.arg=e,f(g,I),"throw"===I.method))return u;I.method="throw",I.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=A(C,g.iterator,I.arg);if("throw"===n.type)return I.method="throw",I.arg=n.arg,I.delegate=null,u;var t=n.arg;return t?t.done?(I[g.resultName]=t.value,I.next=g.nextLoc,"return"!==I.method&&(I.method="next",I.arg=e),I.delegate=null,u):t:(I.method="throw",I.arg=new TypeError("iterator result is not an object"),I.delegate=null,u)}function W(g){var e={tryLoc:g[0]};1 in g&&(e.catchLoc=g[1]),2 in g&&(e.finallyLoc=g[2],e.afterLoc=g[3]),this.tryEntries.push(e)}function V(g){var e=g.completion||{};e.type="normal",delete e.arg,g.completion=e}function v(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(W,this),this.reset(!0)}function R(g){if(g){var I=g[t];if(I)return I.call(g);if("function"===typeof g.next)return g;if(!isNaN(g.length)){var n=-1,l=function I(){for(;++n<g.length;)if(C.call(g,n))return I.value=g[n],I.done=!1,I;return I.value=e,I.done=!0,I};return l.next=l}}return{next:X}}function X(){return{value:e,done:!0}}return h.prototype=b,o(B,"constructor",b),o(b,"constructor",h),h.displayName=o(b,a,"GeneratorFunction"),g.isGeneratorFunction=function(g){var e="function"===typeof g&&g.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},g.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,b):(g.__proto__=b,o(g,a,"GeneratorFunction")),g.prototype=Object.create(B),g},g.awrap=function(g){return{__await:g}},y(S.prototype),o(S.prototype,l,(function(){return this})),g.AsyncIterator=S,g.async=function(e,I,C,n,t){void 0===t&&(t=Promise);var l=new S(c(e,I,C,n),t);return g.isGeneratorFunction(I)?l:l.next().then((function(g){return g.done?g.value:l.next()}))},y(B),o(B,a,"Generator"),o(B,t,(function(){return this})),o(B,"toString",(function(){return"[object Generator]"})),g.keys=function(g){var e=[];for(var I in g)e.push(I);return e.reverse(),function I(){for(;e.length;){var C=e.pop();if(C in g)return I.value=C,I.done=!1,I}return I.done=!0,I}},g.values=R,v.prototype={constructor:v,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(V),!g)for(var I in this)"t"===I.charAt(0)&&C.call(this,I)&&!isNaN(+I.slice(1))&&(this[I]=e)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if("throw"===g.type)throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var I=this;function n(C,n){return a.type="throw",a.arg=g,I.next=C,n&&(I.method="next",I.arg=e),!!n}for(var t=this.tryEntries.length-1;t>=0;--t){var l=this.tryEntries[t],a=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var o=C.call(l,"catchLoc"),c=C.call(l,"finallyLoc");if(o&&c){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(g,e){for(var I=this.tryEntries.length-1;I>=0;--I){var n=this.tryEntries[I];if(n.tryLoc<=this.prev&&C.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var t=n;break}}t&&("break"===g||"continue"===g)&&t.tryLoc<=e&&e<=t.finallyLoc&&(t=null);var l=t?t.completion:{};return l.type=g,l.arg=e,t?(this.method="next",this.next=t.finallyLoc,u):this.complete(l)},complete:function(g,e){if("throw"===g.type)throw g.arg;return"break"===g.type||"continue"===g.type?this.next=g.arg:"return"===g.type?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):"normal"===g.type&&e&&(this.next=e),u},finish:function(g){for(var e=this.tryEntries.length-1;e>=0;--e){var I=this.tryEntries[e];if(I.finallyLoc===g)return this.complete(I.completion,I.afterLoc),V(I),u}},catch:function(g){for(var e=this.tryEntries.length-1;e>=0;--e){var I=this.tryEntries[e];if(I.tryLoc===g){var C=I.completion;if("throw"===C.type){var n=C.arg;V(I)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(g,I,C){return this.delegate={iterator:R(g),resultName:I,nextLoc:C},"next"===this.method&&(this.arg=e),u}},g}(g.exports);try{regeneratorRuntime=e}catch(I){"object"===typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},813:function(g,e){"use strict";var I,C,n,t;if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,A=null,r=function g(){if(null!==c)try{var I=e.unstable_now();c(!0,I),c=null}catch(C){throw setTimeout(g,0),C}};I=function(g){null!==c?setTimeout(I,0,g):(c=g,setTimeout(r,0))},C=function(g,e){A=setTimeout(g,e)},n=function(){clearTimeout(A)},e.unstable_shouldYield=function(){return!1},t=e.unstable_forceFrameRate=function(){}}else{var i=window.setTimeout,s=window.clearTimeout;if("undefined"!==typeof console){var d=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof d&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var u=!1,m=null,h=-1,b=5,Z=0;e.unstable_shouldYield=function(){return e.unstable_now()>=Z},t=function(){},e.unstable_forceFrameRate=function(g){0>g||125<g?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<g?Math.floor(1e3/g):5};var G=new MessageChannel,p=G.port2;G.port1.onmessage=function(){if(null!==m){var g=e.unstable_now();Z=g+b;try{m(!0,g)?p.postMessage(null):(u=!1,m=null)}catch(I){throw p.postMessage(null),I}}else u=!1},I=function(g){m=g,u||(u=!0,p.postMessage(null))},C=function(g,I){h=i((function(){g(e.unstable_now())}),I)},n=function(){s(h),h=-1}}function B(g,e){var I=g.length;g.push(e);g:for(;;){var C=I-1>>>1,n=g[C];if(!(void 0!==n&&0<f(n,e)))break g;g[C]=e,g[I]=n,I=C}}function y(g){return void 0===(g=g[0])?null:g}function S(g){var e=g[0];if(void 0!==e){var I=g.pop();if(I!==e){g[0]=I;g:for(var C=0,n=g.length;C<n;){var t=2*(C+1)-1,l=g[t],a=t+1,o=g[a];if(void 0!==l&&0>f(l,I))void 0!==o&&0>f(o,l)?(g[C]=o,g[a]=I,C=a):(g[C]=l,g[t]=I,C=t);else{if(!(void 0!==o&&0>f(o,I)))break g;g[C]=o,g[a]=I,C=a}}}return e}return null}function f(g,e){var I=g.sortIndex-e.sortIndex;return 0!==I?I:g.id-e.id}var W=[],V=[],v=1,R=null,X=3,k=!1,J=!1,Y=!1;function H(g){for(var e=y(V);null!==e;){if(null===e.callback)S(V);else{if(!(e.startTime<=g))break;S(V),e.sortIndex=e.expirationTime,B(W,e)}e=y(V)}}function w(g){if(Y=!1,H(g),!J)if(null!==y(W))J=!0,I(N);else{var e=y(V);null!==e&&C(w,e.startTime-g)}}function N(g,I){J=!1,Y&&(Y=!1,n()),k=!0;var t=X;try{for(H(I),R=y(W);null!==R&&(!(R.expirationTime>I)||g&&!e.unstable_shouldYield());){var l=R.callback;if("function"===typeof l){R.callback=null,X=R.priorityLevel;var a=l(R.expirationTime<=I);I=e.unstable_now(),"function"===typeof a?R.callback=a:R===y(W)&&S(W),H(I)}else S(W);R=y(W)}if(null!==R)var o=!0;else{var c=y(V);null!==c&&C(w,c.startTime-I),o=!1}return o}finally{R=null,X=t,k=!1}}var F=t;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(g){g.callback=null},e.unstable_continueExecution=function(){J||k||(J=!0,I(N))},e.unstable_getCurrentPriorityLevel=function(){return X},e.unstable_getFirstCallbackNode=function(){return y(W)},e.unstable_next=function(g){switch(X){case 1:case 2:case 3:var e=3;break;default:e=X}var I=X;X=e;try{return g()}finally{X=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(g,e){switch(g){case 1:case 2:case 3:case 4:case 5:break;default:g=3}var I=X;X=g;try{return e()}finally{X=I}},e.unstable_scheduleCallback=function(g,t,l){var a=e.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?a+l:a:l=a,g){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return g={id:v++,callback:t,priorityLevel:g,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>a?(g.sortIndex=l,B(V,g),null===y(W)&&g===y(V)&&(Y?n():Y=!0,C(w,l-a))):(g.sortIndex=o,B(W,g),J||k||(J=!0,I(N))),g},e.unstable_wrapCallback=function(g){var e=X;return function(){var I=X;X=e;try{return g.apply(this,arguments)}finally{X=I}}}},296:function(g,e,I){"use strict";g.exports=I(813)}},e={};function I(C){var n=e[C];if(void 0!==n)return n.exports;var t=e[C]={id:C,loaded:!1,exports:{}};return g[C].call(t.exports,t,t.exports,I),t.loaded=!0,t.exports}I.n=function(g){var e=g&&g.__esModule?function(){return g.default}:function(){return g};return I.d(e,{a:e}),e},I.d=function(g,e){for(var C in e)I.o(e,C)&&!I.o(g,C)&&Object.defineProperty(g,C,{enumerable:!0,get:e[C]})},I.o=function(g,e){return Object.prototype.hasOwnProperty.call(g,e)},I.nmd=function(g){return g.paths=[],g.children||(g.children=[]),g},function(){"use strict";var g=I(791),e=I(164);function C(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,C=new Array(e);I<e;I++)C[I]=g[I];return C}function n(g,e){if(g){if("string"===typeof g)return C(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?C(g,e):void 0}}function t(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var C,n,t=[],l=!0,a=!1;try{for(I=I.call(g);!(l=(C=I.next()).done)&&(t.push(C.value),!e||t.length!==e);l=!0);}catch(o){a=!0,n=o}finally{try{l||null==I.return||I.return()}finally{if(a)throw n}}return t}}(g,e)||n(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=I(426),a=I.n(l);function o(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}function c(g,e){for(var I=0;I<e.length;I++){var C=e[I];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,C.key,C)}}function A(g,e,I){return e&&c(g.prototype,e),I&&c(g,I),g}String.prototype.standardizeName=function(){var g=this,e=(g=(g=(g=g.replaceAll("."," ")).replace(/  +/g," ")).trim()).split(" ");if(e.length!=g.replaceAll(" ","").length)for(;1==e[0].length;)e.push(e.shift());return(g=e.join(" ")).toTitleCase()},String.prototype.toCamelCase=function(){return this.toLowerCase().replace(/['"]/g,"").replace(/\W+/g," ").replace(/ (.)/g,(function(g){return g.toUpperCase()})).replace(/ /g,"")},String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,(function(g){return g.charAt(0).toUpperCase()+g.substr(1).toLowerCase()}))},String.prototype.toTimingCase=function(){return""==this.trim()?"":this.split("and").map((function(g){return g.trim().split("-").map((function(g){var e=Math.ceil(60*(parseFloat(g)-parseInt(g)));return a()("".concat(parseInt(g)%24,":").concat(e),"HH:mm").format("h".concat(e>0?".mm":""," A"))})).join(" - ")})).join(" and ")},String.prototype.replaceLastOccurance=function(g,e){var I=this.lastIndexOf(", ");return-1!==I?this.substring(0,I)+" & "+this.substring(I+2):this},Array.prototype.unique=function(){for(var g=[],e={},I=0;I<this.length;I++)e[this[I]]||(g.push(this[I]),e[this[I]]=!0);return g},Array.prototype.split=function(g){if(g<=0)throw new Error("Number of parts must be a positive integer.");for(var e=Math.ceil(this.length/g),I=[],C=0;C<this.length;C+=e)I.push(this.slice(C,C+e));return I},Array.prototype.shard=function(g,e){if(g<=0)throw new Error("Shard size must be a positive integer.");for(var I=[],C=0;C<this.length;)I.push(this.slice(C,C+g)),C+=g;if(!I.length)return I;var n=I[I.length-1].length;if(I.length&&e&&n<g)for(var t=0;t<g-n;t++)I[I.length-1].push(e);return I},Array.prototype.deskShard=function(g){this.sort();for(var e=Array.from({length:g},(function(){return[]})),I=Math.ceil(this.length/g),C=0;C<this.length;C++){e[Math.floor(C/I)].push(this[C])}return e.map((function(g,e,I){return"".concat(g[0][0].toUpperCase(),"-").concat(e!=I.length-1?(C=g[g.length-1][0].toUpperCase(),/^[A-Z]$/.test(C)?String.fromCharCode(C.charCodeAt(0)-1+26*("A"===C)):"Invalid input"):g[g.length-1][0].toUpperCase());var C}))},Array.prototype.interleave=function(g,e){if(e<=0)return this.slice();for(var I=[],C=0;C<this.length;C++)C>0&&C%e===0&&I.push(g),I.push(this[C]);return I},Array.prototype.unique=function(){var g={};return this.forEach((function(e){g[e]=0})),Object.keys(g)},Array.prototype.sonique=function(){return this.unique().sort()},Array.prototype.interleave=function(g){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],I=[],C=0;C<this.length;C++)I.push(this[C]),(C<this.length-1||C===this.length-1&&e)&&I.push(g);return I};var r={set:function g(e,I,C){if("object"===typeof e)for(var n in e)g(n,e[n]);else{var t=new Date;C=C||999,t.setTime(t.getTime()+24*C*60*60*1e3);var l=";expires="+t.toUTCString();document.cookie=e+"="+I+l}},get:function(g){for(var e=g+"=",I=document.cookie.split(";"),C=0;C<I.length;C++){for(var n=I[C];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return""},clear:function(g){g?document.cookie=g+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;":document.cookie.split(";").forEach((function(g){document.cookie=g.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}))}},i=r,s=I(184);function d(e){var I=e.list,C=e.ctl,n=t((0,g.useState)(!1),2),l=n[0],a=n[1],o=this;return(0,g.useEffect)((function(){C.setShowFunc((function(){a.bind(o)(!0)})),C.setHideFunc((function(){a.bind(o)(!1)}))}),[]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mainMenu",id:l?"show":"hide",children:[(0,s.jsxs)("div",{className:"mainMenuProfile",children:[(0,s.jsx)("div",{className:"mainMenuProfileAvatar",children:i.get("name").charAt(0).toUpperCase()}),(0,s.jsx)("div",{className:"mainMenuProfileName",children:i.get("name")})]}),I.map((function(g){return(0,s.jsx)("div",{className:"mainMenuItem clickable",children:g})}))]}),l?(0,s.jsx)("div",{className:"glass",onClick:function(){a.bind(o)(!1)}}):null]})}var u=new(function(){function g(){o(this,g),this.show=function(){},this.hide=function(){}}return A(g,[{key:"setShowFunc",value:function(g){this.show=g}},{key:"setHideFunc",value:function(g){this.hide=g}}]),g}());var m=function(g){var e=g.onPageMenuClick,I=g.hideOptions,C=g.title;return(0,s.jsxs)("div",{children:[!I&&(0,s.jsx)(d,{ctl:u,list:[1,2,3,4]}),(0,s.jsxs)("div",{className:"appHeader",children:[!I&&(0,s.jsx)("i",{className:"bi bi-list clickable clickableIcon",id:"slideMenuButton",onClick:function(){u.show()}}),C||"Loading...",!I&&(0,s.jsx)("i",{className:"bi bi-three-dots-vertical clickable clickableIcon",id:"menuButton",onClick:e})]})]})};function h(g){var e=g.children,I=g.style,C=g.className;return(0,s.jsx)("div",{className:"paper ".concat(C),style:I,children:e})}var b=function(e){var I=t((0,g.useState)(0),2),C=I[0],n=I[1],l=this,a=e.tabs,o=e.onTabChange;return(0,s.jsxs)("div",{className:"tab",children:[(0,s.jsxs)("div",{className:"tabHeader",children:[(0,s.jsx)("div",{className:"tabHeaderItems ",children:a.map((function(g,e){return(0,s.jsx)("div",{className:"tabHeaderItem ".concat(C==e?"selectedtab":""," ").concat(e==a.length-1?"last-thi":""),onClick:function(){n.bind(l)(e),o&&o(e,g.value)},children:g.title},e)}))}),!1]}),(0,s.jsx)("div",{className:"tabChildren",children:a[C].component})]})};var Z=function(g){return g.children,g.style,(0,s.jsx)("div",{className:"hsep"})};var G=function(g){var e=g.details,I=g.i,C=g.sl,n=g.services.filter((function(g){return g.serviceName==e.service}))[0].waGroupLink;return(0,s.jsxs)("div",{className:"service",children:[(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"dark",children:"Service ".concat(C>1?I+1:"").trim()}),(0,s.jsxs)("div",{className:"volSerName",children:[(0,s.jsx)("div",{className:"detailFeild",children:e.service}),n&&(0,s.jsx)("a",{className:"volJoinHref",href:n,target:"_blank",children:(0,s.jsxs)("i",{className:"bi bi-whatsapp spocdeticon",children:[(0,s.jsx)("span",{className:"volJoinGroup",children:" Click here to join service WhatsApp group"})," "]})})]})]}),(0,s.jsxs)("div",{className:"vol-section",children:[(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"light",children:"Timings"}),(0,s.jsx)("div",{className:"detailFeild",children:"\u23f1\ufe0f ".concat(e.timings.toTimingCase())})]}),(0,s.jsx)("vl",{className:"vol-sep"}),(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"light",children:"Your Slot"}),(0,s.jsx)("div",{className:"detailFeild",children:"\u23f1\ufe0f ".concat("Whole Day"==e.availability||"Default"==e.availability||"NOT AVAILABLE"==e.availability?e.timings.toTimingCase():e.availability)})]})]}),(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"light",children:"Co-Ordinator"}),(0,s.jsx)("div",{className:"detailFeild",children:"".concat(e.coordinator)})]}),(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"light",children:"In-charge (SPOC)"}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,s.jsxs)("div",{className:"spocdetholder",children:[(0,s.jsxs)("div",{className:"detailFeild",style:{marginRight:"2vw"},children:[(0,s.jsx)("div",{children:"".concat(e.spoc)}),(0,s.jsx)("div",{className:"spocdetphone",children:"".concat(e.spocPhone)})]}),(0,s.jsxs)("div",{className:"spocdeticons",children:[isNaN(e.spocPhone)?null:(0,s.jsx)("a",{href:"tel:+91".concat(e.spocPhone),children:(0,s.jsx)("i",{className:"bi bi-telephone-fill spocdeticon"})}),isNaN(e.spocPhone)?null:(0,s.jsx)("a",{href:"https://wa.me/91".concat(e.spocPhone),target:"_blank",children:(0,s.jsx)("i",{className:"bi bi-whatsapp spocdeticon"})})]})]})})]}),(0,s.jsx)(Z,{})]})};function p(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function B(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);e&&(C=C.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,C)}return I}function y(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?B(Object(I),!0).forEach((function(e){p(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):B(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function S(e){var I=t((0,g.useState)(e.show),2),C=I[0],n=I[1],l=this,a=e.style;return(0,g.useEffect)((function(){e.ctl&&(e.ctl.setShowFunc((function(){n.bind(l)(!0)})),e.ctl.setHideFunc((function(){n.bind(l)(!1)})))}),[]),(0,s.jsx)("div",{className:"spinner-bg-circle ".concat(C||!e.ctl?"spinner-show":"spinner-hide"),style:y(y({},{width:"".concat(e.size||2,"vw"),height:"".concat(e.size||2,"vw")}),a)})}var f=function(e){var I=(0,g.useRef)(0),C=e.filter,n=e.Drop,l=e.inputClass,a=e.placeholder,o=t((0,g.useState)(),2),c=o[0],A=o[1],r=t((0,g.useState)(),2),i=r[0],d=r[1],u=(0,g.useRef)(),m=(0,g.useRef)();return(0,s.jsxs)("div",{className:"autoRoot",children:[(0,s.jsx)("input",{className:"autoin ".concat(l),ref:u,onChange:function(g){clearTimeout(m.current),m.current=setTimeout((function(){A(u.current.value?C(u.current.value):null)}),250)},onFocus:function(){d(!0)},onBlur:function(g){d(!1)},placeholder:a||"Start typing your name..."}),c&&(0,s.jsx)("div",{className:"auto-drop ".concat(i?"auto-show":"auto-hide"),ref:I,children:c.length?c.map((function(g,e,I){return(0,s.jsx)("div",{className:"auto-item",onClick:function(){u.current.value=g,A([g])},children:(0,s.jsx)(n,{item:g,value:g})},e)})):'"'.concat(u.current.value,'" is not found')})]})};var W=function(e){var I=t((0,g.useState)(""),2),C=I[0],n=I[1],l=t((0,g.useState)(""),2),o=l[0],c=l[1],A=t((0,g.useState)(""),2),r=A[0],i=A[1],d=e.data,u=e.dates,Z=(e.showList,d.volunteers),p=d.services,B=d.events;(0,g.useEffect)((function(){var g=new URLSearchParams(window.location.search);n(g.get("name")),c(!!g.get("name"))}),[]),(0,g.useEffect)((function(){var g={};Z&&Z.map((function(e){""!=e.volunteerName&&(g[e.volunteerName]=0)})),i(Object.keys(g).sort())}),[d]);var y=(0,s.jsx)("div",{style:{color:"#333",margin:"5vw",display:"flex",justifyContent:"center"},children:"No services"});return(0,s.jsxs)("div",{children:[(0,s.jsx)(m,{title:d.title,hideOptions:!0}),(0,s.jsxs)("div",{className:"vol",children:[o?(0,s.jsx)(h,{children:C}):(0,s.jsx)(f,{inputClass:"autoinvol",filter:function(g){return r.filter((function(e){return e.toLowerCase().includes(g.toLowerCase())}))},Drop:function(g){var e=g.item,I=g.value;return(0,s.jsx)("div",{className:"volnameauto",onClick:function(){n(I)},children:e})}}),C&&u.length?(0,s.jsxs)(h,{className:"serpaper",children:[!o&&(0,s.jsx)("div",{className:"volnameintab",children:C}),(0,s.jsx)(b,{tabs:u.filter((function(g){return!!Z.filter((function(e){return e.date==g&&e.volunteerName==C&&""!=e.service})).length&&!B.filter((function(e){return e.date==g}))[0].hide})).map((function(g){var e=Z.filter((function(e){return e.volunteerName==C&&e.date==g})),I=e.sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0],n=e.map((function(g,e,C){return(0,s.jsx)(G,{details:g,services:p,i:e,sl:C.length,mainService:I})}));return{title:1==u.length?a()(g,"YYYY-MM-DD").format("dddd, Do MMMM YYYY"):u.length<5?a()(g,"YYYY-MM-DD").format("Do MMM"):a()(g,"YYYY-MM-DD").format("MMM D"),component:n.length?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"event-name",children:"".concat(d.events.filter((function(e){return e.date==g}))[0].event," (").concat(n.length," service").concat(n.length>1?"s":"",")").trim()}),(0,s.jsxs)("div",{className:"voldetholderv",children:[(0,s.jsx)("div",{style:{width:"100%"},children:n}),d.events.filter((function(e){return e.date==g}))[0].coupon&&(0,s.jsxs)("div",{className:"pracoup",children:[(0,s.jsx)("div",{className:"dark",children:"Collect Prasadam Coupon from"}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,s.jsxs)("div",{className:"spocdetholder",children:[(0,s.jsxs)("div",{className:"detailFeild",style:{marginRight:"2vw"},children:[(0,s.jsx)("div",{children:"".concat(I.spoc)}),(0,s.jsx)("div",{className:"spocdetphone",children:"".concat(I.spocPhone)})]}),(0,s.jsxs)("div",{className:"spocdeticons",children:[isNaN(I.spocPhone)?null:(0,s.jsx)("a",{href:"tel:+91".concat(I.spocPhone),children:(0,s.jsx)("i",{className:"bi bi-telephone-fill spocdeticon"})}),isNaN(I.spocPhone)?null:(0,s.jsx)("a",{href:"https://wa.me/91".concat(I.spocPhone),target:"_blank",children:(0,s.jsx)("i",{className:"bi bi-whatsapp spocdeticon"})})]})]})})]})]})]}):y}}))})]}):C&&(0,s.jsx)(S,{style:{marginTop:"2vw"},size:2})]}),(0,s.jsx)("div",{style:{margin:"15vw"}})]})};var V=function(g){var e=g.service,I=g.volunteers,C=I.filter((function(g){return g.service==e.serviceName})).length,n=I.filter((function(g){return g.service==e.serviceName&&g.reported})).length;return(0,s.jsx)("div",{className:"servIndiv",children:(0,s.jsxs)(h,{className:"ser-service",children:[(0,s.jsxs)("div",{className:"serviceTitleStats",children:[(0,s.jsx)("div",{children:e.serviceName}),(0,s.jsx)("div",{children:"".concat(C>=e.requirement?"\u2705 ":"\u26a0\ufe0f"," ").concat(C,"/").concat(e.requirement)})]}),(0,s.jsx)("div",{className:"serviceDetails",children:"\u23f1\ufe0f ".concat(e.timings.toTimingCase())}),(0,s.jsx)("div",{className:"serviceDetails",children:"\ud83d\udc51 ".concat(e.coordinator)}),(0,s.jsx)("div",{className:"serviceDetails",children:(0,s.jsxs)("div",{className:"spocPhoneDet",children:[(0,s.jsx)("div",{className:"spocPP",children:"\ud83e\udd47 ".concat(e.spoc)}),isNaN(e.spocPhone)?null:(0,s.jsx)("a",{href:"tel:+91".concat(e.spocPhone),children:(0,s.jsx)("i",{className:"bi bi-telephone-fill"})}),isNaN(e.spocPhone)?null:(0,s.jsx)("a",{href:"https://wa.me/91".concat(e.spocPhone),target:"_blank",children:(0,s.jsx)("i",{className:"bi bi-whatsapp"})})]})}),n?(0,s.jsx)("div",{className:"serviceDetails",children:"\u2705 ".concat(n==C?"All":"".concat(n,"/").concat(C)," have reported to the service")}):null]})})};var v=function(e){var I=e.volunteers,C=e.filterValue,n=e.serviceView,l=e.date,o=e.service,c=t((0,g.useState)({}),2),A=c[0],r=c[1];(0,g.useEffect)((function(){if(n){var g=i.get("@".concat(C));if(g)try{r(JSON.parse(g))}catch(e){r({})}}}),[C]);var d=function(g){if(g.timings.toTimingCase().includes("and")||g.availability.includes(","))return"Availability could not verified. Please check with the volunteer (Availability: ".concat(g.availability,")");switch(g.availability){case"Whole Day":return"";case"NOT AVAILABLE":return"Volunteer may not be available for this service. Please check with the volunteer";case"Default":return"Availability is assumed by default. Please verify with the volunteer"}switch(function(g,e,I){var C=a()("".concat(g," ").concat(e.split(" - ")[0]),"YYYY-MM-DD h A"),n=a()("".concat(g," ").concat(e.split(" - ")[1]),"YYYY-MM-DD h A");n.isBefore(C)&&n.add(1,"d");var t=a()("".concat(g," ").concat(I.split(" - ")[0]),"YYYY-MM-DD h A"),l=a()("".concat(g," ").concat(I.split(" - ")[1]),"YYYY-MM-DD h A");return l.isBefore(t)&&l.add(1,"d"),C.isValid()&&n.isValid()&&t.isValid()&&l.isValid()?C.isSame(t)&&n.isSame(l)||C.isSame(t)&&n.isBefore(l)||C.isAfter(t)&&n.isSame(l)||C.isAfter(t)&&n.isBefore(l)?"OK":C.isSame(t)&&n.isAfter(l)||C.isBefore(t)&&n.isAfter(l)||C.isBefore(t)&&n.isSame(l)?"B":n.isAfter(l)?"E":C.isBefore(t)?"S":t.isAfter(n)||l.isBefore(C)||l.isSame(C)||n.isSame(t)?"M":"U":"U"}(g.date,g.timings.toTimingCase(),g.availability)){case"S":return"Volunteer may report late (Availability: ".concat(g.availability,")");case"E":return"Volunteer may leave early (Availability: ".concat(g.availability,")");case"B":return"Volunteer may be available only for sometime (Availability: ".concat(g.availability,")");case"M":return"Complete mismacth in timings (Availability: ".concat(g.availability,")");case"OK":return"";default:return"Availability could not verified. Please check with the volunteer (Availability: ".concat(g.availability,")")}},u=a()(a()().format("YYYY-MM-DD"));return(0,s.jsx)("div",{className:"volsIndiv",children:(0,s.jsx)(h,{className:"ser-vol",children:(0,s.jsx)("div",{className:"voldetholder",children:I.length?I.map((function(g){var e="".concat(l,":").concat(o.serviceName,":").concat(g.volunteerName),I=d(g);return g.volunteerName?(0,s.jsxs)("div",{className:"eachVol",children:[(0,s.jsxs)("div",{className:"eachVolDet",children:[(0,s.jsxs)("div",{className:"nameHolder",children:[u.isSameOrAfter(a()(l))?(0,s.jsx)("div",{onClick:function(){if(n)try{var g=JSON.parse(i.get("@".concat(C))||"{}");g[e]=!g[e],i.set("@".concat(C),JSON.stringify(g,2)),r(g)}catch(I){alert("Could not mark attendance")}},children:(0,s.jsx)("i",{className:"bi bi-check-circle-fill nameCheck ".concat(g.reported||n&&A[e]?"":"name-greyed")})}):null,(0,s.jsxs)("div",{className:"nameact",children:[(0,s.jsxs)("div",{className:"name-phone",children:[(0,s.jsx)("div",{children:g.volunteerName}),(0,s.jsx)("div",{className:"servol_phone",children:"".concat(g.volunteerPhone)})]}),(0,s.jsxs)("div",{className:"volactbuttons",children:[isNaN(g.volunteerPhone)?null:(0,s.jsx)("a",{href:"tel:+91".concat(g.volunteerPhone),children:(0,s.jsx)("i",{className:"bi bi-telephone-fill"})}),isNaN(g.volunteerPhone)?null:(0,s.jsx)("a",{href:"https://wa.me/91".concat(g.volunteerPhone),target:"_blank",children:(0,s.jsx)("i",{className:"bi bi-whatsapp"})}),isNaN(g.volunteerPhone)?null:(0,s.jsx)("a",{href:"https://wa.me/91".concat(g.volunteerPhone,"?text=").concat(encodeURI("https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(g.volunteerName)))),target:"_blank",children:(0,s.jsx)("i",{className:"bi bi-share-fill"})}),(0,s.jsx)("a",{href:"/vol?name=".concat(encodeURI(g.volunteerName)),children:(0,s.jsx)("i",{className:"bi bi-box-arrow-up-right"})})]})]})]}),(0,s.jsxs)("div",{className:"phonecat",children:[(0,s.jsx)("div",{className:"servol_category",children:"".concat(g.category," ").concat(g.preacher&&!n?"(".concat(g.preacher,")"):"")}),I&&(0,s.jsx)("div",{className:"avcomment",children:I})]})]}),(0,s.jsx)(Z,{})]}):null})):"No volunteers"})})})},R={version:"0.18.5"},X=1200,k=1252,J=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Y={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},H=function(g){-1!=J.indexOf(g)&&(k=Y[0]=g)};var w=function(g){X=g,H(g)};function N(){w(1200),H(1252)}function F(g){for(var e=[],I=0;I<g.length>>1;++I)e[I]=String.fromCharCode(g.charCodeAt(2*I+1)+(g.charCodeAt(2*I)<<8));return e.join("")}var K,E=function(g){return String.fromCharCode(g)},T=function(g){return String.fromCharCode(g)};var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function x(g){for(var e="",I=0,C=0,n=0,t=0,l=0,a=0,o=0,c=0;c<g.length;)t=(I=g.charCodeAt(c++))>>2,l=(3&I)<<4|(C=g.charCodeAt(c++))>>4,a=(15&C)<<2|(n=g.charCodeAt(c++))>>6,o=63&n,isNaN(C)?a=o=64:isNaN(n)&&(o=64),e+=M.charAt(t)+M.charAt(l)+M.charAt(a)+M.charAt(o);return e}function U(g){var e="",I=0,C=0,n=0,t=0,l=0,a=0;g=g.replace(/[^\w\+\/\=]/g,"");for(var o=0;o<g.length;)I=M.indexOf(g.charAt(o++))<<2|(t=M.indexOf(g.charAt(o++)))>>4,e+=String.fromCharCode(I),C=(15&t)<<4|(l=M.indexOf(g.charAt(o++)))>>2,64!==l&&(e+=String.fromCharCode(C)),n=(3&l)<<6|(a=M.indexOf(g.charAt(o++))),64!==a&&(e+=String.fromCharCode(n));return e}var D=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),L=function(){if("undefined"!==typeof Buffer){var g=!Buffer.from;if(!g)try{Buffer.from("foo","utf8")}catch(e){g=!0}return g?function(g,e){return e?new Buffer(g,e):new Buffer(g)}:Buffer.from.bind(Buffer)}return function(){}}();function z(g){return D?Buffer.alloc?Buffer.alloc(g):new Buffer(g):"undefined"!=typeof Uint8Array?new Uint8Array(g):new Array(g)}function Q(g){return D?Buffer.allocUnsafe?Buffer.allocUnsafe(g):new Buffer(g):"undefined"!=typeof Uint8Array?new Uint8Array(g):new Array(g)}var P=function(g){return D?L(g,"binary"):g.split("").map((function(g){return 255&g.charCodeAt(0)}))};function O(g){if("undefined"===typeof ArrayBuffer)return P(g);for(var e=new ArrayBuffer(g.length),I=new Uint8Array(e),C=0;C!=g.length;++C)I[C]=255&g.charCodeAt(C);return e}function j(g){if(Array.isArray(g))return g.map((function(g){return String.fromCharCode(g)})).join("");for(var e=[],I=0;I<g.length;++I)e[I]=String.fromCharCode(g[I]);return e.join("")}var _=D?function(g){return Buffer.concat(g.map((function(g){return Buffer.isBuffer(g)?g:L(g)})))}:function(g){if("undefined"!==typeof Uint8Array){var e=0,I=0;for(e=0;e<g.length;++e)I+=g[e].length;var C=new Uint8Array(I),n=0;for(e=0,I=0;e<g.length;I+=n,++e)if(n=g[e].length,g[e]instanceof Uint8Array)C.set(g[e],I);else{if("string"==typeof g[e])throw"wtf";C.set(new Uint8Array(g[e]),I)}return C}return[].concat.apply([],g.map((function(g){return Array.isArray(g)?g:[].slice.call(g)})))};var q=/\u0000/g,gg=/[\u0001-\u0006]/g;function eg(g){for(var e="",I=g.length-1;I>=0;)e+=g.charAt(I--);return e}function Ig(g,e){var I=""+g;return I.length>=e?I:de("0",e-I.length)+I}function Cg(g,e){var I=""+g;return I.length>=e?I:de(" ",e-I.length)+I}function ng(g,e){var I=""+g;return I.length>=e?I:I+de(" ",e-I.length)}var tg=Math.pow(2,32);function lg(g,e){return g>tg||g<-tg?function(g,e){var I=""+Math.round(g);return I.length>=e?I:de("0",e-I.length)+I}(g,e):function(g,e){var I=""+g;return I.length>=e?I:de("0",e-I.length)+I}(Math.round(g),e)}function ag(g,e){return e=e||0,g.length>=7+e&&103===(32|g.charCodeAt(e))&&101===(32|g.charCodeAt(e+1))&&110===(32|g.charCodeAt(e+2))&&101===(32|g.charCodeAt(e+3))&&114===(32|g.charCodeAt(e+4))&&97===(32|g.charCodeAt(e+5))&&108===(32|g.charCodeAt(e+6))}var og=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],cg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var Ag={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},rg={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},ig={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sg(g,e,I){for(var C=g<0?-1:1,n=g*C,t=0,l=1,a=0,o=1,c=0,A=0,r=Math.floor(n);c<e&&(a=(r=Math.floor(n))*l+t,A=r*c+o,!(n-r<5e-8));)n=1/(n-r),t=l,l=a,o=c,c=A;if(A>e&&(c>e?(A=o,a=t):(A=c,a=l)),!I)return[0,C*a,A];var i=Math.floor(C*a/A);return[i,C*a-i*A,A]}function dg(g,e,I){if(g>2958465||g<0)return null;var C=0|g,n=Math.floor(86400*(g-C)),t=0,l=[],a={D:C,T:n,u:86400*(g-C)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(C+=1462),a.u>.9999&&(a.u=0,86400==++n&&(a.T=n=0,++C,++a.D)),60===C)l=I?[1317,10,29]:[1900,2,29],t=3;else if(0===C)l=I?[1317,8,29]:[1900,1,0],t=6;else{C>60&&--C;var o=new Date(1900,0,1);o.setDate(o.getDate()+C-1),l=[o.getFullYear(),o.getMonth()+1,o.getDate()],t=o.getDay(),C<60&&(t=(t+6)%7),I&&(t=function(g,e){e[0]-=581;var I=g.getDay();g<60&&(I=(I+6)%7);return I}(o,l))}return a.y=l[0],a.m=l[1],a.d=l[2],a.S=n%60,n=Math.floor(n/60),a.M=n%60,n=Math.floor(n/60),a.H=n,a.q=t,a}var ug=new Date(1899,11,31,0,0,0),mg=ug.getTime(),hg=new Date(1900,2,1,0,0,0);function bg(g,e){var I=g.getTime();return e?I-=1262304e5:g>=hg&&(I+=864e5),(I-(mg+6e4*(g.getTimezoneOffset()-ug.getTimezoneOffset())))/864e5}function Zg(g){return-1==g.indexOf(".")?g:g.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Gg(g){var e,I=Math.floor(Math.log(Math.abs(g))*Math.LOG10E);return e=I>=-4&&I<=-1?g.toPrecision(10+I):Math.abs(I)<=9?function(g){var e=g<0?12:11,I=Zg(g.toFixed(12));return I.length<=e||(I=g.toPrecision(10)).length<=e?I:g.toExponential(5)}(g):10===I?g.toFixed(10).substr(0,12):function(g){var e=Zg(g.toFixed(11));return e.length>(g<0?12:11)||"0"===e||"-0"===e?g.toPrecision(6):e}(g),Zg(function(g){return-1==g.indexOf("E")?g:g.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(e.toUpperCase()))}function pg(g,e){switch(typeof g){case"string":return g;case"boolean":return g?"TRUE":"FALSE";case"number":return(0|g)===g?g.toString(10):Gg(g);case"undefined":return"";case"object":if(null==g)return"";if(g instanceof Date)return xg(14,bg(g,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+g)}function Bg(g,e,I,C){var n,t="",l=0,a=0,o=I.y,c=0;switch(g){case 98:o=I.y+543;case 121:switch(e.length){case 1:case 2:n=o%100,c=2;break;default:n=o%1e4,c=4}break;case 109:switch(e.length){case 1:case 2:n=I.m,c=e.length;break;case 3:return cg[I.m-1][1];case 5:return cg[I.m-1][0];default:return cg[I.m-1][2]}break;case 100:switch(e.length){case 1:case 2:n=I.d,c=e.length;break;case 3:return og[I.q][0];default:return og[I.q][1]}break;case 104:switch(e.length){case 1:case 2:n=1+(I.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:n=I.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:n=I.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if("s"!=e&&"ss"!=e&&".0"!=e&&".00"!=e&&".000"!=e)throw"bad second format: "+e;return 0!==I.u||"s"!=e&&"ss"!=e?(a=C>=2?3===C?1e3:100:1===C?10:1,(l=Math.round(a*(I.S+I.u)))>=60*a&&(l=0),"s"===e?0===l?"0":""+l/a:(t=Ig(l,2+C),"ss"===e?t.substr(0,2):"."+t.substr(2,e.length-1))):Ig(I.S,e.length);case 90:switch(e){case"[h]":case"[hh]":n=24*I.D+I.H;break;case"[m]":case"[mm]":n=60*(24*I.D+I.H)+I.M;break;case"[s]":case"[ss]":n=60*(60*(24*I.D+I.H)+I.M)+Math.round(I.S+I.u);break;default:throw"bad abstime format: "+e}c=3===e.length?1:2;break;case 101:n=o,c=1}return c>0?Ig(n,c):""}function yg(g){if(g.length<=3)return g;for(var e=g.length%3,I=g.substr(0,e);e!=g.length;e+=3)I+=(I.length>0?",":"")+g.substr(e,3);return I}var Sg=/%/g;function fg(g,e){var I,C=g.indexOf("E")-g.indexOf(".")-1;if(g.match(/^#+0.0E\+0$/)){if(0==e)return"0.0E+0";if(e<0)return"-"+fg(g,-e);var n=g.indexOf(".");-1===n&&(n=g.indexOf("E"));var t=Math.floor(Math.log(e)*Math.LOG10E)%n;if(t<0&&(t+=n),-1===(I=(e/Math.pow(10,t)).toPrecision(C+1+(n+t)%n)).indexOf("e")){var l=Math.floor(Math.log(e)*Math.LOG10E);for(-1===I.indexOf(".")?I=I.charAt(0)+"."+I.substr(1)+"E+"+(l-I.length+t):I+="E+"+(l-t);"0."===I.substr(0,2);)I=(I=I.charAt(0)+I.substr(2,n)+"."+I.substr(2+n)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");I=I.replace(/\+-/,"-")}I=I.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(g,e,I,C){return e+I+C.substr(0,(n+t)%n)+"."+C.substr(t)+"E"}))}else I=e.toExponential(C);return g.match(/E\+00$/)&&I.match(/e[+-]\d$/)&&(I=I.substr(0,I.length-1)+"0"+I.charAt(I.length-1)),g.match(/E\-/)&&I.match(/e\+/)&&(I=I.replace(/e\+/,"e")),I.replace("e","E")}var Wg=/# (\?+)( ?)\/( ?)(\d+)/;var Vg=/^#*0*\.([0#]+)/,vg=/\).*[0#]/,Rg=/\(###\) ###\\?-####/;function Xg(g){for(var e,I="",C=0;C!=g.length;++C)switch(e=g.charCodeAt(C)){case 35:break;case 63:I+=" ";break;case 48:I+="0";break;default:I+=String.fromCharCode(e)}return I}function kg(g,e){var I=Math.pow(10,e);return""+Math.round(g*I)/I}function Jg(g,e){var I=g-Math.floor(g),C=Math.pow(10,e);return e<(""+Math.round(I*C)).length?0:Math.round(I*C)}function Yg(g,e,I){if(40===g.charCodeAt(0)&&!e.match(vg)){var C=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return I>=0?Yg("n",C,I):"("+Yg("n",C,-I)+")"}if(44===e.charCodeAt(e.length-1))return function(g,e,I){for(var C=e.length-1;44===e.charCodeAt(C-1);)--C;return Ng(g,e.substr(0,C),I/Math.pow(10,3*(e.length-C)))}(g,e,I);if(-1!==e.indexOf("%"))return function(g,e,I){var C=e.replace(Sg,""),n=e.length-C.length;return Ng(g,C,I*Math.pow(10,2*n))+de("%",n)}(g,e,I);if(-1!==e.indexOf("E"))return fg(e,I);if(36===e.charCodeAt(0))return"$"+Yg(g,e.substr(" "==e.charAt(1)?2:1),I);var n,t,l,a,o=Math.abs(I),c=I<0?"-":"";if(e.match(/^00+$/))return c+lg(o,e.length);if(e.match(/^[#?]+$/))return"0"===(n=lg(I,0))&&(n=""),n.length>e.length?n:Xg(e.substr(0,e.length-n.length))+n;if(t=e.match(Wg))return function(g,e,I){var C=parseInt(g[4],10),n=Math.round(e*C),t=Math.floor(n/C),l=n-t*C,a=C;return I+(0===t?"":""+t)+" "+(0===l?de(" ",g[1].length+1+g[4].length):Cg(l,g[1].length)+g[2]+"/"+g[3]+Ig(a,g[4].length))}(t,o,c);if(e.match(/^#+0+$/))return c+lg(o,e.length-e.indexOf("0"));if(t=e.match(Vg))return n=kg(I,t[1].length).replace(/^([^\.]+)$/,"$1."+Xg(t[1])).replace(/\.$/,"."+Xg(t[1])).replace(/\.(\d*)$/,(function(g,e){return"."+e+de("0",Xg(t[1]).length-e.length)})),-1!==e.indexOf("0.")?n:n.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),t=e.match(/^(0*)\.(#*)$/))return c+kg(o,t[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,t[1].length?"0.":".");if(t=e.match(/^#{1,3},##0(\.?)$/))return c+yg(lg(o,0));if(t=e.match(/^#,##0\.([#0]*0)$/))return I<0?"-"+Yg(g,e,-I):yg(""+(Math.floor(I)+function(g,e){return e<(""+Math.round((g-Math.floor(g))*Math.pow(10,e))).length?1:0}(I,t[1].length)))+"."+Ig(Jg(I,t[1].length),t[1].length);if(t=e.match(/^#,#*,#0/))return Yg(g,e.replace(/^#,#*,/,""),I);if(t=e.match(/^([0#]+)(\\?-([0#]+))+$/))return n=eg(Yg(g,e.replace(/[\\-]/g,""),I)),l=0,eg(eg(e.replace(/\\/g,"")).replace(/[0#]/g,(function(g){return l<n.length?n.charAt(l++):"0"===g?"0":""})));if(e.match(Rg))return"("+(n=Yg(g,"##########",I)).substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var A="";if(t=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(t[4].length,7),a=sg(o,Math.pow(10,l)-1,!1),n=""+c," "==(A=Ng("n",t[1],a[1])).charAt(A.length-1)&&(A=A.substr(0,A.length-1)+"0"),n+=A+t[2]+"/"+t[3],(A=ng(a[2],l)).length<t[4].length&&(A=Xg(t[4].substr(t[4].length-A.length))+A),n+=A;if(t=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(t[1].length,t[4].length),7),c+((a=sg(o,Math.pow(10,l)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?Cg(a[1],l)+t[2]+"/"+t[3]+ng(a[2],l):de(" ",2*l+1+t[2].length+t[3].length));if(t=e.match(/^[#0?]+$/))return n=lg(I,0),e.length<=n.length?n:Xg(e.substr(0,e.length-n.length))+n;if(t=e.match(/^([#0?]+)\.([#0]+)$/)){n=""+I.toFixed(Math.min(t[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var r=e.indexOf(".")-l,i=e.length-n.length-r;return Xg(e.substr(0,r)+n+e.substr(e.length-i))}if(t=e.match(/^00,000\.([#0]*0)$/))return l=Jg(I,t[1].length),I<0?"-"+Yg(g,e,-I):yg(function(g){return g<2147483647&&g>-2147483648?""+(g>=0?0|g:g-1|0):""+Math.floor(g)}(I)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(g){return"00,"+(g.length<3?Ig(0,3-g.length):"")+g}))+"."+Ig(l,t[1].length);switch(e){case"###,##0.00":return Yg(g,"#,##0.00",I);case"###,###":case"##,###":case"#,###":var s=yg(lg(o,0));return"0"!==s?c+s:"";case"###,###.00":return Yg(g,"###,##0.00",I).replace(/^0\./,".");case"#,###.00":return Yg(g,"#,##0.00",I).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Hg(g,e){var I,C=g.indexOf("E")-g.indexOf(".")-1;if(g.match(/^#+0.0E\+0$/)){if(0==e)return"0.0E+0";if(e<0)return"-"+Hg(g,-e);var n=g.indexOf(".");-1===n&&(n=g.indexOf("E"));var t=Math.floor(Math.log(e)*Math.LOG10E)%n;if(t<0&&(t+=n),!(I=(e/Math.pow(10,t)).toPrecision(C+1+(n+t)%n)).match(/[Ee]/)){var l=Math.floor(Math.log(e)*Math.LOG10E);-1===I.indexOf(".")?I=I.charAt(0)+"."+I.substr(1)+"E+"+(l-I.length+t):I+="E+"+(l-t),I=I.replace(/\+-/,"-")}I=I.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(g,e,I,C){return e+I+C.substr(0,(n+t)%n)+"."+C.substr(t)+"E"}))}else I=e.toExponential(C);return g.match(/E\+00$/)&&I.match(/e[+-]\d$/)&&(I=I.substr(0,I.length-1)+"0"+I.charAt(I.length-1)),g.match(/E\-/)&&I.match(/e\+/)&&(I=I.replace(/e\+/,"e")),I.replace("e","E")}function wg(g,e,I){if(40===g.charCodeAt(0)&&!e.match(vg)){var C=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return I>=0?wg("n",C,I):"("+wg("n",C,-I)+")"}if(44===e.charCodeAt(e.length-1))return function(g,e,I){for(var C=e.length-1;44===e.charCodeAt(C-1);)--C;return Ng(g,e.substr(0,C),I/Math.pow(10,3*(e.length-C)))}(g,e,I);if(-1!==e.indexOf("%"))return function(g,e,I){var C=e.replace(Sg,""),n=e.length-C.length;return Ng(g,C,I*Math.pow(10,2*n))+de("%",n)}(g,e,I);if(-1!==e.indexOf("E"))return Hg(e,I);if(36===e.charCodeAt(0))return"$"+wg(g,e.substr(" "==e.charAt(1)?2:1),I);var n,t,l,a,o=Math.abs(I),c=I<0?"-":"";if(e.match(/^00+$/))return c+Ig(o,e.length);if(e.match(/^[#?]+$/))return n=""+I,0===I&&(n=""),n.length>e.length?n:Xg(e.substr(0,e.length-n.length))+n;if(t=e.match(Wg))return function(g,e,I){return I+(0===e?"":""+e)+de(" ",g[1].length+2+g[4].length)}(t,o,c);if(e.match(/^#+0+$/))return c+Ig(o,e.length-e.indexOf("0"));if(t=e.match(Vg))return n=(n=(""+I).replace(/^([^\.]+)$/,"$1."+Xg(t[1])).replace(/\.$/,"."+Xg(t[1]))).replace(/\.(\d*)$/,(function(g,e){return"."+e+de("0",Xg(t[1]).length-e.length)})),-1!==e.indexOf("0.")?n:n.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),t=e.match(/^(0*)\.(#*)$/))return c+(""+o).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,t[1].length?"0.":".");if(t=e.match(/^#{1,3},##0(\.?)$/))return c+yg(""+o);if(t=e.match(/^#,##0\.([#0]*0)$/))return I<0?"-"+wg(g,e,-I):yg(""+I)+"."+de("0",t[1].length);if(t=e.match(/^#,#*,#0/))return wg(g,e.replace(/^#,#*,/,""),I);if(t=e.match(/^([0#]+)(\\?-([0#]+))+$/))return n=eg(wg(g,e.replace(/[\\-]/g,""),I)),l=0,eg(eg(e.replace(/\\/g,"")).replace(/[0#]/g,(function(g){return l<n.length?n.charAt(l++):"0"===g?"0":""})));if(e.match(Rg))return"("+(n=wg(g,"##########",I)).substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var A="";if(t=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(t[4].length,7),a=sg(o,Math.pow(10,l)-1,!1),n=""+c," "==(A=Ng("n",t[1],a[1])).charAt(A.length-1)&&(A=A.substr(0,A.length-1)+"0"),n+=A+t[2]+"/"+t[3],(A=ng(a[2],l)).length<t[4].length&&(A=Xg(t[4].substr(t[4].length-A.length))+A),n+=A;if(t=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(t[1].length,t[4].length),7),c+((a=sg(o,Math.pow(10,l)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?Cg(a[1],l)+t[2]+"/"+t[3]+ng(a[2],l):de(" ",2*l+1+t[2].length+t[3].length));if(t=e.match(/^[#0?]+$/))return n=""+I,e.length<=n.length?n:Xg(e.substr(0,e.length-n.length))+n;if(t=e.match(/^([#0]+)\.([#0]+)$/)){n=""+I.toFixed(Math.min(t[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var r=e.indexOf(".")-l,i=e.length-n.length-r;return Xg(e.substr(0,r)+n+e.substr(e.length-i))}if(t=e.match(/^00,000\.([#0]*0)$/))return I<0?"-"+wg(g,e,-I):yg(""+I).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(g){return"00,"+(g.length<3?Ig(0,3-g.length):"")+g}))+"."+Ig(0,t[1].length);switch(e){case"###,###":case"##,###":case"#,###":var s=yg(""+o);return"0"!==s?c+s:"";default:if(e.match(/\.[0#?]*$/))return wg(g,e.slice(0,e.lastIndexOf(".")),I)+Xg(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ng(g,e,I){return(0|I)===I?wg(g,e,I):Yg(g,e,I)}var Fg=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Kg(g){for(var e=0,I="",C="";e<g.length;)switch(I=g.charAt(e)){case"G":ag(g,e)&&(e+=6),e++;break;case'"':for(;34!==g.charCodeAt(++e)&&e<g.length;);++e;break;case"\\":case"_":e+=2;break;case"@":++e;break;case"B":case"b":if("1"===g.charAt(e+1)||"2"===g.charAt(e+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===g.substr(e,3).toUpperCase())return!0;if("AM/PM"===g.substr(e,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===g.substr(e,5).toUpperCase())return!0;++e;break;case"[":for(C=I;"]"!==g.charAt(e++)&&e<g.length;)C+=g.charAt(e);if(C.match(Fg))return!0;break;case".":case"0":case"#":for(;e<g.length&&("0#?.,E+-%".indexOf(I=g.charAt(++e))>-1||"\\"==I&&"-"==g.charAt(e+1)&&"0#".indexOf(g.charAt(e+2))>-1););break;case"?":for(;g.charAt(++e)===I;);break;case"*":++e," "!=g.charAt(e)&&"*"!=g.charAt(e)||++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<g.length&&"0123456789".indexOf(g.charAt(++e))>-1;);break;default:++e}return!1}var Eg=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Tg(g,e){if(null==e)return!1;var I=parseFloat(e[2]);switch(e[1]){case"=":if(g==I)return!0;break;case">":if(g>I)return!0;break;case"<":if(g<I)return!0;break;case"<>":if(g!=I)return!0;break;case">=":if(g>=I)return!0;break;case"<=":if(g<=I)return!0}return!1}function Mg(g,e){var I=function(g){for(var e=[],I=!1,C=0,n=0;C<g.length;++C)switch(g.charCodeAt(C)){case 34:I=!I;break;case 95:case 42:case 92:++C;break;case 59:e[e.length]=g.substr(n,C-n),n=C+1}if(e[e.length]=g.substr(n),!0===I)throw new Error("Format |"+g+"| unterminated string ");return e}(g),C=I.length,n=I[C-1].indexOf("@");if(C<4&&n>-1&&--C,I.length>4)throw new Error("cannot find right format for |"+I.join("|")+"|");if("number"!==typeof e)return[4,4===I.length||n>-1?I[I.length-1]:"@"];switch(I.length){case 1:I=n>-1?["General","General","General",I[0]]:[I[0],I[0],I[0],"@"];break;case 2:I=n>-1?[I[0],I[0],I[0],I[1]]:[I[0],I[1],I[0],"@"];break;case 3:I=n>-1?[I[0],I[1],I[0],I[2]]:[I[0],I[1],I[2],"@"]}var t=e>0?I[0]:e<0?I[1]:I[2];if(-1===I[0].indexOf("[")&&-1===I[1].indexOf("["))return[C,t];if(null!=I[0].match(/\[[=<>]/)||null!=I[1].match(/\[[=<>]/)){var l=I[0].match(Eg),a=I[1].match(Eg);return Tg(e,l)?[C,I[0]]:Tg(e,a)?[C,I[1]]:[C,I[null!=l&&null!=a?2:1]]}return[C,t]}function xg(g,e,I){null==I&&(I={});var C="";switch(typeof g){case"string":C="m/d/yy"==g&&I.dateNF?I.dateNF:g;break;case"number":null==(C=14==g&&I.dateNF?I.dateNF:(null!=I.table?I.table:Ag)[g])&&(C=I.table&&I.table[rg[g]]||Ag[rg[g]]),null==C&&(C=ig[g]||"General")}if(ag(C,0))return pg(e,I);e instanceof Date&&(e=bg(e,I.date1904));var n=Mg(C,e);if(ag(n[1]))return pg(e,I);if(!0===e)e="TRUE";else if(!1===e)e="FALSE";else if(""===e||null==e)return"";return function(g,e,I,C){for(var n,t,l,a=[],o="",c=0,A="",r="t",i="H";c<g.length;)switch(A=g.charAt(c)){case"G":if(!ag(g,c))throw new Error("unrecognized character "+A+" in "+g);a[a.length]={t:"G",v:"General"},c+=7;break;case'"':for(o="";34!==(l=g.charCodeAt(++c))&&c<g.length;)o+=String.fromCharCode(l);a[a.length]={t:"t",v:o},++c;break;case"\\":var s=g.charAt(++c),d="("===s||")"===s?s:"t";a[a.length]={t:d,v:s},++c;break;case"_":a[a.length]={t:"t",v:" "},c+=2;break;case"@":a[a.length]={t:"T",v:e},++c;break;case"B":case"b":if("1"===g.charAt(c+1)||"2"===g.charAt(c+1)){if(null==n&&null==(n=dg(e,I,"2"===g.charAt(c+1))))return"";a[a.length]={t:"X",v:g.substr(c,2)},r=A,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":A=A.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0)return"";if(null==n&&null==(n=dg(e,I)))return"";for(o=A;++c<g.length&&g.charAt(c).toLowerCase()===A;)o+=A;"m"===A&&"h"===r.toLowerCase()&&(A="M"),"h"===A&&(A=i),a[a.length]={t:A,v:o},r=A;break;case"A":case"a":case"\u4e0a":var u={t:A,v:A};if(null==n&&(n=dg(e,I)),"A/P"===g.substr(c,3).toUpperCase()?(null!=n&&(u.v=n.H>=12?"P":"A"),u.t="T",i="h",c+=3):"AM/PM"===g.substr(c,5).toUpperCase()?(null!=n&&(u.v=n.H>=12?"PM":"AM"),u.t="T",c+=5,i="h"):"\u4e0a\u5348/\u4e0b\u5348"===g.substr(c,5).toUpperCase()?(null!=n&&(u.v=n.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),u.t="T",c+=5,i="h"):(u.t="t",++c),null==n&&"T"===u.t)return"";a[a.length]=u,r=A;break;case"[":for(o=A;"]"!==g.charAt(c++)&&c<g.length;)o+=g.charAt(c);if("]"!==o.slice(-1))throw'unterminated "[" block: |'+o+"|";if(o.match(Fg)){if(null==n&&null==(n=dg(e,I)))return"";a[a.length]={t:"Z",v:o.toLowerCase()},r=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",Kg(g)||(a[a.length]={t:"t",v:o}));break;case".":if(null!=n){for(o=A;++c<g.length&&"0"===(A=g.charAt(c));)o+=A;a[a.length]={t:"s",v:o};break}case"0":case"#":for(o=A;++c<g.length&&"0#?.,E+-%".indexOf(A=g.charAt(c))>-1;)o+=A;a[a.length]={t:"n",v:o};break;case"?":for(o=A;g.charAt(++c)===A;)o+=A;a[a.length]={t:A,v:o},r=A;break;case"*":++c," "!=g.charAt(c)&&"*"!=g.charAt(c)||++c;break;case"(":case")":a[a.length]={t:1===C?"t":A,v:A},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=A;c<g.length&&"0123456789".indexOf(g.charAt(++c))>-1;)o+=g.charAt(c);a[a.length]={t:"D",v:o};break;case" ":a[a.length]={t:A,v:A},++c;break;case"$":a[a.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(A))throw new Error("unrecognized character "+A+" in "+g);a[a.length]={t:"t",v:A},++c}var m,h=0,b=0;for(c=a.length-1,r="t";c>=0;--c)switch(a[c].t){case"h":case"H":a[c].t=i,r="h",h<1&&(h=1);break;case"s":(m=a[c].v.match(/\.0+$/))&&(b=Math.max(b,m[0].length-1)),h<3&&(h=3);case"d":case"y":case"M":case"e":r=a[c].t;break;case"m":"s"===r&&(a[c].t="M",h<2&&(h=2));break;case"X":break;case"Z":h<1&&a[c].v.match(/[Hh]/)&&(h=1),h<2&&a[c].v.match(/[Mm]/)&&(h=2),h<3&&a[c].v.match(/[Ss]/)&&(h=3)}switch(h){case 0:break;case 1:n.u>=.5&&(n.u=0,++n.S),n.S>=60&&(n.S=0,++n.M),n.M>=60&&(n.M=0,++n.H);break;case 2:n.u>=.5&&(n.u=0,++n.S),n.S>=60&&(n.S=0,++n.M)}var Z,G="";for(c=0;c<a.length;++c)switch(a[c].t){case"t":case"T":case" ":case"D":break;case"X":a[c].v="",a[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[c].v=Bg(a[c].t.charCodeAt(0),a[c].v,n,b),a[c].t="t";break;case"n":case"?":for(Z=c+1;null!=a[Z]&&("?"===(A=a[Z].t)||"D"===A||(" "===A||"t"===A)&&null!=a[Z+1]&&("?"===a[Z+1].t||"t"===a[Z+1].t&&"/"===a[Z+1].v)||"("===a[c].t&&(" "===A||"n"===A||")"===A)||"t"===A&&("/"===a[Z].v||" "===a[Z].v&&null!=a[Z+1]&&"?"==a[Z+1].t));)a[c].v+=a[Z].v,a[Z]={v:"",t:";"},++Z;G+=a[c].v,c=Z-1;break;case"G":a[c].t="t",a[c].v=pg(e,I)}var p,B,y="";if(G.length>0){40==G.charCodeAt(0)?(p=e<0&&45===G.charCodeAt(0)?-e:e,B=Ng("n",G,p)):(B=Ng("n",G,p=e<0&&C>1?-e:e),p<0&&a[0]&&"t"==a[0].t&&(B=B.substr(1),a[0].v="-"+a[0].v)),Z=B.length-1;var S=a.length;for(c=0;c<a.length;++c)if(null!=a[c]&&"t"!=a[c].t&&a[c].v.indexOf(".")>-1){S=c;break}var f=a.length;if(S===a.length&&-1===B.indexOf("E")){for(c=a.length-1;c>=0;--c)null!=a[c]&&-1!=="n?".indexOf(a[c].t)&&(Z>=a[c].v.length-1?(Z-=a[c].v.length,a[c].v=B.substr(Z+1,a[c].v.length)):Z<0?a[c].v="":(a[c].v=B.substr(0,Z+1),Z=-1),a[c].t="t",f=c);Z>=0&&f<a.length&&(a[f].v=B.substr(0,Z+1)+a[f].v)}else if(S!==a.length&&-1===B.indexOf("E")){for(Z=B.indexOf(".")-1,c=S;c>=0;--c)if(null!=a[c]&&-1!=="n?".indexOf(a[c].t)){for(t=a[c].v.indexOf(".")>-1&&c===S?a[c].v.indexOf(".")-1:a[c].v.length-1,y=a[c].v.substr(t+1);t>=0;--t)Z>=0&&("0"===a[c].v.charAt(t)||"#"===a[c].v.charAt(t))&&(y=B.charAt(Z--)+y);a[c].v=y,a[c].t="t",f=c}for(Z>=0&&f<a.length&&(a[f].v=B.substr(0,Z+1)+a[f].v),Z=B.indexOf(".")+1,c=S;c<a.length;++c)if(null!=a[c]&&(-1!=="n?(".indexOf(a[c].t)||c===S)){for(t=a[c].v.indexOf(".")>-1&&c===S?a[c].v.indexOf(".")+1:0,y=a[c].v.substr(0,t);t<a[c].v.length;++t)Z<B.length&&(y+=B.charAt(Z++));a[c].v=y,a[c].t="t",f=c}}}for(c=0;c<a.length;++c)null!=a[c]&&"n?".indexOf(a[c].t)>-1&&(p=C>1&&e<0&&c>0&&"-"===a[c-1].v?-e:e,a[c].v=Ng(a[c].t,a[c].v,p),a[c].t="t");var W="";for(c=0;c!==a.length;++c)null!=a[c]&&(W+=a[c].v);return W}(n[1],e,I,n[0])}function Ug(g,e){if("number"!=typeof e){e=+e||-1;for(var I=0;I<392;++I)if(void 0!=Ag[I]){if(Ag[I]==g){e=I;break}}else e<0&&(e=I);e<0&&(e=391)}return Ag[e]=g,e}function Dg(g){for(var e=0;392!=e;++e)void 0!==g[e]&&Ug(g[e],e)}function Lg(){var g;g||(g={}),g[0]="General",g[1]="0",g[2]="0.00",g[3]="#,##0",g[4]="#,##0.00",g[9]="0%",g[10]="0.00%",g[11]="0.00E+00",g[12]="# ?/?",g[13]="# ??/??",g[14]="m/d/yy",g[15]="d-mmm-yy",g[16]="d-mmm",g[17]="mmm-yy",g[18]="h:mm AM/PM",g[19]="h:mm:ss AM/PM",g[20]="h:mm",g[21]="h:mm:ss",g[22]="m/d/yy h:mm",g[37]="#,##0 ;(#,##0)",g[38]="#,##0 ;[Red](#,##0)",g[39]="#,##0.00;(#,##0.00)",g[40]="#,##0.00;[Red](#,##0.00)",g[45]="mm:ss",g[46]="[h]:mm:ss",g[47]="mmss.0",g[48]="##0.0E+0",g[49]="@",g[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',Ag=g}var zg=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var Qg=function(){var g={};g.version="1.2.0";var e=function(){for(var g=0,e=new Array(256),I=0;256!=I;++I)g=1&(g=1&(g=1&(g=1&(g=1&(g=1&(g=1&(g=1&(g=I)?-306674912^g>>>1:g>>>1)?-306674912^g>>>1:g>>>1)?-306674912^g>>>1:g>>>1)?-306674912^g>>>1:g>>>1)?-306674912^g>>>1:g>>>1)?-306674912^g>>>1:g>>>1)?-306674912^g>>>1:g>>>1)?-306674912^g>>>1:g>>>1,e[I]=g;return"undefined"!==typeof Int32Array?new Int32Array(e):e}();var I=function(g){var e=0,I=0,C=0,n="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(C=0;256!=C;++C)n[C]=g[C];for(C=0;256!=C;++C)for(I=g[C],e=256+C;e<4096;e+=256)I=n[e]=I>>>8^g[255&I];var t=[];for(C=1;16!=C;++C)t[C-1]="undefined"!==typeof Int32Array?n.subarray(256*C,256*C+256):n.slice(256*C,256*C+256);return t}(e),C=I[0],n=I[1],t=I[2],l=I[3],a=I[4],o=I[5],c=I[6],A=I[7],r=I[8],i=I[9],s=I[10],d=I[11],u=I[12],m=I[13],h=I[14];return g.table=e,g.bstr=function(g,I){for(var C=-1^I,n=0,t=g.length;n<t;)C=C>>>8^e[255&(C^g.charCodeAt(n++))];return~C},g.buf=function(g,I){for(var b=-1^I,Z=g.length-15,G=0;G<Z;)b=h[g[G++]^255&b]^m[g[G++]^b>>8&255]^u[g[G++]^b>>16&255]^d[g[G++]^b>>>24]^s[g[G++]]^i[g[G++]]^r[g[G++]]^A[g[G++]]^c[g[G++]]^o[g[G++]]^a[g[G++]]^l[g[G++]]^t[g[G++]]^n[g[G++]]^C[g[G++]]^e[g[G++]];for(Z+=15;G<Z;)b=b>>>8^e[255&(b^g[G++])];return~b},g.str=function(g,I){for(var C=-1^I,n=0,t=g.length,l=0,a=0;n<t;)(l=g.charCodeAt(n++))<128?C=C>>>8^e[255&(C^l)]:l<2048?C=(C=C>>>8^e[255&(C^(192|l>>6&31))])>>>8^e[255&(C^(128|63&l))]:l>=55296&&l<57344?(l=64+(1023&l),a=1023&g.charCodeAt(n++),C=(C=(C=(C=C>>>8^e[255&(C^(240|l>>8&7))])>>>8^e[255&(C^(128|l>>2&63))])>>>8^e[255&(C^(128|a>>6&15|(3&l)<<4))])>>>8^e[255&(C^(128|63&a))]):C=(C=(C=C>>>8^e[255&(C^(224|l>>12&15))])>>>8^e[255&(C^(128|l>>6&63))])>>>8^e[255&(C^(128|63&l))];return~C},g}(),Pg=function(){var g,e={};function I(g){if("/"==g.charAt(g.length-1))return-1===g.slice(0,-1).indexOf("/")?g:I(g.slice(0,-1));var e=g.lastIndexOf("/");return-1===e?g:g.slice(0,e+1)}function C(g){if("/"==g.charAt(g.length-1))return C(g.slice(0,-1));var e=g.lastIndexOf("/");return-1===e?g:g.slice(e+1)}function n(g,e){"string"===typeof e&&(e=new Date(e));var I=e.getHours();I=(I=I<<6|e.getMinutes())<<5|e.getSeconds()>>>1,g.write_shift(2,I);var C=e.getFullYear()-1980;C=(C=C<<4|e.getMonth()+1)<<5|e.getDate(),g.write_shift(2,C)}function t(g){MI(g,0);for(var e={},I=0;g.l<=g.length-4;){var C=g.read_shift(2),n=g.read_shift(2),t=g.l+n,l={};if(21589===C)1&(I=g.read_shift(1))&&(l.mtime=g.read_shift(4)),n>5&&(2&I&&(l.atime=g.read_shift(4)),4&I&&(l.ctime=g.read_shift(4))),l.mtime&&(l.mt=new Date(1e3*l.mtime));g.l=t,e[C]=l}return e}function l(){return g||(g={})}function a(g,e){if(80==g[0]&&75==g[1])return sg(g,e);if(109==(32|g[0])&&105==(32|g[1]))return function(g,e){if("mime-version:"!=B(g.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var I=e&&e.root||"",C=(D&&Buffer.isBuffer(g)?g.toString("binary"):B(g)).split("\r\n"),n=0,t="";for(n=0;n<C.length;++n)if(t=C[n],/^Content-Location:/i.test(t)&&(t=t.slice(t.indexOf("file")),I||(I=t.slice(0,t.lastIndexOf("/")+1)),t.slice(0,I.length)!=I))for(;I.length>0&&(I=(I=I.slice(0,I.length-1)).slice(0,I.lastIndexOf("/")+1),t.slice(0,I.length)!=I););var l=(C[1]||"").match(/boundary="(.*?)"/);if(!l)throw new Error("MAD cannot find boundary");var a="--"+(l[1]||""),o=[],c=[],A={FileIndex:o,FullPaths:c};i(A);var r,s=0;for(n=0;n<C.length;++n){var d=C[n];d!==a&&d!==a+"--"||(s++&&Zg(A,C.slice(r,n),I),r=n)}return A}(g,e);if(g.length<512)throw new Error("CFB file size "+g.length+" < 512");var I,C,n,t,l,a,s=512,d=[],u=g.slice(0,512);MI(u,0);var m=function(g){if(80==g[g.l]&&75==g[g.l+1])return[0,0];g.chk(b,"Header Signature: "),g.l+=16;var e=g.read_shift(2,"u");return[g.read_shift(2,"u"),e]}(u);switch(I=m[0]){case 3:s=512;break;case 4:s=4096;break;case 0:if(0==m[1])return sg(g,e);default:throw new Error("Major Version: Expected 3 or 4 saw "+I)}512!==s&&MI(u=g.slice(0,s),28);var Z=g.slice(0,s);!function(g,e){var I=9;switch(g.l+=2,I=g.read_shift(2)){case 9:if(3!=e)throw new Error("Sector Shift: Expected 9 saw "+I);break;case 12:if(4!=e)throw new Error("Sector Shift: Expected 12 saw "+I);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+I)}g.chk("0600","Mini Sector Shift: "),g.chk("000000000000","Reserved: ")}(u,I);var G=u.read_shift(4,"i");if(3===I&&0!==G)throw new Error("# Directory Sectors: Expected 0 saw "+G);u.l+=4,t=u.read_shift(4,"i"),u.l+=4,u.chk("00100000","Mini Stream Cutoff Size: "),l=u.read_shift(4,"i"),C=u.read_shift(4,"i"),a=u.read_shift(4,"i"),n=u.read_shift(4,"i");for(var p=-1,y=0;y<109&&!((p=u.read_shift(4,"i"))<0);++y)d[y]=p;var S=function(g,e){for(var I=Math.ceil(g.length/e)-1,C=[],n=1;n<I;++n)C[n-1]=g.slice(n*e,(n+1)*e);return C[I-1]=g.slice(I*e),C}(g,s);c(a,n,S,s,d);var f=function(g,e,I,C){var n=g.length,t=[],l=[],a=[],o=[],c=C-1,A=0,r=0,i=0,s=0;for(A=0;A<n;++A)if(a=[],(i=A+e)>=n&&(i-=n),!l[i]){o=[];var d=[];for(r=i;r>=0;){d[r]=!0,l[r]=!0,a[a.length]=r,o.push(g[r]);var u=I[Math.floor(4*r/C)];if(C<4+(s=4*r&c))throw new Error("FAT boundary crossed: "+r+" 4 "+C);if(!g[u])break;if(d[r=wI(g[u],s)])break}t[i]={nodes:a,data:AI([o])}}return t}(S,t,d,s);f[t].name="!Directory",C>0&&l!==h&&(f[l].name="!MiniFAT"),f[d[0]].name="!FAT",f.fat_addrs=d,f.ssz=s;var W=[],V=[],v=[];!function(g,e,I,C,n,t,l,a){for(var c,i=0,s=C.length?2:0,d=e[g].data,u=0,m=0;u<d.length;u+=128){var b=d.slice(u,u+128);MI(b,64),m=b.read_shift(2),c=iI(b,0,m-s),C.push(c);var Z={name:c,type:b.read_shift(1),color:b.read_shift(1),L:b.read_shift(4,"i"),R:b.read_shift(4,"i"),C:b.read_shift(4,"i"),clsid:b.read_shift(16),state:b.read_shift(4,"i"),start:0,size:0};0!==b.read_shift(2)+b.read_shift(2)+b.read_shift(2)+b.read_shift(2)&&(Z.ct=r(b,b.l-8)),0!==b.read_shift(2)+b.read_shift(2)+b.read_shift(2)+b.read_shift(2)&&(Z.mt=r(b,b.l-8)),Z.start=b.read_shift(4,"i"),Z.size=b.read_shift(4,"i"),Z.size<0&&Z.start<0&&(Z.size=Z.type=0,Z.start=h,Z.name=""),5===Z.type?(i=Z.start,n>0&&i!==h&&(e[i].name="!StreamData")):Z.size>=4096?(Z.storage="fat",void 0===e[Z.start]&&(e[Z.start]=A(I,Z.start,e.fat_addrs,e.ssz)),e[Z.start].name=Z.name,Z.content=e[Z.start].data.slice(0,Z.size)):(Z.storage="minifat",Z.size<0?Z.size=0:i!==h&&Z.start!==h&&e[i]&&(Z.content=o(Z,e[i].data,(e[a]||{}).data))),Z.content&&MI(Z.content,0),t[c]=Z,l.push(Z)}}(t,f,S,W,C,{},V,l),function(g,e,I){for(var C=0,n=0,t=0,l=0,a=0,o=I.length,c=[],A=[];C<o;++C)c[C]=A[C]=C,e[C]=I[C];for(;a<A.length;++a)n=g[C=A[a]].L,t=g[C].R,l=g[C].C,c[C]===C&&(-1!==n&&c[n]!==n&&(c[C]=c[n]),-1!==t&&c[t]!==t&&(c[C]=c[t])),-1!==l&&(c[l]=C),-1!==n&&C!=c[C]&&(c[n]=c[C],A.lastIndexOf(n)<a&&A.push(n)),-1!==t&&C!=c[C]&&(c[t]=c[C],A.lastIndexOf(t)<a&&A.push(t));for(C=1;C<o;++C)c[C]===C&&(-1!==t&&c[t]!==t?c[C]=c[t]:-1!==n&&c[n]!==n&&(c[C]=c[n]));for(C=1;C<o;++C)if(0!==g[C].type){if((a=C)!=c[a])do{a=c[a],e[C]=e[a]+"/"+e[C]}while(0!==a&&-1!==c[a]&&a!=c[a]);c[C]=-1}for(e[0]+="/",C=1;C<o;++C)2!==g[C].type&&(e[C]+="/")}(V,v,W),W.shift();var R={FileIndex:V,FullPaths:v};return e&&e.raw&&(R.raw={header:Z,sectors:S}),R}function o(g,e,I){for(var C=g.start,n=g.size,t=[],l=C;I&&n>0&&l>=0;)t.push(e.slice(l*m,l*m+m)),n-=m,l=wI(I,4*l);return 0===t.length?UI(0):_(t).slice(0,g.size)}function c(g,e,I,C,n){var t=h;if(g===h){if(0!==e)throw new Error("DIFAT chain shorter than expected")}else if(-1!==g){var l=I[g],a=(C>>>2)-1;if(!l)return;for(var o=0;o<a&&(t=wI(l,4*o))!==h;++o)n.push(t);c(wI(l,C-4),e-1,I,C,n)}}function A(g,e,I,C,n){var t=[],l=[];n||(n=[]);var a=C-1,o=0,c=0;for(o=e;o>=0;){n[o]=!0,t[t.length]=o,l.push(g[o]);var A=I[Math.floor(4*o/C)];if(C<4+(c=4*o&a))throw new Error("FAT boundary crossed: "+o+" 4 "+C);if(!g[A])break;o=wI(g[A],c)}return{nodes:t,data:AI([l])}}function r(g,e){return new Date(1e3*(HI(g,e+4)/1e7*Math.pow(2,32)+HI(g,e)/1e7-11644473600))}function i(g,e){var I=e||{},C=I.root||"Root Entry";if(g.FullPaths||(g.FullPaths=[]),g.FileIndex||(g.FileIndex=[]),g.FullPaths.length!==g.FileIndex.length)throw new Error("inconsistent CFB structure");0===g.FullPaths.length&&(g.FullPaths[0]=C+"/",g.FileIndex[0]={name:C,type:5}),I.CLSID&&(g.FileIndex[0].clsid=I.CLSID),function(g){var e="\x01Sh33tJ5";if(Pg.find(g,"/"+e))return;var I=UI(4);I[0]=55,I[1]=I[3]=50,I[2]=54,g.FileIndex.push({name:e,type:2,content:I,size:4,L:69,R:69,C:69}),g.FullPaths.push(g.FullPaths[0]+e),s(g)}(g)}function s(g,e){i(g);for(var n=!1,t=!1,l=g.FullPaths.length-1;l>=0;--l){var a=g.FileIndex[l];switch(a.type){case 0:t?n=!0:(g.FileIndex.pop(),g.FullPaths.pop());break;case 1:case 2:case 5:t=!0,isNaN(a.R*a.L*a.C)&&(n=!0),a.R>-1&&a.L>-1&&a.R==a.L&&(n=!0);break;default:n=!0}}if(n||e){var o=new Date(1987,1,19),c=0,A=Object.create?Object.create(null):{},r=[];for(l=0;l<g.FullPaths.length;++l)A[g.FullPaths[l]]=!0,0!==g.FileIndex[l].type&&r.push([g.FullPaths[l],g.FileIndex[l]]);for(l=0;l<r.length;++l){var s=I(r[l][0]);(t=A[s])||(r.push([s,{name:C(s).replace("/",""),type:1,clsid:G,ct:o,mt:o,content:null}]),A[s]=!0)}for(r.sort((function(g,e){return function(g,e){for(var I=g.split("/"),C=e.split("/"),n=0,t=0,l=Math.min(I.length,C.length);n<l;++n){if(t=I[n].length-C[n].length)return t;if(I[n]!=C[n])return I[n]<C[n]?-1:1}return I.length-C.length}(g[0],e[0])})),g.FullPaths=[],g.FileIndex=[],l=0;l<r.length;++l)g.FullPaths[l]=r[l][0],g.FileIndex[l]=r[l][1];for(l=0;l<r.length;++l){var d=g.FileIndex[l],u=g.FullPaths[l];if(d.name=C(u).replace("/",""),d.L=d.R=d.C=-(d.color=1),d.size=d.content?d.content.length:0,d.start=0,d.clsid=d.clsid||G,0===l)d.C=r.length>1?1:-1,d.size=0,d.type=5;else if("/"==u.slice(-1)){for(c=l+1;c<r.length&&I(g.FullPaths[c])!=u;++c);for(d.C=c>=r.length?-1:c,c=l+1;c<r.length&&I(g.FullPaths[c])!=I(u);++c);d.R=c>=r.length?-1:c,d.type=1}else I(g.FullPaths[l+1]||"")==I(u)&&(d.R=l+1),d.type=2}}}function d(g,e){var I=e||{};if("mad"==I.fileType)return function(g,e){for(var I=e||{},C=I.boundary||"SheetJS",n=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(C="------="+C).slice(2)+'"',"","",""],t=g.FullPaths[0],l=t,a=g.FileIndex[0],o=1;o<g.FullPaths.length;++o)if(l=g.FullPaths[o].slice(t.length),(a=g.FileIndex[o]).size&&a.content&&"\x01Sh33tJ5"!=l){l=l.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(g){return"_x"+g.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(g){return"_u"+g.charCodeAt(0).toString(16)+"_"}));for(var c=a.content,A=D&&Buffer.isBuffer(c)?c.toString("binary"):B(c),r=0,i=Math.min(1024,A.length),s=0,d=0;d<=i;++d)(s=A.charCodeAt(d))>=32&&s<128&&++r;var u=r>=4*i/5;n.push(C),n.push("Content-Location: "+(I.root||"file:///C:/SheetJS/")+l),n.push("Content-Transfer-Encoding: "+(u?"quoted-printable":"base64")),n.push("Content-Type: "+mg(a,l)),n.push(""),n.push(u?bg(A):hg(A))}return n.push(C+"--\r\n"),n.join("\r\n")}(g,I);if(s(g),"zip"===I.fileType)return function(g,e){var I=e||{},C=[],t=[],l=UI(1),a=I.compression?8:0,o=0;0;var c=0,A=0,r=0,i=0,s=g.FullPaths[0],d=s,u=g.FileIndex[0],m=[],h=0;for(c=1;c<g.FullPaths.length;++c)if(d=g.FullPaths[c].slice(s.length),(u=g.FileIndex[c]).size&&u.content&&"\x01Sh33tJ5"!=d){var b=r,Z=UI(d.length);for(A=0;A<d.length;++A)Z.write_shift(1,127&d.charCodeAt(A));Z=Z.slice(0,Z.l),m[i]=Qg.buf(u.content,0);var G=u.content;8==a&&(G=y(G)),(l=UI(30)).write_shift(4,67324752),l.write_shift(2,20),l.write_shift(2,o),l.write_shift(2,a),u.mt?n(l,u.mt):l.write_shift(4,0),l.write_shift(-4,8&o?0:m[i]),l.write_shift(4,8&o?0:G.length),l.write_shift(4,8&o?0:u.content.length),l.write_shift(2,Z.length),l.write_shift(2,0),r+=l.length,C.push(l),r+=Z.length,C.push(Z),r+=G.length,C.push(G),8&o&&((l=UI(12)).write_shift(-4,m[i]),l.write_shift(4,G.length),l.write_shift(4,u.content.length),r+=l.l,C.push(l)),(l=UI(46)).write_shift(4,33639248),l.write_shift(2,0),l.write_shift(2,20),l.write_shift(2,o),l.write_shift(2,a),l.write_shift(4,0),l.write_shift(-4,m[i]),l.write_shift(4,G.length),l.write_shift(4,u.content.length),l.write_shift(2,Z.length),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(4,0),l.write_shift(4,b),h+=l.l,t.push(l),h+=Z.length,t.push(Z),++i}return l=UI(22),l.write_shift(4,101010256),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(2,i),l.write_shift(2,i),l.write_shift(4,h),l.write_shift(4,r),l.write_shift(2,0),_([_(C),_(t),l])}(g,I);var C=function(g){for(var e=0,I=0,C=0;C<g.FileIndex.length;++C){var n=g.FileIndex[C];if(n.content){var t=n.content.length;t>0&&(t<4096?e+=t+63>>6:I+=t+511>>9)}}for(var l=g.FullPaths.length+3>>2,a=e+127>>7,o=(e+7>>3)+I+l+a,c=o+127>>7,A=c<=109?0:Math.ceil((c-109)/127);o+c+A+127>>7>c;)A=++c<=109?0:Math.ceil((c-109)/127);var r=[1,A,c,a,l,I,e,0];return g.FileIndex[0].size=e<<6,r[7]=(g.FileIndex[0].start=r[0]+r[1]+r[2]+r[3]+r[4]+r[5])+(r[6]+7>>3),r}(g),t=UI(C[7]<<9),l=0,a=0;for(l=0;l<8;++l)t.write_shift(1,Z[l]);for(l=0;l<8;++l)t.write_shift(2,0);for(t.write_shift(2,62),t.write_shift(2,3),t.write_shift(2,65534),t.write_shift(2,9),t.write_shift(2,6),l=0;l<3;++l)t.write_shift(2,0);for(t.write_shift(4,0),t.write_shift(4,C[2]),t.write_shift(4,C[0]+C[1]+C[2]+C[3]-1),t.write_shift(4,0),t.write_shift(4,4096),t.write_shift(4,C[3]?C[0]+C[1]+C[2]-1:h),t.write_shift(4,C[3]),t.write_shift(-4,C[1]?C[0]-1:h),t.write_shift(4,C[1]),l=0;l<109;++l)t.write_shift(-4,l<C[2]?C[1]+l:-1);if(C[1])for(a=0;a<C[1];++a){for(;l<236+127*a;++l)t.write_shift(-4,l<C[2]?C[1]+l:-1);t.write_shift(-4,a===C[1]-1?h:a+1)}var o=function(g){for(a+=g;l<a-1;++l)t.write_shift(-4,l+1);g&&(++l,t.write_shift(-4,h))};for(a=l=0,a+=C[1];l<a;++l)t.write_shift(-4,p.DIFSECT);for(a+=C[2];l<a;++l)t.write_shift(-4,p.FATSECT);o(C[3]),o(C[4]);for(var c=0,A=0,r=g.FileIndex[0];c<g.FileIndex.length;++c)(r=g.FileIndex[c]).content&&((A=r.content.length)<4096||(r.start=a,o(A+511>>9)));for(o(C[6]+7>>3);511&t.l;)t.write_shift(-4,p.ENDOFCHAIN);for(a=l=0,c=0;c<g.FileIndex.length;++c)(r=g.FileIndex[c]).content&&(!(A=r.content.length)||A>=4096||(r.start=a,o(A+63>>6)));for(;511&t.l;)t.write_shift(-4,p.ENDOFCHAIN);for(l=0;l<C[4]<<2;++l){var i=g.FullPaths[l];if(i&&0!==i.length){r=g.FileIndex[l],0===l&&(r.start=r.size?r.start-1:h);var d=0===l&&I.root||r.name;if(A=2*(d.length+1),t.write_shift(64,d,"utf16le"),t.write_shift(2,A),t.write_shift(1,r.type),t.write_shift(1,r.color),t.write_shift(-4,r.L),t.write_shift(-4,r.R),t.write_shift(-4,r.C),r.clsid)t.write_shift(16,r.clsid,"hex");else for(c=0;c<4;++c)t.write_shift(4,0);t.write_shift(4,r.state||0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,r.start),t.write_shift(4,r.size),t.write_shift(4,0)}else{for(c=0;c<17;++c)t.write_shift(4,0);for(c=0;c<3;++c)t.write_shift(4,-1);for(c=0;c<12;++c)t.write_shift(4,0)}}for(l=1;l<g.FileIndex.length;++l)if((r=g.FileIndex[l]).size>=4096)if(t.l=r.start+1<<9,D&&Buffer.isBuffer(r.content))r.content.copy(t,t.l,0,r.size),t.l+=r.size+511&-512;else{for(c=0;c<r.size;++c)t.write_shift(1,r.content[c]);for(;511&c;++c)t.write_shift(1,0)}for(l=1;l<g.FileIndex.length;++l)if((r=g.FileIndex[l]).size>0&&r.size<4096)if(D&&Buffer.isBuffer(r.content))r.content.copy(t,t.l,0,r.size),t.l+=r.size+63&-64;else{for(c=0;c<r.size;++c)t.write_shift(1,r.content[c]);for(;63&c;++c)t.write_shift(1,0)}if(D)t.l=t.length;else for(;t.l<t.length;)t.write_shift(1,0);return t}e.version="1.2.1";var u,m=64,h=-2,b="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],G="00000000000000000000000000000000",p={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:h,FREESECT:-1,HEADER_SIGNATURE:b,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:G,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function B(g){for(var e=new Array(g.length),I=0;I<g.length;++I)e[I]=String.fromCharCode(g[I]);return e.join("")}function y(g){return u?u.deflateRawSync(g):ng(g)}var S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],W=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function V(g){var e=139536&(g<<1|g<<11)|558144&(g<<5|g<<15);return 255&(e>>16|e>>8|e)}for(var v="undefined"!==typeof Uint8Array,R=v?new Uint8Array(256):[],X=0;X<256;++X)R[X]=V(X);function k(g,e){var I=R[255&g];return e<=8?I>>>8-e:(I=I<<8|R[g>>8&255],e<=16?I>>>16-e:(I=I<<8|R[g>>16&255])>>>24-e)}function J(g,e){var I=7&e,C=e>>>3;return(g[C]|(I<=6?0:g[C+1]<<8))>>>I&3}function Y(g,e){var I=7&e,C=e>>>3;return(g[C]|(I<=5?0:g[C+1]<<8))>>>I&7}function H(g,e){var I=7&e,C=e>>>3;return(g[C]|(I<=3?0:g[C+1]<<8))>>>I&31}function w(g,e){var I=7&e,C=e>>>3;return(g[C]|(I<=1?0:g[C+1]<<8))>>>I&127}function N(g,e,I){var C=7&e,n=e>>>3,t=(1<<I)-1,l=g[n]>>>C;return I<8-C?l&t:(l|=g[n+1]<<8-C,I<16-C?l&t:(l|=g[n+2]<<16-C,I<24-C?l&t:(l|=g[n+3]<<24-C)&t))}function F(g,e,I){var C=7&e,n=e>>>3;return C<=5?g[n]|=(7&I)<<C:(g[n]|=I<<C&255,g[n+1]=(7&I)>>8-C),e+3}function K(g,e,I){return I=(1&I)<<(7&e),g[e>>>3]|=I,e+1}function E(g,e,I){var C=e>>>3;return I<<=7&e,g[C]|=255&I,I>>>=8,g[C+1]=I,e+8}function T(g,e,I){var C=e>>>3;return I<<=7&e,g[C]|=255&I,I>>>=8,g[C+1]=255&I,g[C+2]=I>>>8,e+16}function M(g,e){var I=g.length,C=2*I>e?2*I:e+5,n=0;if(I>=e)return g;if(D){var t=Q(C);if(g.copy)g.copy(t);else for(;n<g.length;++n)t[n]=g[n];return t}if(v){var l=new Uint8Array(C);if(l.set)l.set(g);else for(;n<I;++n)l[n]=g[n];return l}return g.length=C,g}function O(g){for(var e=new Array(g),I=0;I<g;++I)e[I]=0;return e}function j(g,e,I){var C=1,n=0,t=0,l=0,a=0,o=g.length,c=v?new Uint16Array(32):O(32);for(t=0;t<32;++t)c[t]=0;for(t=o;t<I;++t)g[t]=0;o=g.length;var A=v?new Uint16Array(o):O(o);for(t=0;t<o;++t)c[n=g[t]]++,C<n&&(C=n),A[t]=0;for(c[0]=0,t=1;t<=C;++t)c[t+16]=a=a+c[t-1]<<1;for(t=0;t<o;++t)0!=(a=g[t])&&(A[t]=c[a+16]++);var r=0;for(t=0;t<o;++t)if(0!=(r=g[t]))for(a=k(A[t],C)>>C-r,l=(1<<C+4-r)-1;l>=0;--l)e[a|l<<r]=15&r|t<<4;return C}var $=v?new Uint16Array(512):O(512),eg=v?new Uint16Array(32):O(32);if(!v){for(var Ig=0;Ig<512;++Ig)$[Ig]=0;for(Ig=0;Ig<32;++Ig)eg[Ig]=0}!function(){for(var g=[],e=0;e<32;e++)g.push(5);j(g,eg,32);var I=[];for(e=0;e<=143;e++)I.push(8);for(;e<=255;e++)I.push(9);for(;e<=279;e++)I.push(7);for(;e<=287;e++)I.push(8);j(I,$,288)}();var Cg=function(){for(var g=v?new Uint8Array(32768):[],e=0,I=0;e<W.length-1;++e)for(;I<W[e+1];++I)g[I]=e;for(;I<32768;++I)g[I]=29;var C=v?new Uint8Array(259):[];for(e=0,I=0;e<f.length-1;++e)for(;I<f[e+1];++I)C[I]=e;return function(e,I){return e.length<8?function(g,e){for(var I=0;I<g.length;){var C=Math.min(65535,g.length-I),n=I+C==g.length;for(e.write_shift(1,+n),e.write_shift(2,C),e.write_shift(2,65535&~C);C-- >0;)e[e.l++]=g[I++]}return e.l}(e,I):function(e,I){for(var n=0,t=0,l=v?new Uint16Array(32768):[];t<e.length;){var a=Math.min(65535,e.length-t);if(a<10){for(7&(n=F(I,n,+!(t+a!=e.length)))&&(n+=8-(7&n)),I.l=n/8|0,I.write_shift(2,a),I.write_shift(2,65535&~a);a-- >0;)I[I.l++]=e[t++];n=8*I.l}else{n=F(I,n,+!(t+a!=e.length)+2);for(var o=0;a-- >0;){var c=e[t],A=-1,r=0;if((A=l[o=32767&(o<<5^c)])&&((A|=-32768&t)>t&&(A-=32768),A<t))for(;e[A+r]==e[t+r]&&r<250;)++r;if(r>2){(c=C[r])<=22?n=E(I,n,R[c+1]>>1)-1:(E(I,n,3),E(I,n+=5,R[c-23]>>5),n+=3);var i=c<8?0:c-4>>2;i>0&&(T(I,n,r-f[c]),n+=i),c=g[t-A],n=E(I,n,R[c]>>3),n-=3;var s=c<4?0:c-2>>1;s>0&&(T(I,n,t-A-W[c]),n+=s);for(var d=0;d<r;++d)l[o]=32767&t,o=32767&(o<<5^e[t]),++t;a-=r-1}else c<=143?c+=48:n=K(I,n,1),n=E(I,n,R[c]),l[o]=32767&t,++t}n=E(I,n,0)-1}}return I.l=(n+7)/8|0,I.l}(e,I)}}();function ng(g){var e=UI(50+Math.floor(1.1*g.length)),I=Cg(g,e);return e.slice(0,I)}var tg=v?new Uint16Array(32768):O(32768),lg=v?new Uint16Array(32768):O(32768),ag=v?new Uint16Array(128):O(128),og=1,cg=1;function Ag(g,e){var I=H(g,e)+257,C=H(g,e+=5)+1,n=function(g,e){var I=7&e,C=e>>>3;return(g[C]|(I<=4?0:g[C+1]<<8))>>>I&15}(g,e+=5)+4;e+=4;for(var t=0,l=v?new Uint8Array(19):O(19),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=1,c=v?new Uint8Array(8):O(8),A=v?new Uint8Array(8):O(8),r=l.length,i=0;i<n;++i)l[S[i]]=t=Y(g,e),o<t&&(o=t),c[t]++,e+=3;var s=0;for(c[0]=0,i=1;i<=o;++i)A[i]=s=s+c[i-1]<<1;for(i=0;i<r;++i)0!=(s=l[i])&&(a[i]=A[s]++);var d=0;for(i=0;i<r;++i)if(0!=(d=l[i])){s=R[a[i]]>>8-d;for(var u=(1<<7-d)-1;u>=0;--u)ag[s|u<<d]=7&d|i<<3}var m=[];for(o=1;m.length<I+C;)switch(e+=7&(s=ag[w(g,e)]),s>>>=3){case 16:for(t=3+J(g,e),e+=2,s=m[m.length-1];t-- >0;)m.push(s);break;case 17:for(t=3+Y(g,e),e+=3;t-- >0;)m.push(0);break;case 18:for(t=11+w(g,e),e+=7;t-- >0;)m.push(0);break;default:m.push(s),o<s&&(o=s)}var h=m.slice(0,I),b=m.slice(I);for(i=I;i<286;++i)h[i]=0;for(i=C;i<30;++i)b[i]=0;return og=j(h,tg,286),cg=j(b,lg,30),e}function rg(g,e){var I=function(g,e){if(3==g[0]&&!(3&g[1]))return[z(e),2];for(var I=0,C=0,n=Q(e||1<<18),t=0,l=n.length>>>0,a=0,o=0;0==(1&C);)if(C=Y(g,I),I+=3,C>>>1!=0)for(C>>1==1?(a=9,o=5):(I=Ag(g,I),a=og,o=cg);;){!e&&l<t+32767&&(l=(n=M(n,t+32767)).length);var c=N(g,I,a),A=C>>>1==1?$[c]:tg[c];if(I+=15&A,0===((A>>>=4)>>>8&255))n[t++]=A;else{if(256==A)break;var r=(A-=257)<8?0:A-4>>2;r>5&&(r=0);var i=t+f[A];r>0&&(i+=N(g,I,r),I+=r),c=N(g,I,o),I+=15&(A=C>>>1==1?eg[c]:lg[c]);var s=(A>>>=4)<4?0:A-2>>1,d=W[A];for(s>0&&(d+=N(g,I,s),I+=s),!e&&l<i&&(l=(n=M(n,i+100)).length);t<i;)n[t]=n[t-d],++t}}else{7&I&&(I+=8-(7&I));var u=g[I>>>3]|g[1+(I>>>3)]<<8;if(I+=32,u>0)for(!e&&l<t+u&&(l=(n=M(n,t+u)).length);u-- >0;)n[t++]=g[I>>>3],I+=8}return e?[n,I+7>>>3]:[n.slice(0,t),I+7>>>3]}(g.slice(g.l||0),e);return g.l+=I[1],I[0]}function ig(g,e){if(!g)throw new Error(e);"undefined"!==typeof console&&console.error(e)}function sg(g,e){var I=g;MI(I,0);var C={FileIndex:[],FullPaths:[]};i(C,{root:e.root});for(var n=I.length-4;(80!=I[n]||75!=I[n+1]||5!=I[n+2]||6!=I[n+3])&&n>=0;)--n;I.l=n+4,I.l+=4;var l=I.read_shift(2);I.l+=6;var a=I.read_shift(4);for(I.l=a,n=0;n<l;++n){I.l+=20;var o=I.read_shift(4),c=I.read_shift(4),A=I.read_shift(2),r=I.read_shift(2),s=I.read_shift(2);I.l+=8;var d=I.read_shift(4),u=t(I.slice(I.l+A,I.l+A+r));I.l+=A+r+s;var m=I.l;I.l=d+4,dg(I,o,c,C,u),I.l=m}return C}function dg(g,e,I,C,n){g.l+=2;var l=g.read_shift(2),a=g.read_shift(2),o=function(g){var e=65535&g.read_shift(2),I=65535&g.read_shift(2),C=new Date,n=31&I,t=15&(I>>>=5);I>>>=4,C.setMilliseconds(0),C.setFullYear(I+1980),C.setMonth(t-1),C.setDate(n);var l=31&e,a=63&(e>>>=5);return e>>>=6,C.setHours(e),C.setMinutes(a),C.setSeconds(l<<1),C}(g);if(8257&l)throw new Error("Unsupported ZIP encryption");g.read_shift(4);for(var c=g.read_shift(4),A=g.read_shift(4),r=g.read_shift(2),i=g.read_shift(2),s="",d=0;d<r;++d)s+=String.fromCharCode(g[g.l++]);if(i){var m=t(g.slice(g.l,g.l+i));(m[21589]||{}).mt&&(o=m[21589].mt),((n||{})[21589]||{}).mt&&(o=n[21589].mt)}g.l+=i;var h=g.slice(g.l,g.l+c);switch(a){case 8:h=function(g,e){if(!u)return rg(g,e);var I=new(0,u.InflateRaw),C=I._processChunk(g.slice(g.l),I._finishFlushFlag);return g.l+=I.bytesRead,C}(g,A);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+a)}var b=!1;8&l&&(134695760==g.read_shift(4)&&(g.read_shift(4),b=!0),c=g.read_shift(4),A=g.read_shift(4)),c!=e&&ig(b,"Bad compressed size: "+e+" != "+c),A!=I&&ig(b,"Bad uncompressed size: "+I+" != "+A),Gg(C,s,h,{unsafe:!0,mt:o})}var ug={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function mg(g,e){if(g.ctype)return g.ctype;var I=g.name||"",C=I.match(/\.([^\.]+)$/);return C&&ug[C[1]]||e&&(C=(I=e).match(/[\.\\]([^\.\\])+$/))&&ug[C[1]]?ug[C[1]]:"application/octet-stream"}function hg(g){for(var e=x(g),I=[],C=0;C<e.length;C+=76)I.push(e.slice(C,C+76));return I.join("\r\n")+"\r\n"}function bg(g){var e=g.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(g){var e=g.charCodeAt(0).toString(16).toUpperCase();return"="+(1==e.length?"0"+e:e)}));"\n"==(e=e.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(e="=0D"+e.slice(1));for(var I=[],C=(e=e.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),n=0;n<C.length;++n){var t=C[n];if(0!=t.length)for(var l=0;l<t.length;){var a=76,o=t.slice(l,l+a);"="==o.charAt(a-1)?a--:"="==o.charAt(a-2)?a-=2:"="==o.charAt(a-3)&&(a-=3),o=t.slice(l,l+a),(l+=a)<t.length&&(o+="="),I.push(o)}else I.push("")}return I.join("\r\n")}function Zg(g,e,I){for(var C,n="",t="",l="",a=0;a<10;++a){var o=e[a];if(!o||o.match(/^\s*$/))break;var c=o.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":n=c[2].trim();break;case"content-type":l=c[2].trim();break;case"content-transfer-encoding":t=c[2].trim()}}switch(++a,t.toLowerCase()){case"base64":C=P(U(e.slice(a).join("")));break;case"quoted-printable":C=function(g){for(var e=[],I=0;I<g.length;++I){for(var C=g[I];I<=g.length&&"="==C.charAt(C.length-1);)C=C.slice(0,C.length-1)+g[++I];e.push(C)}for(var n=0;n<e.length;++n)e[n]=e[n].replace(/[=][0-9A-Fa-f]{2}/g,(function(g){return String.fromCharCode(parseInt(g.slice(1),16))}));return P(e.join("\r\n"))}(e.slice(a));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+t)}var A=Gg(g,n.slice(I.length),C,{unsafe:!0});l&&(A.ctype=l)}function Gg(g,e,I,n){var t=n&&n.unsafe;t||i(g);var l=!t&&Pg.find(g,e);if(!l){var a=g.FullPaths[0];e.slice(0,a.length)==a?a=e:("/"!=a.slice(-1)&&(a+="/"),a=(a+e).replace("//","/")),l={name:C(e),type:2},g.FileIndex.push(l),g.FullPaths.push(a),t||Pg.utils.cfb_gc(g)}return l.content=I,l.size=I?I.length:0,n&&(n.CLSID&&(l.clsid=n.CLSID),n.mt&&(l.mt=n.mt),n.ct&&(l.ct=n.ct)),l}return e.find=function(g,e){var I=g.FullPaths.map((function(g){return g.toUpperCase()})),C=I.map((function(g){var e=g.split("/");return e[e.length-("/"==g.slice(-1)?2:1)]})),n=!1;47===e.charCodeAt(0)?(n=!0,e=I[0].slice(0,-1)+e):n=-1!==e.indexOf("/");var t=e.toUpperCase(),l=!0===n?I.indexOf(t):C.indexOf(t);if(-1!==l)return g.FileIndex[l];var a=!t.match(gg);for(t=t.replace(q,""),a&&(t=t.replace(gg,"!")),l=0;l<I.length;++l){if((a?I[l].replace(gg,"!"):I[l]).replace(q,"")==t)return g.FileIndex[l];if((a?C[l].replace(gg,"!"):C[l]).replace(q,"")==t)return g.FileIndex[l]}return null},e.read=function(e,I){var C=I&&I.type;switch(C||D&&Buffer.isBuffer(e)&&(C="buffer"),C||"base64"){case"file":return function(e,I){return l(),a(g.readFileSync(e),I)}(e,I);case"base64":return a(P(U(e)),I);case"binary":return a(P(e),I)}return a(e,I)},e.parse=a,e.write=function(e,I){var C=d(e,I);switch(I&&I.type||"buffer"){case"file":return l(),g.writeFileSync(I.filename,C),C;case"binary":return"string"==typeof C?C:B(C);case"base64":return x("string"==typeof C?C:B(C));case"buffer":if(D)return Buffer.isBuffer(C)?C:L(C);case"array":return"string"==typeof C?P(C):C}return C},e.writeFile=function(e,I,C){l();var n=d(e,C);g.writeFileSync(I,n)},e.utils={cfb_new:function(g){var e={};return i(e,g),e},cfb_add:Gg,cfb_del:function(g,e){i(g);var I=Pg.find(g,e);if(I)for(var C=0;C<g.FileIndex.length;++C)if(g.FileIndex[C]==I)return g.FileIndex.splice(C,1),g.FullPaths.splice(C,1),!0;return!1},cfb_mov:function(g,e,I){i(g);var n=Pg.find(g,e);if(n)for(var t=0;t<g.FileIndex.length;++t)if(g.FileIndex[t]==n)return g.FileIndex[t].name=C(I),g.FullPaths[t]=I,!0;return!1},cfb_gc:function(g){s(g,!0)},ReadShift:FI,CheckField:TI,prep_blob:MI,bconcat:_,use_zlib:function(g){try{var e=new(0,g.InflateRaw);if(e._processChunk(new Uint8Array([3,0]),e._finishFlushFlag),!e.bytesRead)throw new Error("zlib does not expose bytesRead");u=g}catch(I){console.error("cannot use native zlib: "+(I.message||I))}},_deflateRaw:ng,_inflateRaw:rg,consts:p},e}(),Og=void 0;function jg(g){return"string"===typeof g?O(g):Array.isArray(g)?function(g){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(g)}(g):g}function _g(g,e,I){if("undefined"!==typeof Og&&Og.writeFileSync)return I?Og.writeFileSync(g,e,I):Og.writeFileSync(g,e);if("undefined"!==typeof Deno){if(I&&"string"==typeof e)switch(I){case"utf8":e=new TextEncoder(I).encode(e);break;case"binary":e=O(e);break;default:throw new Error("Unsupported encoding "+I)}return Deno.writeFileSync(g,e)}var C="utf8"==I?we(e):e;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(C,g);if("undefined"!==typeof Blob){var n=new Blob([jg(C)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(n,g);if("undefined"!==typeof saveAs)return saveAs(n,g);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var t=URL.createObjectURL(n);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(t)}),6e4),chrome.downloads.download({url:t,filename:g,saveAs:!0});var l=document.createElement("a");if(null!=l.download)return l.download=g,l.href=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(t)}),6e4),t}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var a=File(g);return a.open("w"),a.encoding="binary",Array.isArray(e)&&(e=j(e)),a.write(e),a.close(),e}catch(o){if(!o.message||!o.message.match(/onstruct/))throw o}throw new Error("cannot save file "+g)}function qg(g){for(var e=Object.keys(g),I=[],C=0;C<e.length;++C)Object.prototype.hasOwnProperty.call(g,e[C])&&I.push(e[C]);return I}function $g(g,e){for(var I=[],C=qg(g),n=0;n!==C.length;++n)null==I[g[C[n]][e]]&&(I[g[C[n]][e]]=C[n]);return I}function ge(g){for(var e=[],I=qg(g),C=0;C!==I.length;++C)e[g[I[C]]]=I[C];return e}function ee(g){for(var e=[],I=qg(g),C=0;C!==I.length;++C)e[g[I[C]]]=parseInt(I[C],10);return e}var Ie=new Date(1899,11,30,0,0,0);function Ce(g,e){var I=g.getTime();return e&&(I-=1263168e5),(I-(Ie.getTime()+6e4*(g.getTimezoneOffset()-Ie.getTimezoneOffset())))/864e5}var ne=new Date,te=Ie.getTime()+6e4*(ne.getTimezoneOffset()-Ie.getTimezoneOffset()),le=ne.getTimezoneOffset();function ae(g){var e=new Date;return e.setTime(24*g*60*60*1e3+te),e.getTimezoneOffset()!==le&&e.setTime(e.getTime()+6e4*(e.getTimezoneOffset()-le)),e}var oe=new Date("2017-02-19T19:06:09.000Z"),ce=isNaN(oe.getFullYear())?new Date("2/19/17"):oe,Ae=2017==ce.getFullYear();function re(g,e){var I=new Date(g);if(Ae)return e>0?I.setTime(I.getTime()+60*I.getTimezoneOffset()*1e3):e<0&&I.setTime(I.getTime()-60*I.getTimezoneOffset()*1e3),I;if(g instanceof Date)return g;if(1917==ce.getFullYear()&&!isNaN(I.getFullYear())){var C=I.getFullYear();return g.indexOf(""+C)>-1||I.setFullYear(I.getFullYear()+100),I}var n=g.match(/\d+/g)||["2017","2","19","0","0","0"],t=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return g.indexOf("Z")>-1&&(t=new Date(t.getTime()-60*t.getTimezoneOffset()*1e3)),t}function ie(g,e){if(D&&Buffer.isBuffer(g)){if(e){if(255==g[0]&&254==g[1])return we(g.slice(2).toString("utf16le"));if(254==g[1]&&255==g[2])return we(F(g.slice(2).toString("binary")))}return g.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(e){if(255==g[0]&&254==g[1])return we(new TextDecoder("utf-16le").decode(g.slice(2)));if(254==g[0]&&255==g[1])return we(new TextDecoder("utf-16be").decode(g.slice(2)))}var I={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(g)&&(g=new Uint8Array(g)),new TextDecoder("latin1").decode(g).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,(function(g){return I[g]||g}))}catch(t){}for(var C=[],n=0;n!=g.length;++n)C.push(String.fromCharCode(g[n]));return C.join("")}function se(g){if("undefined"!=typeof JSON&&!Array.isArray(g))return JSON.parse(JSON.stringify(g));if("object"!=typeof g||null==g)return g;if(g instanceof Date)return new Date(g.getTime());var e={};for(var I in g)Object.prototype.hasOwnProperty.call(g,I)&&(e[I]=se(g[I]));return e}function de(g,e){for(var I="";I.length<e;)I+=g;return I}function ue(g){var e=Number(g);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(g))return e;var I=1,C=g.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return I*=100,""}));return isNaN(e=Number(C))?(C=C.replace(/[(](.*)[)]/,(function(g,e){return I=-I,e})),isNaN(e=Number(C))?e:e/I):e/I}var me=["january","february","march","april","may","june","july","august","september","october","november","december"];function he(g){var e=new Date(g),I=new Date(NaN),C=e.getYear(),n=e.getMonth(),t=e.getDate();if(isNaN(t))return I;var l=g.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==me.indexOf(l))return I}else if(l.match(/[a-z]/))return I;return C<0||C>8099?I:(n>0||t>1)&&101!=C?e:g.match(/[^-0-9:,\/\\]/)?I:e}function be(g,e,I){if(g.FullPaths){var C;if("string"==typeof I)return C=D?L(I):function(g){for(var e=[],I=0,C=g.length+250,n=z(g.length+255),t=0;t<g.length;++t){var l=g.charCodeAt(t);if(l<128)n[I++]=l;else if(l<2048)n[I++]=192|l>>6&31,n[I++]=128|63&l;else if(l>=55296&&l<57344){l=64+(1023&l);var a=1023&g.charCodeAt(++t);n[I++]=240|l>>8&7,n[I++]=128|l>>2&63,n[I++]=128|a>>6&15|(3&l)<<4,n[I++]=128|63&a}else n[I++]=224|l>>12&15,n[I++]=128|l>>6&63,n[I++]=128|63&l;I>C&&(e.push(n.slice(0,I)),I=0,n=z(65535),C=65530)}return e.push(n.slice(0,I)),_(e)}(I),Pg.utils.cfb_add(g,e,C);Pg.utils.cfb_add(g,e,I)}else g.file(e,I)}function Ze(){return Pg.utils.cfb_new()}var Ge='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var pe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Be=ge(pe),ye=/[&<>'"]/g,Se=/[\u0000-\u0008\u000b-\u001f]/g;function fe(g){return(g+"").replace(ye,(function(g){return Be[g]})).replace(Se,(function(g){return"_x"+("000"+g.charCodeAt(0).toString(16)).slice(-4)+"_"}))}function We(g){return fe(g).replace(/ /g,"_x0020_")}var Ve=/[\u0000-\u001f]/g;function ve(g){return(g+"").replace(ye,(function(g){return Be[g]})).replace(/\n/g,"<br/>").replace(Ve,(function(g){return"&#x"+("000"+g.charCodeAt(0).toString(16)).slice(-4)+";"}))}function Re(g){switch(g){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Xe(g){for(var e="",I=0,C=0,n=0,t=0,l=0,a=0;I<g.length;)(C=g.charCodeAt(I++))<128?e+=String.fromCharCode(C):(n=g.charCodeAt(I++),C>191&&C<224?(l=(31&C)<<6,l|=63&n,e+=String.fromCharCode(l)):(t=g.charCodeAt(I++),C<240?e+=String.fromCharCode((15&C)<<12|(63&n)<<6|63&t):(a=((7&C)<<18|(63&n)<<12|(63&t)<<6|63&(l=g.charCodeAt(I++)))-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(1023&a)))));return e}function ke(g){var e,I,C,n=z(2*g.length),t=1,l=0,a=0;for(I=0;I<g.length;I+=t)t=1,(C=g.charCodeAt(I))<128?e=C:C<224?(e=64*(31&C)+(63&g.charCodeAt(I+1)),t=2):C<240?(e=4096*(15&C)+64*(63&g.charCodeAt(I+1))+(63&g.charCodeAt(I+2)),t=3):(t=4,e=262144*(7&C)+4096*(63&g.charCodeAt(I+1))+64*(63&g.charCodeAt(I+2))+(63&g.charCodeAt(I+3)),a=55296+((e-=65536)>>>10&1023),e=56320+(1023&e)),0!==a&&(n[l++]=255&a,n[l++]=a>>>8,a=0),n[l++]=e%256,n[l++]=e>>>8;return n.slice(0,l).toString("ucs2")}function Je(g){return L(g,"binary").toString("utf8")}var Ye="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",He=D&&(Je(Ye)==Xe(Ye)&&Je||ke(Ye)==Xe(Ye)&&ke)||Xe,we=D?function(g){return L(g,"utf8").toString("binary")}:function(g){for(var e=[],I=0,C=0,n=0;I<g.length;)switch(C=g.charCodeAt(I++),!0){case C<128:e.push(String.fromCharCode(C));break;case C<2048:e.push(String.fromCharCode(192+(C>>6))),e.push(String.fromCharCode(128+(63&C)));break;case C>=55296&&C<57344:C-=55296,n=g.charCodeAt(I++)-56320+(C<<10),e.push(String.fromCharCode(240+(n>>18&7))),e.push(String.fromCharCode(144+(n>>12&63))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(63&n)));break;default:e.push(String.fromCharCode(224+(C>>12))),e.push(String.fromCharCode(128+(C>>6&63))),e.push(String.fromCharCode(128+(63&C)))}return e.join("")},Ne=function(){var g=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(g){return[new RegExp("&"+g[0]+";","ig"),g[1]]}));return function(e){for(var I=e.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),C=0;C<g.length;++C)I=I.replace(g[C][0],g[C][1]);return I}}();var Fe=/(^\s|\s$|\n)/;function Ke(g,e){return"<"+g+(e.match(Fe)?' xml:space="preserve"':"")+">"+e+"</"+g+">"}function Ee(g){return qg(g).map((function(e){return" "+e+'="'+g[e]+'"'})).join("")}function Te(g,e,I){return"<"+g+(null!=I?Ee(I):"")+(null!=e?(e.match(Fe)?' xml:space="preserve"':"")+">"+e+"</"+g:"/")+">"}function Me(g,e){try{return g.toISOString().replace(/\.\d*/,"")}catch(I){if(e)throw I}return""}var xe="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",Ue="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",De="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",Le="http://schemas.openxmlformats.org/package/2006/content-types",ze="http://schemas.openxmlformats.org/package/2006/relationships",Qe="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",Pe="http://purl.org/dc/elements/1.1/",Oe="http://purl.org/dc/terms/",je="http://purl.org/dc/dcmitype/",_e="http://schemas.openxmlformats.org/officeDocument/2006/relationships",qe="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",$e="http://www.w3.org/2001/XMLSchema-instance",gI="http://www.w3.org/2001/XMLSchema",eI=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],II="urn:schemas-microsoft-com:office:office",CI="urn:schemas-microsoft-com:office:excel",nI="urn:schemas-microsoft-com:office:spreadsheet",tI="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",lI="http://macVmlSchemaUri",aI="urn:schemas-microsoft-com:vml",oI="http://www.w3.org/TR/REC-html40";var cI=function(g){for(var e=[],I=0;I<g[0].length;++I)if(g[0][I])for(var C=0,n=g[0][I].length;C<n;C+=10240)e.push.apply(e,g[0][I].slice(C,C+10240));return e},AI=D?function(g){return g[0].length>0&&Buffer.isBuffer(g[0][0])?Buffer.concat(g[0].map((function(g){return Buffer.isBuffer(g)?g:L(g)}))):cI(g)}:cI,rI=function(g,e,I){for(var C=[],n=e;n<I;n+=2)C.push(String.fromCharCode(JI(g,n)));return C.join("").replace(q,"")},iI=D?function(g,e,I){return Buffer.isBuffer(g)?g.toString("utf16le",e,I).replace(q,""):rI(g,e,I)}:rI,sI=function(g,e,I){for(var C=[],n=e;n<e+I;++n)C.push(("0"+g[n].toString(16)).slice(-2));return C.join("")},dI=D?function(g,e,I){return Buffer.isBuffer(g)?g.toString("hex",e,e+I):sI(g,e,I)}:sI,uI=function(g,e,I){for(var C=[],n=e;n<I;n++)C.push(String.fromCharCode(kI(g,n)));return C.join("")},mI=D?function(g,e,I){return Buffer.isBuffer(g)?g.toString("utf8",e,I):uI(g,e,I)}:uI,hI=function(g,e){var I=HI(g,e);return I>0?mI(g,e+4,e+4+I-1):""},bI=hI,ZI=function(g,e){var I=HI(g,e);return I>0?mI(g,e+4,e+4+I-1):""},GI=ZI,pI=function(g,e){var I=2*HI(g,e);return I>0?mI(g,e+4,e+4+I-1):""},BI=pI,yI=function(g,e){var I=HI(g,e);return I>0?iI(g,e+4,e+4+I):""},SI=yI,fI=function(g,e){var I=HI(g,e);return I>0?mI(g,e+4,e+4+I):""},WI=fI,VI=function(g,e){return function(g,e){for(var I=1-2*(g[e+7]>>>7),C=((127&g[e+7])<<4)+(g[e+6]>>>4&15),n=15&g[e+6],t=5;t>=0;--t)n=256*n+g[e+t];return 2047==C?0==n?I*(1/0):NaN:(0==C?C=-1022:(C-=1023,n+=Math.pow(2,52)),I*Math.pow(2,C-52)*n)}(g,e)},vI=VI,RI=function(g){return Array.isArray(g)||"undefined"!==typeof Uint8Array&&g instanceof Uint8Array};function XI(){iI=function(g,e,I){return K.utils.decode(1200,g.slice(e,I)).replace(q,"")},mI=function(g,e,I){return K.utils.decode(65001,g.slice(e,I))},bI=function(g,e){var I=HI(g,e);return I>0?K.utils.decode(k,g.slice(e+4,e+4+I-1)):""},GI=function(g,e){var I=HI(g,e);return I>0?K.utils.decode(X,g.slice(e+4,e+4+I-1)):""},BI=function(g,e){var I=2*HI(g,e);return I>0?K.utils.decode(1200,g.slice(e+4,e+4+I-1)):""},SI=function(g,e){var I=HI(g,e);return I>0?K.utils.decode(1200,g.slice(e+4,e+4+I)):""},WI=function(g,e){var I=HI(g,e);return I>0?K.utils.decode(65001,g.slice(e+4,e+4+I)):""}}D&&(bI=function(g,e){if(!Buffer.isBuffer(g))return hI(g,e);var I=g.readUInt32LE(e);return I>0?g.toString("utf8",e+4,e+4+I-1):""},GI=function(g,e){if(!Buffer.isBuffer(g))return ZI(g,e);var I=g.readUInt32LE(e);return I>0?g.toString("utf8",e+4,e+4+I-1):""},BI=function(g,e){if(!Buffer.isBuffer(g))return pI(g,e);var I=2*g.readUInt32LE(e);return g.toString("utf16le",e+4,e+4+I-1)},SI=function(g,e){if(!Buffer.isBuffer(g))return yI(g,e);var I=g.readUInt32LE(e);return g.toString("utf16le",e+4,e+4+I)},WI=function(g,e){if(!Buffer.isBuffer(g))return fI(g,e);var I=g.readUInt32LE(e);return g.toString("utf8",e+4,e+4+I)},vI=function(g,e){return Buffer.isBuffer(g)?g.readDoubleLE(e):VI(g,e)},RI=function(g){return Buffer.isBuffer(g)||Array.isArray(g)||"undefined"!==typeof Uint8Array&&g instanceof Uint8Array}),"undefined"!==typeof K&&XI();var kI=function(g,e){return g[e]},JI=function(g,e){return 256*g[e+1]+g[e]},YI=function(g,e){var I=256*g[e+1]+g[e];return I<32768?I:-1*(65535-I+1)},HI=function(g,e){return g[e+3]*(1<<24)+(g[e+2]<<16)+(g[e+1]<<8)+g[e]},wI=function(g,e){return g[e+3]<<24|g[e+2]<<16|g[e+1]<<8|g[e]},NI=function(g,e){return g[e]<<24|g[e+1]<<16|g[e+2]<<8|g[e+3]};function FI(g,e){var I,C,n,t,l,a,o="",c=[];switch(e){case"dbcs":if(a=this.l,D&&Buffer.isBuffer(this))o=this.slice(this.l,this.l+2*g).toString("utf16le");else for(l=0;l<g;++l)o+=String.fromCharCode(JI(this,a)),a+=2;g*=2;break;case"utf8":o=mI(this,this.l,this.l+g);break;case"utf16le":g*=2,o=iI(this,this.l,this.l+g);break;case"wstr":if("undefined"===typeof K)return FI.call(this,g,"dbcs");o=K.utils.decode(X,this.slice(this.l,this.l+2*g)),g*=2;break;case"lpstr-ansi":o=bI(this,this.l),g=4+HI(this,this.l);break;case"lpstr-cp":o=GI(this,this.l),g=4+HI(this,this.l);break;case"lpwstr":o=BI(this,this.l),g=4+2*HI(this,this.l);break;case"lpp4":g=4+HI(this,this.l),o=SI(this,this.l),2&g&&(g+=2);break;case"8lpp4":g=4+HI(this,this.l),o=WI(this,this.l),3&g&&(g+=4-(3&g));break;case"cstr":for(g=0,o="";0!==(n=kI(this,this.l+g++));)c.push(E(n));o=c.join("");break;case"_wstr":for(g=0,o="";0!==(n=JI(this,this.l+g));)c.push(E(n)),g+=2;g+=2,o=c.join("");break;case"dbcs-cont":for(o="",a=this.l,l=0;l<g;++l){if(this.lens&&-1!==this.lens.indexOf(a))return n=kI(this,a),this.l=a+1,t=FI.call(this,g-l,n?"dbcs-cont":"sbcs-cont"),c.join("")+t;c.push(E(JI(this,a))),a+=2}o=c.join(""),g*=2;break;case"cpstr":if("undefined"!==typeof K){o=K.utils.decode(X,this.slice(this.l,this.l+g));break}case"sbcs-cont":for(o="",a=this.l,l=0;l!=g;++l){if(this.lens&&-1!==this.lens.indexOf(a))return n=kI(this,a),this.l=a+1,t=FI.call(this,g-l,n?"dbcs-cont":"sbcs-cont"),c.join("")+t;c.push(E(kI(this,a))),a+=1}o=c.join("");break;default:switch(g){case 1:return I=kI(this,this.l),this.l++,I;case 2:return I=("i"===e?YI:JI)(this,this.l),this.l+=2,I;case 4:case-4:return"i"===e||0===(128&this[this.l+3])?(I=(g>0?wI:NI)(this,this.l),this.l+=4,I):(C=HI(this,this.l),this.l+=4,C);case 8:case-8:if("f"===e)return C=8==g?vI(this,this.l):vI([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,C;g=8;case 16:o=dI(this,this.l,g)}}return this.l+=g,o}var KI=function(g,e,I){g[I]=255&e,g[I+1]=e>>>8&255};function EI(g,e,I){var C=0,n=0;if("dbcs"===I){for(n=0;n!=e.length;++n)KI(this,e.charCodeAt(n),this.l+2*n);C=2*e.length}else if("sbcs"===I){if("undefined"!==typeof K&&874==k)for(n=0;n!=e.length;++n){var t=K.utils.encode(k,e.charAt(n));this[this.l+n]=t[0]}else for(e=e.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=e.length;++n)this[this.l+n]=255&e.charCodeAt(n);C=e.length}else{if("hex"===I){for(;n<g;++n)this[this.l++]=parseInt(e.slice(2*n,2*n+2),16)||0;return this}if("utf16le"===I){var l=Math.min(this.l+g,this.length);for(n=0;n<Math.min(e.length,g);++n){var a=e.charCodeAt(n);this[this.l++]=255&a,this[this.l++]=a>>8}for(;this.l<l;)this[this.l++]=0;return this}switch(g){case 1:C=1,this[this.l]=255&e;break;case 2:C=2,this[this.l]=255&e,e>>>=8,this[this.l+1]=255&e;break;case 3:C=3,this[this.l]=255&e,e>>>=8,this[this.l+1]=255&e,e>>>=8,this[this.l+2]=255&e;break;case 4:C=4,function(g,e,I){g[I]=255&e,g[I+1]=e>>>8&255,g[I+2]=e>>>16&255,g[I+3]=e>>>24&255}(this,e,this.l);break;case 8:if(C=8,"f"===I){!function(g,e,I){var C=(e<0||1/e==-1/0?1:0)<<7,n=0,t=0,l=C?-e:e;isFinite(l)?0==l?n=t=0:(n=Math.floor(Math.log(l)/Math.LN2),t=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(t)||t<Math.pow(2,52))?n=-1022:(t-=Math.pow(2,52),n+=1023)):(n=2047,t=isNaN(e)?26985:0);for(var a=0;a<=5;++a,t/=256)g[I+a]=255&t;g[I+6]=(15&n)<<4|15&t,g[I+7]=n>>4|C}(this,e,this.l);break}case 16:break;case-4:C=4,function(g,e,I){g[I]=255&e,g[I+1]=e>>8&255,g[I+2]=e>>16&255,g[I+3]=e>>24&255}(this,e,this.l)}}return this.l+=C,this}function TI(g,e){var I=dI(this,this.l,g.length>>1);if(I!==g)throw new Error(e+"Expected "+g+" saw "+I);this.l+=g.length>>1}function MI(g,e){g.l=e,g.read_shift=FI,g.chk=TI,g.write_shift=EI}function xI(g,e){g.l+=e}function UI(g){var e=z(g);return MI(e,0),e}function DI(){var g=[],e=D?256:2048,I=function(g){var e=UI(g);return MI(e,0),e},C=I(e),n=function(){C&&(C.length>C.l&&((C=C.slice(0,C.l)).l=C.length),C.length>0&&g.push(C),C=null)},t=function(g){return C&&g<C.length-C.l?C:(n(),C=I(Math.max(g+1,e)))};return{next:t,push:function(g){n(),null==(C=g).l&&(C.l=C.length),t(e)},end:function(){return n(),_(g)},_bufs:g}}function LI(g,e,I,C){var n,t=+e;if(!isNaN(t)){C||(C=Ca[t].p||(I||[]).length||0),n=1+(t>=128?1:0)+1,C>=128&&++n,C>=16384&&++n,C>=2097152&&++n;var l=g.next(n);t<=127?l.write_shift(1,t):(l.write_shift(1,128+(127&t)),l.write_shift(1,t>>7));for(var a=0;4!=a;++a){if(!(C>=128)){l.write_shift(1,C);break}l.write_shift(1,128+(127&C)),C>>=7}C>0&&RI(I)&&g.push(I)}}function zI(g,e,I){var C=se(g);if(e.s?(C.cRel&&(C.c+=e.s.c),C.rRel&&(C.r+=e.s.r)):(C.cRel&&(C.c+=e.c),C.rRel&&(C.r+=e.r)),!I||I.biff<12){for(;C.c>=256;)C.c-=256;for(;C.r>=65536;)C.r-=65536}return C}function QI(g,e,I){var C=se(g);return C.s=zI(C.s,e.s,I),C.e=zI(C.e,e.s,I),C}function PI(g,e){if(g.cRel&&g.c<0)for(g=se(g);g.c<0;)g.c+=e>8?16384:256;if(g.rRel&&g.r<0)for(g=se(g);g.r<0;)g.r+=e>8?1048576:e>5?65536:16384;var I=eC(g);return g.cRel||null==g.cRel||(I=I.replace(/^([A-Z])/,"$$$1")),g.rRel||null==g.rRel||(I=function(g){return g.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(I)),I}function OI(g,e){return 0!=g.s.r||g.s.rRel||g.e.r!=(e.biff>=12?1048575:e.biff>=8?65536:16384)||g.e.rRel?0!=g.s.c||g.s.cRel||g.e.c!=(e.biff>=12?16383:255)||g.e.cRel?PI(g.s,e.biff)+":"+PI(g.e,e.biff):(g.s.rRel?"":"$")+_I(g.s.r)+":"+(g.e.rRel?"":"$")+_I(g.e.r):(g.s.cRel?"":"$")+$I(g.s.c)+":"+(g.e.cRel?"":"$")+$I(g.e.c)}function jI(g){return parseInt(g.replace(/\$(\d+)$/,"$1"),10)-1}function _I(g){return""+(g+1)}function qI(g){for(var e=g.replace(/^\$([A-Z])/,"$1"),I=0,C=0;C!==e.length;++C)I=26*I+e.charCodeAt(C)-64;return I-1}function $I(g){if(g<0)throw new Error("invalid column "+g);var e="";for(++g;g;g=Math.floor((g-1)/26))e=String.fromCharCode((g-1)%26+65)+e;return e}function gC(g){for(var e=0,I=0,C=0;C<g.length;++C){var n=g.charCodeAt(C);n>=48&&n<=57?e=10*e+(n-48):n>=65&&n<=90&&(I=26*I+(n-64))}return{c:I-1,r:e-1}}function eC(g){for(var e=g.c+1,I="";e;e=(e-1)/26|0)I=String.fromCharCode((e-1)%26+65)+I;return I+(g.r+1)}function IC(g){var e=g.indexOf(":");return-1==e?{s:gC(g),e:gC(g)}:{s:gC(g.slice(0,e)),e:gC(g.slice(e+1))}}function CC(g,e){return"undefined"===typeof e||"number"===typeof e?CC(g.s,g.e):("string"!==typeof g&&(g=eC(g)),"string"!==typeof e&&(e=eC(e)),g==e?g:g+":"+e)}function nC(g){var e={s:{c:0,r:0},e:{c:0,r:0}},I=0,C=0,n=0,t=g.length;for(I=0;C<t&&!((n=g.charCodeAt(C)-64)<1||n>26);++C)I=26*I+n;for(e.s.c=--I,I=0;C<t&&!((n=g.charCodeAt(C)-48)<0||n>9);++C)I=10*I+n;if(e.s.r=--I,C===t||10!=n)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++C,I=0;C!=t&&!((n=g.charCodeAt(C)-64)<1||n>26);++C)I=26*I+n;for(e.e.c=--I,I=0;C!=t&&!((n=g.charCodeAt(C)-48)<0||n>9);++C)I=10*I+n;return e.e.r=--I,e}function tC(g,e){var I="d"==g.t&&e instanceof Date;if(null!=g.z)try{return g.w=xg(g.z,I?Ce(e):e)}catch(C){}try{return g.w=xg((g.XF||{}).numFmtId||(I?14:0),I?Ce(e):e)}catch(C){return""+e}}function lC(g,e,I){return null==g||null==g.t||"z"==g.t?"":void 0!==g.w?g.w:("d"==g.t&&!g.z&&I&&I.dateNF&&(g.z=I.dateNF),"e"==g.t?MC[g.v]||g.v:tC(g,void 0==e?g.v:e))}function aC(g,e){var I=e&&e.sheet?e.sheet:"Sheet1",C={};return C[I]=g,{SheetNames:[I],Sheets:C}}function oC(g,e,I){var C=I||{},n=g?Array.isArray(g):C.dense;var t=g||(n?[]:{}),l=0,a=0;if(t&&null!=C.origin){if("number"==typeof C.origin)l=C.origin;else{var o="string"==typeof C.origin?gC(C.origin):C.origin;l=o.r,a=o.c}t["!ref"]||(t["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(t["!ref"]){var A=nC(t["!ref"]);c.s.c=A.s.c,c.s.r=A.s.r,c.e.c=Math.max(c.e.c,A.e.c),c.e.r=Math.max(c.e.r,A.e.r),-1==l&&(c.e.r=l=A.e.r+1)}for(var r=0;r!=e.length;++r)if(e[r]){if(!Array.isArray(e[r]))throw new Error("aoa_to_sheet expects an array of arrays");for(var i=0;i!=e[r].length;++i)if("undefined"!==typeof e[r][i]){var s={v:e[r][i]},d=l+r,u=a+i;if(c.s.r>d&&(c.s.r=d),c.s.c>u&&(c.s.c=u),c.e.r<d&&(c.e.r=d),c.e.c<u&&(c.e.c=u),!e[r][i]||"object"!==typeof e[r][i]||Array.isArray(e[r][i])||e[r][i]instanceof Date)if(Array.isArray(s.v)&&(s.f=e[r][i][1],s.v=s.v[0]),null===s.v)if(s.f)s.t="n";else if(C.nullError)s.t="e",s.v=0;else{if(!C.sheetStubs)continue;s.t="z"}else"number"===typeof s.v?s.t="n":"boolean"===typeof s.v?s.t="b":s.v instanceof Date?(s.z=C.dateNF||Ag[14],C.cellDates?(s.t="d",s.w=xg(s.z,Ce(s.v))):(s.t="n",s.v=Ce(s.v),s.w=xg(s.z,s.v))):s.t="s";else s=e[r][i];if(n)t[d]||(t[d]=[]),t[d][u]&&t[d][u].z&&(s.z=t[d][u].z),t[d][u]=s;else{var m=eC({c:u,r:d});t[m]&&t[m].z&&(s.z=t[m].z),t[m]=s}}}return c.s.c<1e7&&(t["!ref"]=CC(c)),t}function cC(g,e){return oC(null,g,e)}function AC(g,e){return e||(e=UI(4)),e.write_shift(4,g),e}function rC(g){var e=g.read_shift(4);return 0===e?"":g.read_shift(e,"dbcs")}function iC(g,e){var I=!1;return null==e&&(I=!0,e=UI(4+2*g.length)),e.write_shift(4,g.length),g.length>0&&e.write_shift(0,g,"dbcs"),I?e.slice(0,e.l):e}function sC(g){return{ich:g.read_shift(2),ifnt:g.read_shift(2)}}function dC(g,e){var I=g.l,C=g.read_shift(1),n=rC(g),t=[],l={t:n,h:n};if(0!==(1&C)){for(var a=g.read_shift(4),o=0;o!=a;++o)t.push(sC(g));l.r=t}else l.r=[{ich:0,ifnt:0}];return g.l=I+e,l}var uC=dC;function mC(g,e){var I=!1;return null==e&&(I=!0,e=UI(23+4*g.t.length)),e.write_shift(1,1),iC(g.t,e),e.write_shift(4,1),function(g,e){e||(e=UI(4)),e.write_shift(2,g.ich||0),e.write_shift(2,g.ifnt||0)}({ich:0,ifnt:0},e),I?e.slice(0,e.l):e}function hC(g){var e=g.read_shift(4),I=g.read_shift(2);return I+=g.read_shift(1)<<16,g.l++,{c:e,iStyleRef:I}}function bC(g,e){return null==e&&(e=UI(8)),e.write_shift(-4,g.c),e.write_shift(3,g.iStyleRef||g.s),e.write_shift(1,0),e}function ZC(g){var e=g.read_shift(2);return e+=g.read_shift(1)<<16,g.l++,{c:-1,iStyleRef:e}}function GC(g,e){return null==e&&(e=UI(4)),e.write_shift(3,g.iStyleRef||g.s),e.write_shift(1,0),e}var pC=rC,BC=iC;function yC(g){var e=g.read_shift(4);return 0===e||4294967295===e?"":g.read_shift(e,"dbcs")}function SC(g,e){var I=!1;return null==e&&(I=!0,e=UI(127)),e.write_shift(4,g.length>0?g.length:4294967295),g.length>0&&e.write_shift(0,g,"dbcs"),I?e.slice(0,e.l):e}var fC=rC,WC=yC,VC=SC;function vC(g){var e=g.slice(g.l,g.l+4),I=1&e[0],C=2&e[0];g.l+=4;var n=0===C?vI([0,0,0,0,252&e[0],e[1],e[2],e[3]],0):wI(e,0)>>2;return I?n/100:n}function RC(g,e){null==e&&(e=UI(4));var I=0,C=0,n=100*g;if(g==(0|g)&&g>=-(1<<29)&&g<1<<29?C=1:n==(0|n)&&n>=-(1<<29)&&n<1<<29&&(C=1,I=1),!C)throw new Error("unsupported RkNumber "+g);e.write_shift(-4,((I?n:g)<<2)+(I+2))}function XC(g){var e={s:{},e:{}};return e.s.r=g.read_shift(4),e.e.r=g.read_shift(4),e.s.c=g.read_shift(4),e.e.c=g.read_shift(4),e}var kC=XC,JC=function(g,e){return e||(e=UI(16)),e.write_shift(4,g.s.r),e.write_shift(4,g.e.r),e.write_shift(4,g.s.c),e.write_shift(4,g.e.c),e};function YC(g){if(g.length-g.l<8)throw"XLS Xnum Buffer underflow";return g.read_shift(8,"f")}function HC(g,e){return(e||UI(8)).write_shift(8,g,"f")}function wC(g,e){if(e||(e=UI(8)),!g||g.auto)return e.write_shift(4,0),e.write_shift(4,0),e;null!=g.index?(e.write_shift(1,2),e.write_shift(1,g.index)):null!=g.theme?(e.write_shift(1,6),e.write_shift(1,g.theme)):(e.write_shift(1,5),e.write_shift(1,0));var I=g.tint||0;if(I>0?I*=32767:I<0&&(I*=32768),e.write_shift(2,I),g.rgb&&null==g.theme){var C=g.rgb||"FFFFFF";"number"==typeof C&&(C=("000000"+C.toString(16)).slice(-6)),e.write_shift(1,parseInt(C.slice(0,2),16)),e.write_shift(1,parseInt(C.slice(2,4),16)),e.write_shift(1,parseInt(C.slice(4,6),16)),e.write_shift(1,255)}else e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);return e}var NC=80,FC={1:{n:"CodePage",t:2},2:{n:"Category",t:NC},3:{n:"PresentationFormat",t:NC},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:NC},15:{n:"Company",t:NC},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:NC},27:{n:"ContentStatus",t:NC},28:{n:"Language",t:NC},29:{n:"Version",t:NC},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},KC={1:{n:"CodePage",t:2},2:{n:"Title",t:NC},3:{n:"Subject",t:NC},4:{n:"Author",t:NC},5:{n:"Keywords",t:NC},6:{n:"Comments",t:NC},7:{n:"Template",t:NC},8:{n:"LastAuthor",t:NC},9:{n:"RevNumber",t:NC},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:NC},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function EC(g){return g.map((function(g){return[g>>16&255,g>>8&255,255&g]}))}var TC=se(EC([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),MC={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},xC={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},UC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function DC(g,e){var I,C=function(g){for(var e=[],I=qg(g),C=0;C!==I.length;++C)null==e[g[I[C]]]&&(e[g[I[C]]]=[]),e[g[I[C]]].push(I[C]);return e}(xC),n=[];n[n.length]=Ge,n[n.length]=Te("Types",null,{xmlns:Le,"xmlns:xsd":gI,"xmlns:xsi":$e}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map((function(g){return Te("Default",null,{Extension:g[0],ContentType:g[1]})})));var t=function(C){g[C]&&g[C].length>0&&(I=g[C][0],n[n.length]=Te("Override",null,{PartName:("/"==I[0]?"":"/")+I,ContentType:UC[C][e.bookType]||UC[C].xlsx}))},l=function(I){(g[I]||[]).forEach((function(g){n[n.length]=Te("Override",null,{PartName:("/"==g[0]?"":"/")+g,ContentType:UC[I][e.bookType]||UC[I].xlsx})}))},a=function(e){(g[e]||[]).forEach((function(g){n[n.length]=Te("Override",null,{PartName:("/"==g[0]?"":"/")+g,ContentType:C[e][0]})}))};return t("workbooks"),l("sheets"),l("charts"),a("themes"),["strs","styles"].forEach(t),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),l("metadata"),a("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var LC={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function zC(g){var e=g.lastIndexOf("/");return g.slice(0,e+1)+"_rels/"+g.slice(e+1)+".rels"}function QC(g){var e=[Ge,Te("Relationships",null,{xmlns:ze})];return qg(g["!id"]).forEach((function(I){e[e.length]=Te("Relationship",null,g["!id"][I])})),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function PC(g,e,I,C,n,t){if(n||(n={}),g["!id"]||(g["!id"]={}),g["!idx"]||(g["!idx"]=1),e<0)for(e=g["!idx"];g["!id"]["rId"+e];++e);if(g["!idx"]=e+1,n.Id="rId"+e,n.Type=C,n.Target=I,t?n.TargetMode=t:[LC.HLINK,LC.XPATH,LC.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),g["!id"][n.Id])throw new Error("Cannot rewrite rId "+e);return g["!id"][n.Id]=n,g[("/"+n.Target).replace("//","/")]=n,e}function OC(g,e,I){return['  <rdf:Description rdf:about="'+g+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(I||"odf")+"#"+e+'"/>\n',"  </rdf:Description>\n"].join("")}function jC(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+R.version+"</meta:generator></office:meta></office:document-meta>"}var _C=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function qC(g,e,I,C,n){null==n[g]&&null!=e&&""!==e&&(n[g]=e,e=fe(e),C[C.length]=I?Te(g,e,I):Ke(g,e))}function $C(g,e){var I=e||{},C=[Ge,Te("cp:coreProperties",null,{"xmlns:cp":xe,"xmlns:dc":Pe,"xmlns:dcterms":Oe,"xmlns:dcmitype":je,"xmlns:xsi":$e})],n={};if(!g&&!I.Props)return C.join("");g&&(null!=g.CreatedDate&&qC("dcterms:created","string"===typeof g.CreatedDate?g.CreatedDate:Me(g.CreatedDate,I.WTF),{"xsi:type":"dcterms:W3CDTF"},C,n),null!=g.ModifiedDate&&qC("dcterms:modified","string"===typeof g.ModifiedDate?g.ModifiedDate:Me(g.ModifiedDate,I.WTF),{"xsi:type":"dcterms:W3CDTF"},C,n));for(var t=0;t!=_C.length;++t){var l=_C[t],a=I.Props&&null!=I.Props[l[1]]?I.Props[l[1]]:g?g[l[1]]:null;!0===a?a="1":!1===a?a="0":"number"==typeof a&&(a=String(a)),null!=a&&qC(l[0],a,null,C,n)}return C.length>2&&(C[C.length]="</cp:coreProperties>",C[1]=C[1].replace("/>",">")),C.join("")}var gn=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],en=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function In(g){var e=[],I=Te;return g||(g={}),g.Application="SheetJS",e[e.length]=Ge,e[e.length]=Te("Properties",null,{xmlns:De,"xmlns:vt":qe}),gn.forEach((function(C){if(void 0!==g[C[1]]){var n;switch(C[2]){case"string":n=fe(String(g[C[1]]));break;case"bool":n=g[C[1]]?"true":"false"}void 0!==n&&(e[e.length]=I(C[0],n))}})),e[e.length]=I("HeadingPairs",I("vt:vector",I("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+I("vt:variant",I("vt:i4",String(g.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=I("TitlesOfParts",I("vt:vector",g.SheetNames.map((function(g){return"<vt:lpstr>"+fe(g)+"</vt:lpstr>"})).join(""),{size:g.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function Cn(g){var e=[Ge,Te("Properties",null,{xmlns:Ue,"xmlns:vt":qe})];if(!g)return e.join("");var I=1;return qg(g).forEach((function(C){++I,e[e.length]=Te("property",function(g,e){switch(typeof g){case"string":var I=Te("vt:lpwstr",fe(g));return e&&(I=I.replace(/&quot;/g,"_x0022_")),I;case"number":return Te((0|g)==g?"vt:i4":"vt:r8",fe(String(g)));case"boolean":return Te("vt:bool",g?"true":"false")}if(g instanceof Date)return Te("vt:filetime",Me(g));throw new Error("Unable to serialize "+g)}(g[C],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:I,name:fe(C)})})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var nn={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function tn(g,e){var I=UI(4),C=UI(4);switch(I.write_shift(4,80==g?31:g),g){case 3:C.write_shift(-4,e);break;case 5:(C=UI(8)).write_shift(8,e,"f");break;case 11:C.write_shift(4,e?1:0);break;case 64:C=function(g){var e=("string"==typeof g?new Date(Date.parse(g)):g).getTime()/1e3+11644473600,I=e%Math.pow(2,32),C=(e-I)/Math.pow(2,32);C*=1e7;var n=(I*=1e7)/Math.pow(2,32)|0;n>0&&(I%=Math.pow(2,32),C+=n);var t=UI(8);return t.write_shift(4,I),t.write_shift(4,C),t}(e);break;case 31:case 80:for((C=UI(4+2*(e.length+1)+(e.length%2?0:2))).write_shift(4,e.length+1),C.write_shift(0,e,"dbcs");C.l!=C.length;)C.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+g+" "+e)}return _([I,C])}var ln=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function an(g){switch(typeof g){case"boolean":return 11;case"number":return(0|g)==g?3:5;case"string":return 31;case"object":if(g instanceof Date)return 64}return-1}function on(g,e,I){var C=UI(8),n=[],t=[],l=8,a=0,o=UI(8),c=UI(8);if(o.write_shift(4,2),o.write_shift(4,1200),c.write_shift(4,1),t.push(o),n.push(c),l+=8+o.length,!e){(c=UI(8)).write_shift(4,0),n.unshift(c);var A=[UI(4)];for(A[0].write_shift(4,g.length),a=0;a<g.length;++a){var r=g[a][0];for((o=UI(8+2*(r.length+1)+(r.length%2?0:2))).write_shift(4,a+2),o.write_shift(4,r.length+1),o.write_shift(0,r,"dbcs");o.l!=o.length;)o.write_shift(1,0);A.push(o)}o=_(A),t.unshift(o),l+=8+o.length}for(a=0;a<g.length;++a)if((!e||e[g[a][0]])&&!(ln.indexOf(g[a][0])>-1||en.indexOf(g[a][0])>-1)&&null!=g[a][1]){var i=g[a][1],s=0;if(e){var d=I[s=+e[g[a][0]]];if("version"==d.p&&"string"==typeof i){var u=i.split(".");i=(+u[0]<<16)+(+u[1]||0)}o=tn(d.t,i)}else{var m=an(i);-1==m&&(m=31,i=String(i)),o=tn(m,i)}t.push(o),(c=UI(8)).write_shift(4,e?s:2+a),n.push(c),l+=8+o.length}var h=8*(t.length+1);for(a=0;a<t.length;++a)n[a].write_shift(4,h),h+=t[a].length;return C.write_shift(4,l),C.write_shift(4,t.length),_([C].concat(n).concat(t))}function cn(g,e,I,C,n,t){var l=UI(n?68:48),a=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,Pg.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,n?2:1),l.write_shift(16,e,"hex"),l.write_shift(4,n?68:48);var o=on(g,I,C);if(a.push(o),n){var c=on(n,null,null);l.write_shift(16,t,"hex"),l.write_shift(4,68+o.length),a.push(c)}return _(a)}function An(g,e){return 1===g.read_shift(e)}function rn(g,e){return e||(e=UI(2)),e.write_shift(2,+!!g),e}function sn(g){return g.read_shift(2,"u")}function dn(g,e){return e||(e=UI(2)),e.write_shift(2,g),e}function un(g,e,I){return I||(I=UI(2)),I.write_shift(1,"e"==e?+g:+!!g),I.write_shift(1,"e"==e?1:0),I}function mn(g,e,I){var C=g.read_shift(I&&I.biff>=12?2:1),n="sbcs-cont",t=X;(I&&I.biff>=8&&(X=1200),I&&8!=I.biff)?12==I.biff&&(n="wstr"):g.read_shift(1)&&(n="dbcs-cont");I.biff>=2&&I.biff<=5&&(n="cpstr");var l=C?g.read_shift(C,n):"";return X=t,l}function hn(g){var e=g.t||"",I=UI(3);I.write_shift(2,e.length),I.write_shift(1,1);var C=UI(2*e.length);return C.write_shift(2*e.length,e,"utf16le"),_([I,C])}function bn(g,e,I){if(I){if(I.biff>=2&&I.biff<=5)return g.read_shift(e,"cpstr");if(I.biff>=12)return g.read_shift(e,"dbcs-cont")}return 0===g.read_shift(1)?g.read_shift(e,"sbcs-cont"):g.read_shift(e,"dbcs-cont")}function Zn(g,e,I){var C=g.read_shift(I&&2==I.biff?1:2);return 0===C?(g.l++,""):bn(g,C,I)}function Gn(g,e,I){if(I.biff>5)return Zn(g,0,I);var C=g.read_shift(1);return 0===C?(g.l++,""):g.read_shift(C,I.biff<=4||!g.lens?"cpstr":"sbcs-cont")}function pn(g,e,I){return I||(I=UI(3+2*g.length)),I.write_shift(2,g.length),I.write_shift(1,1),I.write_shift(31,g,"utf16le"),I}function Bn(g,e){e||(e=UI(6+2*g.length)),e.write_shift(4,1+g.length);for(var I=0;I<g.length;++I)e.write_shift(2,g.charCodeAt(I));return e.write_shift(2,0),e}function yn(g){var e=UI(512),I=0,C=g.Target;"file://"==C.slice(0,7)&&(C=C.slice(7));var n=C.indexOf("#"),t=n>-1?31:23;switch(C.charAt(0)){case"#":t=28;break;case".":t&=-3}e.write_shift(4,2),e.write_shift(4,t);var l=[8,6815827,6619237,4849780,83];for(I=0;I<l.length;++I)e.write_shift(4,l[I]);if(28==t)Bn(C=C.slice(1),e);else if(2&t){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),I=0;I<l.length;++I)e.write_shift(1,parseInt(l[I],16));var a=n>-1?C.slice(0,n):C;for(e.write_shift(4,2*(a.length+1)),I=0;I<a.length;++I)e.write_shift(2,a.charCodeAt(I));e.write_shift(2,0),8&t&&Bn(n>-1?C.slice(n+1):"",e)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),I=0;I<l.length;++I)e.write_shift(1,parseInt(l[I],16));for(var o=0;"../"==C.slice(3*o,3*o+3)||"..\\"==C.slice(3*o,3*o+3);)++o;for(e.write_shift(2,o),e.write_shift(4,C.length-3*o+1),I=0;I<C.length-3*o;++I)e.write_shift(1,255&C.charCodeAt(I+3*o));for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),I=0;I<6;++I)e.write_shift(4,0)}return e.slice(0,e.l)}function Sn(g,e,I,C){return C||(C=UI(6)),C.write_shift(2,g),C.write_shift(2,e),C.write_shift(2,I||0),C}function fn(g,e,I){var C=I.biff>8?4:2;return[g.read_shift(C),g.read_shift(C,"i"),g.read_shift(C,"i")]}function Wn(g){var e=g.read_shift(2),I=g.read_shift(2);return{s:{c:g.read_shift(2),r:e},e:{c:g.read_shift(2),r:I}}}function Vn(g,e){return e||(e=UI(8)),e.write_shift(2,g.s.r),e.write_shift(2,g.e.r),e.write_shift(2,g.s.c),e.write_shift(2,g.e.c),e}function vn(g,e,I){var C=1536,n=16;switch(I.bookType){case"biff8":case"xla":break;case"biff5":C=1280,n=8;break;case"biff4":C=4,n=6;break;case"biff3":C=3,n=6;break;case"biff2":C=2,n=4;break;default:throw new Error("unsupported BIFF version")}var t=UI(n);return t.write_shift(2,C),t.write_shift(2,e),n>4&&t.write_shift(2,29282),n>6&&t.write_shift(2,1997),n>8&&(t.write_shift(2,49161),t.write_shift(2,1),t.write_shift(2,1798),t.write_shift(2,0)),t}function Rn(g,e){var I=!e||e.biff>=8?2:1,C=UI(8+I*g.name.length);C.write_shift(4,g.pos),C.write_shift(1,g.hs||0),C.write_shift(1,g.dt),C.write_shift(1,g.name.length),e.biff>=8&&C.write_shift(1,1),C.write_shift(I*g.name.length,g.name,e.biff<8?"sbcs":"utf16le");var n=C.slice(0,C.l);return n.l=C.l,n}function Xn(g,e,I,C){var n=I&&5==I.biff;C||(C=UI(n?3+e.length:5+2*e.length)),C.write_shift(2,g),C.write_shift(n?1:2,e.length),n||C.write_shift(1,1),C.write_shift((n?1:2)*e.length,e,n?"sbcs":"utf16le");var t=C.length>C.l?C.slice(0,C.l):C;return null==t.l&&(t.l=t.length),t}function kn(g,e,I,C){var n=I&&5==I.biff;C||(C=UI(n?16:20)),C.write_shift(2,0),g.style?(C.write_shift(2,g.numFmtId||0),C.write_shift(2,65524)):(C.write_shift(2,g.numFmtId||0),C.write_shift(2,e<<4));var t=0;return g.numFmtId>0&&n&&(t|=1024),C.write_shift(4,t),C.write_shift(4,0),n||C.write_shift(4,0),C.write_shift(2,0),C}function Jn(g,e,I){if(I.biff<8)return function(g,e,I){3==g[g.l+1]&&g[g.l]++;var C=mn(g,0,I);return 3==C.charCodeAt(0)?C.slice(1):C}(g,0,I);for(var C=[],n=g.l+e,t=g.read_shift(I.biff>8?4:2);0!==t--;)C.push(fn(g,I.biff,I));if(g.l!=n)throw new Error("Bad ExternSheet: "+g.l+" != "+n);return C}function Yn(g){var e=UI(24),I=gC(g[0]);e.write_shift(2,I.r),e.write_shift(2,I.r),e.write_shift(2,I.c),e.write_shift(2,I.c);for(var C="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)e.write_shift(1,parseInt(C[n],16));return _([e,yn(g[1])])}function Hn(g){var e=g[1].Tooltip,I=UI(10+2*(e.length+1));I.write_shift(2,2048);var C=gC(g[0]);I.write_shift(2,C.r),I.write_shift(2,C.r),I.write_shift(2,C.c),I.write_shift(2,C.c);for(var n=0;n<e.length;++n)I.write_shift(2,e.charCodeAt(n));return I.write_shift(2,0),I}function wn(g,e,I){if(!I.cellStyles)return xI(g,e);var C=I&&I.biff>=12?4:2,n=g.read_shift(C),t=g.read_shift(C),l=g.read_shift(C),a=g.read_shift(C),o=g.read_shift(2);2==C&&(g.l+=2);var c={s:n,e:t,w:l,ixfe:a,flags:o};return(I.biff>=5||!I.biff)&&(c.level=o>>8&7),c}var Nn=function(){var g={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=ge({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function I(e,I){var C=I||{};C.dateNF||(C.dateNF="yyyymmdd");var n=cC(function(e,I){var C=[],n=z(1);switch(I.type){case"base64":n=P(U(e));break;case"binary":n=P(e);break;case"buffer":case"array":n=e}MI(n,0);var t=n.read_shift(1),l=!!(136&t),a=!1,o=!1;switch(t){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:a=!0,l=!0;break;case 140:o=!0;break;default:throw new Error("DBF Unsupported Version: "+t.toString(16))}var c=0,A=521;2==t&&(c=n.read_shift(2)),n.l+=3,2!=t&&(c=n.read_shift(4)),c>1048576&&(c=1e6),2!=t&&(A=n.read_shift(2));var r=n.read_shift(2),i=I.codepage||1252;2!=t&&(n.l+=16,n.read_shift(1),0!==n[n.l]&&(i=g[n[n.l]]),n.l+=1,n.l+=2),o&&(n.l+=36);for(var s=[],d={},u=Math.min(n.length,2==t?521:A-10-(a?264:0)),m=o?32:11;n.l<u&&13!=n[n.l];)switch((d={}).name=K.utils.decode(i,n.slice(n.l,n.l+m)).replace(/[\u0000\r\n].*$/g,""),n.l+=m,d.type=String.fromCharCode(n.read_shift(1)),2==t||o||(d.offset=n.read_shift(4)),d.len=n.read_shift(1),2==t&&(d.offset=n.read_shift(2)),d.dec=n.read_shift(1),d.name.length&&s.push(d),2!=t&&(n.l+=o?13:14),d.type){case"B":a&&8==d.len||!I.WTF||console.log("Skipping "+d.name+":"+d.type);break;case"G":case"P":I.WTF&&console.log("Skipping "+d.name+":"+d.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+d.type)}if(13!==n[n.l]&&(n.l=A-1),13!==n.read_shift(1))throw new Error("DBF Terminator not found "+n.l+" "+n[n.l]);n.l=A;var h=0,b=0;for(C[0]=[],b=0;b!=s.length;++b)C[0][b]=s[b].name;for(;c-- >0;)if(42!==n[n.l])for(++n.l,C[++h]=[],b=0,b=0;b!=s.length;++b){var Z=n.slice(n.l,n.l+s[b].len);n.l+=s[b].len,MI(Z,0);var G=K.utils.decode(i,Z);switch(s[b].type){case"C":G.trim().length&&(C[h][b]=G.replace(/\s+$/,""));break;case"D":8===G.length?C[h][b]=new Date(+G.slice(0,4),+G.slice(4,6)-1,+G.slice(6,8)):C[h][b]=G;break;case"F":C[h][b]=parseFloat(G.trim());break;case"+":case"I":C[h][b]=o?2147483648^Z.read_shift(-4,"i"):Z.read_shift(4,"i");break;case"L":switch(G.trim().toUpperCase()){case"Y":case"T":C[h][b]=!0;break;case"N":case"F":C[h][b]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+G+"|")}break;case"M":if(!l)throw new Error("DBF Unexpected MEMO for type "+t.toString(16));C[h][b]="##MEMO##"+(o?parseInt(G.trim(),10):Z.read_shift(4));break;case"N":(G=G.replace(/\u0000/g,"").trim())&&"."!=G&&(C[h][b]=+G||0);break;case"@":C[h][b]=new Date(Z.read_shift(-8,"f")-621356832e5);break;case"T":C[h][b]=new Date(864e5*(Z.read_shift(4)-2440588)+Z.read_shift(4));break;case"Y":C[h][b]=Z.read_shift(4,"i")/1e4+Z.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":C[h][b]=-Z.read_shift(-8,"f");break;case"B":if(a&&8==s[b].len){C[h][b]=Z.read_shift(8,"f");break}case"G":case"P":Z.l+=s[b].len;break;case"0":if("_NullFlags"===s[b].name)break;default:throw new Error("DBF Unsupported data type "+s[b].type)}}else n.l+=r;if(2!=t&&n.l<n.length&&26!=n[n.l++])throw new Error("DBF EOF Marker missing "+(n.l-1)+" of "+n.length+" "+n[n.l-1].toString(16));return I&&I.sheetRows&&(C=C.slice(0,I.sheetRows)),I.DBF=s,C}(e,C),C);return n["!cols"]=C.DBF.map((function(g){return{wch:g.len,DBF:g}})),delete C.DBF,n}var C={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(g,e){try{return aC(I(g,e),e)}catch(C){if(e&&e.WTF)throw C}return{SheetNames:[],Sheets:{}}},to_sheet:I,from_sheet:function(g,I){var n=I||{};if(+n.codepage>=0&&w(+n.codepage),"string"==n.type)throw new Error("Cannot write DBF to JS string");var t=DI(),l=go(g,{header:1,raw:!0,cellDates:!0}),a=l[0],o=l.slice(1),c=g["!cols"]||[],A=0,r=0,i=0,s=1;for(A=0;A<a.length;++A)if(((c[A]||{}).DBF||{}).name)a[A]=c[A].DBF.name,++i;else if(null!=a[A]){if(++i,"number"===typeof a[A]&&(a[A]=a[A].toString(10)),"string"!==typeof a[A])throw new Error("DBF Invalid column name "+a[A]+" |"+typeof a[A]+"|");if(a.indexOf(a[A])!==A)for(r=0;r<1024;++r)if(-1==a.indexOf(a[A]+"_"+r)){a[A]+="_"+r;break}}var d=nC(g["!ref"]),u=[],m=[],h=[];for(A=0;A<=d.e.c-d.s.c;++A){var b="",Z="",G=0,p=[];for(r=0;r<o.length;++r)null!=o[r][A]&&p.push(o[r][A]);if(0!=p.length&&null!=a[A]){for(r=0;r<p.length;++r){switch(typeof p[r]){case"number":Z="B";break;case"string":default:Z="C";break;case"boolean":Z="L";break;case"object":Z=p[r]instanceof Date?"D":"C"}G=Math.max(G,String(p[r]).length),b=b&&b!=Z?"C":Z}G>250&&(G=250),"C"==(Z=((c[A]||{}).DBF||{}).type)&&c[A].DBF.len>G&&(G=c[A].DBF.len),"B"==b&&"N"==Z&&(b="N",h[A]=c[A].DBF.dec,G=c[A].DBF.len),m[A]="C"==b||"N"==Z?G:C[b]||0,s+=m[A],u[A]=b}else u[A]="?"}var B=t.next(32);for(B.write_shift(4,318902576),B.write_shift(4,o.length),B.write_shift(2,296+32*i),B.write_shift(2,s),A=0;A<4;++A)B.write_shift(4,0);for(B.write_shift(4,0|(+e[k]||3)<<8),A=0,r=0;A<a.length;++A)if(null!=a[A]){var y=t.next(32),S=(a[A].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);y.write_shift(1,S,"sbcs"),y.write_shift(1,"?"==u[A]?"C":u[A],"sbcs"),y.write_shift(4,r),y.write_shift(1,m[A]||C[u[A]]||0),y.write_shift(1,h[A]||0),y.write_shift(1,2),y.write_shift(4,0),y.write_shift(1,0),y.write_shift(4,0),y.write_shift(4,0),r+=m[A]||C[u[A]]||0}var f=t.next(264);for(f.write_shift(4,13),A=0;A<65;++A)f.write_shift(4,0);for(A=0;A<o.length;++A){var W=t.next(s);for(W.write_shift(1,0),r=0;r<a.length;++r)if(null!=a[r])switch(u[r]){case"L":W.write_shift(1,null==o[A][r]?63:o[A][r]?84:70);break;case"B":W.write_shift(8,o[A][r]||0,"f");break;case"N":var V="0";for("number"==typeof o[A][r]&&(V=o[A][r].toFixed(h[r]||0)),i=0;i<m[r]-V.length;++i)W.write_shift(1,32);W.write_shift(1,V,"sbcs");break;case"D":o[A][r]?(W.write_shift(4,("0000"+o[A][r].getFullYear()).slice(-4),"sbcs"),W.write_shift(2,("00"+(o[A][r].getMonth()+1)).slice(-2),"sbcs"),W.write_shift(2,("00"+o[A][r].getDate()).slice(-2),"sbcs")):W.write_shift(8,"00000000","sbcs");break;case"C":var v=String(null!=o[A][r]?o[A][r]:"").slice(0,m[r]);for(W.write_shift(1,v,"sbcs"),i=0;i<m[r]-v.length;++i)W.write_shift(1,32)}}return t.next(1).write_shift(1,26),t.end()}}}(),Fn=function(){var g={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1bN("+qg(g).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),I=function(e,I){var C=g[I];return"number"==typeof C?T(C):C},C=function(g,e,I){var C=e.charCodeAt(0)-32<<4|I.charCodeAt(0)-48;return 59==C?g:T(C)};function n(g,n){var t,l=g.split(/[\n\r]+/),a=-1,o=-1,c=0,A=0,r=[],i=[],s=null,d={},u=[],m=[],h=[],b=0;for(+n.codepage>=0&&w(+n.codepage);c!==l.length;++c){b=0;var Z,G=l[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,C).replace(e,I),p=G.replace(/;;/g,"\0").split(";").map((function(g){return g.replace(/\u0000/g,";")})),B=p[0];if(G.length>0)switch(B){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==p[1].charAt(0)&&i.push(G.slice(3).replace(/;;/g,";"));break;case"C":var y=!1,S=!1,f=!1,W=!1,V=-1,v=-1;for(A=1;A<p.length;++A)switch(p[A].charAt(0)){case"A":case"G":break;case"X":o=parseInt(p[A].slice(1))-1,S=!0;break;case"Y":for(a=parseInt(p[A].slice(1))-1,S||(o=0),t=r.length;t<=a;++t)r[t]=[];break;case"K":'"'===(Z=p[A].slice(1)).charAt(0)?Z=Z.slice(1,Z.length-1):"TRUE"===Z?Z=!0:"FALSE"===Z?Z=!1:isNaN(ue(Z))?isNaN(he(Z).getDate())||(Z=re(Z)):(Z=ue(Z),null!==s&&Kg(s)&&(Z=ae(Z))),"undefined"!==typeof K&&"string"==typeof Z&&"string"!=(n||{}).type&&(n||{}).codepage&&(Z=K.utils.decode(n.codepage,Z)),y=!0;break;case"E":W=!0;var R=Vt(p[A].slice(1),{r:a,c:o});r[a][o]=[r[a][o],R];break;case"S":f=!0,r[a][o]=[r[a][o],"S5S"];break;case"R":V=parseInt(p[A].slice(1))-1;break;case"C":v=parseInt(p[A].slice(1))-1;break;default:if(n&&n.WTF)throw new Error("SYLK bad record "+G)}if(y&&(r[a][o]&&2==r[a][o].length?r[a][o][0]=Z:r[a][o]=Z,s=null),f){if(W)throw new Error("SYLK shared formula cannot have own formula");var X=V>-1&&r[V][v];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");r[a][o][1]=Xt(X[1],{r:a-V,c:o-v})}break;case"F":var k=0;for(A=1;A<p.length;++A)switch(p[A].charAt(0)){case"X":o=parseInt(p[A].slice(1))-1,++k;break;case"Y":for(a=parseInt(p[A].slice(1))-1,t=r.length;t<=a;++t)r[t]=[];break;case"M":b=parseInt(p[A].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":s=i[parseInt(p[A].slice(1))];break;case"W":for(h=p[A].slice(1).split(" "),t=parseInt(h[0],10);t<=parseInt(h[1],10);++t)b=parseInt(h[2],10),m[t-1]=0===b?{hidden:!0}:{wch:b},gt(m[t-1]);break;case"C":m[o=parseInt(p[A].slice(1))-1]||(m[o]={});break;case"R":u[a=parseInt(p[A].slice(1))-1]||(u[a]={}),b>0?(u[a].hpt=b,u[a].hpx=It(b)):0===b&&(u[a].hidden=!0);break;default:if(n&&n.WTF)throw new Error("SYLK bad record "+G)}k<1&&(s=null);break;default:if(n&&n.WTF)throw new Error("SYLK bad record "+G)}}return u.length>0&&(d["!rows"]=u),m.length>0&&(d["!cols"]=m),n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),[r,d]}function t(g,e){var I=function(g,e){switch(e.type){case"base64":return n(U(g),e);case"binary":return n(g,e);case"buffer":return n(D&&Buffer.isBuffer(g)?g.toString("binary"):j(g),e);case"array":return n(ie(g),e)}throw new Error("Unrecognized type "+e.type)}(g,e),C=I[0],t=I[1],l=cC(C,e);return qg(t).forEach((function(g){l[g]=t[g]})),l}function l(g,e,I,C){var n="C;Y"+(I+1)+";X"+(C+1)+";K";switch(g.t){case"n":n+=g.v||0,g.f&&!g.F&&(n+=";E"+Rt(g.f,{r:I,c:C}));break;case"b":n+=g.v?"TRUE":"FALSE";break;case"e":n+=g.w||g.v;break;case"d":n+='"'+(g.w||g.v)+'"';break;case"s":n+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return n}return g["|"]=254,{to_workbook:function(g,e){return aC(t(g,e),e)},to_sheet:t,from_sheet:function(g,e){var I,C,n=["ID;PWXL;N;E"],t=[],a=nC(g["!ref"]),o=Array.isArray(g),c="\r\n";n.push("P;PGeneral"),n.push("F;P0;DG0G8;M255"),g["!cols"]&&(C=n,g["!cols"].forEach((function(g,e){var I="F;W"+(e+1)+" "+(e+1)+" ";g.hidden?I+="0":("number"!=typeof g.width||g.wpx||(g.wpx=_n(g.width)),"number"!=typeof g.wpx||g.wch||(g.wch=qn(g.wpx)),"number"==typeof g.wch&&(I+=Math.round(g.wch)))," "!=I.charAt(I.length-1)&&C.push(I)}))),g["!rows"]&&function(g,e){e.forEach((function(e,I){var C="F;";e.hidden?C+="M0;":e.hpt?C+="M"+20*e.hpt+";":e.hpx&&(C+="M"+20*et(e.hpx)+";"),C.length>2&&g.push(C+"R"+(I+1))}))}(n,g["!rows"]),n.push("B;Y"+(a.e.r-a.s.r+1)+";X"+(a.e.c-a.s.c+1)+";D"+[a.s.c,a.s.r,a.e.c,a.e.r].join(" "));for(var A=a.s.r;A<=a.e.r;++A)for(var r=a.s.c;r<=a.e.c;++r){var i=eC({r:A,c:r});(I=o?(g[A]||[])[r]:g[i])&&(null!=I.v||I.f&&!I.F)&&t.push(l(I,0,A,r))}return n.join(c)+c+t.join(c)+c+"E"+c}}}(),Kn=function(){function g(g,e){for(var I=g.split("\n"),C=-1,n=-1,t=0,l=[];t!==I.length;++t)if("BOT"!==I[t].trim()){if(!(C<0)){for(var a=I[t].trim().split(","),o=a[0],c=a[1],A=I[++t]||"";1&(A.match(/["]/g)||[]).length&&t<I.length-1;)A+="\n"+I[++t];switch(A=A.trim(),+o){case-1:if("BOT"===A){l[++C]=[],n=0;continue}if("EOD"!==A)throw new Error("Unrecognized DIF special command "+A);break;case 0:"TRUE"===A?l[C][n]=!0:"FALSE"===A?l[C][n]=!1:isNaN(ue(c))?isNaN(he(c).getDate())?l[C][n]=c:l[C][n]=re(c):l[C][n]=ue(c),++n;break;case 1:(A=(A=A.slice(1,A.length-1)).replace(/""/g,'"'))&&A.match(/^=".*"$/)&&(A=A.slice(2,-1)),l[C][n++]=""!==A?A:null}if("EOD"===A)break}}else l[++C]=[],n=0;return e&&e.sheetRows&&(l=l.slice(0,e.sheetRows)),l}function e(e,I){return cC(function(e,I){switch(I.type){case"base64":return g(U(e),I);case"binary":return g(e,I);case"buffer":return g(D&&Buffer.isBuffer(e)?e.toString("binary"):j(e),I);case"array":return g(ie(e),I)}throw new Error("Unrecognized type "+I.type)}(e,I),I)}var I=function(){var g=function(g,e,I,C,n){g.push(e),g.push(I+","+C),g.push('"'+n.replace(/"/g,'""')+'"')},e=function(g,e,I,C){g.push(e+","+I),g.push(1==e?'"'+C.replace(/"/g,'""')+'"':C)};return function(I){var C,n=[],t=nC(I["!ref"]),l=Array.isArray(I);g(n,"TABLE",0,1,"sheetjs"),g(n,"VECTORS",0,t.e.r-t.s.r+1,""),g(n,"TUPLES",0,t.e.c-t.s.c+1,""),g(n,"DATA",0,0,"");for(var a=t.s.r;a<=t.e.r;++a){e(n,-1,0,"BOT");for(var o=t.s.c;o<=t.e.c;++o){var c=eC({r:a,c:o});if(C=l?(I[a]||[])[o]:I[c])switch(C.t){case"n":var A=C.w;A||null==C.v||(A=C.v),null==A?C.f&&!C.F?e(n,1,0,"="+C.f):e(n,1,0,""):e(n,0,A,"V");break;case"b":e(n,0,C.v?1:0,C.v?"TRUE":"FALSE");break;case"s":e(n,1,0,isNaN(C.v)?C.v:'="'+C.v+'"');break;case"d":C.w||(C.w=xg(C.z||Ag[14],Ce(re(C.v)))),e(n,0,C.w,"V");break;default:e(n,1,0,"")}else e(n,1,0,"")}}e(n,-1,0,"EOD");return n.join("\r\n")}}();return{to_workbook:function(g,I){return aC(e(g,I),I)},to_sheet:e,from_sheet:I}}(),En=function(){function g(g){return g.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function e(g,e){return cC(function(g,e){for(var I=g.split("\n"),C=-1,n=-1,t=0,l=[];t!==I.length;++t){var a=I[t].trim().split(":");if("cell"===a[0]){var o=gC(a[1]);if(l.length<=o.r)for(C=l.length;C<=o.r;++C)l[C]||(l[C]=[]);switch(C=o.r,n=o.c,a[2]){case"t":l[C][n]=a[3].replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n");break;case"v":l[C][n]=+a[3];break;case"vtf":var c=a[a.length-1];case"vtc":"nl"===a[3]?l[C][n]=!!+a[4]:l[C][n]=+a[4],"vtf"==a[2]&&(l[C][n]=[l[C][n],c])}}}return e&&e.sheetRows&&(l=l.slice(0,e.sheetRows)),l}(g,e),e)}var I=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),C=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",n=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),t="--SocialCalcSpreadsheetControlSave--";function l(e){if(!e||!e["!ref"])return"";for(var I,C=[],n=[],t="",l=IC(e["!ref"]),a=Array.isArray(e),o=l.s.r;o<=l.e.r;++o)for(var c=l.s.c;c<=l.e.c;++c)if(t=eC({r:o,c:c}),(I=a?(e[o]||[])[c]:e[t])&&null!=I.v&&"z"!==I.t){switch(n=["cell",t,"t"],I.t){case"s":case"str":n.push(g(I.v));break;case"n":I.f?(n[2]="vtf",n[3]="n",n[4]=I.v,n[5]=g(I.f)):(n[2]="v",n[3]=I.v);break;case"b":n[2]="vt"+(I.f?"f":"c"),n[3]="nl",n[4]=I.v?"1":"0",n[5]=g(I.f||(I.v?"TRUE":"FALSE"));break;case"d":var A=Ce(re(I.v));n[2]="vtc",n[3]="nd",n[4]=""+A,n[5]=I.w||xg(I.z||Ag[14],A);break;case"e":continue}C.push(n.join(":"))}return C.push("sheet:c:"+(l.e.c-l.s.c+1)+":r:"+(l.e.r-l.s.r+1)+":tvf:1"),C.push("valueformat:1:text-wiki"),C.join("\n")}return{to_workbook:function(g,I){return aC(e(g,I),I)},to_sheet:e,from_sheet:function(g){return[I,C,n,C,l(g),t].join("\n")}}}(),Tn=function(){function g(g,e,I,C,n){n.raw?e[I][C]=g:""===g||("TRUE"===g?e[I][C]=!0:"FALSE"===g?e[I][C]=!1:isNaN(ue(g))?isNaN(he(g).getDate())?e[I][C]=g:e[I][C]=re(g):e[I][C]=ue(g))}var e={44:",",9:"\t",59:";",124:"|"},I={44:3,9:2,59:1,124:0};function C(g){for(var C={},n=!1,t=0,l=0;t<g.length;++t)34==(l=g.charCodeAt(t))?n=!n:!n&&l in e&&(C[l]=(C[l]||0)+1);for(t in l=[],C)Object.prototype.hasOwnProperty.call(C,t)&&l.push([C[t],t]);if(!l.length)for(t in C=I)Object.prototype.hasOwnProperty.call(C,t)&&l.push([C[t],t]);return l.sort((function(g,e){return g[0]-e[0]||I[g[1]]-I[e[1]]})),e[l.pop()[1]]||44}function n(g,e){var I=e||{},n="";var t=I.dense?[]:{},l={s:{c:0,r:0},e:{c:0,r:0}};"sep="==g.slice(0,4)?13==g.charCodeAt(5)&&10==g.charCodeAt(6)?(n=g.charAt(4),g=g.slice(7)):13==g.charCodeAt(5)||10==g.charCodeAt(5)?(n=g.charAt(4),g=g.slice(6)):n=C(g.slice(0,1024)):n=I&&I.FS?I.FS:C(g.slice(0,1024));var a=0,o=0,c=0,A=0,r=0,i=n.charCodeAt(0),s=!1,d=0,u=g.charCodeAt(0);g=g.replace(/\r\n/gm,"\n");var m=null!=I.dateNF?function(g){var e="number"==typeof g?Ag[g]:g;return e=e.replace(zg,"(\\d+)"),new RegExp("^"+e+"$")}(I.dateNF):null;function h(){var e=g.slice(A,r),C={};if('"'==e.charAt(0)&&'"'==e.charAt(e.length-1)&&(e=e.slice(1,-1).replace(/""/g,'"')),0===e.length)C.t="z";else if(I.raw)C.t="s",C.v=e;else if(0===e.trim().length)C.t="s",C.v=e;else if(61==e.charCodeAt(0))34==e.charCodeAt(1)&&34==e.charCodeAt(e.length-1)?(C.t="s",C.v=e.slice(2,-1).replace(/""/g,'"')):1!=e.length?(C.t="n",C.f=e.slice(1)):(C.t="s",C.v=e);else if("TRUE"==e)C.t="b",C.v=!0;else if("FALSE"==e)C.t="b",C.v=!1;else if(isNaN(c=ue(e)))if(!isNaN(he(e).getDate())||m&&e.match(m)){C.z=I.dateNF||Ag[14];var n=0;m&&e.match(m)&&(e=function(g,e,I){var C=-1,n=-1,t=-1,l=-1,a=-1,o=-1;(e.match(zg)||[]).forEach((function(g,e){var c=parseInt(I[e+1],10);switch(g.toLowerCase().charAt(0)){case"y":C=c;break;case"d":t=c;break;case"h":l=c;break;case"s":o=c;break;case"m":l>=0?a=c:n=c}})),o>=0&&-1==a&&n>=0&&(a=n,n=-1);var c=(""+(C>=0?C:(new Date).getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(t>=1?t:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var A=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2);return-1==l&&-1==a&&-1==o?c:-1==C&&-1==n&&-1==t?A:c+"T"+A}(0,I.dateNF,e.match(m)||[]),n=1),I.cellDates?(C.t="d",C.v=re(e,n)):(C.t="n",C.v=Ce(re(e,n))),!1!==I.cellText&&(C.w=xg(C.z,C.v instanceof Date?Ce(C.v):C.v)),I.cellNF||delete C.z}else C.t="s",C.v=e;else C.t="n",!1!==I.cellText&&(C.w=e),C.v=c;if("z"==C.t||(I.dense?(t[a]||(t[a]=[]),t[a][o]=C):t[eC({c:o,r:a})]=C),A=r+1,u=g.charCodeAt(A),l.e.c<o&&(l.e.c=o),l.e.r<a&&(l.e.r=a),d==i)++o;else if(o=0,++a,I.sheetRows&&I.sheetRows<=a)return!0}g:for(;r<g.length;++r)switch(d=g.charCodeAt(r)){case 34:34===u&&(s=!s);break;case i:case 10:case 13:if(!s&&h())break g}return r-A>0&&h(),t["!ref"]=CC(l),t}function t(e,I){return I&&I.PRN?I.FS||"sep="==e.slice(0,4)||e.indexOf("\t")>=0||e.indexOf(",")>=0||e.indexOf(";")>=0?n(e,I):cC(function(e,I){var C=I||{},n=[];if(!e||0===e.length)return n;for(var t=e.split(/[\r\n]/),l=t.length-1;l>=0&&0===t[l].length;)--l;for(var a=10,o=0,c=0;c<=l;++c)-1==(o=t[c].indexOf(" "))?o=t[c].length:o++,a=Math.max(a,o);for(c=0;c<=l;++c){n[c]=[];var A=0;for(g(t[c].slice(0,a).trim(),n,c,A,C),A=1;A<=(t[c].length-a)/10+1;++A)g(t[c].slice(a+10*(A-1),a+10*A).trim(),n,c,A,C)}return C.sheetRows&&(n=n.slice(0,C.sheetRows)),n}(e,I),I):n(e,I)}function l(g,e){var I="",C="string"==e.type?[0,0,0,0]:za(g,e);switch(e.type){case"base64":I=U(g);break;case"binary":case"string":I=g;break;case"buffer":I=65001==e.codepage?g.toString("utf8"):e.codepage&&"undefined"!==typeof K?K.utils.decode(e.codepage,g):D&&Buffer.isBuffer(g)?g.toString("binary"):j(g);break;case"array":I=ie(g);break;default:throw new Error("Unrecognized type "+e.type)}return 239==C[0]&&187==C[1]&&191==C[2]?I=He(I.slice(3)):"string"!=e.type&&"buffer"!=e.type&&65001==e.codepage?I=He(I):"binary"==e.type&&"undefined"!==typeof K&&e.codepage&&(I=K.utils.decode(e.codepage,K.utils.encode(28591,I))),"socialcalc:version:"==I.slice(0,19)?En.to_sheet("string"==e.type?I:He(I),e):t(I,e)}return{to_workbook:function(g,e){return aC(l(g,e),e)},to_sheet:l,from_sheet:function(g){for(var e,I=[],C=nC(g["!ref"]),n=Array.isArray(g),t=C.s.r;t<=C.e.r;++t){for(var l=[],a=C.s.c;a<=C.e.c;++a){var o=eC({r:t,c:a});if((e=n?(g[t]||[])[a]:g[o])&&null!=e.v){for(var c=(e.w||(lC(e),e.w)||"").slice(0,10);c.length<10;)c+=" ";l.push(c+(0===a?" ":""))}else l.push("          ")}I.push(l.join(""))}return I.join("\n")}}}();var Mn=function(){function g(g,e,I){if(g){MI(g,g.l||0);for(var C=I.Enum||h;g.l<g.length;){var n=g.read_shift(2),t=C[n]||C[65535],l=g.read_shift(2),a=g.l+l,o=t.f&&t.f(g,l,I);if(g.l=a,e(o,t,n))return}}}function e(e,I){if(!e)return e;var C=I||{};var n=C.dense?[]:{},t="Sheet1",l="",a=0,o={},c=[],A=[],r={s:{r:0,c:0},e:{r:0,c:0}},i=C.sheetRows||0;if(0==e[2]&&(8==e[3]||9==e[3])&&e.length>=16&&5==e[14]&&108===e[15])throw new Error("Unsupported Works 3 for Mac file");if(2==e[2])C.Enum=h,g(e,(function(g,e,I){switch(I){case 0:C.vers=g,g>=4096&&(C.qpro=!0);break;case 6:r=g;break;case 204:g&&(l=g);break;case 222:l=g;break;case 15:case 51:C.qpro||(g[1].v=g[1].v.slice(1));case 13:case 14:case 16:14==I&&112==(112&g[2])&&(15&g[2])>1&&(15&g[2])<15&&(g[1].z=C.dateNF||Ag[14],C.cellDates&&(g[1].t="d",g[1].v=ae(g[1].v))),C.qpro&&g[3]>a&&(n["!ref"]=CC(r),o[t]=n,c.push(t),n=C.dense?[]:{},r={s:{r:0,c:0},e:{r:0,c:0}},a=g[3],t=l||"Sheet"+(a+1),l="");var A=C.dense?(n[g[0].r]||[])[g[0].c]:n[eC(g[0])];if(A){A.t=g[1].t,A.v=g[1].v,null!=g[1].z&&(A.z=g[1].z),null!=g[1].f&&(A.f=g[1].f);break}C.dense?(n[g[0].r]||(n[g[0].r]=[]),n[g[0].r][g[0].c]=g[1]):n[eC(g[0])]=g[1]}}),C);else{if(26!=e[2]&&14!=e[2])throw new Error("Unrecognized LOTUS BOF "+e[2]);C.Enum=b,14==e[2]&&(C.qpro=!0,e.l=0),g(e,(function(g,e,I){switch(I){case 204:t=g;break;case 22:g[1].v=g[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(g[3]>a&&(n["!ref"]=CC(r),o[t]=n,c.push(t),n=C.dense?[]:{},r={s:{r:0,c:0},e:{r:0,c:0}},a=g[3],t="Sheet"+(a+1)),i>0&&g[0].r>=i)break;C.dense?(n[g[0].r]||(n[g[0].r]=[]),n[g[0].r][g[0].c]=g[1]):n[eC(g[0])]=g[1],r.e.c<g[0].c&&(r.e.c=g[0].c),r.e.r<g[0].r&&(r.e.r=g[0].r);break;case 27:g[14e3]&&(A[g[14e3][0]]=g[14e3][1]);break;case 1537:A[g[0]]=g[1],g[0]==a&&(t=g[1])}}),C)}if(n["!ref"]=CC(r),o[l||t]=n,c.push(l||t),!A.length)return{SheetNames:c,Sheets:o};for(var s={},d=[],u=0;u<A.length;++u)o[c[u]]?(d.push(A[u]||c[u]),s[A[u]]=o[A[u]]||o[c[u]]):(d.push(A[u]),s[A[u]]={"!ref":"A1"});return{SheetNames:d,Sheets:s}}function I(g,e,I){var C=[{c:0,r:0},{t:"n",v:0},0,0];return I.qpro&&20768!=I.vers?(C[0].c=g.read_shift(1),C[3]=g.read_shift(1),C[0].r=g.read_shift(2),g.l+=2):(C[2]=g.read_shift(1),C[0].c=g.read_shift(2),C[0].r=g.read_shift(2)),C}function C(g,e,C){var n=g.l+e,t=I(g,0,C);if(t[1].t="s",20768==C.vers){g.l++;var l=g.read_shift(1);return t[1].v=g.read_shift(l,"utf8"),t}return C.qpro&&g.l++,t[1].v=g.read_shift(n-g.l,"cstr"),t}function n(g,e,I){var C=UI(7+I.length);C.write_shift(1,255),C.write_shift(2,e),C.write_shift(2,g),C.write_shift(1,39);for(var n=0;n<C.length;++n){var t=I.charCodeAt(n);C.write_shift(1,t>=128?95:t)}return C.write_shift(1,0),C}function t(g,e,I){var C=UI(7);return C.write_shift(1,255),C.write_shift(2,e),C.write_shift(2,g),C.write_shift(2,I,"i"),C}function l(g,e,I){var C=UI(13);return C.write_shift(1,255),C.write_shift(2,e),C.write_shift(2,g),C.write_shift(8,I,"f"),C}function a(g,e,I){var C=32768&e;return e=(C?g:0)+((e&=-32769)>=8192?e-16384:e),(C?"":"$")+(I?$I(e):_I(e))}var o={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(g){var e=[{c:0,r:0},{t:"n",v:0},0];return e[0].r=g.read_shift(2),e[3]=g[g.l++],e[0].c=g[g.l++],e}function r(g,e,I,C){var n=UI(6+C.length);n.write_shift(2,g),n.write_shift(1,I),n.write_shift(1,e),n.write_shift(1,39);for(var t=0;t<C.length;++t){var l=C.charCodeAt(t);n.write_shift(1,l>=128?95:l)}return n.write_shift(1,0),n}function i(g,e){var I=A(g),C=g.read_shift(4),n=g.read_shift(4),t=g.read_shift(2);if(65535==t)return 0===C&&3221225472===n?(I[1].t="e",I[1].v=15):0===C&&3489660928===n?(I[1].t="e",I[1].v=42):I[1].v=0,I;var l=32768&t;return t=(32767&t)-16446,I[1].v=(1-2*l)*(n*Math.pow(2,t+32)+C*Math.pow(2,t)),I}function s(g,e,I,C){var n=UI(14);if(n.write_shift(2,g),n.write_shift(1,I),n.write_shift(1,e),0==C)return n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,65535),n;var t,l=0,a=0,o=0;return C<0&&(l=1,C=-C),a=0|Math.log2(C),0==(2147483648&(o=(C/=Math.pow(2,a-31))>>>0))&&(++a,o=(C/=2)>>>0),C-=o,o|=2147483648,o>>>=0,t=(C*=Math.pow(2,32))>>>0,n.write_shift(4,t),n.write_shift(4,o),a+=16383+(l?32768:0),n.write_shift(2,a),n}function d(g,e){var I=A(g),C=g.read_shift(8,"f");return I[1].v=C,I}function u(g,e){return 0==g[g.l+e-1]?g.read_shift(e,"cstr"):""}function m(g,e){var I=UI(5+g.length);I.write_shift(2,14e3),I.write_shift(2,e);for(var C=0;C<g.length;++C){var n=g.charCodeAt(C);I[I.l++]=n>127?95:n}return I[I.l++]=0,I}var h={0:{n:"BOF",f:sn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(g,e,I){var C={s:{c:0,r:0},e:{c:0,r:0}};return 8==e&&I.qpro?(C.s.c=g.read_shift(1),g.l++,C.s.r=g.read_shift(2),C.e.c=g.read_shift(1),g.l++,C.e.r=g.read_shift(2),C):(C.s.c=g.read_shift(2),C.s.r=g.read_shift(2),12==e&&I.qpro&&(g.l+=2),C.e.c=g.read_shift(2),C.e.r=g.read_shift(2),12==e&&I.qpro&&(g.l+=2),65535==C.s.c&&(C.s.c=C.e.c=C.s.r=C.e.r=0),C)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(g,e,C){var n=I(g,0,C);return n[1].v=g.read_shift(2,"i"),n}},14:{n:"NUMBER",f:function(g,e,C){var n=I(g,0,C);return n[1].v=g.read_shift(8,"f"),n}},15:{n:"LABEL",f:C},16:{n:"FORMULA",f:function(g,e,C){var n=g.l+e,t=I(g,0,C);if(t[1].v=g.read_shift(8,"f"),C.qpro)g.l=n;else{var l=g.read_shift(2);!function(g,e){MI(g,0);var I=[],C=0,n="",t="",l="",A="";for(;g.l<g.length;){var r=g[g.l++];switch(r){case 0:I.push(g.read_shift(8,"f"));break;case 1:t=a(e[0].c,g.read_shift(2),!0),n=a(e[0].r,g.read_shift(2),!1),I.push(t+n);break;case 2:var i=a(e[0].c,g.read_shift(2),!0),s=a(e[0].r,g.read_shift(2),!1);t=a(e[0].c,g.read_shift(2),!0),n=a(e[0].r,g.read_shift(2),!1),I.push(i+s+":"+t+n);break;case 3:if(g.l<g.length)return void console.error("WK1 premature formula end");break;case 4:I.push("("+I.pop()+")");break;case 5:I.push(g.read_shift(2));break;case 6:for(var d="";r=g[g.l++];)d+=String.fromCharCode(r);I.push('"'+d.replace(/"/g,'""')+'"');break;case 8:I.push("-"+I.pop());break;case 23:I.push("+"+I.pop());break;case 22:I.push("NOT("+I.pop()+")");break;case 20:case 21:A=I.pop(),l=I.pop(),I.push(["AND","OR"][r-20]+"("+l+","+A+")");break;default:if(r<32&&c[r])A=I.pop(),l=I.pop(),I.push(l+c[r]+A);else{if(!o[r])return r<=7?console.error("WK1 invalid opcode "+r.toString(16)):r<=24?console.error("WK1 unsupported op "+r.toString(16)):r<=30?console.error("WK1 invalid opcode "+r.toString(16)):r<=115?console.error("WK1 unsupported function opcode "+r.toString(16)):console.error("WK1 unrecognized opcode "+r.toString(16));if(69==(C=o[r][1])&&(C=g[g.l++]),C>I.length)return void console.error("WK1 bad formula parse 0x"+r.toString(16)+":|"+I.join("|")+"|");var u=I.slice(-C);I.length-=C,I.push(o[r][0]+"("+u.join(",")+")")}}}1==I.length?e[1].f=""+I[0]:console.error("WK1 bad formula parse |"+I.join("|")+"|")}(g.slice(g.l,g.l+l),t),g.l+=l}return t}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:C},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:u},222:{n:"SHEETNAMELP",f:function(g,e){var I=g[g.l++];I>e-1&&(I=e-1);for(var C="";C.length<I;)C+=String.fromCharCode(g[g.l++]);return C}},65535:{n:""}},b={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(g,e){var I=A(g);return I[1].t="s",I[1].v=g.read_shift(e-4,"cstr"),I}},23:{n:"NUMBER17",f:i},24:{n:"NUMBER18",f:function(g,e){var I=A(g);I[1].v=g.read_shift(2);var C=I[1].v>>1;if(1&I[1].v)switch(7&C){case 0:C=5e3*(C>>3);break;case 1:C=500*(C>>3);break;case 2:C=(C>>3)/20;break;case 3:C=(C>>3)/200;break;case 4:C=(C>>3)/2e3;break;case 5:C=(C>>3)/2e4;break;case 6:C=(C>>3)/16;break;case 7:C=(C>>3)/64}return I[1].v=C,I}},25:{n:"FORMULA19",f:function(g,e){var I=i(g);return g.l+=e-14,I}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(g,e){for(var I={},C=g.l+e;g.l<C;){var n=g.read_shift(2);if(14e3==n){for(I[n]=[0,""],I[n][0]=g.read_shift(2);g[g.l];)I[n][1]+=String.fromCharCode(g[g.l]),g.l++;g.l++}}return I}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(g,e){var I=A(g),C=g.read_shift(4);return I[1].v=C>>6,I}},38:{n:"??"},39:{n:"NUMBER27",f:d},40:{n:"FORMULA28",f:function(g,e){var I=d(g);return g.l+=e-10,I}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:u},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(g,e,I){if(I.qpro&&!(e<21)){var C=g.read_shift(1);return g.l+=17,g.l+=1,g.l+=2,[C,g.read_shift(e-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(g,e){var I=e||{};if(+I.codepage>=0&&w(+I.codepage),"string"==I.type)throw new Error("Cannot write WK1 to JS string");var C=DI(),a=nC(g["!ref"]),o=Array.isArray(g),c=[];na(C,0,function(g){var e=UI(2);return e.write_shift(2,g),e}(1030)),na(C,6,function(g){var e=UI(8);return e.write_shift(2,g.s.c),e.write_shift(2,g.s.r),e.write_shift(2,g.e.c),e.write_shift(2,g.e.r),e}(a));for(var A=Math.min(a.e.r,8191),r=a.s.r;r<=A;++r)for(var i=_I(r),s=a.s.c;s<=a.e.c;++s){r===a.s.r&&(c[s]=$I(s));var d=c[s]+i,u=o?(g[r]||[])[s]:g[d];if(u&&"z"!=u.t)if("n"==u.t)(0|u.v)==u.v&&u.v>=-32768&&u.v<=32767?na(C,13,t(r,s,u.v)):na(C,14,l(r,s,u.v));else na(C,15,n(r,s,lC(u).slice(0,239)))}return na(C,1),C.end()},book_to_wk3:function(g,e){var I=e||{};if(+I.codepage>=0&&w(+I.codepage),"string"==I.type)throw new Error("Cannot write WK3 to JS string");var C=DI();na(C,0,function(g){var e=UI(26);e.write_shift(2,4096),e.write_shift(2,4),e.write_shift(4,0);for(var I=0,C=0,n=0,t=0;t<g.SheetNames.length;++t){var l=g.SheetNames[t],a=g.Sheets[l];if(a&&a["!ref"]){++n;var o=IC(a["!ref"]);I<o.e.r&&(I=o.e.r),C<o.e.c&&(C=o.e.c)}}I>8191&&(I=8191);return e.write_shift(2,I),e.write_shift(1,n),e.write_shift(1,C),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(1,1),e.write_shift(1,2),e.write_shift(4,0),e.write_shift(4,0),e}(g));for(var n=0,t=0;n<g.SheetNames.length;++n)(g.Sheets[g.SheetNames[n]]||{})["!ref"]&&na(C,27,m(g.SheetNames[n],t++));var l=0;for(n=0;n<g.SheetNames.length;++n){var a=g.Sheets[g.SheetNames[n]];if(a&&a["!ref"]){for(var o=nC(a["!ref"]),c=Array.isArray(a),A=[],i=Math.min(o.e.r,8191),d=o.s.r;d<=i;++d)for(var u=_I(d),h=o.s.c;h<=o.e.c;++h){d===o.s.r&&(A[h]=$I(h));var b=A[h]+u,Z=c?(a[d]||[])[h]:a[b];if(Z&&"z"!=Z.t)if("n"==Z.t)na(C,23,s(d,h,l,Z.v));else na(C,22,r(d,h,l,lC(Z).slice(0,239)))}++l}}return na(C,1),C.end()},to_workbook:function(g,I){switch(I.type){case"base64":return e(P(U(g)),I);case"binary":return e(P(g),I);case"buffer":case"array":return e(g,I)}throw"Unsupported type "+I.type}}}();var xn=/^\s|\s$|[\t\n\r]/;function Un(g,e){if(!e.bookSST)return"";var I=[Ge];I[I.length]=Te("sst",null,{xmlns:eI[0],count:g.Count,uniqueCount:g.Unique});for(var C=0;C!=g.length;++C)if(null!=g[C]){var n=g[C],t="<si>";n.r?t+=n.r:(t+="<t",n.t||(n.t=""),n.t.match(xn)&&(t+=' xml:space="preserve"'),t+=">"+fe(n.t)+"</t>"),t+="</si>",I[I.length]=t}return I.length>2&&(I[I.length]="</sst>",I[1]=I[1].replace("/>",">")),I.join("")}var Dn=function(g,e){var I=!1;return null==e&&(I=!0,e=UI(15+4*g.t.length)),e.write_shift(1,0),iC(g.t,e),I?e.slice(0,e.l):e};function Ln(g){var e=DI();LI(e,159,function(g,e){return e||(e=UI(8)),e.write_shift(4,g.Count),e.write_shift(4,g.Unique),e}(g));for(var I=0;I<g.length;++I)LI(e,19,Dn(g[I]));return LI(e,160),e.end()}function zn(g){if("undefined"!==typeof K)return K.utils.encode(k,g);for(var e=[],I=g.split(""),C=0;C<I.length;++C)e[C]=I[C].charCodeAt(0);return e}function Qn(g){var e,I,C=0,n=zn(g),t=n.length+1;for((e=z(t))[0]=n.length,I=1;I!=t;++I)e[I]=n[I-1];for(I=t-1;I>=0;--I)C=((0===(16384&C)?0:1)|C<<1&32767)^e[I];return 52811^C}var Pn=function(){function g(g,I){switch(I.type){case"base64":return e(U(g),I);case"binary":return e(g,I);case"buffer":return e(D&&Buffer.isBuffer(g)?g.toString("binary"):j(g),I);case"array":return e(ie(g),I)}throw new Error("Unrecognized type "+I.type)}function e(g,e){var I=(e||{}).dense?[]:{},C=g.match(/\\trowd.*?\\row\b/g);if(!C.length)throw new Error("RTF missing table");var n={s:{c:0,r:0},e:{c:0,r:C.length-1}};return C.forEach((function(g,e){Array.isArray(I)&&(I[e]=[]);for(var C,t=/\\\w+\b/g,l=0,a=-1;C=t.exec(g);){if("\\cell"===C[0]){var o=g.slice(l,t.lastIndex-C[0].length);if(" "==o[0]&&(o=o.slice(1)),++a,o.length){var c={v:o,t:"s"};Array.isArray(I)?I[e][a]=c:I[eC({r:e,c:a})]=c}}l=t.lastIndex}a>n.e.c&&(n.e.c=a)})),I["!ref"]=CC(n),I}return{to_workbook:function(e,I){return aC(g(e,I),I)},to_sheet:g,from_sheet:function(g){for(var e,I=["{\\rtf1\\ansi"],C=nC(g["!ref"]),n=Array.isArray(g),t=C.s.r;t<=C.e.r;++t){I.push("\\trowd\\trautofit1");for(var l=C.s.c;l<=C.e.c;++l)I.push("\\cellx"+(l+1));for(I.push("\\pard\\intbl"),l=C.s.c;l<=C.e.c;++l){var a=eC({r:t,c:l});(e=n?(g[t]||[])[l]:g[a])&&(null!=e.v||e.f&&!e.F)&&(I.push(" "+(e.w||(lC(e),e.w))),I.push("\\cell"))}I.push("\\pard\\intbl\\row")}return I.join("")+"}"}}}();function On(g){for(var e=0,I=1;3!=e;++e)I=256*I+(g[e]>255?255:g[e]<0?0:g[e]);return I.toString(16).toUpperCase().slice(1)}var jn=6;function _n(g){return Math.floor((g+Math.round(128/jn)/256)*jn)}function qn(g){return Math.floor((g-5)/jn*100+.5)/100}function $n(g){return Math.round((g*jn+5)/jn*256)/256}function gt(g){g.width?(g.wpx=_n(g.width),g.wch=qn(g.wpx),g.MDW=jn):g.wpx?(g.wch=qn(g.wpx),g.width=$n(g.wch),g.MDW=jn):"number"==typeof g.wch&&(g.width=$n(g.wch),g.wpx=_n(g.width),g.MDW=jn),g.customWidth&&delete g.customWidth}function et(g){return 96*g/96}function It(g){return 96*g/96}function Ct(g,e){var I,C=[Ge,Te("styleSheet",null,{xmlns:eI[0],"xmlns:vt":qe})];return g.SSF&&null!=(I=function(g){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach((function(I){for(var C=I[0];C<=I[1];++C)null!=g[C]&&(e[e.length]=Te("numFmt",null,{numFmtId:C,formatCode:fe(g[C])}))})),1===e.length?"":(e[e.length]="</numFmts>",e[0]=Te("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}(g.SSF))&&(C[C.length]=I),C[C.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',C[C.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',C[C.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',C[C.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(I=function(g){var e=[];return e[e.length]=Te("cellXfs",null),g.forEach((function(g){e[e.length]=Te("xf",null,g)})),e[e.length]="</cellXfs>",2===e.length?"":(e[0]=Te("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}(e.cellXfs))&&(C[C.length]=I),C[C.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',C[C.length]='<dxfs count="0"/>',C[C.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',C.length>2&&(C[C.length]="</styleSheet>",C[1]=C[1].replace("/>",">")),C.join("")}function nt(g,e,I){I||(I=UI(6+4*e.length)),I.write_shift(2,g),iC(e,I);var C=I.length>I.l?I.slice(0,I.l):I;return null==I.l&&(I.l=I.length),C}function tt(g,e){e||(e=UI(153)),e.write_shift(2,20*g.sz),function(g,e){e||(e=UI(2));var I=(g.italic?2:0)|(g.strike?8:0)|(g.outline?16:0)|(g.shadow?32:0)|(g.condense?64:0)|(g.extend?128:0);e.write_shift(1,I),e.write_shift(1,0)}(g,e),e.write_shift(2,g.bold?700:400);var I=0;"superscript"==g.vertAlign?I=1:"subscript"==g.vertAlign&&(I=2),e.write_shift(2,I),e.write_shift(1,g.underline||0),e.write_shift(1,g.family||0),e.write_shift(1,g.charset||0),e.write_shift(1,0),wC(g.color,e);var C=0;return"major"==g.scheme&&(C=1),"minor"==g.scheme&&(C=2),e.write_shift(1,C),iC(g.name,e),e.length>e.l?e.slice(0,e.l):e}var lt,at=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],ot=xI;function ct(g,e){e||(e=UI(84)),lt||(lt=ge(at));var I=lt[g.patternType];null==I&&(I=40),e.write_shift(4,I);var C=0;if(40!=I)for(wC({auto:1},e),wC({auto:1},e);C<12;++C)e.write_shift(4,0);else{for(;C<4;++C)e.write_shift(4,0);for(;C<12;++C)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function At(g,e,I){I||(I=UI(16)),I.write_shift(2,e||0),I.write_shift(2,g.numFmtId||0),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(1,0),I.write_shift(1,0);return I.write_shift(1,0),I.write_shift(1,0),I.write_shift(1,0),I.write_shift(1,0),I}function rt(g,e){return e||(e=UI(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var it=xI;function st(g){var e;LI(g,613,AC(1)),LI(g,46,(e||(e=UI(51)),e.write_shift(1,0),rt(0,e),rt(0,e),rt(0,e),rt(0,e),rt(0,e),e.length>e.l?e.slice(0,e.l):e)),LI(g,614)}function dt(g){var e,I;LI(g,619,AC(1)),LI(g,48,(e={xfId:0,builtinId:0,name:"Normal"},I||(I=UI(52)),I.write_shift(4,e.xfId),I.write_shift(2,1),I.write_shift(1,+e.builtinId),I.write_shift(1,0),SC(e.name||"",I),I.length>I.l?I.slice(0,I.l):I)),LI(g,620)}function ut(g){LI(g,508,function(g,e,I){var C=UI(2052);return C.write_shift(4,g),SC(e,C),SC(I,C),C.length>C.l?C.slice(0,C.l):C}(0,"TableStyleMedium9","PivotStyleMedium4")),LI(g,509)}function mt(g,e){var I=DI();return LI(I,278),function(g,e){if(e){var I=0;[[5,8],[23,26],[41,44],[50,392]].forEach((function(g){for(var C=g[0];C<=g[1];++C)null!=e[C]&&++I})),0!=I&&(LI(g,615,AC(I)),[[5,8],[23,26],[41,44],[50,392]].forEach((function(I){for(var C=I[0];C<=I[1];++C)null!=e[C]&&LI(g,44,nt(C,e[C]))})),LI(g,616))}}(I,g.SSF),function(g){LI(g,611,AC(1)),LI(g,43,tt({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),LI(g,612)}(I),function(g){LI(g,603,AC(2)),LI(g,45,ct({patternType:"none"})),LI(g,45,ct({patternType:"gray125"})),LI(g,604)}(I),st(I),function(g){LI(g,626,AC(1)),LI(g,47,At({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),LI(g,627)}(I),function(g,e){LI(g,617,AC(e.length)),e.forEach((function(e){LI(g,47,At(e,0))})),LI(g,618)}(I,e.cellXfs),dt(I),function(g){LI(g,505,AC(0)),LI(g,506)}(I),ut(I),LI(I,279),I.end()}function ht(g,e){if(e&&e.themeXLSX)return e.themeXLSX;if(g&&"string"==typeof g.raw)return g.raw;var I=[Ge];return I[I.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',I[I.length]="<a:themeElements>",I[I.length]='<a:clrScheme name="Office">',I[I.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',I[I.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',I[I.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',I[I.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',I[I.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',I[I.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',I[I.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',I[I.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',I[I.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',I[I.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',I[I.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',I[I.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',I[I.length]="</a:clrScheme>",I[I.length]='<a:fontScheme name="Office">',I[I.length]="<a:majorFont>",I[I.length]='<a:latin typeface="Cambria"/>',I[I.length]='<a:ea typeface=""/>',I[I.length]='<a:cs typeface=""/>',I[I.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',I[I.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',I[I.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',I[I.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',I[I.length]='<a:font script="Arab" typeface="Times New Roman"/>',I[I.length]='<a:font script="Hebr" typeface="Times New Roman"/>',I[I.length]='<a:font script="Thai" typeface="Tahoma"/>',I[I.length]='<a:font script="Ethi" typeface="Nyala"/>',I[I.length]='<a:font script="Beng" typeface="Vrinda"/>',I[I.length]='<a:font script="Gujr" typeface="Shruti"/>',I[I.length]='<a:font script="Khmr" typeface="MoolBoran"/>',I[I.length]='<a:font script="Knda" typeface="Tunga"/>',I[I.length]='<a:font script="Guru" typeface="Raavi"/>',I[I.length]='<a:font script="Cans" typeface="Euphemia"/>',I[I.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',I[I.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',I[I.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',I[I.length]='<a:font script="Thaa" typeface="MV Boli"/>',I[I.length]='<a:font script="Deva" typeface="Mangal"/>',I[I.length]='<a:font script="Telu" typeface="Gautami"/>',I[I.length]='<a:font script="Taml" typeface="Latha"/>',I[I.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',I[I.length]='<a:font script="Orya" typeface="Kalinga"/>',I[I.length]='<a:font script="Mlym" typeface="Kartika"/>',I[I.length]='<a:font script="Laoo" typeface="DokChampa"/>',I[I.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',I[I.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',I[I.length]='<a:font script="Viet" typeface="Times New Roman"/>',I[I.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',I[I.length]='<a:font script="Geor" typeface="Sylfaen"/>',I[I.length]="</a:majorFont>",I[I.length]="<a:minorFont>",I[I.length]='<a:latin typeface="Calibri"/>',I[I.length]='<a:ea typeface=""/>',I[I.length]='<a:cs typeface=""/>',I[I.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',I[I.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',I[I.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',I[I.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',I[I.length]='<a:font script="Arab" typeface="Arial"/>',I[I.length]='<a:font script="Hebr" typeface="Arial"/>',I[I.length]='<a:font script="Thai" typeface="Tahoma"/>',I[I.length]='<a:font script="Ethi" typeface="Nyala"/>',I[I.length]='<a:font script="Beng" typeface="Vrinda"/>',I[I.length]='<a:font script="Gujr" typeface="Shruti"/>',I[I.length]='<a:font script="Khmr" typeface="DaunPenh"/>',I[I.length]='<a:font script="Knda" typeface="Tunga"/>',I[I.length]='<a:font script="Guru" typeface="Raavi"/>',I[I.length]='<a:font script="Cans" typeface="Euphemia"/>',I[I.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',I[I.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',I[I.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',I[I.length]='<a:font script="Thaa" typeface="MV Boli"/>',I[I.length]='<a:font script="Deva" typeface="Mangal"/>',I[I.length]='<a:font script="Telu" typeface="Gautami"/>',I[I.length]='<a:font script="Taml" typeface="Latha"/>',I[I.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',I[I.length]='<a:font script="Orya" typeface="Kalinga"/>',I[I.length]='<a:font script="Mlym" typeface="Kartika"/>',I[I.length]='<a:font script="Laoo" typeface="DokChampa"/>',I[I.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',I[I.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',I[I.length]='<a:font script="Viet" typeface="Arial"/>',I[I.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',I[I.length]='<a:font script="Geor" typeface="Sylfaen"/>',I[I.length]="</a:minorFont>",I[I.length]="</a:fontScheme>",I[I.length]='<a:fmtScheme name="Office">',I[I.length]="<a:fillStyleLst>",I[I.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',I[I.length]='<a:gradFill rotWithShape="1">',I[I.length]="<a:gsLst>",I[I.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',I[I.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',I[I.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',I[I.length]="</a:gsLst>",I[I.length]='<a:lin ang="16200000" scaled="1"/>',I[I.length]="</a:gradFill>",I[I.length]='<a:gradFill rotWithShape="1">',I[I.length]="<a:gsLst>",I[I.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',I[I.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',I[I.length]="</a:gsLst>",I[I.length]='<a:lin ang="16200000" scaled="0"/>',I[I.length]="</a:gradFill>",I[I.length]="</a:fillStyleLst>",I[I.length]="<a:lnStyleLst>",I[I.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',I[I.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',I[I.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',I[I.length]="</a:lnStyleLst>",I[I.length]="<a:effectStyleLst>",I[I.length]="<a:effectStyle>",I[I.length]="<a:effectLst>",I[I.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',I[I.length]="</a:effectLst>",I[I.length]="</a:effectStyle>",I[I.length]="<a:effectStyle>",I[I.length]="<a:effectLst>",I[I.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',I[I.length]="</a:effectLst>",I[I.length]="</a:effectStyle>",I[I.length]="<a:effectStyle>",I[I.length]="<a:effectLst>",I[I.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',I[I.length]="</a:effectLst>",I[I.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',I[I.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',I[I.length]="</a:effectStyle>",I[I.length]="</a:effectStyleLst>",I[I.length]="<a:bgFillStyleLst>",I[I.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',I[I.length]='<a:gradFill rotWithShape="1">',I[I.length]="<a:gsLst>",I[I.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',I[I.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',I[I.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',I[I.length]="</a:gsLst>",I[I.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',I[I.length]="</a:gradFill>",I[I.length]='<a:gradFill rotWithShape="1">',I[I.length]="<a:gsLst>",I[I.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',I[I.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',I[I.length]="</a:gsLst>",I[I.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',I[I.length]="</a:gradFill>",I[I.length]="</a:bgFillStyleLst>",I[I.length]="</a:fmtScheme>",I[I.length]="</a:themeElements>",I[I.length]="<a:objectDefaults>",I[I.length]="<a:spDef>",I[I.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',I[I.length]="</a:spDef>",I[I.length]="<a:lnDef>",I[I.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',I[I.length]="</a:lnDef>",I[I.length]="</a:objectDefaults>",I[I.length]="<a:extraClrSchemeLst/>",I[I.length]="</a:theme>",I.join("")}function bt(){var g=DI();return LI(g,332),LI(g,334,AC(1)),LI(g,335,function(g){var e=UI(12+2*g.name.length);return e.write_shift(4,g.flags),e.write_shift(4,g.version),iC(g.name,e),e.slice(0,e.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),LI(g,336),LI(g,339,function(g,e){var I=UI(8+2*e.length);return I.write_shift(4,g),iC(e,I),I.slice(0,I.l)}(1,"XLDAPR")),LI(g,52),LI(g,35,AC(514)),LI(g,4096,AC(0)),LI(g,4097,dn(1)),LI(g,36),LI(g,53),LI(g,340),LI(g,337,function(g,e){var I=UI(8);return I.write_shift(4,g),I.write_shift(4,e?1:0),I}(1,!0)),LI(g,51,function(g){var e=UI(4+8*g.length);e.write_shift(4,g.length);for(var I=0;I<g.length;++I)e.write_shift(4,g[I][0]),e.write_shift(4,g[I][1]);return e}([[1,0]])),LI(g,338),LI(g,333),g.end()}function Zt(){var g=[Ge];return g.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),g.join("")}var Gt=1024;function pt(g,e){for(var I=[21600,21600],C=["m0,0l0",I[1],I[0],I[1],I[0],"0xe"].join(","),n=[Te("xml",null,{"xmlns:v":aI,"xmlns:o":II,"xmlns:x":CI,"xmlns:mv":lI}).replace(/\/>/,">"),Te("o:shapelayout",Te("o:idmap",null,{"v:ext":"edit",data:g}),{"v:ext":"edit"}),Te("v:shapetype",[Te("v:stroke",null,{joinstyle:"miter"}),Te("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:I.join(","),path:C})];Gt<1e3*g;)Gt+=1e3;return e.forEach((function(g){var e=gC(g[0]),I={color2:"#BEFF82",type:"gradient"};"gradient"==I.type&&(I.angle="-180");var C="gradient"==I.type?Te("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,t=Te("v:fill",C,I);++Gt,n=n.concat(["<v:shape"+Ee({id:"_x0000_s"+Gt,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(g[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",t,Te("v:shadow",null,{on:"t",obscured:"t"}),Te("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ke("x:Anchor",[e.c+1,0,e.r+1,0,e.c+3,20,e.r+5,20].join(",")),Ke("x:AutoFill","False"),Ke("x:Row",String(e.r)),Ke("x:Column",String(e.c)),g[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])})),n.push("</xml>"),n.join("")}function Bt(g){var e=[Ge,Te("comments",null,{xmlns:eI[0]})],I=[];return e.push("<authors>"),g.forEach((function(g){g[1].forEach((function(g){var C=fe(g.a);-1==I.indexOf(C)&&(I.push(C),e.push("<author>"+C+"</author>")),g.T&&g.ID&&-1==I.indexOf("tc="+g.ID)&&(I.push("tc="+g.ID),e.push("<author>tc="+g.ID+"</author>"))}))})),0==I.length&&(I.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),g.forEach((function(g){var C=0,n=[];if(g[1][0]&&g[1][0].T&&g[1][0].ID?C=I.indexOf("tc="+g[1][0].ID):g[1].forEach((function(g){g.a&&(C=I.indexOf(fe(g.a))),n.push(g.t||"")})),e.push('<comment ref="'+g[0]+'" authorId="'+C+'"><text>'),n.length<=1)e.push(Ke("t",fe(n[0]||"")));else{for(var t="Comment:\n    "+n[0]+"\n",l=1;l<n.length;++l)t+="Reply:\n    "+n[l]+"\n";e.push(Ke("t",fe(t)))}e.push("</text></comment>")})),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function yt(g,e,I){var C=[Ge,Te("ThreadedComments",null,{xmlns:Qe}).replace(/[\/]>/,">")];return g.forEach((function(g){var n="";(g[1]||[]).forEach((function(t,l){if(t.T){t.a&&-1==e.indexOf(t.a)&&e.push(t.a);var a={ref:g[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+I.tcid++).slice(-12)+"}"};0==l?n=a.id:a.parentId=n,t.ID=a.id,t.a&&(a.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(t.a)).slice(-12)+"}"),C.push(Te("threadedComment",Ke("text",t.t||""),a))}else delete t.ID}))})),C.push("</ThreadedComments>"),C.join("")}var St=rC;function ft(g){var e=DI(),I=[];return LI(e,628),LI(e,630),g.forEach((function(g){g[1].forEach((function(g){I.indexOf(g.a)>-1||(I.push(g.a.slice(0,54)),LI(e,632,function(g){return iC(g.slice(0,54))}(g.a)))}))})),LI(e,631),LI(e,633),g.forEach((function(g){g[1].forEach((function(C){C.iauthor=I.indexOf(C.a);var n={s:gC(g[0]),e:gC(g[0])};LI(e,635,function(g,e){return null==e&&(e=UI(36)),e.write_shift(4,g[1].iauthor),JC(g[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}([n,C])),C.t&&C.t.length>0&&LI(e,637,mC(C)),LI(e,636),delete C.iauthor}))})),LI(e,634),LI(e,629),e.end()}var Wt=["xlsb","xlsm","xlam","biff8","xla"];var Vt=function(){var g=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function I(g,I,C,n){var t=!1,l=!1;0==C.length?l=!0:"["==C.charAt(0)&&(l=!0,C=C.slice(1,-1)),0==n.length?t=!0:"["==n.charAt(0)&&(t=!0,n=n.slice(1,-1));var a=C.length>0?0|parseInt(C,10):0,o=n.length>0?0|parseInt(n,10):0;return t?o+=e.c:--o,l?a+=e.r:--a,I+(t?"":"$")+$I(o)+(l?"":"$")+_I(a)}return function(C,n){return e=n,C.replace(g,I)}}(),vt=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Rt=function(){return function(g,e){return g.replace(vt,(function(g,I,C,n,t,l){var a=qI(n)-(C?0:e.c),o=jI(l)-(t?0:e.r);return I+"R"+(0==o?"":t?o+1:"["+o+"]")+"C"+(0==a?"":C?a+1:"["+a+"]")}))}}();function Xt(g,e){return g.replace(vt,(function(g,I,C,n,t,l){return I+("$"==C?C+n:$I(qI(n)+e.c))+("$"==t?t+l:_I(jI(l)+e.r))}))}function kt(g){g.l+=1}function Jt(g,e){var I=g.read_shift(1==e?1:2);return[16383&I,I>>14&1,I>>15&1]}function Yt(g,e,I){var C=2;if(I){if(I.biff>=2&&I.biff<=5)return Ht(g);12==I.biff&&(C=4)}var n=g.read_shift(C),t=g.read_shift(C),l=Jt(g,2),a=Jt(g,2);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:t,c:a[0],cRel:a[1],rRel:a[2]}}}function Ht(g){var e=Jt(g,2),I=Jt(g,2),C=g.read_shift(1),n=g.read_shift(1);return{s:{r:e[0],c:C,cRel:e[1],rRel:e[2]},e:{r:I[0],c:n,cRel:I[1],rRel:I[2]}}}function wt(g,e,I){if(I&&I.biff>=2&&I.biff<=5)return function(g){var e=Jt(g,2),I=g.read_shift(1);return{r:e[0],c:I,cRel:e[1],rRel:e[2]}}(g);var C=g.read_shift(I&&12==I.biff?4:2),n=Jt(g,2);return{r:C,c:n[0],cRel:n[1],rRel:n[2]}}function Nt(g){var e=g.read_shift(2),I=g.read_shift(2);return{r:e,c:255&I,fQuoted:!!(16384&I),cRel:I>>15,rRel:I>>15}}function Ft(g){var e=1&g[g.l+1];return g.l+=4,[e,1]}function Kt(g){return[g.read_shift(1),g.read_shift(1)]}function Et(g,e){var I=[g.read_shift(1)];if(12==e)switch(I[0]){case 2:I[0]=4;break;case 4:I[0]=16;break;case 0:I[0]=1;break;case 1:I[0]=2}switch(I[0]){case 4:I[1]=An(g,1)?"TRUE":"FALSE",12!=e&&(g.l+=7);break;case 37:case 16:I[1]=MC[g[g.l]],g.l+=12==e?4:8;break;case 0:g.l+=8;break;case 1:I[1]=YC(g);break;case 2:I[1]=Gn(g,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+I[0])}return I}function Tt(g,e,I){for(var C=g.read_shift(12==I.biff?4:2),n=[],t=0;t!=C;++t)n.push((12==I.biff?kC:Wn)(g,8));return n}function Mt(g,e,I){var C=0,n=0;12==I.biff?(C=g.read_shift(4),n=g.read_shift(4)):(n=1+g.read_shift(1),C=1+g.read_shift(2)),I.biff>=2&&I.biff<8&&(--C,0==--n&&(n=256));for(var t=0,l=[];t!=C&&(l[t]=[]);++t)for(var a=0;a!=n;++a)l[t][a]=Et(g,I.biff);return l}function xt(g,e,I){return g.l+=2,[Nt(g)]}function Ut(g){return g.l+=6,[]}function Dt(g){return g.l+=2,[sn(g),1&g.read_shift(2)]}var Lt=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var zt={1:{n:"PtgExp",f:function(g,e,I){return g.l++,I&&12==I.biff?[g.read_shift(4,"i"),0]:[g.read_shift(2),g.read_shift(I&&2==I.biff?1:2)]}},2:{n:"PtgTbl",f:xI},3:{n:"PtgAdd",f:kt},4:{n:"PtgSub",f:kt},5:{n:"PtgMul",f:kt},6:{n:"PtgDiv",f:kt},7:{n:"PtgPower",f:kt},8:{n:"PtgConcat",f:kt},9:{n:"PtgLt",f:kt},10:{n:"PtgLe",f:kt},11:{n:"PtgEq",f:kt},12:{n:"PtgGe",f:kt},13:{n:"PtgGt",f:kt},14:{n:"PtgNe",f:kt},15:{n:"PtgIsect",f:kt},16:{n:"PtgUnion",f:kt},17:{n:"PtgRange",f:kt},18:{n:"PtgUplus",f:kt},19:{n:"PtgUminus",f:kt},20:{n:"PtgPercent",f:kt},21:{n:"PtgParen",f:kt},22:{n:"PtgMissArg",f:kt},23:{n:"PtgStr",f:function(g,e,I){return g.l++,mn(g,0,I)}},26:{n:"PtgSheet",f:function(g,e,I){return g.l+=5,g.l+=2,g.l+=2==I.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(g,e,I){return g.l+=2==I.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(g){return g.l++,MC[g.read_shift(1)]}},29:{n:"PtgBool",f:function(g){return g.l++,0!==g.read_shift(1)}},30:{n:"PtgInt",f:function(g){return g.l++,g.read_shift(2)}},31:{n:"PtgNum",f:function(g){return g.l++,YC(g)}},32:{n:"PtgArray",f:function(g,e,I){var C=(96&g[g.l++])>>5;return g.l+=2==I.biff?6:12==I.biff?14:7,[C]}},33:{n:"PtgFunc",f:function(g,e,I){var C=(96&g[g.l])>>5;g.l+=1;var n=g.read_shift(I&&I.biff<=3?1:2);return[rl[n],Al[n],C]}},34:{n:"PtgFuncVar",f:function(g,e,I){var C=g[g.l++],n=g.read_shift(1),t=I&&I.biff<=3?[88==C?-1:0,g.read_shift(1)]:function(g){return[g[g.l+1]>>7,32767&g.read_shift(2)]}(g);return[n,(0===t[0]?Al:cl)[t[1]]]}},35:{n:"PtgName",f:function(g,e,I){var C=g.read_shift(1)>>>5&3,n=!I||I.biff>=8?4:2,t=g.read_shift(n);switch(I.biff){case 2:g.l+=5;break;case 3:case 4:g.l+=8;break;case 5:g.l+=12}return[C,0,t]}},36:{n:"PtgRef",f:function(g,e,I){var C=(96&g[g.l])>>5;return g.l+=1,[C,wt(g,0,I)]}},37:{n:"PtgArea",f:function(g,e,I){return[(96&g[g.l++])>>5,Yt(g,I.biff>=2&&I.biff,I)]}},38:{n:"PtgMemArea",f:function(g,e,I){var C=g.read_shift(1)>>>5&3;return g.l+=I&&2==I.biff?3:4,[C,g.read_shift(I&&2==I.biff?1:2)]}},39:{n:"PtgMemErr",f:xI},40:{n:"PtgMemNoMem",f:xI},41:{n:"PtgMemFunc",f:function(g,e,I){return[g.read_shift(1)>>>5&3,g.read_shift(I&&2==I.biff?1:2)]}},42:{n:"PtgRefErr",f:function(g,e,I){var C=g.read_shift(1)>>>5&3;return g.l+=4,I.biff<8&&g.l--,12==I.biff&&(g.l+=2),[C]}},43:{n:"PtgAreaErr",f:function(g,e,I){var C=(96&g[g.l++])>>5;return g.l+=I&&I.biff>8?12:I.biff<8?6:8,[C]}},44:{n:"PtgRefN",f:function(g,e,I){var C=(96&g[g.l])>>5;g.l+=1;var n=function(g,e,I){var C=I&&I.biff?I.biff:8;if(C>=2&&C<=5)return function(g){var e=g.read_shift(2),I=g.read_shift(1),C=(32768&e)>>15,n=(16384&e)>>14;return e&=16383,1==C&&e>=8192&&(e-=16384),1==n&&I>=128&&(I-=256),{r:e,c:I,cRel:n,rRel:C}}(g);var n=g.read_shift(C>=12?4:2),t=g.read_shift(2),l=(16384&t)>>14,a=(32768&t)>>15;if(t&=16383,1==a)for(;n>524287;)n-=1048576;if(1==l)for(;t>8191;)t-=16384;return{r:n,c:t,cRel:l,rRel:a}}(g,0,I);return[C,n]}},45:{n:"PtgAreaN",f:function(g,e,I){var C=(96&g[g.l++])>>5,n=function(g,e,I){if(I.biff<8)return Ht(g);var C=g.read_shift(12==I.biff?4:2),n=g.read_shift(12==I.biff?4:2),t=Jt(g,2),l=Jt(g,2);return{s:{r:C,c:t[0],cRel:t[1],rRel:t[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}(g,0,I);return[C,n]}},46:{n:"PtgMemAreaN",f:function(g){return[g.read_shift(1)>>>5&3,g.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(g){return[g.read_shift(1)>>>5&3,g.read_shift(2)]}},57:{n:"PtgNameX",f:function(g,e,I){return 5==I.biff?function(g){var e=g.read_shift(1)>>>5&3,I=g.read_shift(2,"i");g.l+=8;var C=g.read_shift(2);return g.l+=12,[e,I,C]}(g):[g.read_shift(1)>>>5&3,g.read_shift(2),g.read_shift(4)]}},58:{n:"PtgRef3d",f:function(g,e,I){var C=(96&g[g.l])>>5;g.l+=1;var n=g.read_shift(2);return I&&5==I.biff&&(g.l+=12),[C,n,wt(g,0,I)]}},59:{n:"PtgArea3d",f:function(g,e,I){var C=(96&g[g.l++])>>5,n=g.read_shift(2,"i");if(I)switch(I.biff){case 5:g.l+=12,6;break;case 12:12}return[C,n,Yt(g,0,I)]}},60:{n:"PtgRefErr3d",f:function(g,e,I){var C=(96&g[g.l++])>>5,n=g.read_shift(2),t=4;if(I)switch(I.biff){case 5:t=15;break;case 12:t=6}return g.l+=t,[C,n]}},61:{n:"PtgAreaErr3d",f:function(g,e,I){var C=(96&g[g.l++])>>5,n=g.read_shift(2),t=8;if(I)switch(I.biff){case 5:g.l+=12,t=6;break;case 12:t=12}return g.l+=t,[C,n]}},255:{}},Qt={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Pt={1:{n:"PtgElfLel",f:Dt},2:{n:"PtgElfRw",f:xt},3:{n:"PtgElfCol",f:xt},6:{n:"PtgElfRwV",f:xt},7:{n:"PtgElfColV",f:xt},10:{n:"PtgElfRadical",f:xt},11:{n:"PtgElfRadicalS",f:Ut},13:{n:"PtgElfColS",f:Ut},15:{n:"PtgElfColSV",f:Ut},16:{n:"PtgElfRadicalLel",f:Dt},25:{n:"PtgList",f:function(g){g.l+=2;var e=g.read_shift(2),I=g.read_shift(2),C=g.read_shift(4),n=g.read_shift(2),t=g.read_shift(2);return{ixti:e,coltype:3&I,rt:Lt[I>>2&31],idx:C,c:n,C:t}}},29:{n:"PtgSxName",f:function(g){return g.l+=2,[g.read_shift(4)]}},255:{}},Ot={0:{n:"PtgAttrNoop",f:function(g){return g.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(g,e,I){var C=255&g[g.l+1]?1:0;return g.l+=I&&2==I.biff?3:4,[C]}},2:{n:"PtgAttrIf",f:function(g,e,I){var C=255&g[g.l+1]?1:0;return g.l+=2,[C,g.read_shift(I&&2==I.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(g,e,I){g.l+=2;for(var C=g.read_shift(I&&2==I.biff?1:2),n=[],t=0;t<=C;++t)n.push(g.read_shift(I&&2==I.biff?1:2));return n}},8:{n:"PtgAttrGoto",f:function(g,e,I){var C=255&g[g.l+1]?1:0;return g.l+=2,[C,g.read_shift(I&&2==I.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(g,e,I){g.l+=I&&2==I.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Ft},33:{n:"PtgAttrBaxcel",f:Ft},64:{n:"PtgAttrSpace",f:function(g){return g.read_shift(2),Kt(g)}},65:{n:"PtgAttrSpaceSemi",f:function(g){return g.read_shift(2),Kt(g)}},128:{n:"PtgAttrIfError",f:function(g){var e=255&g[g.l+1]?1:0;return g.l+=2,[e,g.read_shift(2)]}},255:{}};function jt(g,e,I,C){if(C.biff<8)return xI(g,e);for(var n=g.l+e,t=[],l=0;l!==I.length;++l)switch(I[l][0]){case"PtgArray":I[l][1]=Mt(g,0,C),t.push(I[l][1]);break;case"PtgMemArea":I[l][2]=Tt(g,I[l][1],C),t.push(I[l][2]);break;case"PtgExp":C&&12==C.biff&&(I[l][1][1]=g.read_shift(4),t.push(I[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+I[l][0]}return 0!==(e=n-g.l)&&t.push(xI(g,e)),t}function _t(g,e,I){for(var C,n,t=g.l+e,l=[];t!=g.l;)e=t-g.l,n=g[g.l],C=zt[n]||zt[Qt[n]],24!==n&&25!==n||(C=(24===n?Pt:Ot)[g[g.l+1]]),C&&C.f?l.push([C.n,C.f(g,e,I)]):xI(g,e);return l}function qt(g){for(var e=[],I=0;I<g.length;++I){for(var C=g[I],n=[],t=0;t<C.length;++t){var l=C[t];if(l)if(2===l[0])n.push('"'+l[1].replace(/"/g,'""')+'"');else n.push(l[1]);else n.push("")}e.push(n.join(","))}return e.join(";")}var $t={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function gl(g,e,I){if(!g)return"SH33TJSERR0";if(I.biff>8&&(!g.XTI||!g.XTI[e]))return g.SheetNames[e];if(!g.XTI)return"SH33TJSERR6";var C=g.XTI[e];if(I.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),0==e?"":g.XTI[e-1];if(!C)return"SH33TJSERR1";var n="";if(I.biff>8)switch(g[C[0]][0]){case 357:return n=-1==C[1]?"#REF":g.SheetNames[C[1]],C[1]==C[2]?n:n+":"+g.SheetNames[C[2]];case 358:return null!=I.SID?g.SheetNames[I.SID]:"SH33TJSSAME"+g[C[0]][0];default:return"SH33TJSSRC"+g[C[0]][0]}switch(g[C[0]][0][0]){case 1025:return n=-1==C[1]?"#REF":g.SheetNames[C[1]]||"SH33TJSERR3",C[1]==C[2]?n:n+":"+g.SheetNames[C[2]];case 14849:return g[C[0]].slice(1).map((function(g){return g.Name})).join(";;");default:return g[C[0]][0][3]?(n=-1==C[1]?"#REF":g[C[0]][0][3][C[1]]||"SH33TJSERR4",C[1]==C[2]?n:n+":"+g[C[0]][0][3][C[2]]):"SH33TJSERR2"}}function el(g,e,I){var C=gl(g,e,I);return"#REF"==C?C:function(g,e){if(!g&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(g)?"'"+g+"'":g}(C,I)}function Il(g,e,I,C,n){var t,l,a,o,c=n&&n.biff||8,A={s:{c:0,r:0},e:{c:0,r:0}},r=[],i=0,s=0,d="";if(!g[0]||!g[0][0])return"";for(var u=-1,m="",h=0,b=g[0].length;h<b;++h){var Z=g[0][h];switch(Z[0]){case"PtgUminus":r.push("-"+r.pop());break;case"PtgUplus":r.push("+"+r.pop());break;case"PtgPercent":r.push(r.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(t=r.pop(),l=r.pop(),u>=0){switch(g[0][u][1][0]){case 0:m=de(" ",g[0][u][1][1]);break;case 1:m=de("\r",g[0][u][1][1]);break;default:if(m="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+g[0][u][1][0])}l+=m,u=-1}r.push(l+$t[Z[0]]+t);break;case"PtgIsect":t=r.pop(),l=r.pop(),r.push(l+" "+t);break;case"PtgUnion":t=r.pop(),l=r.pop(),r.push(l+","+t);break;case"PtgRange":t=r.pop(),l=r.pop(),r.push(l+":"+t);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":a=zI(Z[1][1],A,n),r.push(PI(a,c));break;case"PtgRefN":a=I?zI(Z[1][1],I,n):Z[1][1],r.push(PI(a,c));break;case"PtgRef3d":i=Z[1][1],a=zI(Z[1][2],A,n);d=el(C,i,n);r.push(d+"!"+PI(a,c));break;case"PtgFunc":case"PtgFuncVar":var G=Z[1][0],p=Z[1][1];G||(G=0);var B=0==(G&=127)?[]:r.slice(-G);r.length-=G,"User"===p&&(p=B.shift()),r.push(p+"("+B.join(",")+")");break;case"PtgBool":r.push(Z[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":r.push(Z[1]);break;case"PtgNum":r.push(String(Z[1]));break;case"PtgStr":r.push('"'+Z[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":o=QI(Z[1][1],I?{s:I}:A,n),r.push(OI(o,n));break;case"PtgArea":o=QI(Z[1][1],A,n),r.push(OI(o,n));break;case"PtgArea3d":i=Z[1][1],o=Z[1][2],d=el(C,i,n),r.push(d+"!"+OI(o,n));break;case"PtgAttrSum":r.push("SUM("+r.pop()+")");break;case"PtgName":s=Z[1][2];var y=(C.names||[])[s-1]||(C[0]||[])[s],S=y?y.Name:"SH33TJSNAME"+String(s);S&&"_xlfn."==S.slice(0,6)&&!n.xlfn&&(S=S.slice(6)),r.push(S);break;case"PtgNameX":var f,W=Z[1][1];if(s=Z[1][2],!(n.biff<=5)){var V="";if(14849==((C[W]||[])[0]||[])[0]||(1025==((C[W]||[])[0]||[])[0]?C[W][s]&&C[W][s].itab>0&&(V=C.SheetNames[C[W][s].itab-1]+"!"):V=C.SheetNames[s-1]+"!"),C[W]&&C[W][s])V+=C[W][s].Name;else if(C[0]&&C[0][s])V+=C[0][s].Name;else{var v=(gl(C,W,n)||"").split(";;");v[s-1]?V=v[s-1]:V+="SH33TJSERRX"}r.push(V);break}W<0&&(W=-W),C[W]&&(f=C[W][s]),f||(f={Name:"SH33TJSERRY"}),r.push(f.Name);break;case"PtgParen":var R="(",X=")";if(u>=0){switch(m="",g[0][u][1][0]){case 2:R=de(" ",g[0][u][1][1])+R;break;case 3:R=de("\r",g[0][u][1][1])+R;break;case 4:X=de(" ",g[0][u][1][1])+X;break;case 5:X=de("\r",g[0][u][1][1])+X;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+g[0][u][1][0])}u=-1}r.push(R+r.pop()+X);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":r.push("#REF!");break;case"PtgExp":a={c:Z[1][1],r:Z[1][0]};var k={c:I.c,r:I.r};if(C.sharedf[eC(a)]){var J=C.sharedf[eC(a)];r.push(Il(J,A,k,C,n))}else{var Y=!1;for(t=0;t!=C.arrayf.length;++t)if(l=C.arrayf[t],!(a.c<l[0].s.c||a.c>l[0].e.c)&&!(a.r<l[0].s.r||a.r>l[0].e.r)){r.push(Il(l[1],A,k,C,n)),Y=!0;break}Y||r.push(Z[1])}break;case"PtgArray":r.push("{"+qt(Z[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":u=h;break;case"PtgMissArg":r.push("");break;case"PtgList":r.push("Table"+Z[1].idx+"[#"+Z[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(Z))}if(3!=n.biff&&u>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(g[0][h][0])){var H=!0;switch((Z=g[0][u])[1][0]){case 4:H=!1;case 0:m=de(" ",Z[1][1]);break;case 5:H=!1;case 1:m=de("\r",Z[1][1]);break;default:if(m="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+Z[1][0])}r.push((H?m:"")+r.pop()+(H?"":m)),u=-1}}if(r.length>1&&n.WTF)throw new Error("bad formula stack");return r[0]}function Cl(g,e,I,C,n){var t=Sn(e,I,n),l=function(g){if(null==g){var e=UI(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}return HC("number"==typeof g?g:0)}(g.v),a=UI(6);a.write_shift(2,33),a.write_shift(4,0);for(var o=UI(g.bf.length),c=0;c<g.bf.length;++c)o[c]=g.bf[c];return _([t,l,a,o])}function nl(g,e,I){var C=g.read_shift(4),n=_t(g,C,I),t=g.read_shift(4);return[n,t>0?jt(g,t,n,I):null]}var tl=nl,ll=nl,al=nl,ol=nl,cl={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Al={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},rl={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function il(g){return g.replace(/\./,"!")}var sl="undefined"!==typeof Map;function dl(g,e,I){var C=0,n=g.length;if(I){if(sl?I.has(e):Object.prototype.hasOwnProperty.call(I,e))for(var t=sl?I.get(e):I[e];C<t.length;++C)if(g[t[C]].t===e)return g.Count++,t[C]}else for(;C<n;++C)if(g[C].t===e)return g.Count++,C;return g[n]={t:e},g.Count++,g.Unique++,I&&(sl?(I.has(e)||I.set(e,[]),I.get(e).push(n)):(Object.prototype.hasOwnProperty.call(I,e)||(I[e]=[]),I[e].push(n))),n}function ul(g,e){var I={min:g+1,max:g+1},C=-1;return e.MDW&&(jn=e.MDW),null!=e.width?I.customWidth=1:null!=e.wpx?C=qn(e.wpx):null!=e.wch&&(C=e.wch),C>-1?(I.width=$n(C),I.customWidth=1):null!=e.width&&(I.width=e.width),e.hidden&&(I.hidden=!0),null!=e.level&&(I.outlineLevel=I.level=e.level),I}function ml(g,e){if(g){var I=[.7,.7,.75,.75,.3,.3];"xlml"==e&&(I=[1,1,1,1,.5,.5]),null==g.left&&(g.left=I[0]),null==g.right&&(g.right=I[1]),null==g.top&&(g.top=I[2]),null==g.bottom&&(g.bottom=I[3]),null==g.header&&(g.header=I[4]),null==g.footer&&(g.footer=I[5])}}function hl(g,e,I){var C=I.revssf[null!=e.z?e.z:"General"],n=60,t=g.length;if(null==C&&I.ssf)for(;n<392;++n)if(null==I.ssf[n]){Ug(e.z,n),I.ssf[n]=e.z,I.revssf[e.z]=C=n;break}for(n=0;n!=t;++n)if(g[n].numFmtId===C)return n;return g[t]={numFmtId:C,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},t}function bl(g,e,I){if(g&&g["!ref"]){var C=nC(g["!ref"]);if(C.e.c<C.s.c||C.e.r<C.s.r)throw new Error("Bad range ("+I+"): "+g["!ref"])}}var Zl=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Gl=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function pl(g,e,I,C){if(g.c&&I["!comments"].push([e,g.c]),void 0===g.v&&"string"!==typeof g.f||"z"===g.t&&!g.f)return"";var n="",t=g.t,l=g.v;if("z"!==g.t)switch(g.t){case"b":n=g.v?"1":"0";break;case"n":n=""+g.v;break;case"e":n=MC[g.v];break;case"d":C&&C.cellDates?n=re(g.v,-1).toISOString():((g=se(g)).t="n",n=""+(g.v=Ce(re(g.v)))),"undefined"===typeof g.z&&(g.z=Ag[14]);break;default:n=g.v}var a=Ke("v",fe(n)),o={r:e},c=hl(C.cellXfs,g,C);switch(0!==c&&(o.s=c),g.t){case"n":case"z":break;case"d":o.t="d";break;case"b":o.t="b";break;case"e":o.t="e";break;default:if(null==g.v){delete g.t;break}if(g.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(C&&C.bookSST){a=Ke("v",""+dl(C.Strings,g.v,C.revStrings)),o.t="s";break}o.t="str"}if(g.t!=t&&(g.t=t,g.v=l),"string"==typeof g.f&&g.f){var A=g.F&&g.F.slice(0,e.length)==e?{t:"array",ref:g.F}:null;a=Te("f",fe(g.f),A)+(null!=g.v?a:"")}return g.l&&I["!links"].push([e,g.l]),g.D&&(o.cm=1),Te("c",a,o)}function Bl(g,e,I,C){var n,t=[Ge,Te("worksheet",null,{xmlns:eI[0],"xmlns:r":_e})],l=I.SheetNames[g],a="",o=I.Sheets[l];null==o&&(o={});var c=o["!ref"]||"A1",A=nC(c);if(A.e.c>16383||A.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");A.e.c=Math.min(A.e.c,16383),A.e.r=Math.min(A.e.c,1048575),c=CC(A)}C||(C={}),o["!comments"]=[];var r=[];!function(g,e,I,C,n){var t=!1,l={},a=null;if("xlsx"!==C.bookType&&e.vbaraw){var o=e.SheetNames[I];try{e.Workbook&&(o=e.Workbook.Sheets[I].CodeName||o)}catch(A){}t=!0,l.codeName=we(fe(o))}if(g&&g["!outline"]){var c={summaryBelow:1,summaryRight:1};g["!outline"].above&&(c.summaryBelow=0),g["!outline"].left&&(c.summaryRight=0),a=(a||"")+Te("outlinePr",null,c)}(t||a)&&(n[n.length]=Te("sheetPr",a,l))}(o,I,g,e,t),t[t.length]=Te("dimension",null,{ref:c}),t[t.length]=function(g,e,I,C){var n={workbookViewId:"0"};return(((C||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=C.Workbook.Views[0].RTL?"1":"0"),Te("sheetViews",Te("sheetView",null,n),{})}(0,0,0,I),e.sheetFormat&&(t[t.length]=Te("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),null!=o["!cols"]&&o["!cols"].length>0&&(t[t.length]=function(g,e){for(var I,C=["<cols>"],n=0;n!=e.length;++n)(I=e[n])&&(C[C.length]=Te("col",null,ul(n,I)));return C[C.length]="</cols>",C.join("")}(0,o["!cols"])),t[n=t.length]="<sheetData/>",o["!links"]=[],null!=o["!ref"]&&(a=function(g,e,I,C){var n,t,l=[],a=[],o=nC(g["!ref"]),c="",A="",r=[],i=0,s=0,d=g["!rows"],u=Array.isArray(g),m={r:A},h=-1;for(s=o.s.c;s<=o.e.c;++s)r[s]=$I(s);for(i=o.s.r;i<=o.e.r;++i){for(a=[],A=_I(i),s=o.s.c;s<=o.e.c;++s){n=r[s]+A;var b=u?(g[i]||[])[s]:g[n];void 0!==b&&null!=(c=pl(b,n,g,e))&&a.push(c)}(a.length>0||d&&d[i])&&(m={r:A},d&&d[i]&&((t=d[i]).hidden&&(m.hidden=1),h=-1,t.hpx?h=et(t.hpx):t.hpt&&(h=t.hpt),h>-1&&(m.ht=h,m.customHeight=1),t.level&&(m.outlineLevel=t.level)),l[l.length]=Te("row",a.join(""),m))}if(d)for(;i<d.length;++i)d&&d[i]&&(m={r:i+1},(t=d[i]).hidden&&(m.hidden=1),h=-1,t.hpx?h=et(t.hpx):t.hpt&&(h=t.hpt),h>-1&&(m.ht=h,m.customHeight=1),t.level&&(m.outlineLevel=t.level),l[l.length]=Te("row","",m));return l.join("")}(o,e,0,0),a.length>0&&(t[t.length]=a)),t.length>n+1&&(t[t.length]="</sheetData>",t[n]=t[n].replace("/>",">")),o["!protect"]&&(t[t.length]=function(g){var e={sheet:1};return Zl.forEach((function(I){null!=g[I]&&g[I]&&(e[I]="1")})),Gl.forEach((function(I){null==g[I]||g[I]||(e[I]="0")})),g.password&&(e.password=Qn(g.password).toString(16).toUpperCase()),Te("sheetProtection",null,e)}(o["!protect"])),null!=o["!autofilter"]&&(t[t.length]=function(g,e,I,C){var n="string"==typeof g.ref?g.ref:CC(g.ref);I.Workbook||(I.Workbook={Sheets:[]}),I.Workbook.Names||(I.Workbook.Names=[]);var t=I.Workbook.Names,l=IC(n);l.s.r==l.e.r&&(l.e.r=IC(e["!ref"]).e.r,n=CC(l));for(var a=0;a<t.length;++a){var o=t[a];if("_xlnm._FilterDatabase"==o.Name&&o.Sheet==C){o.Ref="'"+I.SheetNames[C]+"'!"+n;break}}return a==t.length&&t.push({Name:"_xlnm._FilterDatabase",Sheet:C,Ref:"'"+I.SheetNames[C]+"'!"+n}),Te("autoFilter",null,{ref:n})}(o["!autofilter"],o,I,g)),null!=o["!merges"]&&o["!merges"].length>0&&(t[t.length]=function(g){if(0===g.length)return"";for(var e='<mergeCells count="'+g.length+'">',I=0;I!=g.length;++I)e+='<mergeCell ref="'+CC(g[I])+'"/>';return e+"</mergeCells>"}(o["!merges"]));var i,s,d=-1,u=-1;return o["!links"].length>0&&(t[t.length]="<hyperlinks>",o["!links"].forEach((function(g){g[1].Target&&(i={ref:g[0]},"#"!=g[1].Target.charAt(0)&&(u=PC(C,-1,fe(g[1].Target).replace(/#.*$/,""),LC.HLINK),i["r:id"]="rId"+u),(d=g[1].Target.indexOf("#"))>-1&&(i.location=fe(g[1].Target.slice(d+1))),g[1].Tooltip&&(i.tooltip=fe(g[1].Tooltip)),t[t.length]=Te("hyperlink",null,i))})),t[t.length]="</hyperlinks>"),delete o["!links"],null!=o["!margins"]&&(t[t.length]=(ml(s=o["!margins"]),Te("pageMargins",null,s))),e&&!e.ignoreEC&&void 0!=e.ignoreEC||(t[t.length]=Ke("ignoredErrors",Te("ignoredError",null,{numberStoredAsText:1,sqref:c}))),r.length>0&&(u=PC(C,-1,"../drawings/drawing"+(g+1)+".xml",LC.DRAW),t[t.length]=Te("drawing",null,{"r:id":"rId"+u}),o["!drawing"]=r),o["!comments"].length>0&&(u=PC(C,-1,"../drawings/vmlDrawing"+(g+1)+".vml",LC.VML),t[t.length]=Te("legacyDrawing",null,{"r:id":"rId"+u}),o["!legacy"]=u),t.length>1&&(t[t.length]="</worksheet>",t[1]=t[1].replace("/>",">")),t.join("")}function yl(g,e,I,C){var n=function(g,e,I){var C=UI(145),n=(I["!rows"]||[])[g]||{};C.write_shift(4,g),C.write_shift(4,0);var t=320;n.hpx?t=20*et(n.hpx):n.hpt&&(t=20*n.hpt),C.write_shift(2,t),C.write_shift(1,0);var l=0;n.level&&(l|=n.level),n.hidden&&(l|=16),(n.hpx||n.hpt)&&(l|=32),C.write_shift(1,l),C.write_shift(1,0);var a=0,o=C.l;C.l+=4;for(var c={r:g,c:0},A=0;A<16;++A)if(!(e.s.c>A+1<<10||e.e.c<A<<10)){for(var r=-1,i=-1,s=A<<10;s<A+1<<10;++s)c.c=s,(Array.isArray(I)?(I[c.r]||[])[c.c]:I[eC(c)])&&(r<0&&(r=s),i=s);r<0||(++a,C.write_shift(4,r),C.write_shift(4,i))}var d=C.l;return C.l=o,C.write_shift(4,a),C.l=d,C.length>C.l?C.slice(0,C.l):C}(C,I,e);(n.length>17||(e["!rows"]||[])[C])&&LI(g,0,n)}var Sl=kC,fl=JC;function Wl(g){return[ZC(g),YC(g),"n"]}var Vl=kC,vl=JC;var Rl=["left","right","top","bottom","header","footer"];function Xl(g,e,I,C,n,t,l){if(void 0===e.v)return!1;var a="";switch(e.t){case"b":a=e.v?"1":"0";break;case"d":(e=se(e)).z=e.z||Ag[14],e.v=Ce(re(e.v)),e.t="n";break;case"n":case"e":a=""+e.v;break;default:a=e.v}var o={r:I,c:C};switch(o.s=hl(n.cellXfs,e,n),e.l&&t["!links"].push([eC(o),e.l]),e.c&&t["!comments"].push([eC(o),e.c]),e.t){case"s":case"str":return n.bookSST?(a=dl(n.Strings,e.v,n.revStrings),o.t="s",o.v=a,l?LI(g,18,function(g,e,I){return null==I&&(I=UI(8)),GC(e,I),I.write_shift(4,e.v),I}(0,o)):LI(g,7,function(g,e,I){return null==I&&(I=UI(12)),bC(e,I),I.write_shift(4,e.v),I}(0,o))):(o.t="str",l?LI(g,17,function(g,e,I){return null==I&&(I=UI(8+4*g.v.length)),GC(e,I),iC(g.v,I),I.length>I.l?I.slice(0,I.l):I}(e,o)):LI(g,6,function(g,e,I){return null==I&&(I=UI(12+4*g.v.length)),bC(e,I),iC(g.v,I),I.length>I.l?I.slice(0,I.l):I}(e,o))),!0;case"n":return e.v==(0|e.v)&&e.v>-1e3&&e.v<1e3?l?LI(g,13,function(g,e,I){return null==I&&(I=UI(8)),GC(e,I),RC(g.v,I),I}(e,o)):LI(g,2,function(g,e,I){return null==I&&(I=UI(12)),bC(e,I),RC(g.v,I),I}(e,o)):l?LI(g,16,function(g,e,I){return null==I&&(I=UI(12)),GC(e,I),HC(g.v,I),I}(e,o)):LI(g,5,function(g,e,I){return null==I&&(I=UI(16)),bC(e,I),HC(g.v,I),I}(e,o)),!0;case"b":return o.t="b",l?LI(g,15,function(g,e,I){return null==I&&(I=UI(5)),GC(e,I),I.write_shift(1,g.v?1:0),I}(e,o)):LI(g,4,function(g,e,I){return null==I&&(I=UI(9)),bC(e,I),I.write_shift(1,g.v?1:0),I}(e,o)),!0;case"e":return o.t="e",l?LI(g,14,function(g,e,I){return null==I&&(I=UI(8)),GC(e,I),I.write_shift(1,g.v),I.write_shift(2,0),I.write_shift(1,0),I}(e,o)):LI(g,3,function(g,e,I){return null==I&&(I=UI(9)),bC(e,I),I.write_shift(1,g.v),I}(e,o)),!0}return l?LI(g,12,function(g,e,I){return null==I&&(I=UI(4)),GC(e,I)}(0,o)):LI(g,1,function(g,e,I){return null==I&&(I=UI(8)),bC(e,I)}(0,o)),!0}function kl(g,e){var I,C;e&&e["!merges"]&&(LI(g,177,(I=e["!merges"].length,null==C&&(C=UI(4)),C.write_shift(4,I),C)),e["!merges"].forEach((function(e){LI(g,176,vl(e))})),LI(g,178))}function Jl(g,e){e&&e["!cols"]&&(LI(g,390),e["!cols"].forEach((function(e,I){e&&LI(g,60,function(g,e,I){null==I&&(I=UI(18));var C=ul(g,e);I.write_shift(-4,g),I.write_shift(-4,g),I.write_shift(4,256*(C.width||10)),I.write_shift(4,0);var n=0;return e.hidden&&(n|=1),"number"==typeof C.width&&(n|=2),e.level&&(n|=e.level<<8),I.write_shift(2,n),I}(I,e))})),LI(g,391))}function Yl(g,e){e&&e["!ref"]&&(LI(g,648),LI(g,649,function(g){var e=UI(24);return e.write_shift(4,4),e.write_shift(4,1),JC(g,e),e}(nC(e["!ref"]))),LI(g,650))}function Hl(g,e,I){e["!links"].forEach((function(e){if(e[1].Target){var C=PC(I,-1,e[1].Target.replace(/#.*$/,""),LC.HLINK);LI(g,494,function(g,e){var I=UI(50+4*(g[1].Target.length+(g[1].Tooltip||"").length));JC({s:gC(g[0]),e:gC(g[0])},I),VC("rId"+e,I);var C=g[1].Target.indexOf("#");return iC((-1==C?"":g[1].Target.slice(C+1))||"",I),iC(g[1].Tooltip||"",I),iC("",I),I.slice(0,I.l)}(e,C))}})),delete e["!links"]}function wl(g,e,I){LI(g,133),LI(g,137,function(g,e,I){null==I&&(I=UI(30));var C=924;return(((e||{}).Views||[])[0]||{}).RTL&&(C|=32),I.write_shift(2,C),I.write_shift(4,0),I.write_shift(4,0),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(1,0),I.write_shift(2,0),I.write_shift(2,100),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(4,0),I}(0,I)),LI(g,138),LI(g,134)}function Nl(g,e){var I,C;e["!protect"]&&LI(g,535,(I=e["!protect"],null==C&&(C=UI(66)),C.write_shift(2,I.password?Qn(I.password):0),C.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach((function(g){g[1]?C.write_shift(4,null==I[g[0]]||I[g[0]]?0:1):C.write_shift(4,null!=I[g[0]]&&I[g[0]]?0:1)})),C))}function Fl(g,e,I,C){var n=DI(),t=I.SheetNames[g],l=I.Sheets[t]||{},a=t;try{I&&I.Workbook&&(a=I.Workbook.Sheets[g].CodeName||a)}catch(r){}var o,c,A=nC(l["!ref"]||"A1");if(A.e.c>16383||A.e.r>1048575){if(e.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");A.e.c=Math.min(A.e.c,16383),A.e.r=Math.min(A.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],LI(n,129),(I.vbaraw||l["!outline"])&&LI(n,147,function(g,e,I){null==I&&(I=UI(84+4*g.length));var C=192;e&&(e.above&&(C&=-65),e.left&&(C&=-129)),I.write_shift(1,C);for(var n=1;n<3;++n)I.write_shift(1,0);return wC({auto:1},I),I.write_shift(-4,-1),I.write_shift(-4,-1),BC(g,I),I.slice(0,I.l)}(a,l["!outline"])),LI(n,148,fl(A)),wl(n,0,I.Workbook),Jl(n,l),function(g,e,I,C){var n,t=nC(e["!ref"]||"A1"),l="",a=[];LI(g,145);var o=Array.isArray(e),c=t.e.r;e["!rows"]&&(c=Math.max(t.e.r,e["!rows"].length-1));for(var A=t.s.r;A<=c;++A){l=_I(A),yl(g,e,t,A);var r=!1;if(A<=t.e.r)for(var i=t.s.c;i<=t.e.c;++i){A===t.s.r&&(a[i]=$I(i)),n=a[i]+l;var s=o?(e[A]||[])[i]:e[n];r=!!s&&Xl(g,s,A,i,C,e,r)}}LI(g,146)}(n,l,0,e),Nl(n,l),function(g,e,I,C){if(e["!autofilter"]){var n=e["!autofilter"],t="string"===typeof n.ref?n.ref:CC(n.ref);I.Workbook||(I.Workbook={Sheets:[]}),I.Workbook.Names||(I.Workbook.Names=[]);var l=I.Workbook.Names,a=IC(t);a.s.r==a.e.r&&(a.e.r=IC(e["!ref"]).e.r,t=CC(a));for(var o=0;o<l.length;++o){var c=l[o];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==C){c.Ref="'"+I.SheetNames[C]+"'!"+t;break}}o==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:C,Ref:"'"+I.SheetNames[C]+"'!"+t}),LI(g,161,JC(nC(t))),LI(g,162)}}(n,l,I,g),kl(n,l),Hl(n,l,C),l["!margins"]&&LI(n,476,(o=l["!margins"],null==c&&(c=UI(48)),ml(o),Rl.forEach((function(g){HC(o[g],c)})),c)),e&&!e.ignoreEC&&void 0!=e.ignoreEC||Yl(n,l),function(g,e,I,C){if(e["!comments"].length>0){var n=PC(C,-1,"../drawings/vmlDrawing"+(I+1)+".vml",LC.VML);LI(g,551,VC("rId"+n)),e["!legacy"]=n}}(n,l,g,C),LI(n,130),n.end()}var Kl=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var El="][*?/\\".split("");function Tl(g,e){if(g.length>31){if(e)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var I=!0;return El.forEach((function(C){if(-1!=g.indexOf(C)){if(!e)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");I=!1}})),I}function Ml(g){if(!g||!g.SheetNames||!g.Sheets)throw new Error("Invalid Workbook");if(!g.SheetNames.length)throw new Error("Workbook is empty");var e,I,C,n=g.Workbook&&g.Workbook.Sheets||[];e=g.SheetNames,I=n,C=!!g.vbaraw,e.forEach((function(g,n){Tl(g);for(var t=0;t<n;++t)if(g==e[t])throw new Error("Duplicate Sheet Name: "+g);if(C){var l=I&&I[n]&&I[n].CodeName||g;if(95==l.charCodeAt(0)&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}}));for(var t=0;t<g.SheetNames.length;++t)bl(g.Sheets[g.SheetNames[t]],g.SheetNames[t],t)}function xl(g){var e=[Ge];e[e.length]=Te("workbook",null,{xmlns:eI[0],"xmlns:r":_e});var I=g.Workbook&&(g.Workbook.Names||[]).length>0,C={codeName:"ThisWorkbook"};g.Workbook&&g.Workbook.WBProps&&(Kl.forEach((function(e){null!=g.Workbook.WBProps[e[0]]&&g.Workbook.WBProps[e[0]]!=e[1]&&(C[e[0]]=g.Workbook.WBProps[e[0]])})),g.Workbook.WBProps.CodeName&&(C.codeName=g.Workbook.WBProps.CodeName,delete C.CodeName)),e[e.length]=Te("workbookPr",null,C);var n=g.Workbook&&g.Workbook.Sheets||[],t=0;if(n&&n[0]&&n[0].Hidden){for(e[e.length]="<bookViews>",t=0;t!=g.SheetNames.length&&n[t]&&n[t].Hidden;++t);t==g.SheetNames.length&&(t=0),e[e.length]='<workbookView firstSheet="'+t+'" activeTab="'+t+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",t=0;t!=g.SheetNames.length;++t){var l={name:fe(g.SheetNames[t].slice(0,31))};if(l.sheetId=""+(t+1),l["r:id"]="rId"+(t+1),n[t])switch(n[t].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden"}e[e.length]=Te("sheet",null,l)}return e[e.length]="</sheets>",I&&(e[e.length]="<definedNames>",g.Workbook&&g.Workbook.Names&&g.Workbook.Names.forEach((function(g){var I={name:g.Name};g.Comment&&(I.comment=g.Comment),null!=g.Sheet&&(I.localSheetId=""+g.Sheet),g.Hidden&&(I.hidden="1"),g.Ref&&(e[e.length]=Te("definedName",fe(g.Ref),I))})),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Ul(g,e){if(e.Workbook&&e.Workbook.Sheets){for(var I,C,n=e.Workbook.Sheets,t=0,l=-1,a=-1;t<n.length;++t)!n[t]||!n[t].Hidden&&-1==l?l=t:1==n[t].Hidden&&-1==a&&(a=t);if(!(a>l))LI(g,135),LI(g,158,(I=l,C||(C=UI(29)),C.write_shift(-4,0),C.write_shift(-4,460),C.write_shift(4,28800),C.write_shift(4,17600),C.write_shift(4,500),C.write_shift(4,I),C.write_shift(4,I),C.write_shift(1,120),C.length>C.l?C.slice(0,C.l):C)),LI(g,136)}}function Dl(g,e){var I=DI();return LI(I,131),LI(I,128,function(g,e){e||(e=UI(127));for(var I=0;4!=I;++I)e.write_shift(4,0);return iC("SheetJS",e),iC(R.version,e),iC(R.version,e),iC("7262",e),e.length>e.l?e.slice(0,e.l):e}()),LI(I,153,function(g,e){e||(e=UI(72));var I=0;return g&&g.filterPrivacy&&(I|=8),e.write_shift(4,I),e.write_shift(4,0),BC(g&&g.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}(g.Workbook&&g.Workbook.WBProps||null)),Ul(I,g),function(g,e){LI(g,143);for(var I=0;I!=e.SheetNames.length;++I){LI(g,156,(C={Hidden:e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[I]&&e.Workbook.Sheets[I].Hidden||0,iTabID:I+1,strRelID:"rId"+(I+1),name:e.SheetNames[I]},(n=void 0)||(n=UI(127)),n.write_shift(4,C.Hidden),n.write_shift(4,C.iTabID),VC(C.strRelID,n),iC(C.name.slice(0,31),n),n.length>n.l?n.slice(0,n.l):n))}var C,n;LI(g,144)}(I,g),LI(I,132),I.end()}function Ll(g,e,I,C,n){return(".bin"===e.slice(-4)?Fl:Bl)(g,I,C,n)}function zl(g,e,I){return(".bin"===e.slice(-4)?ft:Bt)(g,I)}function Ql(g,e){var I=[];return g.Props&&I.push(function(g,e){var I=[];return qg(nn).map((function(g){for(var e=0;e<_C.length;++e)if(_C[e][1]==g)return _C[e];for(e=0;e<gn.length;++e)if(gn[e][1]==g)return gn[e];throw g})).forEach((function(C){if(null!=g[C[1]]){var n=e&&e.Props&&null!=e.Props[C[1]]?e.Props[C[1]]:g[C[1]];"date"===C[2]&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof n?n=String(n):!0===n||!1===n?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),I.push(Ke(nn[C[1]]||C[1],n))}})),Te("DocumentProperties",I.join(""),{xmlns:II})}(g.Props,e)),g.Custprops&&I.push(function(g,e){var I=["Worksheets","SheetNames"],C="CustomDocumentProperties",n=[];return g&&qg(g).forEach((function(e){if(Object.prototype.hasOwnProperty.call(g,e)){for(var C=0;C<_C.length;++C)if(e==_C[C][1])return;for(C=0;C<gn.length;++C)if(e==gn[C][1])return;for(C=0;C<I.length;++C)if(e==I[C])return;var t=g[e],l="string";"number"==typeof t?(l="float",t=String(t)):!0===t||!1===t?(l="boolean",t=t?"1":"0"):t=String(t),n.push(Te(We(e),t,{"dt:dt":l}))}})),e&&qg(e).forEach((function(I){if(Object.prototype.hasOwnProperty.call(e,I)&&(!g||!Object.prototype.hasOwnProperty.call(g,I))){var C=e[I],t="string";"number"==typeof C?(t="float",C=String(C)):!0===C||!1===C?(t="boolean",C=C?"1":"0"):C instanceof Date?(t="dateTime.tz",C=C.toISOString()):C=String(C),n.push(Te(We(I),C,{"dt:dt":t}))}})),"<"+C+' xmlns="'+II+'">'+n.join("")+"</"+C+">"}(g.Props,g.Custprops)),I.join("")}function Pl(g){return Te("NamedRange",null,{"ss:Name":g.Name,"ss:RefersTo":"="+Rt(g.Ref,{r:0,c:0})})}function Ol(g,e,I,C,n,t,l){if(!g||void 0==g.v&&void 0==g.f)return"";var a={};if(g.f&&(a["ss:Formula"]="="+fe(Rt(g.f,l))),g.F&&g.F.slice(0,e.length)==e){var o=gC(g.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(o.r==l.r?"":"["+(o.r-l.r)+"]")+"C"+(o.c==l.c?"":"["+(o.c-l.c)+"]")}if(g.l&&g.l.Target&&(a["ss:HRef"]=fe(g.l.Target),g.l.Tooltip&&(a["x:HRefScreenTip"]=fe(g.l.Tooltip))),I["!merges"])for(var c=I["!merges"],A=0;A!=c.length;++A)c[A].s.c==l.c&&c[A].s.r==l.r&&(c[A].e.c>c[A].s.c&&(a["ss:MergeAcross"]=c[A].e.c-c[A].s.c),c[A].e.r>c[A].s.r&&(a["ss:MergeDown"]=c[A].e.r-c[A].s.r));var r="",i="";switch(g.t){case"z":if(!C.sheetStubs)return"";break;case"n":r="Number",i=String(g.v);break;case"b":r="Boolean",i=g.v?"1":"0";break;case"e":r="Error",i=MC[g.v];break;case"d":r="DateTime",i=new Date(g.v).toISOString(),null==g.z&&(g.z=g.z||Ag[14]);break;case"s":r="String",i=((g.v||"")+"").replace(ye,(function(g){return Be[g]})).replace(Ve,(function(g){return"&#x"+g.charCodeAt(0).toString(16).toUpperCase()+";"}))}var s=hl(C.cellXfs,g,C);a["ss:StyleID"]="s"+(21+s),a["ss:Index"]=l.c+1;var d=null!=g.v?i:"",u="z"==g.t?"":'<Data ss:Type="'+r+'">'+d+"</Data>";return(g.c||[]).length>0&&(u+=g.c.map((function(g){var e=Te("ss:Data",(g.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return Te("Comment",e,{"ss:Author":g.a})})).join("")),Te("Cell",u,a)}function jl(g,e){var I='<Row ss:Index="'+(g+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=It(e.hpt)),e.hpx&&(I+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(I+=' ss:Hidden="1"')),I+">"}function _l(g,e,I){var C=[],n=I.SheetNames[g],t=I.Sheets[n],l=t?function(g,e,I,C){if(!g)return"";if(!((C||{}).Workbook||{}).Names)return"";for(var n=C.Workbook.Names,t=[],l=0;l<n.length;++l){var a=n[l];a.Sheet==I&&(a.Name.match(/^_xlfn\./)||t.push(Pl(a)))}return t.join("")}(t,0,g,I):"";return l.length>0&&C.push("<Names>"+l+"</Names>"),l=t?function(g,e,I,C){if(!g["!ref"])return"";var n=nC(g["!ref"]),t=g["!merges"]||[],l=0,a=[];g["!cols"]&&g["!cols"].forEach((function(g,e){gt(g);var I=!!g.width,C=ul(e,g),n={"ss:Index":e+1};I&&(n["ss:Width"]=_n(C.width)),g.hidden&&(n["ss:Hidden"]="1"),a.push(Te("Column",null,n))}));for(var o=Array.isArray(g),c=n.s.r;c<=n.e.r;++c){for(var A=[jl(c,(g["!rows"]||[])[c])],r=n.s.c;r<=n.e.c;++r){var i=!1;for(l=0;l!=t.length;++l)if(!(t[l].s.c>r)&&!(t[l].s.r>c)&&!(t[l].e.c<r)&&!(t[l].e.r<c)){t[l].s.c==r&&t[l].s.r==c||(i=!0);break}if(!i){var s={r:c,c:r},d=eC(s),u=o?(g[c]||[])[r]:g[d];A.push(Ol(u,d,g,e,0,0,s))}}A.push("</Row>"),A.length>2&&a.push(A.join(""))}return a.join("")}(t,e):"",l.length>0&&C.push("<Table>"+l+"</Table>"),C.push(function(g,e,I,C){if(!g)return"";var n=[];if(g["!margins"]&&(n.push("<PageSetup>"),g["!margins"].header&&n.push(Te("Header",null,{"x:Margin":g["!margins"].header})),g["!margins"].footer&&n.push(Te("Footer",null,{"x:Margin":g["!margins"].footer})),n.push(Te("PageMargins",null,{"x:Bottom":g["!margins"].bottom||"0.75","x:Left":g["!margins"].left||"0.7","x:Right":g["!margins"].right||"0.7","x:Top":g["!margins"].top||"0.75"})),n.push("</PageSetup>")),C&&C.Workbook&&C.Workbook.Sheets&&C.Workbook.Sheets[I])if(C.Workbook.Sheets[I].Hidden)n.push(Te("Visible",1==C.Workbook.Sheets[I].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var t=0;t<I&&(!C.Workbook.Sheets[t]||C.Workbook.Sheets[t].Hidden);++t);t==I&&n.push("<Selected/>")}return((((C||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),g["!protect"]&&(n.push(Ke("ProtectContents","True")),g["!protect"].objects&&n.push(Ke("ProtectObjects","True")),g["!protect"].scenarios&&n.push(Ke("ProtectScenarios","True")),null==g["!protect"].selectLockedCells||g["!protect"].selectLockedCells?null==g["!protect"].selectUnlockedCells||g["!protect"].selectUnlockedCells||n.push(Ke("EnableSelection","UnlockedCells")):n.push(Ke("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach((function(e){g["!protect"][e[0]]&&n.push("<"+e[1]+"/>")}))),0==n.length?"":Te("WorksheetOptions",n.join(""),{xmlns:CI})}(t,0,g,I)),C.join("")}function ql(g,e){e||(e={}),g.SSF||(g.SSF=se(Ag)),g.SSF&&(Lg(),Dg(g.SSF),e.revssf=ee(g.SSF),e.revssf[g.SSF[65535]]=0,e.ssf=g.SSF,e.cellXfs=[],hl(e.cellXfs,{},{revssf:{General:0}}));var I=[];I.push(Ql(g,e)),I.push(""),I.push(""),I.push("");for(var C=0;C<g.SheetNames.length;++C)I.push(Te("Worksheet",_l(C,e,g),{"ss:Name":fe(g.SheetNames[C])}));return I[2]=function(g,e){var I=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach((function(g,e){var C=[];C.push(Te("NumberFormat",null,{"ss:Format":fe(Ag[g.numFmtId])}));var n={"ss:ID":"s"+(21+e)};I.push(Te("Style",C.join(""),n))})),Te("Styles",I.join(""))}(0,e),I[3]=function(g){if(!((g||{}).Workbook||{}).Names)return"";for(var e=g.Workbook.Names,I=[],C=0;C<e.length;++C){var n=e[C];null==n.Sheet&&(n.Name.match(/^_xlfn\./)||I.push(Pl(n)))}return Te("Names",I.join(""))}(g),Ge+Te("Workbook",I.join(""),{xmlns:nI,"xmlns:o":II,"xmlns:x":CI,"xmlns:ss":nI,"xmlns:dt":tI,"xmlns:html":oI})}var $l="e0859ff2f94f6810ab9108002b27b3d9",ga="02d5cdd59c2e1b10939708002b2cf9ae",ea="05d5cdd59c2e1b10939708002b2cf9ae";function Ia(g,e){var I=e||{},C=Pg.utils.cfb_new({root:"R"}),n="/Workbook";switch(I.bookType||"xls"){case"xls":I.bookType="biff8";case"xla":I.bookType||(I.bookType="xla");case"biff8":n="/Workbook",I.biff=8;break;case"biff5":n="/Book",I.biff=5;break;default:throw new Error("invalid type "+I.bookType+" for XLS CFB")}return Pg.utils.cfb_add(C,n,sa(g,I)),8==I.biff&&(g.Props||g.Custprops)&&function(g,e){var I,C=[],n=[],t=[],l=0,a=$g(FC,"n"),o=$g(KC,"n");if(g.Props)for(I=qg(g.Props),l=0;l<I.length;++l)(Object.prototype.hasOwnProperty.call(a,I[l])?C:Object.prototype.hasOwnProperty.call(o,I[l])?n:t).push([I[l],g.Props[I[l]]]);if(g.Custprops)for(I=qg(g.Custprops),l=0;l<I.length;++l)Object.prototype.hasOwnProperty.call(g.Props||{},I[l])||(Object.prototype.hasOwnProperty.call(a,I[l])?C:Object.prototype.hasOwnProperty.call(o,I[l])?n:t).push([I[l],g.Custprops[I[l]]]);var c=[];for(l=0;l<t.length;++l)ln.indexOf(t[l][0])>-1||en.indexOf(t[l][0])>-1||null!=t[l][1]&&c.push(t[l]);n.length&&Pg.utils.cfb_add(e,"/\x05SummaryInformation",cn(n,$l,o,KC)),(C.length||c.length)&&Pg.utils.cfb_add(e,"/\x05DocumentSummaryInformation",cn(C,ga,a,FC,c.length?c:null,ea))}(g,C),8==I.biff&&g.vbaraw&&function(g,e){e.FullPaths.forEach((function(I,C){if(0!=C){var n=I.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==n.slice(-1)&&Pg.utils.cfb_add(g,n,e.FileIndex[C].content)}}))}(C,Pg.read(g.vbaraw,{type:"string"==typeof g.vbaraw?"binary":"buffer"})),C}var Ca={0:{f:function(g,e){var I={},C=g.l+e;I.r=g.read_shift(4),g.l+=4;var n=g.read_shift(2);g.l+=1;var t=g.read_shift(1);return g.l=C,7&t&&(I.level=7&t),16&t&&(I.hidden=!0),32&t&&(I.hpt=n/20),I}},1:{f:function(g){return[hC(g)]}},2:{f:function(g){return[hC(g),vC(g),"n"]}},3:{f:function(g){return[hC(g),g.read_shift(1),"e"]}},4:{f:function(g){return[hC(g),g.read_shift(1),"b"]}},5:{f:function(g){return[hC(g),YC(g),"n"]}},6:{f:function(g){return[hC(g),rC(g),"str"]}},7:{f:function(g){return[hC(g),g.read_shift(4),"s"]}},8:{f:function(g,e,I){var C=g.l+e,n=hC(g);n.r=I["!row"];var t=[n,rC(g),"str"];if(I.cellFormula){g.l+=2;var l=ll(g,C-g.l,I);t[3]=Il(l,0,n,I.supbooks,I)}else g.l=C;return t}},9:{f:function(g,e,I){var C=g.l+e,n=hC(g);n.r=I["!row"];var t=[n,YC(g),"n"];if(I.cellFormula){g.l+=2;var l=ll(g,C-g.l,I);t[3]=Il(l,0,n,I.supbooks,I)}else g.l=C;return t}},10:{f:function(g,e,I){var C=g.l+e,n=hC(g);n.r=I["!row"];var t=[n,g.read_shift(1),"b"];if(I.cellFormula){g.l+=2;var l=ll(g,C-g.l,I);t[3]=Il(l,0,n,I.supbooks,I)}else g.l=C;return t}},11:{f:function(g,e,I){var C=g.l+e,n=hC(g);n.r=I["!row"];var t=[n,g.read_shift(1),"e"];if(I.cellFormula){g.l+=2;var l=ll(g,C-g.l,I);t[3]=Il(l,0,n,I.supbooks,I)}else g.l=C;return t}},12:{f:function(g){return[ZC(g)]}},13:{f:function(g){return[ZC(g),vC(g),"n"]}},14:{f:function(g){return[ZC(g),g.read_shift(1),"e"]}},15:{f:function(g){return[ZC(g),g.read_shift(1),"b"]}},16:{f:Wl},17:{f:function(g){return[ZC(g),rC(g),"str"]}},18:{f:function(g){return[ZC(g),g.read_shift(4),"s"]}},19:{f:dC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(g,e,I){var C=g.l+e;g.l+=4,g.l+=1;var n=g.read_shift(4),t=fC(g),l=al(g,0,I),a=yC(g);g.l=C;var o={Name:t,Ptg:l};return n<268435455&&(o.Sheet=n),a&&(o.Comment=a),o}},40:{},42:{},43:{f:function(g,e,I){var C={};C.sz=g.read_shift(2)/20;var n=function(g){var e=g.read_shift(1);return g.l++,{fBold:1&e,fItalic:2&e,fUnderline:4&e,fStrikeout:8&e,fOutline:16&e,fShadow:32&e,fCondense:64&e,fExtend:128&e}}(g);switch(n.fItalic&&(C.italic=1),n.fCondense&&(C.condense=1),n.fExtend&&(C.extend=1),n.fShadow&&(C.shadow=1),n.fOutline&&(C.outline=1),n.fStrikeout&&(C.strike=1),700===g.read_shift(2)&&(C.bold=1),g.read_shift(2)){case 1:C.vertAlign="superscript";break;case 2:C.vertAlign="subscript"}var t=g.read_shift(1);0!=t&&(C.underline=t);var l=g.read_shift(1);l>0&&(C.family=l);var a=g.read_shift(1);switch(a>0&&(C.charset=a),g.l++,C.color=function(g){var e={},I=g.read_shift(1)>>>1,C=g.read_shift(1),n=g.read_shift(2,"i"),t=g.read_shift(1),l=g.read_shift(1),a=g.read_shift(1);switch(g.l++,I){case 0:e.auto=1;break;case 1:e.index=C;var o=TC[C];o&&(e.rgb=On(o));break;case 2:e.rgb=On([t,l,a]);break;case 3:e.theme=C}return 0!=n&&(e.tint=n>0?n/32767:n/32768),e}(g),g.read_shift(1)){case 1:C.scheme="major";break;case 2:C.scheme="minor"}return C.name=rC(g),C}},44:{f:function(g,e){return[g.read_shift(2),rC(g)]}},45:{f:ot},46:{f:it},47:{f:function(g,e){var I=g.l+e,C=g.read_shift(2),n=g.read_shift(2);return g.l=I,{ixfe:C,numFmtId:n}}},48:{},49:{f:function(g){return g.read_shift(4,"i")}},50:{},51:{f:function(g){for(var e=[],I=g.read_shift(4);I-- >0;)e.push([g.read_shift(4),g.read_shift(4)]);return e}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:wn},62:{f:function(g){return[hC(g),dC(g),"is"]}},63:{f:function(g){var e={};e.i=g.read_shift(4);var I={};I.r=g.read_shift(4),I.c=g.read_shift(4),e.r=eC(I);var C=g.read_shift(1);return 2&C&&(e.l="1"),8&C&&(e.a="1"),e}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:xI,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(g){var e=g.read_shift(2);return g.l+=28,{RTL:32&e}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(g,e){var I={},C=g[g.l];return++g.l,I.above=!(64&C),I.left=!(128&C),g.l+=18,I.name=pC(g,e-19),I}},148:{f:Sl,p:16},151:{f:function(){}},152:{},153:{f:function(g,e){var I={},C=g.read_shift(4);I.defaultThemeVersion=g.read_shift(4);var n=e>8?rC(g):"";return n.length>0&&(I.CodeName=n),I.autoCompressPictures=!!(65536&C),I.backupFile=!!(64&C),I.checkCompatibility=!!(4096&C),I.date1904=!!(1&C),I.filterPrivacy=!!(8&C),I.hidePivotFieldList=!!(1024&C),I.promptedSolutions=!!(16&C),I.publishItems=!!(2048&C),I.refreshAllConnections=!!(262144&C),I.saveExternalLinkValues=!!(128&C),I.showBorderUnselectedTables=!!(4&C),I.showInkAnnotation=!!(32&C),I.showObjects=["all","placeholders","none"][C>>13&3],I.showPivotChartFilter=!!(32768&C),I.updateLinks=["userSet","never","always"][C>>8&3],I}},154:{},155:{},156:{f:function(g,e){var I={};return I.Hidden=g.read_shift(4),I.iTabID=g.read_shift(4),I.strRelID=WC(g,e-8),I.name=rC(g),I}},157:{},158:{},159:{T:1,f:function(g){return[g.read_shift(4),g.read_shift(4)]}},160:{T:-1},161:{T:1,f:kC},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Vl},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(g,e){return{flags:g.read_shift(4),version:g.read_shift(4),name:rC(g)}}},336:{T:-1},337:{f:function(g){return g.l+=4,0!=g.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:WC},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Jn},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(g,e,I){var C=g.l+e,n=XC(g),t=g.read_shift(1),l=[n];if(l[2]=t,I.cellFormula){var a=tl(g,C-g.l,I);l[1]=a}else g.l=C;return l}},427:{f:function(g,e,I){var C=g.l+e,n=[kC(g,16)];if(I.cellFormula){var t=ol(g,C-g.l,I);n[1]=t,g.l=C}else g.l=C;return n}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(g){var e={};return Rl.forEach((function(I){e[I]=YC(g)})),e}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(g,e){var I=g.l+e,C=kC(g,16),n=yC(g),t=rC(g),l=rC(g),a=rC(g);g.l=I;var o={rfx:C,relId:n,loc:t,display:a};return l&&(o.Tooltip=l),o}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:WC},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:St},633:{T:1},634:{T:-1},635:{T:1,f:function(g){var e={};e.iauthor=g.read_shift(4);var I=kC(g,16);return e.rfx=I.s,e.ref=eC(I.s),g.l+=16,e}},636:{T:-1},637:{f:uC},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(g,e){return g.l+=10,{name:rC(g)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function na(g,e,I,C){var n=e;if(!isNaN(n)){var t=C||(I||[]).length||0,l=g.next(4);l.write_shift(2,n),l.write_shift(2,t),t>0&&RI(I)&&g.push(I)}}function ta(g,e,I){return g||(g=UI(7)),g.write_shift(2,e),g.write_shift(2,I),g.write_shift(2,0),g.write_shift(1,0),g}function la(g,e,I,C){if(null!=e.v)switch(e.t){case"d":case"n":var n="d"==e.t?Ce(re(e.v)):e.v;return void(n==(0|n)&&n>=0&&n<65536?na(g,2,function(g,e,I){var C=UI(9);return ta(C,g,e),C.write_shift(2,I),C}(I,C,n)):na(g,3,function(g,e,I){var C=UI(15);return ta(C,g,e),C.write_shift(8,I,"f"),C}(I,C,n)));case"b":case"e":return void na(g,5,function(g,e,I,C){var n=UI(9);return ta(n,g,e),un(I,C||"b",n),n}(I,C,e.v,e.t));case"s":case"str":return void na(g,4,function(g,e,I){var C=UI(8+2*I.length);return ta(C,g,e),C.write_shift(1,I.length),C.write_shift(I.length,I,"sbcs"),C.l<C.length?C.slice(0,C.l):C}(I,C,(e.v||"").slice(0,255)))}na(g,1,ta(null,I,C))}function aa(g,e){var I=e||{};for(var C=DI(),n=0,t=0;t<g.SheetNames.length;++t)g.SheetNames[t]==I.sheet&&(n=t);if(0==n&&I.sheet&&g.SheetNames[0]!=I.sheet)throw new Error("Sheet not found: "+I.sheet);return na(C,4==I.biff?1033:3==I.biff?521:9,vn(0,16,I)),function(g,e,I,C){var n,t=Array.isArray(e),l=nC(e["!ref"]||"A1"),a="",o=[];if(l.e.c>255||l.e.r>16383){if(C.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");l.e.c=Math.min(l.e.c,255),l.e.r=Math.min(l.e.c,16383),n=CC(l)}for(var c=l.s.r;c<=l.e.r;++c){a=_I(c);for(var A=l.s.c;A<=l.e.c;++A){c===l.s.r&&(o[A]=$I(A)),n=o[A]+a;var r=t?(e[c]||[])[A]:e[n];r&&la(g,r,c,A)}}}(C,g.Sheets[g.SheetNames[n]],0,I),na(C,10),C.end()}function oa(g,e,I){na(g,49,function(g,e){var I=g.name||"Arial",C=e&&5==e.biff,n=UI(C?15+I.length:16+2*I.length);return n.write_shift(2,20*(g.sz||12)),n.write_shift(4,0),n.write_shift(2,400),n.write_shift(4,0),n.write_shift(2,0),n.write_shift(1,I.length),C||n.write_shift(1,1),n.write_shift((C?1:2)*I.length,I,C?"sbcs":"utf16le"),n}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},I))}function ca(g,e){if(e){var I=0;e.forEach((function(e,C){++I<=256&&e&&na(g,125,function(g,e){var I=UI(12);I.write_shift(2,e),I.write_shift(2,e),I.write_shift(2,256*g.width),I.write_shift(2,0);var C=0;return g.hidden&&(C|=1),I.write_shift(1,C),C=g.level||0,I.write_shift(1,C),I.write_shift(2,0),I}(ul(C,e),C))}))}}function Aa(g,e,I,C,n){var t=16+hl(n.cellXfs,e,n);if(null!=e.v||e.bf)if(e.bf)na(g,6,Cl(e,I,C,0,t));else switch(e.t){case"d":case"n":na(g,515,function(g,e,I,C){var n=UI(14);return Sn(g,e,C,n),HC(I,n),n}(I,C,"d"==e.t?Ce(re(e.v)):e.v,t));break;case"b":case"e":na(g,517,function(g,e,I,C,n,t){var l=UI(8);return Sn(g,e,C,l),un(I,t,l),l}(I,C,e.v,t,0,e.t));break;case"s":case"str":if(n.bookSST)na(g,253,function(g,e,I,C){var n=UI(10);return Sn(g,e,C,n),n.write_shift(4,I),n}(I,C,dl(n.Strings,e.v,n.revStrings),t));else na(g,516,function(g,e,I,C,n){var t=!n||8==n.biff,l=UI(+t+8+(1+t)*I.length);return Sn(g,e,C,l),l.write_shift(2,I.length),t&&l.write_shift(1,1),l.write_shift((1+t)*I.length,I,t?"utf16le":"sbcs"),l}(I,C,(e.v||"").slice(0,255),t,n));break;default:na(g,513,Sn(I,C,t))}else na(g,513,Sn(I,C,t))}function ra(g,e,I){var C,n=DI(),t=I.SheetNames[g],l=I.Sheets[t]||{},a=(I||{}).Workbook||{},o=(a.Sheets||[])[g]||{},c=Array.isArray(l),A=8==e.biff,r="",i=[],s=nC(l["!ref"]||"A1"),d=A?65536:16384;if(s.e.c>255||s.e.r>=d){if(e.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,d-1)}na(n,2057,vn(0,16,e)),na(n,13,dn(1)),na(n,12,dn(100)),na(n,15,rn(!0)),na(n,17,rn(!1)),na(n,16,HC(.001)),na(n,95,rn(!0)),na(n,42,rn(!1)),na(n,43,rn(!1)),na(n,130,dn(1)),na(n,128,function(g){var e=UI(8);return e.write_shift(4,0),e.write_shift(2,g[0]?g[0]+1:0),e.write_shift(2,g[1]?g[1]+1:0),e}([0,0])),na(n,131,rn(!1)),na(n,132,rn(!1)),A&&ca(n,l["!cols"]),na(n,512,function(g,e){var I=8!=e.biff&&e.biff?2:4,C=UI(2*I+6);return C.write_shift(I,g.s.r),C.write_shift(I,g.e.r+1),C.write_shift(2,g.s.c),C.write_shift(2,g.e.c+1),C.write_shift(2,0),C}(s,e)),A&&(l["!links"]=[]);for(var u=s.s.r;u<=s.e.r;++u){r=_I(u);for(var m=s.s.c;m<=s.e.c;++m){u===s.s.r&&(i[m]=$I(m)),C=i[m]+r;var h=c?(l[u]||[])[m]:l[C];h&&(Aa(n,h,u,m,e),A&&h.l&&l["!links"].push([C,h.l]))}}var b=o.CodeName||o.name||t;return A&&na(n,574,function(g){var e=UI(18),I=1718;return g&&g.RTL&&(I|=64),e.write_shift(2,I),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}((a.Views||[])[0])),A&&(l["!merges"]||[]).length&&na(n,229,function(g){var e=UI(2+8*g.length);e.write_shift(2,g.length);for(var I=0;I<g.length;++I)Vn(g[I],e);return e}(l["!merges"])),A&&function(g,e){for(var I=0;I<e["!links"].length;++I){var C=e["!links"][I];na(g,440,Yn(C)),C[1].Tooltip&&na(g,2048,Hn(C))}delete e["!links"]}(n,l),na(n,442,pn(b)),A&&function(g,e){var I=UI(19);I.write_shift(4,2151),I.write_shift(4,0),I.write_shift(4,0),I.write_shift(2,3),I.write_shift(1,1),I.write_shift(4,0),na(g,2151,I),(I=UI(39)).write_shift(4,2152),I.write_shift(4,0),I.write_shift(4,0),I.write_shift(2,3),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(2,1),I.write_shift(4,4),I.write_shift(2,0),Vn(nC(e["!ref"]||"A1"),I),I.write_shift(4,4),na(g,2152,I)}(n,l),na(n,10),n.end()}function ia(g,e,I){var C=DI(),n=(g||{}).Workbook||{},t=n.Sheets||[],l=n.WBProps||{},a=8==I.biff,o=5==I.biff;(na(C,2057,vn(0,5,I)),"xla"==I.bookType&&na(C,135),na(C,225,a?dn(1200):null),na(C,193,function(g,e){e||(e=UI(g));for(var I=0;I<g;++I)e.write_shift(1,0);return e}(2)),o&&na(C,191),o&&na(C,192),na(C,226),na(C,92,function(g,e){var I=!e||8==e.biff,C=UI(I?112:54);for(C.write_shift(8==e.biff?2:1,7),I&&C.write_shift(1,0),C.write_shift(4,859007059),C.write_shift(4,5458548|(I?0:536870912));C.l<C.length;)C.write_shift(1,I?0:32);return C}(0,I)),na(C,66,dn(a?1200:1252)),a&&na(C,353,dn(0)),a&&na(C,448),na(C,317,function(g){for(var e=UI(2*g),I=0;I<g;++I)e.write_shift(2,I+1);return e}(g.SheetNames.length)),a&&g.vbaraw&&na(C,211),a&&g.vbaraw)&&na(C,442,pn(l.CodeName||"ThisWorkbook"));na(C,156,dn(17)),na(C,25,rn(!1)),na(C,18,rn(!1)),na(C,19,dn(0)),a&&na(C,431,rn(!1)),a&&na(C,444,dn(0)),na(C,61,function(){var g=UI(18);return g.write_shift(2,0),g.write_shift(2,0),g.write_shift(2,29280),g.write_shift(2,17600),g.write_shift(2,56),g.write_shift(2,0),g.write_shift(2,0),g.write_shift(2,1),g.write_shift(2,500),g}()),na(C,64,rn(!1)),na(C,141,dn(0)),na(C,34,rn("true"==function(g){return g.Workbook&&g.Workbook.WBProps&&Re(g.Workbook.WBProps.date1904)?"true":"false"}(g))),na(C,14,rn(!0)),a&&na(C,439,rn(!1)),na(C,218,dn(0)),oa(C,0,I),function(g,e,I){e&&[[5,8],[23,26],[41,44],[50,392]].forEach((function(C){for(var n=C[0];n<=C[1];++n)null!=e[n]&&na(g,1054,Xn(n,e[n],I))}))}(C,g.SSF,I),function(g,e){for(var I=0;I<16;++I)na(g,224,kn({numFmtId:0,style:!0},0,e));e.cellXfs.forEach((function(I){na(g,224,kn(I,0,e))}))}(C,I),a&&na(C,352,rn(!1));var c,A=C.end(),r=DI();a&&na(r,140,(c||(c=UI(4)),c.write_shift(2,1),c.write_shift(2,1),c)),a&&I.Strings&&function(g,e,I,C){var n=C||(I||[]).length||0;if(n<=8224)return na(g,e,I,n);var t=e;if(!isNaN(t)){for(var l=I.parts||[],a=0,o=0,c=0;c+(l[a]||8224)<=8224;)c+=l[a]||8224,a++;var A=g.next(4);for(A.write_shift(2,t),A.write_shift(2,c),g.push(I.slice(o,o+c)),o+=c;o<n;){for((A=g.next(4)).write_shift(2,60),c=0;c+(l[a]||8224)<=8224;)c+=l[a]||8224,a++;A.write_shift(2,c),g.push(I.slice(o,o+c)),o+=c}}}(r,252,function(g,e){var I=UI(8);I.write_shift(4,g.Count),I.write_shift(4,g.Unique);for(var C=[],n=0;n<g.length;++n)C[n]=hn(g[n]);var t=_([I].concat(C));return t.parts=[I.length].concat(C.map((function(g){return g.length}))),t}(I.Strings)),na(r,10);var i=r.end(),s=DI(),d=0,u=0;for(u=0;u<g.SheetNames.length;++u)d+=(a?12:11)+(a?2:1)*g.SheetNames[u].length;var m=A.length+d+i.length;for(u=0;u<g.SheetNames.length;++u){na(s,133,Rn({pos:m,hs:(t[u]||{}).Hidden||0,dt:0,name:g.SheetNames[u]},I)),m+=e[u].length}var h=s.end();if(d!=h.length)throw new Error("BS8 "+d+" != "+h.length);var b=[];return A.length&&b.push(A),h.length&&b.push(h),i.length&&b.push(i),_(b)}function sa(g,e){for(var I=0;I<=g.SheetNames.length;++I){var C=g.Sheets[g.SheetNames[I]];if(C&&C["!ref"])IC(C["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+g.SheetNames[I]+"' extends beyond column IV (255).  Data may be lost.")}var n=e||{};switch(n.biff||2){case 8:case 5:return function(g,e){var I=e||{},C=[];g&&!g.SSF&&(g.SSF=se(Ag)),g&&g.SSF&&(Lg(),Dg(g.SSF),I.revssf=ee(g.SSF),I.revssf[g.SSF[65535]]=0,I.ssf=g.SSF),I.Strings=[],I.Strings.Count=0,I.Strings.Unique=0,Ua(I),I.cellXfs=[],hl(I.cellXfs,{},{revssf:{General:0}}),g.Props||(g.Props={});for(var n=0;n<g.SheetNames.length;++n)C[C.length]=ra(n,I,g);return C.unshift(ia(g,C,I)),_(C)}(g,e);case 4:case 3:case 2:return aa(g,e)}throw new Error("invalid type "+n.bookType+" for BIFF")}function da(g,e,I,C){for(var n=g["!merges"]||[],t=[],l=e.s.c;l<=e.e.c;++l){for(var a=0,o=0,c=0;c<n.length;++c)if(!(n[c].s.r>I||n[c].s.c>l)&&!(n[c].e.r<I||n[c].e.c<l)){if(n[c].s.r<I||n[c].s.c<l){a=-1;break}a=n[c].e.r-n[c].s.r+1,o=n[c].e.c-n[c].s.c+1;break}if(!(a<0)){var A=eC({r:I,c:l}),r=C.dense?(g[I]||[])[l]:g[A],i=r&&null!=r.v&&(r.h||ve(r.w||(lC(r),r.w)||""))||"",s={};a>1&&(s.rowspan=a),o>1&&(s.colspan=o),C.editable?i='<span contenteditable="true">'+i+"</span>":r&&(s["data-t"]=r&&r.t||"z",null!=r.v&&(s["data-v"]=r.v),null!=r.z&&(s["data-z"]=r.z),r.l&&"#"!=(r.l.Target||"#").charAt(0)&&(i='<a href="'+r.l.Target+'">'+i+"</a>")),s.id=(C.id||"sjs")+"-"+A,t.push(Te("td",i,s))}}return"<tr>"+t.join("")+"</tr>"}var ua='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',ma="</body></html>";function ha(g,e,I){return[].join("")+"<table"+(I&&I.id?' id="'+I.id+'"':"")+">"}function ba(g,e){var I=e||{},C=null!=I.header?I.header:ua,n=null!=I.footer?I.footer:ma,t=[C],l=IC(g["!ref"]);I.dense=Array.isArray(g),t.push(ha(0,0,I));for(var a=l.s.r;a<=l.e.r;++a)t.push(da(g,l,a,I));return t.push("</table>"+n),t.join("")}function Za(g,e,I){var C=I||{};var n=0,t=0;if(null!=C.origin)if("number"==typeof C.origin)n=C.origin;else{var l="string"==typeof C.origin?gC(C.origin):C.origin;n=l.r,t=l.c}var a=e.getElementsByTagName("tr"),o=Math.min(C.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:n,c:t}};if(g["!ref"]){var A=IC(g["!ref"]);c.s.r=Math.min(c.s.r,A.s.r),c.s.c=Math.min(c.s.c,A.s.c),c.e.r=Math.max(c.e.r,A.e.r),c.e.c=Math.max(c.e.c,A.e.c),-1==n&&(c.e.r=n=A.e.r+1)}var r=[],i=0,s=g["!rows"]||(g["!rows"]=[]),d=0,u=0,m=0,h=0,b=0,Z=0;for(g["!cols"]||(g["!cols"]=[]);d<a.length&&u<o;++d){var G=a[d];if(pa(G)){if(C.display)continue;s[u]={hidden:!0}}var p=G.children;for(m=h=0;m<p.length;++m){var B=p[m];if(!C.display||!pa(B)){var y=B.hasAttribute("data-v")?B.getAttribute("data-v"):B.hasAttribute("v")?B.getAttribute("v"):Ne(B.innerHTML),S=B.getAttribute("data-z")||B.getAttribute("z");for(i=0;i<r.length;++i){var f=r[i];f.s.c==h+t&&f.s.r<u+n&&u+n<=f.e.r&&(h=f.e.c+1-t,i=-1)}Z=+B.getAttribute("colspan")||1,((b=+B.getAttribute("rowspan")||1)>1||Z>1)&&r.push({s:{r:u+n,c:h+t},e:{r:u+n+(b||1)-1,c:h+t+(Z||1)-1}});var W={t:"s",v:y},V=B.getAttribute("data-t")||B.getAttribute("t")||"";null!=y&&(0==y.length?W.t=V||"z":C.raw||0==y.trim().length||"s"==V||("TRUE"===y?W={t:"b",v:!0}:"FALSE"===y?W={t:"b",v:!1}:isNaN(ue(y))?isNaN(he(y).getDate())||(W={t:"d",v:re(y)},C.cellDates||(W={t:"n",v:Ce(W.v)}),W.z=C.dateNF||Ag[14]):W={t:"n",v:ue(y)})),void 0===W.z&&null!=S&&(W.z=S);var v="",R=B.getElementsByTagName("A");if(R&&R.length)for(var X=0;X<R.length&&(!R[X].hasAttribute("href")||"#"==(v=R[X].getAttribute("href")).charAt(0));++X);v&&"#"!=v.charAt(0)&&(W.l={Target:v}),C.dense?(g[u+n]||(g[u+n]=[]),g[u+n][h+t]=W):g[eC({c:h+t,r:u+n})]=W,c.e.c<h+t&&(c.e.c=h+t),h+=Z}}++u}return r.length&&(g["!merges"]=(g["!merges"]||[]).concat(r)),c.e.r=Math.max(c.e.r,u-1+n),g["!ref"]=CC(c),u>=o&&(g["!fullref"]=CC((c.e.r=a.length-d+u-1+n,c))),g}function Ga(g,e){return Za((e||{}).dense?[]:{},g,e)}function pa(g){var e="",I=function(g){return g.ownerDocument.defaultView&&"function"===typeof g.ownerDocument.defaultView.getComputedStyle?g.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(g);return I&&(e=I(g).getPropertyValue("display")),e||(e=g.style&&g.style.display),"none"===e}var Ba=function(){var g=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Ee({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+g+"</office:document-styles>";return function(){return Ge+e}}(),ya=function(){var g="          <table:table-cell />\n",e=function(e,I,C){var n=[];n.push('      <table:table table:name="'+fe(I.SheetNames[C])+'" table:style-name="ta1">\n');var t=0,l=0,a=IC(e["!ref"]||"A1"),o=e["!merges"]||[],c=0,A=Array.isArray(e);if(e["!cols"])for(l=0;l<=a.e.c;++l)n.push("        <table:table-column"+(e["!cols"][l]?' table:style-name="co'+e["!cols"][l].ods+'"':"")+"></table:table-column>\n");var r="",i=e["!rows"]||[];for(t=0;t<a.s.r;++t)r=i[t]?' table:style-name="ro'+i[t].ods+'"':"",n.push("        <table:table-row"+r+"></table:table-row>\n");for(;t<=a.e.r;++t){for(r=i[t]?' table:style-name="ro'+i[t].ods+'"':"",n.push("        <table:table-row"+r+">\n"),l=0;l<a.s.c;++l)n.push(g);for(;l<=a.e.c;++l){var s=!1,d={},u="";for(c=0;c!=o.length;++c)if(!(o[c].s.c>l)&&!(o[c].s.r>t)&&!(o[c].e.c<l)&&!(o[c].e.r<t)){o[c].s.c==l&&o[c].s.r==t||(s=!0),d["table:number-columns-spanned"]=o[c].e.c-o[c].s.c+1,d["table:number-rows-spanned"]=o[c].e.r-o[c].s.r+1;break}if(s)n.push("          <table:covered-table-cell/>\n");else{var m=eC({r:t,c:l}),h=A?(e[t]||[])[l]:e[m];if(h&&h.f&&(d["table:formula"]=fe(("of:="+h.f.replace(vt,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")),h.F&&h.F.slice(0,m.length)==m)){var b=IC(h.F);d["table:number-matrix-columns-spanned"]=b.e.c-b.s.c+1,d["table:number-matrix-rows-spanned"]=b.e.r-b.s.r+1}if(h){switch(h.t){case"b":u=h.v?"TRUE":"FALSE",d["office:value-type"]="boolean",d["office:boolean-value"]=h.v?"true":"false";break;case"n":u=h.w||String(h.v||0),d["office:value-type"]="float",d["office:value"]=h.v||0;break;case"s":case"str":u=null==h.v?"":h.v,d["office:value-type"]="string";break;case"d":u=h.w||re(h.v).toISOString(),d["office:value-type"]="date",d["office:date-value"]=re(h.v).toISOString(),d["table:style-name"]="ce1";break;default:n.push(g);continue}var Z=fe(u).replace(/  +/g,(function(g){return'<text:s text:c="'+g.length+'"/>'})).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>");if(h.l&&h.l.Target){var G=h.l.Target;"#"==(G="#"==G.charAt(0)?"#"+il(G.slice(1)):G).charAt(0)||G.match(/^\w+:/)||(G="../"+G),Z=Te("text:a",Z,{"xlink:href":G.replace(/&/g,"&amp;")})}n.push("          "+Te("table:table-cell",Te("text:p",Z,{}),d)+"\n")}else n.push(g)}}n.push("        </table:table-row>\n")}return n.push("      </table:table>\n"),n.join("")};return function(g,I){var C=[Ge],n=Ee({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),t=Ee({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==I.bookType?(C.push("<office:document"+n+t+">\n"),C.push(jC().replace(/office:document-meta/g,"office:meta"))):C.push("<office:document-content"+n+">\n"),function(g,e){g.push(" <office:automatic-styles>\n"),g.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),g.push('   <number:month number:style="long"/>\n'),g.push("   <number:text>/</number:text>\n"),g.push('   <number:day number:style="long"/>\n'),g.push("   <number:text>/</number:text>\n"),g.push("   <number:year/>\n"),g.push("  </number:date-style>\n");var I=0;e.SheetNames.map((function(g){return e.Sheets[g]})).forEach((function(e){if(e&&e["!cols"])for(var C=0;C<e["!cols"].length;++C)if(e["!cols"][C]){var n=e["!cols"][C];if(null==n.width&&null==n.wpx&&null==n.wch)continue;gt(n),n.ods=I;var t=e["!cols"][C].wpx+"px";g.push('  <style:style style:name="co'+I+'" style:family="table-column">\n'),g.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+t+'"/>\n'),g.push("  </style:style>\n"),++I}}));var C=0;e.SheetNames.map((function(g){return e.Sheets[g]})).forEach((function(e){if(e&&e["!rows"])for(var I=0;I<e["!rows"].length;++I)if(e["!rows"][I]){e["!rows"][I].ods=C;var n=e["!rows"][I].hpx+"px";g.push('  <style:style style:name="ro'+C+'" style:family="table-row">\n'),g.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+n+'"/>\n'),g.push("  </style:style>\n"),++C}})),g.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),g.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),g.push("  </style:style>\n"),g.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),g.push(" </office:automatic-styles>\n")}(C,g),C.push("  <office:body>\n"),C.push("    <office:spreadsheet>\n");for(var l=0;l!=g.SheetNames.length;++l)C.push(e(g.Sheets[g.SheetNames[l]],g,l));return C.push("    </office:spreadsheet>\n"),C.push("  </office:body>\n"),"fods"==I.bookType?C.push("</office:document>"):C.push("</office:document-content>"),C.join("")}}();function Sa(g,e){if("fods"==e.bookType)return ya(g,e);var I=Ze(),C="",n=[],t=[];return be(I,C="mimetype","application/vnd.oasis.opendocument.spreadsheet"),be(I,C="content.xml",ya(g,e)),n.push([C,"text/xml"]),t.push([C,"ContentFile"]),be(I,C="styles.xml",Ba(g,e)),n.push([C,"text/xml"]),t.push([C,"StylesFile"]),be(I,C="meta.xml",Ge+jC()),n.push([C,"text/xml"]),t.push([C,"MetadataFile"]),be(I,C="manifest.rdf",function(g){var e,I,C=[Ge];C.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var n=0;n!=g.length;++n)C.push(OC(g[n][0],g[n][1])),C.push((e="",I=g[n][0],['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+I+'"/>\n',"  </rdf:Description>\n"].join("")));return C.push(OC("","Document","pkg")),C.push("</rdf:RDF>"),C.join("")}(t)),n.push([C,"application/rdf+xml"]),be(I,C="META-INF/manifest.xml",function(g){var e=[Ge];e.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),e.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var I=0;I<g.length;++I)e.push('  <manifest:file-entry manifest:full-path="'+g[I][0]+'" manifest:media-type="'+g[I][1]+'"/>\n');return e.push("</manifest:manifest>"),e.join("")}(n)),I}function fa(g){return new DataView(g.buffer,g.byteOffset,g.byteLength)}function Wa(g){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(g):P(we(g))}function Va(g){var e=g.reduce((function(g,e){return g+e.length}),0),I=new Uint8Array(e),C=0;return g.forEach((function(g){I.set(g,C),C+=g.length})),I}function va(g,e){var I=e?e[0]:0,C=127&g[I];g:if(g[I++]>=128){if(C|=(127&g[I])<<7,g[I++]<128)break g;if(C|=(127&g[I])<<14,g[I++]<128)break g;if(C|=(127&g[I])<<21,g[I++]<128)break g;if(C+=(127&g[I])*Math.pow(2,28),++I,g[I++]<128)break g;if(C+=(127&g[I])*Math.pow(2,35),++I,g[I++]<128)break g;if(C+=(127&g[I])*Math.pow(2,42),++I,g[I++]<128)break g}return e&&(e[0]=I),C}function Ra(g){var e=new Uint8Array(7);e[0]=127&g;var I=1;g:if(g>127){if(e[I-1]|=128,e[I]=g>>7&127,++I,g<=16383)break g;if(e[I-1]|=128,e[I]=g>>14&127,++I,g<=2097151)break g;if(e[I-1]|=128,e[I]=g>>21&127,++I,g<=268435455)break g;if(e[I-1]|=128,e[I]=g/256>>>21&127,++I,g<=34359738367)break g;if(e[I-1]|=128,e[I]=g/65536>>>21&127,++I,g<=4398046511103)break g;e[I-1]|=128,e[I]=g/16777216>>>21&127,++I}return e.slice(0,I)}function Xa(g){var e=0,I=127&g[e];g:if(g[e++]>=128){if(I|=(127&g[e])<<7,g[e++]<128)break g;if(I|=(127&g[e])<<14,g[e++]<128)break g;if(I|=(127&g[e])<<21,g[e++]<128)break g;I|=(127&g[e])<<28}return I}function ka(g){for(var e=[],I=[0];I[0]<g.length;){var C,n=I[0],t=va(g,I),l=7&t,a=0;if(0==(t=Math.floor(t/8)))break;switch(l){case 0:for(var o=I[0];g[I[0]++]>=128;);C=g.slice(o,I[0]);break;case 5:a=4,C=g.slice(I[0],I[0]+a),I[0]+=a;break;case 1:a=8,C=g.slice(I[0],I[0]+a),I[0]+=a;break;case 2:a=va(g,I),C=g.slice(I[0],I[0]+a),I[0]+=a;break;default:throw new Error("PB Type ".concat(l," for Field ").concat(t," at offset ").concat(n))}var c={data:C,type:l};null==e[t]?e[t]=[c]:e[t].push(c)}return e}function Ja(g){var e=[];return g.forEach((function(g,I){g.forEach((function(g){g.data&&(e.push(Ra(8*I+g.type)),2==g.type&&e.push(Ra(g.data.length)),e.push(g.data))}))})),Va(e)}function Ya(g){for(var e,I=[],C=[0];C[0]<g.length;){var n=va(g,C),t=ka(g.slice(C[0],C[0]+n));C[0]+=n;var l={id:Xa(t[1][0].data),messages:[]};t[2].forEach((function(e){var I=ka(e.data),n=Xa(I[3][0].data);l.messages.push({meta:I,data:g.slice(C[0],C[0]+n)}),C[0]+=n})),(null==(e=t[3])?void 0:e[0])&&(l.merge=Xa(t[3][0].data)>>>0>0),I.push(l)}return I}function Ha(g){var e=[];return g.forEach((function(g){var I=[];I[1]=[{data:Ra(g.id),type:0}],I[2]=[],null!=g.merge&&(I[3]=[{data:Ra(+!!g.merge),type:0}]);var C=[];g.messages.forEach((function(g){C.push(g.data),g.meta[3]=[{type:0,data:Ra(g.data.length)}],I[2].push({data:Ja(g.meta),type:2})}));var n=Ja(I);e.push(Ra(n.length)),e.push(n),C.forEach((function(g){return e.push(g)}))})),Va(e)}function wa(g,e){if(0!=g)throw new Error("Unexpected Snappy chunk type ".concat(g));for(var I=[0],C=va(e,I),n=[];I[0]<e.length;){var t=3&e[I[0]];if(0!=t){var l=0,a=0;if(1==t?(a=4+(e[I[0]]>>2&7),l=(224&e[I[0]++])<<3,l|=e[I[0]++]):(a=1+(e[I[0]++]>>2),2==t?(l=e[I[0]]|e[I[0]+1]<<8,I[0]+=2):(l=(e[I[0]]|e[I[0]+1]<<8|e[I[0]+2]<<16|e[I[0]+3]<<24)>>>0,I[0]+=4)),n=[Va(n)],0==l)throw new Error("Invalid offset 0");if(l>n[0].length)throw new Error("Invalid offset beyond length");if(a>=l)for(n.push(n[0].slice(-l)),a-=l;a>=n[n.length-1].length;)n.push(n[n.length-1]),a-=n[n.length-1].length;n.push(n[0].slice(-l,-l+a))}else{var o=e[I[0]++]>>2;if(o<60)++o;else{var c=o-59;o=e[I[0]],c>1&&(o|=e[I[0]+1]<<8),c>2&&(o|=e[I[0]+2]<<16),c>3&&(o|=e[I[0]+3]<<24),o>>>=0,o++,I[0]+=c}n.push(e.slice(I[0],I[0]+o)),I[0]+=o}}var A=Va(n);if(A.length!=C)throw new Error("Unexpected length: ".concat(A.length," != ").concat(C));return A}function Na(g){for(var e=[],I=0;I<g.length;){var C=g[I++],n=g[I]|g[I+1]<<8|g[I+2]<<16;I+=3,e.push(wa(C,g.slice(I,I+n))),I+=n}if(I!==g.length)throw new Error("data is not a valid framed stream!");return Va(e)}function Fa(g){for(var e=[],I=0;I<g.length;){var C=Math.min(g.length-I,268435455),n=new Uint8Array(4);e.push(n);var t=Ra(C),l=t.length;e.push(t),C<=60?(l++,e.push(new Uint8Array([C-1<<2]))):C<=256?(l+=2,e.push(new Uint8Array([240,C-1&255]))):C<=65536?(l+=3,e.push(new Uint8Array([244,C-1&255,C-1>>8&255]))):C<=16777216?(l+=4,e.push(new Uint8Array([248,C-1&255,C-1>>8&255,C-1>>16&255]))):C<=4294967296&&(l+=5,e.push(new Uint8Array([252,C-1&255,C-1>>8&255,C-1>>16&255,C-1>>>24&255]))),e.push(g.slice(I,I+C)),l+=C,n[0]=0,n[1]=255&l,n[2]=l>>8&255,n[3]=l>>16&255,I+=C}return Va(e)}function Ka(g,e){var I=new Uint8Array(32),C=fa(I),n=12,t=0;switch(I[0]=5,g.t){case"n":I[1]=2,function(g,e,I){var C=Math.floor(0==I?0:Math.LOG10E*Math.log(Math.abs(I)))+6176-20,n=I/Math.pow(10,C-6176);g[e+15]|=C>>7,g[e+14]|=(127&C)<<1;for(var t=0;n>=1;++t,n/=256)g[e+t]=255&n;g[e+15]|=I>=0?0:128}(I,n,g.v),t|=1,n+=16;break;case"b":I[1]=6,C.setFloat64(n,g.v?1:0,!0),t|=2,n+=8;break;case"s":if(-1==e.indexOf(g.v))throw new Error("Value ".concat(g.v," missing from SST!"));I[1]=3,C.setUint32(n,e.indexOf(g.v),!0),t|=8,n+=4;break;default:throw"unsupported cell type "+g.t}return C.setUint32(8,t,!0),I.slice(0,n)}function Ea(g,e){var I=new Uint8Array(32),C=fa(I),n=12,t=0;switch(I[0]=3,g.t){case"n":I[2]=2,C.setFloat64(n,g.v,!0),t|=32,n+=8;break;case"b":I[2]=6,C.setFloat64(n,g.v?1:0,!0),t|=32,n+=8;break;case"s":if(-1==e.indexOf(g.v))throw new Error("Value ".concat(g.v," missing from SST!"));I[2]=3,C.setUint32(n,e.indexOf(g.v),!0),t|=16,n+=4;break;default:throw"unsupported cell type "+g.t}return C.setUint32(4,t,!0),I.slice(0,n)}function Ta(g){return va(ka(g)[1][0].data)}function Ma(g,e,I){var C,n,t,l;if(!(null==(C=g[6])?void 0:C[0])||!(null==(n=g[7])?void 0:n[0]))throw"Mutation only works on post-BNC storages!";if((null==(l=null==(t=g[8])?void 0:t[0])?void 0:l.data)&&Xa(g[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var a=0,o=fa(g[7][0].data),c=0,A=[],r=fa(g[4][0].data),i=0,s=[],d=0;d<e.length;++d)if(null!=e[d]){var u,m;switch(o.setUint16(2*d,c,!0),r.setUint16(2*d,i,!0),typeof e[d]){case"string":u=Ka({t:"s",v:e[d]},I),m=Ea({t:"s",v:e[d]},I);break;case"number":u=Ka({t:"n",v:e[d]},I),m=Ea({t:"n",v:e[d]},I);break;case"boolean":u=Ka({t:"b",v:e[d]},I),m=Ea({t:"b",v:e[d]},I);break;default:throw new Error("Unsupported value "+e[d])}A.push(u),c+=u.length,s.push(m),i+=m.length,++a}else o.setUint16(2*d,65535,!0),r.setUint16(2*d,65535);for(g[2][0].data=Ra(a);d<g[7][0].data.length/2;++d)o.setUint16(2*d,65535,!0),r.setUint16(2*d,65535,!0);return g[6][0].data=Va(A),g[3][0].data=Va(s),a}function xa(g){return function(e){for(var I=0;I!=g.length;++I){var C=g[I];void 0===e[C[0]]&&(e[C[0]]=C[1]),"n"===C[2]&&(e[C[0]]=Number(e[C[0]]))}}}function Ua(g){xa([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(g)}function Da(g,e){return"ods"==e.bookType?Sa(g,e):"numbers"==e.bookType?function(g,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var I=g.Sheets[g.SheetNames[0]];g.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var C=IC(I["!ref"]);C.s.r=C.s.c=0;var n=!1;C.e.c>9&&(n=!0,C.e.c=9),C.e.r>49&&(n=!0,C.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(CC(C)));var t=go(I,{range:C,header:1}),l=["~Sh33tJ5~"];t.forEach((function(g){return g.forEach((function(g){"string"==typeof g&&l.push(g)}))}));var a={},o=[],c=Pg.read(e.numbers,{type:"base64"});c.FileIndex.map((function(g,e){return[g,c.FullPaths[e]]})).forEach((function(g){var e=g[0],I=g[1];2==e.type&&e.name.match(/\.iwa/)&&Ya(Na(e.content)).forEach((function(g){o.push(g.id),a[g.id]={deps:[],location:I,type:Xa(g.messages[0].meta[1][0].data)}}))})),o.sort((function(g,e){return g-e}));var A=o.filter((function(g){return g>1})).map((function(g){return[g,Ra(g)]}));c.FileIndex.map((function(g,e){return[g,c.FullPaths[e]]})).forEach((function(g){var e=g[0];g[1],e.name.match(/\.iwa/)&&Ya(Na(e.content)).forEach((function(g){g.messages.forEach((function(e){A.forEach((function(e){g.messages.some((function(g){return 11006!=Xa(g.meta[1][0].data)&&function(g,e){g:for(var I=0;I<=g.length-e.length;++I){for(var C=0;C<e.length;++C)if(g[I+C]!=e[C])continue g;return!0}return!1}(g.data,e[1])}))&&a[e[0]].deps.push(g.id)}))}))}))}));for(var r,i=Pg.find(c,a[1].location),s=Ya(Na(i.content)),d=0;d<s.length;++d){var u=s[d];1==u.id&&(r=u)}var m=Ta(ka(r.messages[0].data)[1][0].data);for(s=Ya(Na((i=Pg.find(c,a[m].location)).content)),d=0;d<s.length;++d)(u=s[d]).id==m&&(r=u);for(m=Ta(ka(r.messages[0].data)[2][0].data),s=Ya(Na((i=Pg.find(c,a[m].location)).content)),d=0;d<s.length;++d)(u=s[d]).id==m&&(r=u);for(m=Ta(ka(r.messages[0].data)[2][0].data),s=Ya(Na((i=Pg.find(c,a[m].location)).content)),d=0;d<s.length;++d)(u=s[d]).id==m&&(r=u);var h=ka(r.messages[0].data);h[6][0].data=Ra(C.e.r+1),h[7][0].data=Ra(C.e.c+1);for(var b=Ta(h[46][0].data),Z=Pg.find(c,a[b].location),G=Ya(Na(Z.content)),p=0;p<G.length&&G[p].id!=b;++p);if(G[p].id!=b)throw"Bad ColumnRowUIDMapArchive";var B=ka(G[p].messages[0].data);B[1]=[],B[2]=[],B[3]=[];for(var y=0;y<=C.e.c;++y){var S=[];S[1]=S[2]=[{type:0,data:Ra(y+420690)}],B[1].push({type:2,data:Ja(S)}),B[2].push({type:0,data:Ra(y)}),B[3].push({type:0,data:Ra(y)})}B[4]=[],B[5]=[],B[6]=[];for(var f=0;f<=C.e.r;++f)(S=[])[1]=S[2]=[{type:0,data:Ra(f+726270)}],B[4].push({type:2,data:Ja(S)}),B[5].push({type:0,data:Ra(f)}),B[6].push({type:0,data:Ra(f)});G[p].messages[0].data=Ja(B),Z.content=Fa(Ha(G)),Z.size=Z.content.length,delete h[46];var W=ka(h[4][0].data);W[7][0].data=Ra(C.e.r+1);var V=Ta(ka(W[1][0].data)[2][0].data);if((G=Ya(Na((Z=Pg.find(c,a[V].location)).content)))[0].id!=V)throw"Bad HeaderStorageBucket";var v=ka(G[0].messages[0].data);for(f=0;f<t.length;++f){var R=ka(v[2][0].data);R[1][0].data=Ra(f),R[4][0].data=Ra(t[f].length),v[2][f]={type:v[2][0].type,data:Ja(R)}}G[0].messages[0].data=Ja(v),Z.content=Fa(Ha(G)),Z.size=Z.content.length;var X=Ta(W[2][0].data);if((G=Ya(Na((Z=Pg.find(c,a[X].location)).content)))[0].id!=X)throw"Bad HeaderStorageBucket";for(v=ka(G[0].messages[0].data),y=0;y<=C.e.c;++y)(R=ka(v[2][0].data))[1][0].data=Ra(y),R[4][0].data=Ra(C.e.r+1),v[2][y]={type:v[2][0].type,data:Ja(R)};G[0].messages[0].data=Ja(v),Z.content=Fa(Ha(G)),Z.size=Z.content.length;var k=Ta(W[4][0].data);!function(){for(var g,e=Pg.find(c,a[k].location),I=Ya(Na(e.content)),C=0;C<I.length;++C){var n=I[C];n.id==k&&(g=n)}var t=ka(g.messages[0].data);t[3]=[];var o=[];l.forEach((function(g,e){o[1]=[{type:0,data:Ra(e)}],o[2]=[{type:0,data:Ra(1)}],o[3]=[{type:2,data:Wa(g)}],t[3].push({type:2,data:Ja(o)})})),g.messages[0].data=Ja(t);var A=Fa(Ha(I));e.content=A,e.size=e.content.length}();var J=ka(W[3][0].data),Y=J[1][0];delete J[2];var H=ka(Y.data),w=Ta(H[2][0].data);!function(){for(var g,e=Pg.find(c,a[w].location),I=Ya(Na(e.content)),n=0;n<I.length;++n){var o=I[n];o.id==w&&(g=o)}var A=ka(g.messages[0].data);delete A[6],delete J[7];var r=new Uint8Array(A[5][0].data);A[5]=[];for(var i=0,s=0;s<=C.e.r;++s){var d=ka(r);i+=Ma(d,t[s],l),d[1][0].data=Ra(s),A[5].push({data:Ja(d),type:2})}A[1]=[{type:0,data:Ra(C.e.c+1)}],A[2]=[{type:0,data:Ra(C.e.r+1)}],A[3]=[{type:0,data:Ra(i)}],A[4]=[{type:0,data:Ra(C.e.r+1)}],g.messages[0].data=Ja(A);var u=Fa(Ha(I));e.content=u,e.size=e.content.length}(),Y.data=Ja(H),W[3][0].data=Ja(J),h[4][0].data=Ja(W),r.messages[0].data=Ja(h);var N=Fa(Ha(s));return i.content=N,i.size=i.content.length,c}(g,e):"xlsb"==e.bookType?function(g,e){Gt=1024,g&&!g.SSF&&(g.SSF=se(Ag));g&&g.SSF&&(Lg(),Dg(g.SSF),e.revssf=ee(g.SSF),e.revssf[g.SSF[65535]]=0,e.ssf=g.SSF);e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,sl?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var I="xlsb"==e.bookType?"bin":"xml",C=Wt.indexOf(e.bookType)>-1,n={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Ua(e=e||{});var t=Ze(),l="",a=0;e.cellXfs=[],hl(e.cellXfs,{},{revssf:{General:0}}),g.Props||(g.Props={});if(be(t,l="docProps/core.xml",$C(g.Props,e)),n.coreprops.push(l),PC(e.rels,2,l,LC.CORE_PROPS),l="docProps/app.xml",g.Props&&g.Props.SheetNames);else if(g.Workbook&&g.Workbook.Sheets){for(var o=[],c=0;c<g.SheetNames.length;++c)2!=(g.Workbook.Sheets[c]||{}).Hidden&&o.push(g.SheetNames[c]);g.Props.SheetNames=o}else g.Props.SheetNames=g.SheetNames;g.Props.Worksheets=g.Props.SheetNames.length,be(t,l,In(g.Props)),n.extprops.push(l),PC(e.rels,3,l,LC.EXT_PROPS),g.Custprops!==g.Props&&qg(g.Custprops||{}).length>0&&(be(t,l="docProps/custom.xml",Cn(g.Custprops)),n.custprops.push(l),PC(e.rels,4,l,LC.CUST_PROPS));for(a=1;a<=g.SheetNames.length;++a){var A={"!id":{}},r=g.Sheets[g.SheetNames[a-1]];(r||{})["!type"];if(be(t,l="xl/worksheets/sheet"+a+"."+I,Ll(a-1,l,e,g,A)),n.sheets.push(l),PC(e.wbrels,-1,"worksheets/sheet"+a+"."+I,LC.WS[0]),r){var i=r["!comments"],s=!1,d="";i&&i.length>0&&(be(t,d="xl/comments"+a+"."+I,zl(i,d,e)),n.comments.push(d),PC(A,-1,"../comments"+a+"."+I,LC.CMNT),s=!0),r["!legacy"]&&s&&be(t,"xl/drawings/vmlDrawing"+a+".vml",pt(a,r["!comments"])),delete r["!comments"],delete r["!legacy"]}A["!id"].rId1&&be(t,zC(l),QC(A))}null!=e.Strings&&e.Strings.length>0&&(be(t,l="xl/sharedStrings."+I,function(g,e,I){return(".bin"===e.slice(-4)?Ln:Un)(g,I)}(e.Strings,l,e)),n.strs.push(l),PC(e.wbrels,-1,"sharedStrings."+I,LC.SST));be(t,l="xl/workbook."+I,function(g,e,I){return(".bin"===e.slice(-4)?Dl:xl)(g,I)}(g,l,e)),n.workbooks.push(l),PC(e.rels,1,l,LC.WB),be(t,l="xl/theme/theme1.xml",ht(g.Themes,e)),n.themes.push(l),PC(e.wbrels,-1,"theme/theme1.xml",LC.THEME),be(t,l="xl/styles."+I,function(g,e,I){return(".bin"===e.slice(-4)?mt:Ct)(g,I)}(g,l,e)),n.styles.push(l),PC(e.wbrels,-1,"styles."+I,LC.STY),g.vbaraw&&C&&(be(t,l="xl/vbaProject.bin",g.vbaraw),n.vba.push(l),PC(e.wbrels,-1,"vbaProject.bin",LC.VBA));return be(t,l="xl/metadata."+I,function(g){return(".bin"===g.slice(-4)?bt:Zt)()}(l)),n.metadata.push(l),PC(e.wbrels,-1,"metadata."+I,LC.XLMETA),be(t,"[Content_Types].xml",DC(n,e)),be(t,"_rels/.rels",QC(e.rels)),be(t,"xl/_rels/workbook."+I+".rels",QC(e.wbrels)),delete e.revssf,delete e.ssf,t}(g,e):La(g,e)}function La(g,e){Gt=1024,g&&!g.SSF&&(g.SSF=se(Ag)),g&&g.SSF&&(Lg(),Dg(g.SSF),e.revssf=ee(g.SSF),e.revssf[g.SSF[65535]]=0,e.ssf=g.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,sl?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var I="xml",C=Wt.indexOf(e.bookType)>-1,n={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Ua(e=e||{});var t=Ze(),l="",a=0;if(e.cellXfs=[],hl(e.cellXfs,{},{revssf:{General:0}}),g.Props||(g.Props={}),be(t,l="docProps/core.xml",$C(g.Props,e)),n.coreprops.push(l),PC(e.rels,2,l,LC.CORE_PROPS),l="docProps/app.xml",g.Props&&g.Props.SheetNames);else if(g.Workbook&&g.Workbook.Sheets){for(var o=[],c=0;c<g.SheetNames.length;++c)2!=(g.Workbook.Sheets[c]||{}).Hidden&&o.push(g.SheetNames[c]);g.Props.SheetNames=o}else g.Props.SheetNames=g.SheetNames;g.Props.Worksheets=g.Props.SheetNames.length,be(t,l,In(g.Props)),n.extprops.push(l),PC(e.rels,3,l,LC.EXT_PROPS),g.Custprops!==g.Props&&qg(g.Custprops||{}).length>0&&(be(t,l="docProps/custom.xml",Cn(g.Custprops)),n.custprops.push(l),PC(e.rels,4,l,LC.CUST_PROPS));var A=["SheetJ5"];for(e.tcid=0,a=1;a<=g.SheetNames.length;++a){var r={"!id":{}},i=g.Sheets[g.SheetNames[a-1]];(i||{})["!type"];if(be(t,l="xl/worksheets/sheet"+a+"."+I,Bl(a-1,e,g,r)),n.sheets.push(l),PC(e.wbrels,-1,"worksheets/sheet"+a+"."+I,LC.WS[0]),i){var s=i["!comments"],d=!1,u="";if(s&&s.length>0){var m=!1;s.forEach((function(g){g[1].forEach((function(g){1==g.T&&(m=!0)}))})),m&&(be(t,u="xl/threadedComments/threadedComment"+a+"."+I,yt(s,A,e)),n.threadedcomments.push(u),PC(r,-1,"../threadedComments/threadedComment"+a+"."+I,LC.TCMNT)),be(t,u="xl/comments"+a+"."+I,Bt(s)),n.comments.push(u),PC(r,-1,"../comments"+a+"."+I,LC.CMNT),d=!0}i["!legacy"]&&d&&be(t,"xl/drawings/vmlDrawing"+a+".vml",pt(a,i["!comments"])),delete i["!comments"],delete i["!legacy"]}r["!id"].rId1&&be(t,zC(l),QC(r))}return null!=e.Strings&&e.Strings.length>0&&(be(t,l="xl/sharedStrings."+I,Un(e.Strings,e)),n.strs.push(l),PC(e.wbrels,-1,"sharedStrings."+I,LC.SST)),be(t,l="xl/workbook."+I,xl(g)),n.workbooks.push(l),PC(e.rels,1,l,LC.WB),be(t,l="xl/theme/theme1.xml",ht(g.Themes,e)),n.themes.push(l),PC(e.wbrels,-1,"theme/theme1.xml",LC.THEME),be(t,l="xl/styles."+I,Ct(g,e)),n.styles.push(l),PC(e.wbrels,-1,"styles."+I,LC.STY),g.vbaraw&&C&&(be(t,l="xl/vbaProject.bin",g.vbaraw),n.vba.push(l),PC(e.wbrels,-1,"vbaProject.bin",LC.VBA)),be(t,l="xl/metadata."+I,Zt()),n.metadata.push(l),PC(e.wbrels,-1,"metadata."+I,LC.XLMETA),A.length>1&&(be(t,l="xl/persons/person.xml",function(g){var e=[Ge,Te("personList",null,{xmlns:Qe,"xmlns:x":eI[0]}).replace(/[\/]>/,">")];return g.forEach((function(g,I){e.push(Te("person",null,{displayName:g,id:"{54EE7950-7262-4200-6969-"+("000000000000"+I).slice(-12)+"}",userId:g,providerId:"None"}))})),e.push("</personList>"),e.join("")}(A)),n.people.push(l),PC(e.wbrels,-1,"persons/person.xml",LC.PEOPLE)),be(t,"[Content_Types].xml",DC(n,e)),be(t,"_rels/.rels",QC(e.rels)),be(t,"xl/_rels/workbook.xml.rels",QC(e.wbrels)),delete e.revssf,delete e.ssf,t}function za(g,e){var I="";switch((e||{}).type||"base64"){case"buffer":case"array":return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7]];case"base64":I=U(g.slice(0,12));break;case"binary":I=g;break;default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[I.charCodeAt(0),I.charCodeAt(1),I.charCodeAt(2),I.charCodeAt(3),I.charCodeAt(4),I.charCodeAt(5),I.charCodeAt(6),I.charCodeAt(7)]}function Qa(g,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return _g(e.file,Pg.write(g,{type:D?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Pg.write(g,e)}function Pa(g,e){var I={},C=D?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(e.compression&&(I.compression="DEFLATE"),e.password)I.type=C;else switch(e.type){case"base64":I.type="base64";break;case"binary":I.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":I.type=C;break;default:throw new Error("Unrecognized type "+e.type)}var n=g.FullPaths?Pg.write(g,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[I.type]||I.type,compression:!!e.compression}):g.generate(I);if("undefined"!==typeof Deno&&"string"==typeof n){if("binary"==e.type||"base64"==e.type)return n;n=new Uint8Array(O(n))}return e.password&&"undefined"!==typeof encrypt_agile?Qa(encrypt_agile(n,e.password),e):"file"===e.type?_g(e.file,n):"string"==e.type?He(n):n}function Oa(g,e,I){I||(I="");var C=I+g;switch(e.type){case"base64":return x(we(C));case"binary":return we(C);case"string":return g;case"file":return _g(e.file,C,"utf8");case"buffer":return D?L(C,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(C):Oa(C,{type:"binary"}).split("").map((function(g){return g.charCodeAt(0)}))}throw new Error("Unrecognized type "+e.type)}function ja(g,e){switch(e.type){case"string":case"base64":case"binary":for(var I="",C=0;C<g.length;++C)I+=String.fromCharCode(g[C]);return"base64"==e.type?x(I):"string"==e.type?He(I):I;case"file":return _g(e.file,g);case"buffer":return g;default:throw new Error("Unrecognized type "+e.type)}}function _a(g,e){N(),Ml(g);var I=se(e||{});if(I.cellStyles&&(I.cellNF=!0,I.sheetStubs=!0),"array"==I.type){I.type="binary";var C=_a(g,I);return I.type="array",O(C)}var n=0;if(I.sheet&&(n="number"==typeof I.sheet?I.sheet:g.SheetNames.indexOf(I.sheet),!g.SheetNames[n]))throw new Error("Sheet not found: "+I.sheet+" : "+typeof I.sheet);switch(I.bookType||"xlsb"){case"xml":case"xlml":return Oa(ql(g,I),I);case"slk":case"sylk":return Oa(Fn.from_sheet(g.Sheets[g.SheetNames[n]],I),I);case"htm":case"html":return Oa(ba(g.Sheets[g.SheetNames[n]],I),I);case"txt":return function(g,e){switch(e.type){case"base64":return x(g);case"binary":case"string":return g;case"file":return _g(e.file,g,"binary");case"buffer":return D?L(g,"binary"):g.split("").map((function(g){return g.charCodeAt(0)}))}throw new Error("Unrecognized type "+e.type)}(no(g.Sheets[g.SheetNames[n]],I),I);case"csv":return Oa(Co(g.Sheets[g.SheetNames[n]],I),I,"\ufeff");case"dif":return Oa(Kn.from_sheet(g.Sheets[g.SheetNames[n]],I),I);case"dbf":return ja(Nn.from_sheet(g.Sheets[g.SheetNames[n]],I),I);case"prn":return Oa(Tn.from_sheet(g.Sheets[g.SheetNames[n]],I),I);case"rtf":return Oa(Pn.from_sheet(g.Sheets[g.SheetNames[n]],I),I);case"eth":return Oa(En.from_sheet(g.Sheets[g.SheetNames[n]],I),I);case"fods":return Oa(Sa(g,I),I);case"wk1":return ja(Mn.sheet_to_wk1(g.Sheets[g.SheetNames[n]],I),I);case"wk3":return ja(Mn.book_to_wk3(g,I),I);case"biff2":I.biff||(I.biff=2);case"biff3":I.biff||(I.biff=3);case"biff4":return I.biff||(I.biff=4),ja(sa(g,I),I);case"biff5":I.biff||(I.biff=5);case"biff8":case"xla":case"xls":return I.biff||(I.biff=8),function(g,e){var I=e||{};return Qa(Ia(g,I),I)}(g,I);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(g,e){var I=se(e||{});return Pa(Da(g,I),I)}(g,I);default:throw new Error("Unrecognized bookType |"+I.bookType+"|")}}function qa(g){if(!g.bookType){var e=g.file.slice(g.file.lastIndexOf(".")).toLowerCase();e.match(/^\.[a-z]+$/)&&(g.bookType=e.slice(1)),g.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[g.bookType]||g.bookType}}function $a(g,e,I,C,n,t,l,a){var o=_I(I),c=a.defval,A=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),r=!0,i=1===n?[]:{};if(1!==n)if(Object.defineProperty)try{Object.defineProperty(i,"__rowNum__",{value:I,enumerable:!1})}catch(m){i.__rowNum__=I}else i.__rowNum__=I;if(!l||g[I])for(var s=e.s.c;s<=e.e.c;++s){var d=l?g[I][s]:g[C[s]+o];if(void 0!==d&&void 0!==d.t){var u=d.v;switch(d.t){case"z":if(null==u)break;continue;case"e":u=0==u?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+d.t)}if(null!=t[s]){if(null==u)if("e"==d.t&&null===u)i[t[s]]=null;else if(void 0!==c)i[t[s]]=c;else{if(!A||null!==u)continue;i[t[s]]=null}else i[t[s]]=A&&("n"!==d.t||"n"===d.t&&!1!==a.rawNumbers)?u:lC(d,u,a);null!=u&&(r=!1)}}else{if(void 0===c)continue;null!=t[s]&&(i[t[s]]=c)}}return{row:i,isempty:r}}function go(g,e){if(null==g||null==g["!ref"])return[];var I={t:"n",v:0},C=0,n=1,t=[],l=0,a="",o={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},A=null!=c.range?c.range:g["!ref"];switch(1===c.header?C=1:"A"===c.header?C=2:Array.isArray(c.header)?C=3:null==c.header&&(C=0),typeof A){case"string":o=nC(A);break;case"number":(o=nC(g["!ref"])).s.r=A;break;default:o=A}C>0&&(n=0);var r=_I(o.s.r),i=[],s=[],d=0,u=0,m=Array.isArray(g),h=o.s.r,b=0,Z={};m&&!g[h]&&(g[h]=[]);var G=c.skipHidden&&g["!cols"]||[],p=c.skipHidden&&g["!rows"]||[];for(b=o.s.c;b<=o.e.c;++b)if(!(G[b]||{}).hidden)switch(i[b]=$I(b),I=m?g[h][b]:g[i[b]+r],C){case 1:t[b]=b-o.s.c;break;case 2:t[b]=i[b];break;case 3:t[b]=c.header[b-o.s.c];break;default:if(null==I&&(I={w:"__EMPTY",t:"s"}),a=l=lC(I,null,c),u=Z[l]||0){do{a=l+"_"+u++}while(Z[a]);Z[l]=u,Z[a]=1}else Z[l]=1;t[b]=a}for(h=o.s.r+n;h<=o.e.r;++h)if(!(p[h]||{}).hidden){var B=$a(g,o,h,i,C,t,m,c);(!1===B.isempty||(1===C?!1!==c.blankrows:c.blankrows))&&(s[d++]=B.row)}return s.length=d,s}var eo=/"/g;function Io(g,e,I,C,n,t,l,a){for(var o=!0,c=[],A="",r=_I(I),i=e.s.c;i<=e.e.c;++i)if(C[i]){var s=a.dense?(g[I]||[])[i]:g[C[i]+r];if(null==s)A="";else if(null!=s.v){o=!1,A=""+(a.rawNumbers&&"n"==s.t?s.v:lC(s,null,a));for(var d=0,u=0;d!==A.length;++d)if((u=A.charCodeAt(d))===n||u===t||34===u||a.forceQuotes){A='"'+A.replace(eo,'""')+'"';break}"ID"==A&&(A='"ID"')}else null==s.f||s.F?A="":(o=!1,(A="="+s.f).indexOf(",")>=0&&(A='"'+A.replace(eo,'""')+'"'));c.push(A)}return!1===a.blankrows&&o?null:c.join(l)}function Co(g,e){var I=[],C=null==e?{}:e;if(null==g||null==g["!ref"])return"";var n=nC(g["!ref"]),t=void 0!==C.FS?C.FS:",",l=t.charCodeAt(0),a=void 0!==C.RS?C.RS:"\n",o=a.charCodeAt(0),c=new RegExp(("|"==t?"\\|":t)+"+$"),A="",r=[];C.dense=Array.isArray(g);for(var i=C.skipHidden&&g["!cols"]||[],s=C.skipHidden&&g["!rows"]||[],d=n.s.c;d<=n.e.c;++d)(i[d]||{}).hidden||(r[d]=$I(d));for(var u=0,m=n.s.r;m<=n.e.r;++m)(s[m]||{}).hidden||null!=(A=Io(g,n,m,r,l,o,t,C))&&(C.strip&&(A=A.replace(c,"")),(A||!1!==C.blankrows)&&I.push((u++?a:"")+A));return delete C.dense,I.join("")}function no(g,e){e||(e={}),e.FS="\t",e.RS="\n";var I=Co(g,e);if("undefined"==typeof K||"string"==e.type)return I;var C=K.utils.encode(1200,I,"str");return String.fromCharCode(255)+String.fromCharCode(254)+C}function to(g,e,I){var C,n=I||{},t=+!n.skipHeader,l=g||{},a=0,o=0;if(l&&null!=n.origin)if("number"==typeof n.origin)a=n.origin;else{var c="string"==typeof n.origin?gC(n.origin):n.origin;a=c.r,o=c.c}var A={s:{c:0,r:0},e:{c:o,r:a+e.length-1+t}};if(l["!ref"]){var r=nC(l["!ref"]);A.e.c=Math.max(A.e.c,r.e.c),A.e.r=Math.max(A.e.r,r.e.r),-1==a&&(a=r.e.r+1,A.e.r=a+e.length-1+t)}else-1==a&&(a=0,A.e.r=e.length-1+t);var i=n.header||[],s=0;e.forEach((function(g,e){qg(g).forEach((function(I){-1==(s=i.indexOf(I))&&(i[s=i.length]=I);var c=g[I],A="z",r="",d=eC({c:o+s,r:a+e+t});C=lo(l,d),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?A="n":"boolean"==typeof c?A="b":"string"==typeof c?A="s":c instanceof Date?(A="d",n.cellDates||(A="n",c=Ce(c)),r=n.dateNF||Ag[14]):null===c&&n.nullError&&(A="e",c=0),C?(C.t=A,C.v=c,delete C.w,delete C.R,r&&(C.z=r)):l[d]=C={t:A,v:c},r&&(C.z=r)):l[d]=c}))})),A.e.c=Math.max(A.e.c,o+i.length-1);var d=_I(a);if(t)for(s=0;s<i.length;++s)l[$I(s+o)+d]={t:"s",v:i[s]};return l["!ref"]=CC(A),l}function lo(g,e,I){if("string"==typeof e){if(Array.isArray(g)){var C=gC(e);return g[C.r]||(g[C.r]=[]),g[C.r][C.c]||(g[C.r][C.c]={t:"z"})}return g[e]||(g[e]={t:"z"})}return lo(g,eC("number"!=typeof e?e:{r:e,c:I||0}))}function ao(){return{SheetNames:[],Sheets:{}}}function oo(g,e,I,C){var n=1;if(!I)for(;n<=65535&&-1!=g.SheetNames.indexOf(I="Sheet"+n);++n,I=void 0);if(!I||g.SheetNames.length>=65535)throw new Error("Too many worksheets");if(C&&g.SheetNames.indexOf(I)>=0){var t=I.match(/(^.*?)(\d+)$/);n=t&&+t[2]||0;var l=t&&t[1]||I;for(++n;n<=65535&&-1!=g.SheetNames.indexOf(I=l+n);++n);}if(Tl(I),g.SheetNames.indexOf(I)>=0)throw new Error("Worksheet with name |"+I+"| already exists!");return g.SheetNames.push(I),g.Sheets[I]=e,I}function co(g,e,I){return e?(g.l={Target:e},I&&(g.l.Tooltip=I)):delete g.l,g}var Ao={encode_col:$I,encode_row:_I,encode_cell:eC,encode_range:CC,decode_col:qI,decode_row:jI,split_cell:function(g){return g.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:gC,decode_range:IC,format_cell:lC,sheet_add_aoa:oC,sheet_add_json:to,sheet_add_dom:Za,aoa_to_sheet:cC,json_to_sheet:function(g,e){return to(null,g,e)},table_to_sheet:Ga,table_to_book:function(g,e){return aC(Ga(g,e),e)},sheet_to_csv:Co,sheet_to_txt:no,sheet_to_json:go,sheet_to_html:ba,sheet_to_formulae:function(g){var e,I="",C="";if(null==g||null==g["!ref"])return[];var n,t=nC(g["!ref"]),l="",a=[],o=[],c=Array.isArray(g);for(n=t.s.c;n<=t.e.c;++n)a[n]=$I(n);for(var A=t.s.r;A<=t.e.r;++A)for(l=_I(A),n=t.s.c;n<=t.e.c;++n)if(I=a[n]+l,C="",void 0!==(e=c?(g[A]||[])[n]:g[I])){if(null!=e.F){if(I=e.F,!e.f)continue;C=e.f,-1==I.indexOf(":")&&(I=I+":"+I)}if(null!=e.f)C=e.f;else{if("z"==e.t)continue;if("n"==e.t&&null!=e.v)C=""+e.v;else if("b"==e.t)C=e.v?"TRUE":"FALSE";else if(void 0!==e.w)C="'"+e.w;else{if(void 0===e.v)continue;C="s"==e.t?"'"+e.v:""+e.v}}o[o.length]=I+"="+C}return o},sheet_to_row_object_array:go,sheet_get_cell:lo,book_new:ao,book_append_sheet:oo,book_set_sheet_visibility:function(g,e,I){g.Workbook||(g.Workbook={}),g.Workbook.Sheets||(g.Workbook.Sheets=[]);var C=function(g,e){if("number"==typeof e){if(e>=0&&g.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}if("string"==typeof e){var I=g.SheetNames.indexOf(e);if(I>-1)return I;throw new Error("Cannot find sheet name |"+e+"|")}throw new Error("Cannot find sheet |"+e+"|")}(g,e);switch(g.Workbook.Sheets[C]||(g.Workbook.Sheets[C]={}),I){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+I)}g.Workbook.Sheets[C].Hidden=I},cell_set_number_format:function(g,e){return g.z=e,g},cell_set_hyperlink:co,cell_set_internal_link:function(g,e,I){return co(g,"#"+e,I)},cell_add_comment:function(g,e,I){g.c||(g.c=[]),g.c.push({t:e,a:I||"SheetJS"})},sheet_set_array_formula:function(g,e,I,C){for(var n="string"!=typeof e?e:nC(e),t="string"==typeof e?e:CC(e),l=n.s.r;l<=n.e.r;++l)for(var a=n.s.c;a<=n.e.c;++a){var o=lo(g,l,a);o.t="n",o.F=t,delete o.v,l==n.s.r&&a==n.s.c&&(o.f=I,C&&(o.D=!0))}return g},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};R.version;var ro=function(e){var I=e.title,C=e.children,n=e.onClose;return(0,g.useEffect)((function(){}),[]),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"glass light-glass"}),(0,s.jsxs)("div",{className:"modalBox",children:[(0,s.jsxs)("div",{className:"modalTitleHolder",children:[(0,s.jsx)("div",{className:"modal-title",children:I}),(0,s.jsx)("div",{className:"mcb",onClick:n||function(){},children:"\u274c"})]}),(0,s.jsx)("div",{className:"modalBody",children:C})]})]})};var io=function(e){var I=e.data,C=e.dates,n=I.services,l=I.volunteers,o=I.events,c=I.slots,A=(0,g.useRef)(0),r=(0,g.useRef)(0),i=["None","Coordinator","SPOC","Service","Volunteer","Category","Preacher"],d=('SPOC should -\n\n1. Meet the coordinator and understand all the details of the service, timings, dress code, etc. from him.\n\n2. Organize a meeting between the coordinator and volunteers wherein the coordinator will discuss the details of the service with the volunteers. The meeting can be held either online or offline well in advance, before the festival. \n\n3. Make sure that volunteers report at the proper time and in the appropriate dress code for their service.\n\n4. Update attendance of volunteers in your SPOC link by clicking grey color tick symbol against the volunteer name. Symbol turns green to indicate that attendance is marked. By end of the service, click on "Share Attendance" to share attendance data to Volunteer Care Cell over WhatsApp. As much as possible, marking of attendance must be done without the notice of volunteers. \n\n5. Keep constant touch with the coordinator and update the coordinator about the service status.\n\n7. Ensure that volunteers are rendering service as per the instructions of the coordinator.\n\n6. Collect Prasadam Coupons from Volunteer Care Cell on Sunday, 3rd September 2023, and issue them to volunteers on the previous day of service. Prasadam Coupons are meant to be used only on the 6th and 7th of September. Not on other days. You can find the list of volunteers to whom you must issue the coupons by clicking on "Coupons" button in SPOC link.\n\n7. SPOC should behave politely and patiently with everyone (visitors and volunteers) and should train the volunteers to also behave the same way. No one should loose temper at any point of time.\n'.trim(),t((0,g.useState)(i[0]),2)),u=d[0],Z=d[1],G=t((0,g.useState)(!1),2),p=(G[0],G[1],t((0,g.useState)(!1),2)),B=p[0],y=p[1],f=[];switch(u){case"Coordinator":case"SPOC":case"Service":f=n;break;case"Volunteer":case"Category":case"Preacher":f=l}var W=["None"].concat((f=f||[]).map((function(g){switch(u){case"Coordinator":return g.coordinator;case"SPOC":return g.spoc;case"Service":return g.serviceName;case"Volunteer":return g.volunteerName;case"Category":return g.category;case"Preacher":return g.preacher;default:return null}})).filter((function(g,e,I){return I.indexOf(g)===e})).sort()),R=t((0,g.useState)(W[0]),2),X=R[0],k=R[1],J=t((0,g.useState)(!1),2),Y=J[0],H=J[1];(0,g.useEffect)((function(){var g=new URLSearchParams(window.location.search);if(g.has("SPOC")){var e=decodeURIComponent(g.get("SPOC"));Z("SPOC"),k(e),H(!0)}}),[]);var w={};return(0,g.useEffect)((function(){I.events&&o.forEach((function(g){w[g.date]=g.event}))}),[I]),(0,s.jsxs)("div",{children:[(0,s.jsx)(m,{title:I.title,hideOptions:!0}),null,B&&(0,s.jsxs)(ro,{title:"Prasadam Coupons",onClose:function(){y(!1)},children:["None"==X?"Please select an SPOC!":"".concat(Y?"Issue":"SPOC should issue"," Prasadam Coupons to following volunteers:"),function(){var g=l.filter((function(g){return g.date==r.current&&g.spoc==X&&""!=g.service&&""!=g.volunteerName})),e={};g.forEach((function(g){e[g.volunteerName]=""}));var I=Object.keys(e).sort();I.forEach((function(g){e[g]=l.filter((function(e){return e.volunteerName==g&&e.date==r.current})).sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0].spoc}));var C=I.filter((function(g){return e[g]==X})).sort().map((function(g,e){return g})),n=[],t=[],a=[];C.forEach((function(e){for(var I=0;I<g.length;I++)if(g[I].volunteerName!=e);else for(var C=g[I].availability,l=0;l<c.length;l++)if(c[l].slot==C){1==c[l].b&&-1==n.indexOf(e)&&n.push(e),1==c[l].b&&-1==t.indexOf(e)&&t.push(e),1==c[l].d&&-1==a.indexOf(e)&&a.push(e);break}}));var o="Breakfast:\n".concat(n.map((function(g,e){return"".concat((e+1).toString().padStart(2,"0"),". ").concat(g)})).join("\n"),"\n\nLunch:\n").concat(t.map((function(g,e){return"".concat((e+1).toString().padStart(2,"0"),". ").concat(g)})).join("\n"),"\n\nDinner:\n").concat(a.map((function(g,e){return"".concat((e+1).toString().padStart(2,"0"),". ").concat(g)})).join("\n")).trim(),A=C.map((function(g,e){var I=[];return-1!=n.indexOf(g)&&I.push("B"),-1!=t.indexOf(g)&&I.push("L"),-1!=a.indexOf(g)&&I.push("D"),"".concat((e+1).toString().padStart(2,"0"),". ").concat(g," (").concat(I.join(", "),")")})).join("\n");return(0,s.jsx)(b,{tabs:[{title:"Name Wise",value:"n",component:(0,s.jsx)("div",{children:A})},{title:"Time Wise",value:"t",component:(0,s.jsx)("div",{children:o})}]})}()]}),(0,s.jsxs)("div",{className:"pageMainDiv",children:[n&&!Y?(0,s.jsxs)("div",{className:"filterBody",children:[(0,s.jsxs)("div",{className:"filterBy",children:[(0,s.jsx)("div",{className:"fillabel",children:"Filter By"}),(0,s.jsx)("select",{className:"filselect",onChange:function(g){Z(g.target.value)},children:i.map((function(g){return(0,s.jsx)("option",{value:g,children:g},g)}))})]}),(0,s.jsxs)("div",{className:"filtervalue",children:[(0,s.jsx)("div",{className:"fillabel",children:"Select ".concat("None"==u?"":u)}),(0,s.jsx)("select",{className:"filselect",onChange:function(g){k(g.target.value)},disabled:"None"==u,children:W.map((function(g){return(0,s.jsx)("option",{children:g})}))})]}),(0,s.jsx)("div",{onClick:function(){var g=Ao.book_new(),e=Ao.aoa_to_sheet([["Date","Service","Service Timings","Name","Phone","Volunteer Availability","Age","Category","Coordinator","SPOC","SPOC Phone"]].concat(l.filter((function(g){return g.date==C[A.current]&&""!=g.volunteerName})).sort((function(g,e){return g.volunteerName>e.volunteerName?1:-1})).sort((function(g,e){return g.service>e.service?1:-1})).filter((function(g){if("None"==u||"None"==X)return!0;switch(u){case"Coordinator":return g.coordinator==X;case"SPOC":return g.spoc==X;case"Service":return g.service==X;case"Volunteer":return g.volunteerName==X;case"Category":return g.category==X;case"Preacher":return g.preacher==X}})).map((function(g){return[g.date,g.service,g.timings.toTimingCase(),g.volunteerName,g.volunteerPhone,g.availability,g.age,g.category,g.coordinator,g.spoc,g.spocPhone]}))));Ao.book_append_sheet(g,e,"Service Details"),function(g,e,I){var C=I||{};C.type="file",C.file=e,qa(C),_a(g,C)}(g,"".concat("None"==u||"None"==X?"Service Details":"".concat(u,"-").concat(X),"-").concat(C[A.current],".xlsx"))},children:(0,s.jsx)("img",{className:"downlaodicon",src:"filetype-xls.svg",title:"Download XL sheet"})})]}):null,(0,s.jsxs)("div",{className:"ser",children:[Y&&(0,s.jsxs)("div",{children:[(0,s.jsx)(h,{className:"spoc-title",children:(0,s.jsxs)("div",{children:["SPOC - ",X]})}),null]}),C.length?(0,s.jsx)(b,{onTabChange:function(g,e){A.current=g,r.current=e},tabs:C.filter((function(g){return!!n.filter((function(e){return e.date==g&&(!Y||e.spoc==X)})).length&&!o.filter((function(e){return e.date==g}))[0].hide})).map((function(g){var e=function(g,e){return g.filter((function(g){return g.date==e&&("None"==u||"None"==X||function(){switch(u){case"Coordinator":return g.coordinator==X;case"SPOC":return g.spoc==X;case"Service":return g.serviceName==X;case"Volunteer":return l.filter((function(I){return I.date==e&&I.service==g.serviceName&&I.volunteerName==X})).length>0;case"Category":return l.filter((function(I){return I.date==e&&I.service==g.serviceName&&I.category==X})).length>0;case"Preacher":return l.filter((function(I){return I.date==e&&I.service==g.serviceName&&I.preacher==X})).length>0;default:return!0}}())}))}(n.sort((function(g,e){return g.startTime-e.startTime})),g);return r.current||(r.current=g),{title:1==C.length?a()(g,"YYYY-MM-DD").format("dddd, Do MMMM YYYY"):C.length<5?a()(g,"YYYY-MM-DD").format("Do MMM"):a()(g,"YYYY-MM-DD").format("MMM D"),value:g,component:e.length?(0,s.jsxs)("div",{className:"serServ",children:[(0,s.jsx)("div",{className:"ser-event-name",children:o.filter((function(e){return e.date==g}))[0].event}),e.length&&!Y&&Y&&"SPOC"!=u&&(0,s.jsx)("div",{className:"ser-count",children:"".concat(e.length," service").concat(e.length>1?"s":"")}),e.length&&(Y||"SPOC"==u)&&(0,s.jsxs)("div",{className:"sv-info-header",children:[(0,s.jsx)("div",{className:"sv-count",children:"".concat(e.length," service").concat(e.length>1?"s":"")}),(0,s.jsxs)("div",{children:[o.filter((function(e){return e.date==g}))[0].coupon&&(0,s.jsx)("button",{className:"sv-coup",onClick:function(){y(!0)},children:"Coupons"}),null]})]}),e.map((function(e){return(0,s.jsxs)("div",{className:"svHolder",children:[(0,s.jsx)(V,{service:e,volunteers:l.filter((function(e){return e.date==g&&""!=e.volunteerName}))}),(0,s.jsx)(v,{date:g,service:e,filterValue:X,serviceView:Y,volunteers:l.sort((function(g,e){return g.volunteerName>e.volunteerName?1:-1})).filter((function(I){return I.service==e.serviceName&&I.date==g&&""!=I.volunteerName&&function(){switch(u){case"Volunteer":return I.volunteerName==X;case"Category":return I.category==X;case"Preacher":return I.preacher==X;default:return!0}}()}))})]})}))]}):(0,s.jsx)("div",{className:"noservices",children:"No Services"})}}))}):(0,s.jsx)(S,{})]}),(0,s.jsx)("div",{style:{margin:"15vw"}})]})]})};function so(g,e,I,C,n,t,l){try{var a=g[t](l),o=a.value}catch(c){return void I(c)}a.done?e(o):Promise.resolve(o).then(C,n)}function uo(g){return function(){var e=this,I=arguments;return new Promise((function(C,n){var t=g.apply(e,I);function l(g){so(t,C,n,l,a,"next",g)}function a(g){so(t,C,n,l,a,"throw",g)}l(void 0)}))}}var mo=I(757),ho=I.n(mo),bo=function(){function g(){o(this,g)}return A(g,[{key:"setFunc",value:function(g){return this.func=g,this}},{key:"setParams",value:function(){for(var g=arguments.length,e=new Array(g),I=0;I<g;I++)e[I]=arguments[I];return this.params=e,this}},{key:"call",value:function(){var g=uo(ho().mark((function g(e,I){var C;return ho().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return e=e||"",I=I||{},g.next=4,fetch("/api",{method:"POST",headers:{"Content-Type":"application/json",endpoint:e},body:JSON.stringify(I)});case 4:if(!(C=g.sent).ok){g.next=9;break}return g.abrupt("return",C.json().then((function(g){return g})));case 9:throw new Error("".concat(C.status,": ").concat(C.statusText));case 10:case"end":return g.stop()}}),g)})));return function(e,I){return g.apply(this,arguments)}}()}]),g}(),Zo=bo;function Go(){return Go=Object.assign||function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var C in I)Object.prototype.hasOwnProperty.call(I,C)&&(g[C]=I[C])}return g},Go.apply(this,arguments)}var po,Bo=po||(po={});Bo.Pop="POP",Bo.Push="PUSH",Bo.Replace="REPLACE";var yo=function(g){return g};function So(g){g.preventDefault(),g.returnValue=""}function fo(){var g=[];return{get length(){return g.length},push:function(e){return g.push(e),function(){g=g.filter((function(g){return g!==e}))}},call:function(e){g.forEach((function(g){return g&&g(e)}))}}}function Wo(){return Math.random().toString(36).substr(2,8)}function Vo(g){var e=g.pathname;e=void 0===e?"/":e;var I=g.search;return I=void 0===I?"":I,g=void 0===(g=g.hash)?"":g,I&&"?"!==I&&(e+="?"===I.charAt(0)?I:"?"+I),g&&"#"!==g&&(e+="#"===g.charAt(0)?g:"#"+g),e}function vo(g){var e={};if(g){var I=g.indexOf("#");0<=I&&(e.hash=g.substr(I),g=g.substr(0,I)),0<=(I=g.indexOf("?"))&&(e.search=g.substr(I),g=g.substr(0,I)),g&&(e.pathname=g)}return e}function Ro(g,e){if(!g)throw new Error(e)}var Xo=(0,g.createContext)(null);var ko=(0,g.createContext)(null);var Jo=(0,g.createContext)({outlet:null,matches:[]});function Yo(e){return function(e){var I=(0,g.useContext)(Jo).outlet;if(I)return(0,g.createElement)(Eo.Provider,{value:e},I);return I}(e.context)}function Ho(g){Ro(!1)}function wo(e){var I=e.basename,C=void 0===I?"/":I,n=e.children,t=void 0===n?null:n,l=e.location,a=e.navigationType,o=void 0===a?po.Pop:a,c=e.navigator,A=e.static,r=void 0!==A&&A;Fo()&&Ro(!1);var i=jo(C),s=(0,g.useMemo)((function(){return{basename:i,navigator:c,static:r}}),[i,c,r]);"string"===typeof l&&(l=vo(l));var d=l,u=d.pathname,m=void 0===u?"/":u,h=d.search,b=void 0===h?"":h,Z=d.hash,G=void 0===Z?"":Z,p=d.state,B=void 0===p?null:p,y=d.key,S=void 0===y?"default":y,f=(0,g.useMemo)((function(){var g=Po(m,i);return null==g?null:{pathname:g,search:b,hash:G,state:B,key:S}}),[i,m,b,G,B,S]);return null==f?null:(0,g.createElement)(Xo.Provider,{value:s},(0,g.createElement)(ko.Provider,{children:t,value:{location:f,navigationType:o}}))}function No(e){var I=e.children,C=e.location;return function(e,I){Fo()||Ro(!1);var C=(0,g.useContext)(Jo).matches,n=C[C.length-1],t=n?n.params:{},l=(n&&n.pathname,n?n.pathnameBase:"/");n&&n.route;0;var a,o=Ko();if(I){var c,A="string"===typeof I?vo(I):I;"/"===l||(null==(c=A.pathname)?void 0:c.startsWith(l))||Ro(!1),a=A}else a=o;var r=a.pathname||"/",i="/"===l?r:r.slice(l.length)||"/",s=function(g,e,I){void 0===I&&(I="/");var C="string"===typeof e?vo(e):e,n=Po(C.pathname||"/",I);if(null==n)return null;var t=Mo(g);!function(g){g.sort((function(g,e){return g.score!==e.score?e.score-g.score:function(g,e){var I=g.length===e.length&&g.slice(0,-1).every((function(g,I){return g===e[I]}));return I?g[g.length-1]-e[e.length-1]:0}(g.routesMeta.map((function(g){return g.childrenIndex})),e.routesMeta.map((function(g){return g.childrenIndex})))}))}(t);for(var l=null,a=0;null==l&&a<t.length;++a)l=Lo(t[a],n);return l}(e,{pathname:i});0;return zo(s&&s.map((function(g){return Object.assign({},g,{params:Object.assign({},t,g.params),pathname:Oo([l,g.pathname]),pathnameBase:"/"===g.pathnameBase?l:Oo([l,g.pathnameBase])})})),C)}(To(I),C)}function Fo(){return null!=(0,g.useContext)(ko)}function Ko(){return Fo()||Ro(!1),(0,g.useContext)(ko).location}var Eo=(0,g.createContext)(null);function To(e){var I=[];return g.Children.forEach(e,(function(e){if((0,g.isValidElement)(e))if(e.type!==g.Fragment){e.type!==Ho&&Ro(!1);var C={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(C.children=To(e.props.children)),I.push(C)}else I.push.apply(I,To(e.props.children))})),I}function Mo(g,e,I,C){return void 0===e&&(e=[]),void 0===I&&(I=[]),void 0===C&&(C=""),g.forEach((function(g,n){var t={relativePath:g.path||"",caseSensitive:!0===g.caseSensitive,childrenIndex:n,route:g};t.relativePath.startsWith("/")&&(t.relativePath.startsWith(C)||Ro(!1),t.relativePath=t.relativePath.slice(C.length));var l=Oo([C,t.relativePath]),a=I.concat(t);g.children&&g.children.length>0&&(!0===g.index&&Ro(!1),Mo(g.children,e,a,l)),(null!=g.path||g.index)&&e.push({path:l,score:Do(l,g.index),routesMeta:a})})),e}var xo=/^:\w+$/,Uo=function(g){return"*"===g};function Do(g,e){var I=g.split("/"),C=I.length;return I.some(Uo)&&(C+=-2),e&&(C+=2),I.filter((function(g){return!Uo(g)})).reduce((function(g,e){return g+(xo.test(e)?3:""===e?1:10)}),C)}function Lo(g,e){for(var I=g.routesMeta,C={},n="/",t=[],l=0;l<I.length;++l){var a=I[l],o=l===I.length-1,c="/"===n?e:e.slice(n.length)||"/",A=Qo({path:a.relativePath,caseSensitive:a.caseSensitive,end:o},c);if(!A)return null;Object.assign(C,A.params);var r=a.route;t.push({params:C,pathname:Oo([n,A.pathname]),pathnameBase:Oo([n,A.pathnameBase]),route:r}),"/"!==A.pathnameBase&&(n=Oo([n,A.pathnameBase]))}return t}function zo(e,I){return void 0===I&&(I=[]),null==e?null:e.reduceRight((function(C,n,t){return(0,g.createElement)(Jo.Provider,{children:void 0!==n.route.element?n.route.element:(0,g.createElement)(Yo,null),value:{outlet:C,matches:I.concat(e.slice(0,t+1))}})}),null)}function Qo(g,e){"string"===typeof g&&(g={path:g,caseSensitive:!1,end:!0});var I=function(g,e,I){void 0===e&&(e=!1);void 0===I&&(I=!0);var C=[],n="^"+g.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(g,e){return C.push(e),"([^\\/]+)"}));g.endsWith("*")?(C.push("*"),n+="*"===g||"/*"===g?"(.*)$":"(?:\\/(.+)|\\/*)$"):n+=I?"\\/*$":"(?:\\b|\\/|$)";var t=new RegExp(n,e?void 0:"i");return[t,C]}(g.path,g.caseSensitive,g.end),C=t(I,2),n=C[0],l=C[1],a=e.match(n);if(!a)return null;var o=a[0],c=o.replace(/(.)\/+$/,"$1"),A=a.slice(1);return{params:l.reduce((function(g,e,I){if("*"===e){var C=A[I]||"";c=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}return g[e]=function(g,e){try{return decodeURIComponent(g)}catch(I){return g}}(A[I]||""),g}),{}),pathname:o,pathnameBase:c,pattern:g}}function Po(g,e){if("/"===e)return g;if(!g.toLowerCase().startsWith(e.toLowerCase()))return null;var I=g.charAt(e.length);return I&&"/"!==I?null:g.slice(e.length)||"/"}var Oo=function(g){return g.join("/").replace(/\/\/+/g,"/")},jo=function(g){return g.replace(/\/+$/,"").replace(/^\/*/,"/")};function _o(e){var I=e.basename,C=e.children,n=e.window,l=(0,g.useRef)();null==l.current&&(l.current=function(g){function e(){var g=l.location,e=a.state||{};return[e.idx,yo({pathname:g.pathname,search:g.search,hash:g.hash,state:e.usr||null,key:e.key||"default"})]}function I(g){return"string"===typeof g?g:Vo(g)}function C(g,e){return void 0===e&&(e=null),yo(Go({pathname:r.pathname,hash:"",search:""},"string"===typeof g?vo(g):g,{state:e,key:Wo()}))}function n(g){c=g,g=e(),A=g[0],r=g[1],i.call({action:c,location:r})}function t(g){a.go(g)}void 0===g&&(g={});var l=void 0===(g=g.window)?document.defaultView:g,a=l.history,o=null;l.addEventListener("popstate",(function(){if(o)s.call(o),o=null;else{var g=po.Pop,I=e(),C=I[0];if(I=I[1],s.length){if(null!=C){var l=A-C;l&&(o={action:g,location:I,retry:function(){t(-1*l)}},t(l))}}else n(g)}}));var c=po.Pop,A=(g=e())[0],r=g[1],i=fo(),s=fo();return null==A&&(A=0,a.replaceState(Go({},a.state,{idx:A}),"")),{get action(){return c},get location(){return r},createHref:I,push:function g(e,t){var o=po.Push,c=C(e,t);if(!s.length||(s.call({action:o,location:c,retry:function(){g(e,t)}}),0)){var r=[{usr:c.state,key:c.key,idx:A+1},I(c)];c=r[0],r=r[1];try{a.pushState(c,"",r)}catch(i){l.location.assign(r)}n(o)}},replace:function g(e,t){var l=po.Replace,o=C(e,t);s.length&&(s.call({action:l,location:o,retry:function(){g(e,t)}}),1)||(o=[{usr:o.state,key:o.key,idx:A},I(o)],a.replaceState(o[0],"",o[1]),n(l))},go:t,back:function(){t(-1)},forward:function(){t(1)},listen:function(g){return i.push(g)},block:function(g){var e=s.push(g);return 1===s.length&&l.addEventListener("beforeunload",So),function(){e(),s.length||l.removeEventListener("beforeunload",So)}}}}({window:n}));var a=l.current,o=t((0,g.useState)({action:a.action,location:a.location}),2),c=o[0],A=o[1];return(0,g.useLayoutEffect)((function(){return a.listen(A)}),[a]),(0,g.createElement)(wo,{basename:I,children:C,location:c.location,navigationType:c.action,navigator:a})}var qo={"Service Info - Vaikunta Ekadashi":function(g){var e=g.data.volunteers,I=["2022-12-31","2023-01-01","2023-01-02"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&!g.infoMsgSent}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Sri Vaikunta Ekadashi 2023 - Volunteering*\n    \nHare Krishna \ud83d\ude4f Please accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f We thank you for registering for the Sri Vaikunta Ekadashi services.\n\nPlease go through the following guidelines and details about your services during Vaikunta Ekadashi festival:\n\n*Guidelines*\n\ud83e\udeaa *ID card* for the services will be issued on *Sunday, 1st January 2023* from *9.30 AM to 11 AM* and from *6 PM to 8 PM*. ID cards can be collected from *Volunteer Info Desk* located near the Homa-Kunda area. ID cards will not be issued on festival day. So please collect on Sunday.\n\n\u203c\ufe0f Please note the vehicle parking and prasadam for volunteers will be facilitated only against the ID card. Please collect your ID card without fail\n\n\ud83d\ude97 Vehicle parking is not allowed inside temple. Arrangement for parking is made in _Pailvan Basavayya Community Hall_ in front of the temple. Entry into parking area is allowed only against ID card\n\n\ud83e\udeaa *PLEASE RETURN YOUR ID CARD TO VOLUNTEER INFO DESK WHEN YOUR SERVICES ARE COMPLETED AND COLLECT TAKE-HOME PRASADAM*\n\n1\ufe0f\u20e3 Every service has got a Single-Point-of-Contact (SPOC) volunteer. *Please call your SPOC and discuss the details of service*, dress code etc. The contact numbers of SPOC(s) are mentioned below\n\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\n*Service Details:*\n\nName: ".concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f *Date*: ".concat(g.date,"\n\ud83d\uded0 *Service*: ").concat(g.service,"\n\ud83d\udd57 *Timings*: ").concat(g.timings,"\n\ud83d\udc51 *Co-ordinator*: ").concat(g.coordinator,"\n\ud83e\udd47 *SPOC*: ").concat(g.spoc,"\n\ud83d\udcde *SPOC's Phone number*: ").concat(g.spocPhone).concat(g.spoc.trim()==e.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service. Please meet your service coordinator ".concat(g.coordinator," and discuss the details of the service"):"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"Service Info - Ratha Yatra":function(g){var e=(t=g.data.volunteers).filter((function(g){return-1!=["2022-12-31","2023-01-01","2023-01-02"].indexOf(g.date)&&""!=g.volunteerName})),I=["2023-01-06","2023-01-07","2023-01-08"],C={},n={},t=t.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.infoMsgSent}));return Object.keys(C).map((function(g){for(var e=0;e<t.length;e++)t[e].volunteerName==g&&(n[g]||(n[g]={name:g,phone:t[e].volunteerPhone,services:[]}),n[g].services.push({date:t[e].date,service:t[e].service,timings:t[e].timings,coordinator:t[e].coordinator,spoc:t[e].spoc,spocPhone:t[e].spocPhone}))})),Object.keys(n).sort().map((function(g){var I=n[g],C=e.filter((function(e){return e.volunteerName==g})).length>0,l=t.filter((function(e){return e.volunteerName==g&&"2023-01-08"==e.date})).length>0;return"https://web.whatsapp.com/send?phone=91".concat(I.phone,"&name=").concat(encodeURIComponent(I.name),"&text=").concat(encodeURIComponent("\n*Ratha Yatra ".concat(l?"& Churnabhisheka ":"","2023 - Volunteering*\n    \nHare Krishna \ud83d\ude4f Please accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f We thank you for registering for the *Sri Sri Krishna Balarama Ratha Yatra* festival services.\n\nPlease go through the following guidelines and details about your services during the festival:\n\n*Guidelines*\n").concat(C?"\ud83e\udeaa *ID card*: After you complete your service on Vaikunta Ekadashi day (Monday, 2nd January 2023), return your ID card of Vaikunta Ekadashi at Volunteer Info Desk and collect ID card for Ratha Yatra services":"\ud83e\udeaa *ID card* for the services will be issued on *Friday, 6th January 2023* from *5 PM to 9 PM*. ID cards can be collected from *Volunteer Info Desk* located near the Homa-Kunda area. Note that ID cards will not be issued on festival day. So please collect it on Friday.","\n\n\u203c\ufe0f Please note the vehicle parking and prasadam for volunteers will be facilitated only against the ID card. Please collect your ID card without fail\n\n\ud83d\ude97 Vehicle parking is not allowed inside temple. Arrangement for parking is made in _Pailvan Basavayya Community Hall_ in front of the temple. Entry into parking area is allowed only against ID card\n\n\ud83e\udeaa *PLEASE RETURN YOUR ID CARD TO VOLUNTEER INFO DESK WHEN YOUR SERVICES ARE COMPLETED AND COLLECT TAKE-HOME PRASADAM*\n\n1\ufe0f\u20e3 Every service has got a Single-Point-of-Contact (SPOC) volunteer. *Please call your SPOC and discuss the details of service*, dress code etc. The contact numbers of SPOC(s) are mentioned below.\n\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\n*Service Details:*\n\nName: ").concat(I.name,"\nPhone: ").concat(I.phone,"\n\n").concat(I.services.length>1?"You have been assigned the following *".concat(I.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(I.services.map((function(g){return"\n\ud83d\uddd3\ufe0f *Date*: ".concat(g.date,"\n\ud83d\uded0 *Service*: ").concat(g.service,"\n\ud83d\udd57 *Timings*: ").concat(g.timings,"\n\ud83d\udc51 *Co-ordinator*: ").concat(g.coordinator,"\n\ud83e\udd47 *SPOC*: ").concat(g.spoc,"\n\ud83d\udcde *SPOC's Phone number*: ").concat(g.spocPhone).concat(g.spoc.trim()==I.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service. Please meet your service coordinator ".concat(g.coordinator," and discuss the details of the service"):"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(I.name)),"\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"SPOC Info - Ratha Yatra":function(g){var e=g.data.services,I=["2023-01-06","2023-01-07","2023-01-08"];e=e.filter((function(g){return-1!=I.indexOf(g.date)}));var C={};return e.map((function(g){g.coordinator!=g.spoc&&""!=g.spoc&&""!=g.spocPhone&&(C[g.spoc]=C[g.spoc]||{spoc:g.spoc,spocPhone:g.spocPhone,coordinator:g.coordinator,coordinatorPhone:g.coordinatorPhone,services:[]},-1==C[g.spoc].services.indexOf(g.service)&&C[g.spoc].services.push({service:g.serviceName,date:g.date}))})),Object.keys(C).sort().map((function(g){var e=C[g];return"https://web.whatsapp.com/send?phone=91".concat(e.spocPhone,"&name=").concat(encodeURIComponent(e.spoc),"&text=").concat(encodeURIComponent("\n*SPOC for Ratha Yatra 2023 services*\n\nHare Krishna \ud83d\ude4f. You are assigned as Single-Point-of-Contact (SPOC) for ".concat(e.services.length>1?"following *".concat(e.services.length,"* services:\n\n").concat(e.services.map((function(g){return" \u2022 ".concat(g.service," (").concat(g.date,")")})).join("\n")):"".concat(e.services[0].service," service."),"\n\nPlease use this link to check the details of the service").concat(e.services.length>1?"s":"",":\nhttps://vol.iskconmysore.org/services?SPOC=").concat(encodeURIComponent(e.spoc),"\n\nYour service coordinator is ").concat(e.coordinator," (").concat(e.coordinatorPhone,"). Please get in touch with your coordinator and discuss the details of the service.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore\n").trim()))}))},"Service Reminder - Vaikunta Ekadashi":function(g){var e=g.data.volunteers,I=["2023-01-02"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.serviceReminderSent&&(C[g.volunteerName]=g.volunteerPhone,!0)}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone,serviceDuration:e[I].serviceDuration}))})),Object.keys(C).map((function(g){n[g].majorService=n[g].services.sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0]})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Gentle Reminder - Sri Vaikunta Ekadashi 2023 Volunteering*\n\nHare Krishna \ud83d\ude4f\n    \nHope you have got in touch with your service SPOC and are ready for volunteer services tomorrow.\n\n*Please carefully note the following guidelines*\n\n\ud83c\udd94 Please bring your volunteer ID card without fail\n\n\ud83d\ude97 Vehicle parking is not allowed inside the temple. Arrangement for parking is made in _Pailvan Basavayya Community Hall_ in front of the temple. Entry into the parking area is allowed only against Volunteer ID Card\n\n\ud83e\udeaa PLEASE RETURN YOUR ID CARD AT THE VOLUNTEER INFO DESK WHEN YOUR SERVICES ARE COMPLETED AND COLLECT TAKE-HOME PRASADAM. You can also collect *Ratha Yatra ID card* after returning this card.\n\n*IMPORTANT:*\nPlease collect *Prasadam Coupons* for breakfast, lunch & dinner prasadam from your SPOC *".concat(e.majorService.spoc," (").concat(e.majorService.spocPhone,")*. Prasadam will be served only against the prasadam coupon. ").concat(e.services.length>1?"Although you have multiple services (and SPOCs), please collect your prasadam coupons from the above mentioned SPOC only.":"","\n\nHere is your service details, once again for your reference.\n\n*Service Details:*\n\nName: ").concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f *Date*: ".concat(g.date,"\n\ud83d\uded0 *Service*: ").concat(g.service,"\n\ud83d\udd57 *Timings*: ").concat(g.timings,"\n\ud83d\udc51 *Co-ordinator*: ").concat(g.coordinator,"\n\ud83e\udd47 *SPOC*: ").concat(g.spoc,"\n\ud83d\udcde *SPOC's Phone number*: ").concat(g.spocPhone).trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"Service Reminder - Ratha Yatra":function(g){var e=g.data.volunteers,I=["2023-01-07"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.serviceReminderSent&&(C[g.volunteerName]=g.volunteerPhone,!0)}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone,serviceDuration:e[I].serviceDuration}))})),Object.keys(C).map((function(g){n[g].majorService=n[g].services.sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0]})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Gentle Reminder - Ratha Yatra 2023 Volunteering*\n\nHare Krishna \ud83d\ude4f\n    \nHope you have got in touch with your service SPOC and are ready for volunteer services tomorrow.\n\n*Please carefully note the following guidelines*\n\n\ud83c\udd94 Please bring your volunteer ID card without fail\n\n\ud83d\ude97 Vehicle parking is not allowed inside the temple. You need to park outside.\n\n\ud83e\udeaa PLEASE RETURN YOUR ID CARD AT THE _VOLUNTEER INFO DESK_ WHEN YOUR SERVICES ARE COMPLETED AND COLLECT TAKE-HOME PRASADAM. Volunteer Info desk will be located near the temple entrance.\n\n*IMPORTANT:*\nPlease collect *Prasadam Coupons* for breakfast, lunch & dinner prasadam from your SPOC *".concat(e.majorService.spoc," (").concat(e.majorService.spocPhone,")*. Prasadam will be served only against the prasadam coupon. ").concat(e.services.length>1?"Although you have multiple services (and SPOCs), please collect your prasadam coupons from the above mentioned SPOC only.":"","\n\nHere is your service details, once again for your reference.\n\n*Service Details:*\n\nName: ").concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f *Date*: ".concat(g.date,"\n\ud83d\uded0 *Service*: ").concat(g.service,"\n\ud83d\udd57 *Timings*: ").concat(g.timings,"\n\ud83d\udc51 *Co-ordinator*: ").concat(g.coordinator,"\n\ud83e\udd47 *SPOC*: ").concat(g.spoc,"\n\ud83d\udcde *SPOC's Phone number*: ").concat(g.spocPhone).trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"Prasadam Coupons - Ratha Yatra":function(g){var e=g.data,I=e.volunteers,C=e.slots,n={};C.map((function(g){n[g.slot]=g}));var t=["2023-01-07"],l={},a={};I=I.filter((function(g){return-1!=t.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&g.coordinator!=g.spoc&&(l[g.volunteerName]=g.volunteerPhone,!0)}));Object.keys(l).map((function(g){for(var e=0;e<I.length;e++)I[e].volunteerName==g&&(a[g]||(a[g]={name:g,phone:I[e].volunteerPhone,b:!!(n[I[e].availability]||{}).b,l:!!(n[I[e].availability]||{}).l,d:!!(n[I[e].availability]||{}).d,services:[]}),a[g].services.push({date:I[e].date,service:I[e].service,timings:I[e].timings,coordinator:I[e].coordinator,spoc:I[e].spoc,spocPhone:I[e].spocPhone,serviceDuration:I[e].serviceDuration}))})),Object.keys(l).map((function(g){a[g].majorService=a[g].services.sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0]}));var o={};return Object.keys(a).sort().map((function(g){var e=a[g];""!=e.majorService.spoc&&""!=e.majorService.spocPhone&&(o[e.majorService.spoc]||(o[e.majorService.spoc]={spoc:e.majorService.spoc,spocPhone:e.majorService.spocPhone,volunteers:{}}),o[e.majorService.spoc].volunteers[e.name]||(o[e.majorService.spoc].volunteers[e.name]=e))})),Object.keys(o).sort().map((function(g){var e=o[g];return"https://web.whatsapp.com/send?phone=91".concat(e.spocPhone,"&name=").concat(encodeURIComponent(e.spoc),"&text=").concat(encodeURIComponent("\n*SPOC Prasadam Coupons - Ratha Yatra*\n\nHare Krishna \ud83d\ude4f Kind attention SPOC!\n\nYou must collect prasadam coupons (breakfast, lunch & dinner) for the volunteers in your services. These prasadam coupons are to be used on 7th Jan.\n\nPrasadam coupons will be distributed on *Friday, 6th Jan from 5 PM to 9 PM* at the Volunteer Info Desk near Homa Kunda area.\n\nPlease note that the number of prasadam coupons given to you is a close approximation. If you fall short of coupons, please collect the balance from Volunteer Info Desk. For any query call 9844675891 or 6364903722\n\nBelow is the list of volunteers to whom you have to handover breakfast, lunch and dinner coupons:\n\n*Breakfast:*\n".concat(Object.keys(e.volunteers).map((function(g){return e.volunteers[g]})).filter((function(g){return g.b})).map((function(g,e){return"".concat(e+1,". ").concat(g.name)})).join("\n"),"\n\n*Lunch:*\n").concat(Object.keys(e.volunteers).map((function(g){return e.volunteers[g]})).filter((function(g){return g.l})).map((function(g,e){return"".concat(e+1,". ").concat(g.name)})).join("\n"),"\n\n*Dinner:*\n").concat(Object.keys(e.volunteers).map((function(g){return e.volunteers[g]})).filter((function(g){return g.d})).map((function(g,e){return"".concat(e+1,". ").concat(g.name)})).join("\n"),"\n\nRecheck the services for which you are SPOC with the link below:\nhttps://vol.iskconmysore.org/services?SPOC=").concat(encodeURIComponent(g),"\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"ID Card Reminder - Ratha Yatra":function(g){var e=g.data.volunteers,I=["2023-01-07"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.idCardCollected&&!g.idReminderSent&&(C[g.volunteerName]=g.volunteerPhone,!0)}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\ud83e\udeaa *Reminder to collect ID Card for Ratha Yatra Volunteering*\n\nHare Krishna \ud83d\ude4f\nYour volunteer ID card for Ratha Yatra service will be issued *today (Friday 6th January 2023) from 5 PM to 9 PM* at Volunteer Info Desk near Homa Kunda area.\n\nPlease collect the ID cards without fail today. ID cards will *NOT* be issued tomorrow.\n\n\u203c\ufe0f IMPORTANT NOTE: Please re-check your service using the below link before the festival. Sometimes your service may change due to unavoidable circumstances.\nhttps://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name),"\n\nPlease get in touch with your service SPOC and understand the service's details.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore")))}))},"Service Info - Gaura Purnima":function(g){var e=g.data.volunteers,I=["2023-03-07"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.infoMsgSent}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Sri Gaura Purnima 2023 - Volunteering*\n*Tuesday, 7th March 2023*\n   \nHare Krishna \ud83d\ude4f Please accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f We thank you for registering for the *Sri Gaura Purnima* festival services.\n\n*Service Details:*\n\nName: ".concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f *Date*: ".concat(g.date,"\n\ud83d\uded0 *Service*: ").concat(g.service,"\n\ud83d\udd57 *Timings*: ").concat(g.timings,"\n\ud83d\udc51 *Co-ordinator*: ").concat(g.coordinator,"\n\ud83e\udd47 *SPOC*: ").concat(g.spoc,"\n\ud83d\udcde *SPOC's Phone number*: ").concat(g.spocPhone).concat(g.spoc.trim()==e.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service. Please meet your service coordinator ".concat(g.coordinator," and discuss the details of the service"):"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n*Note:*\n1\ufe0f\u20e3 Every service has got a Single-Point-of-Contact (SPOC) volunteer. *Please call your SPOC and discuss the details of service*, dress code etc. The contact numbers of SPOC(s) are mentioned below.\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"SPOC Info - Gaura Purnima":function(g){var e=g.data.services,I=["2023-03-07"];e=e.filter((function(g){return-1!=I.indexOf(g.date)}));var C={};return e.map((function(g){g.coordinator!=g.spoc&&""!=g.spoc&&""!=g.spocPhone&&(C[g.spoc]=C[g.spoc]||{spoc:g.spoc,spocPhone:g.spocPhone,coordinator:g.coordinator,coordinatorPhone:g.coordinatorPhone,services:[]},-1==C[g.spoc].services.indexOf(g.service)&&C[g.spoc].services.push({service:g.serviceName,date:g.date}))})),Object.keys(C).sort().map((function(g){var e=C[g];return"https://web.whatsapp.com/send?phone=91".concat(e.spocPhone,"&name=").concat(encodeURIComponent(e.spoc),"&text=").concat(encodeURIComponent("\n*SPOC for Sri Gaura Purnima 2023 services*\n*Tuesday, 7th March 2023*\n\nHare Krishna \ud83d\ude4f. You are assigned as Single-Point-of-Contact (SPOC) for ".concat(e.services.length>1?"following *".concat(e.services.length,"* services:\n\n").concat(e.services.map((function(g){return" \u2022 *".concat(g.service,"*")})).join("\n")):"*".concat(e.services[0].service,"* service."),"\n\nPlease use this link to check the details of the service").concat(e.services.length>1?"s":"",":\n*https://vol.iskconmysore.org/services?SPOC=").concat(encodeURIComponent(e.spoc),"*\n\nYour service coordinator is ").concat(e.coordinator,". Please get in touch with your coordinator and discuss the details of the service.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore\n").trim()))}))},"Service Info - Rama Navami":function(g){var e=g.data.volunteers,I=["2023-03-29","2023-03-30"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.infoMsgSent}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Sri Rama Navami 2023 - Volunteering*\n*Thursday, 30th March 2023*\n   \nHare Krishna \ud83d\ude4f Please accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f We thank you for registering for the *Sri Rama Navami* festival services.\n\n*Service Details:*\n\nName: ".concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f *Date*: ".concat(g.date,"\n\ud83d\uded0 *Service*: ").concat(g.service,"\n\ud83d\udd57 *Timings*: ").concat(g.timings,"\n\ud83d\udc51 *Co-ordinator*: ").concat(g.coordinator,"\n\ud83e\udd47 *SPOC*: ").concat(g.spoc,"\n\ud83d\udcde *SPOC's Phone number*: ").concat(g.spocPhone).concat(g.spoc.trim()==e.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service. Please meet your service coordinator ".concat(g.coordinator," and discuss the details of the service"):"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n*Note:*\n1\ufe0f\u20e3 Every service has got a Single-Point-of-Contact (SPOC) volunteer. *Please call your SPOC and discuss the details of service*, dress code etc. The contact numbers of SPOC(s) are mentioned below.\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"SPOC Info - Rama Navami":function(g){var e=g.data.services,I=["2023-03-30"];e=e.filter((function(g){return-1!=I.indexOf(g.date)}));var C={};return e.map((function(g){g.coordinator!=g.spoc&&""!=g.spoc&&""!=g.spocPhone&&(C[g.spoc]=C[g.spoc]||{spoc:g.spoc,spocPhone:g.spocPhone,coordinator:g.coordinator,coordinatorPhone:g.coordinatorPhone,services:[]},-1==C[g.spoc].services.indexOf(g.service)&&C[g.spoc].services.push({service:g.serviceName,date:g.date}))})),Object.keys(C).sort().map((function(g){var e=C[g];return"https://web.whatsapp.com/send?phone=91".concat(e.spocPhone,"&name=").concat(encodeURIComponent(e.spoc),"&text=").concat(encodeURIComponent("\n*SPOC for Sri Rama Navami 2023 services*\n*Thursday, 30th March 2023*\n\nHare Krishna \ud83d\ude4f. You are assigned as Single-Point-of-Contact (SPOC) for ".concat(e.services.length>1?"following *".concat(e.services.length,"* services:\n\n").concat(e.services.map((function(g){return" \u2022 *".concat(g.service,"*")})).join("\n")):"*".concat(e.services[0].service,"* service."),"\n\nPlease use this link to check the details of the service").concat(e.services.length>1?"s":"",":\n*https://vol.iskconmysore.org/services?SPOC=").concat(encodeURIComponent(e.spoc),"*\n\nYour service coordinator is ").concat(e.coordinator,". Please get in touch with your coordinator and discuss the details of the service.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore\n").trim()))}))},"Service Reminder - Rama Navami":function(g){var e=g.data.volunteers,I=["2023-03-29","2023-03-30"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.serviceReminderSent&&(C[g.volunteerName]=g.volunteerPhone,!0)}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone,serviceDuration:e[I].serviceDuration}))})),Object.keys(C).map((function(g){n[g].majorService=n[g].services.sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0]})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Gentle Reminder - Sri Rama Navami 2023 Volunteering*\n\nHare Krishna \ud83d\ude4f\n    \nHope you have got in touch with your service SPOC and are ready for volunteer services.\n\nHere is your service details, once again for your reference:\n\n*Service Details:*\n\nName: ".concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f *Date*: ".concat(g.date,"\n\ud83d\uded0 *Service*: ").concat(g.service,"\n\ud83d\udd57 *Timings*: ").concat(g.timings,"\n\ud83d\udc51 *Co-ordinator*: ").concat(g.coordinator,"\n\ud83e\udd47 *SPOC*: ").concat(g.spoc,"\n\ud83d\udcde *SPOC's Phone number*: ").concat(g.spocPhone).trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"SPOC Info - Narasimha Chaturdashi":function(g){var e=g.data.services,I=["2023-05-03","2023-05-04"];e=e.filter((function(g){return-1!=I.indexOf(g.date)}));var C={};return e.map((function(g){g.coordinator!=g.spoc&&""!=g.spoc&&""!=g.spocPhone&&(C[g.spoc]=C[g.spoc]||{spoc:g.spoc,spocPhone:g.spocPhone,services:[]},-1==C[g.spoc].services.indexOf(g.service)&&C[g.spoc].services.push({service:g.serviceName,date:g.date,coordinator:g.coordinator,coordinatorPhone:g.coordinatorPhone,timings:g.timings,requirement:g.requirement}))})),Object.keys(C).sort().map((function(g){var e=C[g];return"https://web.whatsapp.com/send?phone=91".concat(e.spocPhone,"&name=").concat(encodeURIComponent(e.spoc),"&text=").concat(encodeURIComponent("\n*SPOC for Sri Narasimha Chaturdashi 2023 services*\n*Thursday, 4th May 2023*\n\nHare Krishna \ud83d\ude4f. You are assigned as Single-Point-of-Contact (SPOC) for below mentioned ".concat(e.services.length>1?e.services.length:""," service").concat(e.services.length>1?"s":"",". Kindly go through the details of the service").concat(e.services.length>1?"s":""," carefully:\n\nName: ").concat(e.spoc,"\nPhone: ").concat(e.spocPhone,"\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings,"*\n\ud83d\udc51 Coordinator: *").concat(g.coordinator,"*\n\ud83d\udcde Coordinator's Phone: *").concat(g.coordinatorPhone,"*\n#\ufe0f\u20e3 No. of volunteers: *").concat(g.requirement,"*\n").trim()})).join("\n\n"),"\n\nPlease use this link to check the details of the service").concat(e.services.length>1?"s":""," and volunteers under you:\n*https://vol.iskconmysore.org/services?SPOC=").concat(encodeURIComponent(e.spoc),"*\n\nYour responsibilities:\n \u2022 Please discuss with the service coordinator").concat(e.services.length>1?"s":""," and understand all major and minor details of the service like dress code, timings etc.\n \u2022 Please call volunteers under you and communicate all the details of the service to them. Phone numbers of all volunteers is availbale in the link shared above.\n \u2022 Make sure that volunteers report at proper time and in appropriate dress code for their service.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore\n").trim()))}))},"Service Info - Narasimha Chaturdashi":function(g){var e=g.data.volunteers,I=["2023-05-03","2023-05-04"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.infoMsgSent}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone,availability:e[I].availability}))})),Object.keys(n).sort().map((function(g){var e=n[g],I=!!e.services.filter((function(g){return"Default"==g.availability||"NOT AVAILABLE"==g.availability})).length;return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Sri Narasimha Chaturdashi 2023 - Volunteering*\n*Thursday, 30th March 2023*\n   \nHare Krishna \ud83d\ude4f Please accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f ".concat(I?"":"We thank you for registering for the Sri Narasimha Chaturdashi festival services",".\n\n*Service Details:*\n\nName: ").concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings,"*\n\ud83d\udc51 Co-ordinator: *").concat(g.coordinator,"*\n\ud83e\udd47 SPOC: *").concat(g.spoc,"*\n\ud83d\udcde SPOC's Phone number: *").concat(g.spocPhone,"*").concat(g.spoc.trim()==e.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service.":"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n*Note:*\n1\ufe0f\u20e3 Every service has got a Single-Point-of-Contact (SPOC) volunteer. *Please call your SPOC and discuss the details of service* like dress code, timings etc. The contact numbers of SPOC(s) are mentioned above.\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\ud83c\udf10 If you are not able click and open the above link, it may likely be because you have not stored this number. Please save this number as 'ISKCON Mysore'.\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"Service Reminder - Narasimha Chaturdashi":function(g){var e=g.data.volunteers,I=["2023-05-03","2023-05-04"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.serviceReminderSent&&(C[g.volunteerName]=g.volunteerPhone,!0)}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone,serviceDuration:e[I].serviceDuration}))})),Object.keys(C).map((function(g){n[g].majorService=n[g].services.sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0]})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Gentle Reminder - Sri Narasimha Chaturdashi 2023 Volunteering*\n\nHare Krishna \ud83d\ude4f\n    \nHope you have got in touch with your service SPOC and are ready for volunteer services.\n\nHere is your service details, once again for your reference:\n\n*Service Details:*\n\nName: ".concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings,"*\n\ud83d\udc51 Co-ordinator: *").concat(g.coordinator,"*\n\ud83e\udd47 SPOC: *").concat(g.spoc,"*\n\ud83d\udcde SPOC's Phone number: *").concat(g.spocPhone,"*").concat(g.spoc.trim()==e.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service.":"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"Service Info - SBJ-SKJ-SVP":function(g){var e=g.data.volunteers,I=["2023-08-30","2023-08-31","2023-09-05","2023-09-06","2023-09-07","2023-09-08","2023-09-09"],C=["2023-08-30","2023-08-31"],n=["2023-09-05","2023-09-06","2023-09-07","2023-09-09"],t=["2023-09-06","2023-09-07"],l=["2023-09-08"],o={},c={};e=e.filter((function(g){return-1==I.indexOf(g.date)||""==g.volunteerName||""==g.volunteerPhone||""==g.service||g.infoMsgSent||(o[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&""!=g.service&&!g.infoMsgSent}));return Object.keys(o).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(c[g]||(c[g]={name:g,phone:e[I].volunteerPhone,services:[]}),c[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone,availability:e[I].availability,serviceDuration:e[I].serviceDuration}))})),Object.keys(c).sort().map((function(g){var e=c[g],I=!!e.services.filter((function(g){return"Default"==g.availability||"NOT AVAILABLE"==g.availability})).length,o={};e.services.forEach((function(g){o[g.date]=1}));var A=Object.keys(o).sort(),r=C.some((function(g){return A.includes(g)})),i=n.some((function(g){return A.includes(g)})),s=t.some((function(g){return A.includes(g)})),d=l.some((function(g){return A.includes(g)})),u=[];r&&u.push("Sri Balarama Jayanthi"),i&&u.push("Sri Krishna Janmashtami"),d&&u.push("Sri Vyasa Puja");var m=u.join(", ").replaceLastOccurance(", "," & ");e.services.filter((function(g){return"2023-09-06"==g.date})).sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0],e.services.filter((function(g){return"2023-09-07"==g.date})).sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Volunteering Info - ".concat(m,"*\n   \nHare Krishna \ud83d\ude4f Please accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f ").concat(I?"":"We thank you for registering for volunteer services for ".concat(m," festival").concat(u.length>1?"s":""),".\n\n*\u261d\ud83c\udffb Before you go through this message, please save this number in your phone. If you don't, you may not be able to click and open important links given in this message!*\n\n*General Guidelines:*\n\n1\ufe0f\u20e3 Every service has got a Single-Point-of-Contact (SPOC) volunteer. *Please contact SPOC(s) of your service(s) and discuss the details of service like timings, dress code etc. The contact numbers of SPOC(s) are mentioned below.\n\n").concat(s?"\ud83e\udeaa *Volunteer Badge (ID card)* will be issued on Sunday, 5th September 2023 near Sridham Hall from 2 PM to 8 PM. This badge is necessary and valid only for Janmashtami festival on 6th and 7th Sep.\n\n\ud83d\ude97 Vehicle parking is not allowed inside temple. Arrangement for parking is made in _Pailvan Basavayya Community Hall_ in front of the temple. Entry into parking area is allowed only against ID card\n\n\u27a1\ufe0f Volunteer entry is through temple main gate (Gate 1).\n\n\ud83c\udfab Breakfast, lunch and dinner prasadam will be provided to you against prasadam coupons by SPOC. The details of the SPOC who will issue you coupons can be found in the link given at the end of this message.\n\n\ud83e\udeaa *PLEASE RETURN YOUR ID CARD TO VOLUNTEER CARE CELL WHEN YOUR SERVICES ARE COMPLETED AND COLLECT TAKE-HOME PRASADAM*\n\n\ud83c\udfc3 Inform SPOC before you leave (particularly if you are leaving the service in middle due an emergency)\n\n":"","\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\n*Service Details:*\n\nYour Name: ").concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings.toTimingCase(),"*").concat("Default"!=g.availability&&"NOT AVAILABLE"!=g.availability&&"Whole Day"!=g.availability?"\n\ud83d\udd57 Your slot: *".concat(g.availability,"*"):"","\n\ud83d\udc51 Co-ordinator: *").concat(g.coordinator,"*\n\ud83e\udd47 SPOC: *").concat(g.spoc,"*\n\ud83d\udcde SPOC's Phone number: *").concat(g.spocPhone,"*").concat(g.spoc.trim()==e.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service.":"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"Service Reminder - SBJ":function(g){var e=g.data.volunteers,I=["2023-08-30","2023-08-31"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&""!=g.service&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&""!=g.service}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone,availability:e[I].availability,serviceDuration:e[I].serviceDuration}))})),Object.keys(n).sort().map((function(g){var e=n[g],I=(e.services.filter((function(g){return"Default"==g.availability||"NOT AVAILABLE"==g.availability})).length,{});return e.services.forEach((function(g){I[g.date]=1})),"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Gentle Reminder - Sri Balarama Purnima Volunteering Service*\n*Thursday, 31st August 2023*\n\nHare Krishna \ud83d\ude4f\n\nGiven below is the details of your service, provided once again for your reference:\n\n*Service Details:*\n\nYour Name: ".concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings.toTimingCase(),"*").concat("Default"!=g.availability&&"NOT AVAILABLE"!=g.availability&&"Whole Day"!=g.availability?"\n\ud83d\udd57 Your slot: *".concat(g.availability,"*"):"","\n\ud83d\udc51 Co-ordinator: *").concat(g.coordinator,"*\n\ud83e\udd47 SPOC: *").concat(g.spoc,"*\n\ud83d\udcde SPOC's Phone number: *").concat(g.spocPhone,"*").concat(g.spoc.trim()==e.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service.":"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"SPOC Info - SBJ-SKJ-SVP":function(g){var e=g.data.services,I=["2023-08-30","2023-08-31","2023-09-05","2023-09-06","2023-09-07","2023-09-08","2023-09-09"];e=e.filter((function(g){return-1!=I.indexOf(g.date)}));var C={};return e.map((function(g){""!=g.spoc&&""!=g.spocPhone&&(C[g.spoc]=C[g.spoc]||{spoc:g.spoc,spocPhone:g.spocPhone,services:[]},-1==C[g.spoc].services.indexOf(g.service)&&C[g.spoc].services.push({service:g.serviceName,date:g.date,coordinator:g.coordinator,coordinatorPhone:g.coordinatorPhone,timings:g.timings,requirement:g.requirement}))})),Object.keys(C).sort().map((function(g){var e=C[g];return"https://web.whatsapp.com/send?phone=91".concat(e.spocPhone,"&name=").concat(encodeURIComponent(e.spoc),"&text=").concat(encodeURIComponent("\n*SPOC for Volunteering Services*\n\nHare Krishna \ud83d\ude4f. You are assigned as Single-Point-of-Contact (SPOC) for below mentioned ".concat(e.services.length>1?e.services.length:""," service").concat(e.services.length>1?"s":"",". Kindly go through the details of the service").concat(e.services.length>1?"s":""," carefully:\n\nName: ").concat(e.spoc,"\nPhone: ").concat(e.spocPhone,"\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings.toTimingCase(),"*\n\ud83d\udc51 Coordinator: *").concat(g.coordinator,"*\n\ud83d\udcde Coordinator's Phone: *").concat(g.coordinatorPhone,"*\n#\ufe0f\u20e3 No. of volunteers: *").concat(g.requirement,"*\n").trim()})).join("\n\n"),"\n\nPlease use this link to check the details of the service").concat(e.services.length>1?"s":""," and volunteers under you:\n*https://vol.iskconmysore.org/services?SPOC=").concat(encodeURIComponent(e.spoc),'*\n\nResponsibilities of SPOC:\n1\ufe0f\u20e3 SPOC must understand all the details of the service, timings, dress-code etc. from the co-ordinator.\n\n2\ufe0f\u20e3 SPOC must communicate and orient the volunteers regarding all aspects of the service. The contact details of the volunteers are provided in the link given above.\n\n3\ufe0f\u20e3 SPOC must make sure that volunteers report at proper time and in appropriate dress code for their service.\n\n4\ufe0f\u20e3 SPOC must collect Prasadam Coupons from Volunteer Care Cell and issue them volunteers on the previous day of service. Prasadam Coupons are meant to be used only on 6th and 7th September. Not on other days. You can find the list of volunteers to whom you must issue the coupons by clicking on "Prasadam Coupons" button after opening the link given above.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore\n').trim()))}))},"Volunteer Badge Info - SKJ":function(g){var e=g.data.volunteers,I=["2023-09-06","2023-09-07"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.idCardCollected&&!g.idReminderSent&&(C[g.volunteerName]=g.volunteerPhone,!0)}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\ud83e\udeaa *Volunteer Badge (ID Card) for Sri Krishna Janmashtami Volunteering*\n\nHare Krishna \ud83d\ude4f\nYour volunteer badge will be issued *tomorrow (Sunday, 3rd September 2023)* in *Sridham Hall* from *9.30 AM to 11 AM and 5 PM to 7 PM.* Please collect the badge without fail. This badge is necessary and valid only for Janmashtami festival on 6th and 7th Sep.\n\nNote:\n1) Volunteer badge is necessary for your vehicle parking also. Vehicle parking is not allowed inside temple on 6th and 7th September. Arrangement for parking is made in _Pailvan Basavayya Community Hall_ in front of the temple. Parking can be availed against the Volunteer Badge.\n\n2) Please return your volunteer badge to volunteer care cell when your services are completed (on 6th or 7th, as applicable to you) and collect take-home prasadam.\n\nIf you have any queries regarding issuing of Volunteer Badges, please reply here.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore"))}))},"Volunteer Badge Return Reminder - SKJ":function(g){var e=g.data.volunteers,I=["2023-09-06","2023-09-07"],C={},n={};e=e.filter((function(g){return!(-1==I.indexOf(g.date)||""==g.volunteerName||""==g.volunteerPhone||!g.idCardCollected||g.idCardReturned)&&(C[g.volunteerName]=g.volunteerPhone,!0)}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("Gentle reminder to *return* your volunteer badge before Friday, 15th September 2023 at temple book counter.\nHare Krishna."))}))},"Volunteer Badge Reminder - SKJ":function(g){var e=g.data.volunteers,I=["2023-09-06","2023-09-07"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.idCardCollected&&(C[g.volunteerName]=g.volunteerPhone,!0)}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("Gentle reminder to collect your volunteer badge today.\n                \n    Time: 2 PM to 8 PM.\n    Venue: Volunteer Care Cell near Sridham Hall\n    \n    Hare Krishna."))}))},"Service Info - Sri Radhashtami":function(g){var e=g.data.volunteers,I=["2023-09-23"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.infoMsgSent}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,availability:e[I].availability,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return console.log(e),"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Sri Radhashtami 2023 - Volunteering*\n*Saturday, 23rd September 2023*\n       \nHare Krishna \ud83d\ude4f\nPlease accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f ".concat("Default"!=e.availability?"We thank you for registering for the *Sri Radhashtami* festival services.":"","\n\n*Service Details:*\n    \nYour Name: ").concat(e.name,"\nPhone: ").concat(e.phone,"\n    \n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n    \n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f *Date*: ".concat(g.date,"\n\ud83d\uded0 *Service*: ").concat(g.service,"\n\ud83d\udd57 *Timings*: ").concat(g.timings.toTimingCase(),"\n\ud83d\udc51 *Co-ordinator*: ").concat(g.coordinator,"\n\ud83e\udd47 *SPOC*: ").concat(g.spoc,"\n\ud83d\udcde *SPOC's Phone number*: ").concat(g.spocPhone).concat(g.spoc.trim()==e.name?"\n\nYou are the SPOC (Single-Point-of-Contact) for this service. Please meet your service coordinator ".concat(g.coordinator," and discuss the details of the service"):"","\n        ").trim()})).join("\n\n"),"\n        \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n*Note:*\n1\ufe0f\u20e3 Every service has got a Single-Point-of-Contact (SPOC) volunteer. *Please call your SPOC and discuss the details of service*, dress code etc. The contact numbers of SPOC(s) are mentioned below.\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"SPOC Info - Sri Radhastami":function(g){var e=g.data.services,I=["2023-09-23"];e=e.filter((function(g){return-1!=I.indexOf(g.date)}));var C={};return e.map((function(g){g.coordinator!=g.spoc&&""!=g.spoc&&""!=g.spocPhone&&(C[g.spoc]=C[g.spoc]||{spoc:g.spoc,spocPhone:g.spocPhone,services:[]},-1==C[g.spoc].services.indexOf(g.service)&&C[g.spoc].services.push({service:g.serviceName,date:g.date,coordinator:g.coordinator,coordinatorPhone:g.coordinatorPhone,timings:g.timings,supply:g.supply}))})),Object.keys(C).sort().map((function(g){var e=C[g];return"https://web.whatsapp.com/send?phone=91".concat(e.spocPhone,"&name=").concat(encodeURIComponent(e.spoc),"&text=").concat(encodeURIComponent("\n*SPOC for Sri Radhashtami 2023 services*\n*Saturday, 23rd September 2023*\n\nHare Krishna \ud83d\ude4f. You are assigned as Single-Point-of-Contact (SPOC) for below mentioned ".concat(e.services.length>1?e.services.length:""," service").concat(e.services.length>1?"s":"",". Kindly go through the details of the service").concat(e.services.length>1?"s":""," carefully:\n\nYour Name: ").concat(e.spoc,"\nPhone: ").concat(e.spocPhone,"\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings.toTimingCase(),"*\n\ud83d\udc51 Coordinator: *").concat(g.coordinator,"*\n\ud83d\udcde Coordinator's Phone: *").concat(g.coordinatorPhone,"*\n#\ufe0f\u20e3 No. of volunteers: *").concat(g.supply,"*\n").trim()})).join("\n\n"),"\n\nPlease use this link to check the details of the service").concat(e.services.length>1?"s":""," and volunteers under you:\n*https://vol.iskconmysore.org/services?SPOC=").concat(encodeURIComponent(e.spoc),"*\n\nYour responsibilities:\n    \u2022 Please discuss with the service coordinator").concat(e.services.length>1?"s":""," and understand all major and minor details of the service like dress code, timings etc.\n    \u2022 Please call volunteers under you and communicate all the details of the service to them. Phone numbers of all volunteers is availbale in the link shared above.\n    \u2022 Make sure that volunteers report at proper time and in appropriate dress code for their service.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore\n    ").trim()))}))},"Service Info - ISKCON Dasara":function(g){var e=g.data.volunteers,I=["2023-10-24"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.infoMsgSent}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,availability:e[I].availability,idCardCollected:e[I].idCardCollected,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return console.log(e),"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*ISKCON Dasara 2023 - Volunteering*\n*Tuesday, 24th October 2023*\n    \nHare Krishna \ud83d\ude4f\nPlease accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f ".concat("Default"!=e.availability?"We thank you for registering for the *ISKCON Dasara* festival services.":"","\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n*Service Details:*\n\nYour Name: ").concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f *Date*: ".concat(g.date,"\n\ud83d\uded0 *Service*: ").concat(g.service,"\n\ud83d\udd57 *Timings*: ").concat(g.timings.toTimingCase(),"\n\ud83d\udc51 *Co-ordinator*: ").concat(g.coordinator,"\n\ud83e\udd47 *SPOC*: ").concat(g.spoc,"\n\ud83d\udcde *SPOC's Phone number*: ").concat(g.spocPhone).concat(g.spoc.trim()==e.name?"\n\nYou are the SPOC (Single-Point-of-Contact) for this service. Please meet your service coordinator ".concat(g.coordinator," and discuss the details of the service"):"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n*Note:*\n1\ufe0f\u20e3 Every service has got a Single-Point-of-Contact (SPOC) volunteer. *Please call your SPOC and discuss the details of service*, dress code etc. The contact numbers of SPOC(s) are mentioned below.\n\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n").concat(e.idCardCollected?"":"\n\ud83e\udeaa *Volunteer Badges will be issued today from 10 AM to 1 PM and 3 PM to 7 PM at Volunteer Care Cell inside Sridham Hall*. Please collect without fail.\n","\n\ud83d\ude97 Vehicle parking is not allowed inside temple on 24th. Arrangement for parking is made in _Pailvan Basavayya Community Hall_ in front of the temple. Entry into parking area is allowed only against ID card\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"Volunteer Badge Info - ISKCON Dasara":function(g){var e=g.data.volunteers,I=["2023-10-24"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.idCardCollected&&!g.idReminderSent&&(C[g.volunteerName]=g.volunteerPhone,!0)}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\ud83e\udeaa *Volunteer Badge (ID Card) for ISKCON Dasara*\n\nHare Krishna \ud83d\ude4f\nYour volunteer badge will be issued *this Sunday, (22nd October 2023)* in *Sridham Hall* from *9.30 AM to 11 AM and 5 PM to 7 PM*. Please collect the badge without fail.\n\nNote:\n1) Volunteer badge is necessary for your availing vehicle parking and dinner prasadam. Parking space is made available in _Pailvan Basavayya Community Hall_ in front of the temple.\n\n2) Dinner prasadam for volunteers will be served in Sridham Hall. Return the volunteer badge at dinner prasadam counter after your service.\n\nIf you have any queries regarding issuing of Volunteer Badges, please reply here.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore"))}))},"Volunteer Badge Reminder - ISKCON Dasara":function(g){var e=g.data.volunteers,I=["2023-10-24"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.idCardCollected&&(C[g.volunteerName]=g.volunteerPhone,!0)}));Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))}));var t={};return Object.keys(n).sort().map((function(g){var e=n[g];return t[e.phone]?"":(t[e.phone]=1,"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\nGentle reminder to collect your volunteer badge today.\n            \nTime: *10 AM to 1 PM and 3 PM to 7 PM*\nVenue: Volunteer Care Cell *inside Sridham Hall*\n\nHare Krishna.".trim())))})).filter((function(g){return""!=g}))},"Service Info - GOV-SPD":function(g){var e=g.data,I=e.master,C=e.volunteers,n=e.events;I=I.filter((function(g){return""!=g.name})).sort((function(g,e){return g.name<e.name?-1:1})),C=C.filter((function(g){return""!=g.date&&""!=g.volunteerName&&""!=g.volunteerPhone&&""!=g.service&&!g.infoMsgSent})).sort((function(g,e){return g.date>e.date?1:-1}));var t={};return n.forEach((function(g){t[g.date]=g.event.trim()})),I.map((function(g){return g.services=C.filter((function(e){return e.volunteerName==g.name})),g.festivals=g.services.map((function(g){return g.date})).unique().map((function(g){return t[g]})),g})).filter((function(g){return!(g.default&&0==g.services.length)})).map((function(g){return"https://web.whatsapp.com/send?phone=91".concat(g.phone,"&name=").concat(encodeURIComponent(g.name),"&text=").concat(encodeURIComponent("\n*Volunteering Info - ".concat(g.festivals.join(" & "),"*\n    \n").concat(g.services.length>0?"Hare Krishna \ud83d\ude4f Please accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f ".concat(g.default?"":"We thank you for registering for volunteer services for ".concat(g.festivals.join(" & ")," festival").concat(g.festivals.length>1?"s":""),".\n\nService Details:\nYour Name: ").concat(g.name,"\nPhone: ").concat(g.phone,"\n\n").concat(g.services.length>1?"You have been assigned the following *".concat(g.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(g.services.map((function(e){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(e.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"* (").concat(t[e.date],")\n\ud83d\uded0 Service: *").concat(e.service,"*\n\ud83d\udd57 Timings: *").concat(e.timings.toTimingCase(),"*\n\ud83d\udc51 Co-ordinator: *").concat(e.coordinator,"*\n\ud83e\udd47 SPOC: *").concat(e.spoc,"*\n\ud83d\udcde SPOC's Phone number: *").concat(e.spocPhone,"*").concat(e.spoc.trim()==g.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service.":"","\n    ").trim()})).join("\n\n"),"\n\n*Service Details Link:*\nYou can also check these service details using the link given below:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(g.name)),"\n\n*General Guidelines:*\n\n1\ufe0f\u20e3 Every service has a Single-Point-of-Contact (SPOC) volunteer. Please contact the SPOC(s) of your service(s) to discuss details such as timings and dress code. Their contact numbers are provided above.\n\n\ud83e\udeaa Your volunteer badge will be issued *this Sunday, (12th November 2023)* in *Sridham Hall* from *9.30 AM to 11 AM and 5 PM to 7 PM*. Please collect the badge without fail.\n\n\ud83e\udeaa Please return your ID card at Temple Book-Counter when your services are completed.\n\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\n\u2705 _Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._"):"We regret to inform you that we are currently unable to assign you a service for Govardhan Puja. The service slots are full due to the low service requirement for this occasion. However, we invite you to join us in the festival celebrations on Tuesday, 14th November, at 5:30 PM.\nIn the event of an unforeseen service requirement, we may assign you service and in that case, you will receive confirmation message.","\n\nRegards,\n").concat(g.services.length>0?"Pankajanghri Dasa":"Volunteer Care Cell","\nISKCON Mysore").trim()))}))},"Service Info - SPD":function(g){var e=g.data.volunteers,I=["2023-11-17"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,availability:e[I].availability,idCardCollected:e[I].idCardCollected,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Volunteering Info - Srila Prabhupada Disappearance Day*\nFriday, 17th November 2023\n\nHare Krishna. Please go through your service details:\nYour Name: ".concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings.toTimingCase(),"*\n\ud83d\udc51 Co-ordinator: *").concat(g.coordinator,"*\n\ud83e\udd47 SPOC: *").concat(g.spoc,"*\n\ud83d\udcde SPOC's Phone number: *").concat(g.spocPhone,"*").concat(g.spoc.trim()==e.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service.":"","\n    ").trim()})).join("\n\n"),"\n\n*Service Details Link:*\nYou can also check these service details using the link given below:\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n*General Guidelines:*\n\n1\ufe0f\u20e3 Every service has a Single-Point-of-Contact (SPOC) volunteer. Please contact the SPOC(s) of your service(s) to discuss details such as timings and dress code. Their contact numbers are provided above.\n\n\ud83e\udeaa No volunteer badge will be issued for this festival.\n\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\n\u2705 _Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nVolunteer Care Cell\nISKCON Mysore").trim()))}))},"SPOC Info - GOV":function(g){var e=g.data.services,I=["2023-11-14"];e=e.filter((function(g){return-1!=I.indexOf(g.date)}));var C={};return e.map((function(g){g.coordinator!=g.spoc&&""!=g.spoc&&""!=g.spocPhone&&(C[g.spoc]=C[g.spoc]||{spoc:g.spoc,spocPhone:g.spocPhone,services:[]},-1==C[g.spoc].services.indexOf(g.service)&&C[g.spoc].services.push({service:g.serviceName,date:g.date,coordinator:g.coordinator,coordinatorPhone:g.coordinatorPhone,timings:g.timings,supply:g.supply}))})),Object.keys(C).sort().map((function(g){var e=C[g];return"https://web.whatsapp.com/send?phone=91".concat(e.spocPhone,"&name=").concat(encodeURIComponent(e.spoc),"&text=").concat(encodeURIComponent("\n*SPOC for Sri Govardhan Puja 2023 services*\n*Tuesday, 14th November 2023*\n\nHare Krishna \ud83d\ude4f. You are assigned as Single-Point-of-Contact (SPOC) for below mentioned ".concat(e.services.length>1?e.services.length:""," service").concat(e.services.length>1?"s":"",". Kindly go through the details of the service").concat(e.services.length>1?"s":""," carefully:\n\nYour Name: ").concat(e.spoc,"\nPhone: ").concat(e.spocPhone,"\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings.toTimingCase(),"*\n\ud83d\udc51 Coordinator: *").concat(g.coordinator,"*\n\ud83d\udcde Coordinator's Phone: *").concat(g.coordinatorPhone,"*\n#\ufe0f\u20e3 No. of volunteers: *").concat(g.supply,"*\n").trim()})).join("\n\n"),"\n\nPlease use this link to check the details of the service").concat(e.services.length>1?"s":""," and volunteers under you:\n*https://vol.iskconmysore.org/services?SPOC=").concat(encodeURIComponent(e.spoc),"*\n\nYour responsibilities:\n\u2022 Please discuss with the service coordinator").concat(e.services.length>1?"s":""," and understand all major and minor details of the service like dress code, timings etc.\n\u2022 Please call volunteers under you and communicate all the details of the service to them. Phone numbers of all volunteers is availbale in the link shared above.\n\u2022 Make sure that volunteers report at proper time and in appropriate dress code for their service.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore\n").trim()))}))},"Service Reminder - GOV":function(g){var e=g.data.volunteers,I=["2023-11-14"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&""!=g.service&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&""!=g.service}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone,availability:e[I].availability,serviceDuration:e[I].serviceDuration}))})),Object.keys(n).sort().map((function(g){var e=n[g],I=(e.services.filter((function(g){return"Default"==g.availability||"NOT AVAILABLE"==g.availability})).length,{});return e.services.forEach((function(g){I[g.date]=1})),"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Gentle Reminder - Govardhana Puja Volunteering Service*\n*Tuesday, 14th Nov 2023*\n\nHare Krishna \ud83d\ude4f\n\nGiven below is the details of your service, provided once again for your reference:\n\n*Service Details:*\n\nYour Name: ".concat(e.name,"\nPhone: ").concat(e.phone,"\n\n").concat(e.services.length>1?"You have been assigned the following *".concat(e.services.length,"* services:"):"You have been assigned the following service:","\n\n").concat(e.services.map((function(g){return"\n\ud83d\uddd3\ufe0f Date: *".concat(a()(g.date,"YYYY-MM-DD").format("dddd, Do MMMM"),"*\n\ud83d\uded0 Service: *").concat(g.service,"*\n\ud83d\udd57 Timings: *").concat(g.timings.toTimingCase(),"*\n\ud83d\udc51 Co-ordinator: *").concat(g.coordinator,"*\n\ud83e\udd47 SPOC: *").concat(g.spoc,"*\n\ud83d\udcde SPOC's Phone number: *").concat(g.spocPhone,"*").concat(g.spoc.trim()==e.name?"\nYou are the SPOC (Single-Point-of-Contact) for this service.":"","\n    ").trim()})).join("\n\n"),"\n    \n*YOU CAN ALSO CHECK THESE SERVICE DETAILS USING THE LINK GIVEN BELOW*:\n\n","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"Volunteer Badge Reminder - GOV":function(g){var e=g.data.volunteers,I=["2023-11-14"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.idCardCollected&&(C[g.volunteerName]=g.volunteerPhone,!0)}));Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))}));var t={};return Object.keys(n).sort().map((function(g){var e=n[g];return t[e.phone]?"":(t[e.phone]=1,"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Volunteer Badge* - Gentle reminder to collect your volunteer badge today.\n        \nTime: *3.30 PM to 6 PM*\nVenue: Near Homa Kunda area\n\nHare Krishna.".trim())))})).filter((function(g){return""!=g}))},"Volunteer Badge Return Reminder - GOV":function(g){var e=g.data.volunteers,I=["2023-11-14"],C={},n={};e=e.filter((function(g){return!(-1==I.indexOf(g.date)||""==g.volunteerName||""==g.volunteerPhone||!g.idCardCollected||g.idCardReturned)&&(C[g.volunteerName]=g.volunteerPhone,!0)}));Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))}));var t={};return Object.keys(n).sort().map((function(g){var e=n[g];return t[e.phone]?"":(t[e.phone]=1,"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\nHare Krishna.\nKindly return your volunteer badge of Govardhan Puja festival at Temple Book Counter on or before Sunday, 19th Nov".trim())))})).filter((function(g){return""!=g}))},"Service Info - VKE23":function(g){var e=g.data.volunteers,I=["2023-12-23"],C={},n={};e=e.filter((function(g){return-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&(C[g.volunteerName]=g.volunteerPhone),-1!=I.indexOf(g.date)&&""!=g.volunteerName&&""!=g.volunteerPhone&&!g.infoMsgSent}));return Object.keys(C).map((function(g){for(var I=0;I<e.length;I++)e[I].volunteerName==g&&(n[g]||(n[g]={name:g,phone:e[I].volunteerPhone,availability:e[I].availability,idCardCollected:e[I].idCardCollected,services:[]}),n[g].services.push({date:e[I].date,service:e[I].service,timings:e[I].timings,coordinator:e[I].coordinator,spoc:e[I].spoc,spocPhone:e[I].spocPhone}))})),Object.keys(n).sort().map((function(g){var e=n[g];return"https://web.whatsapp.com/send?phone=91".concat(e.phone,"&name=").concat(encodeURIComponent(e.name),"&text=").concat(encodeURIComponent("\n*Service Details - Vaikunta Ekadashi 2023 - Volunteering*\n*Saturday, 23rd December 2023*\n    \nHare Krishna \ud83d\ude4f\nPlease accept the blessings of Sri Sri Krishna Balarama \ud83d\ude4f ".concat("Default"!=e.availability&&"NOT AVAILABLE"!=e.availability?"We thank you for registering for the *Vaikunta Ekadashi* festival service.":"","\n\n*Guidelines:*\n\n\ud83d\udcbe Please save this number as ISKCON Mysore Volunteering or with any other convenient name. If you do not do this, you may NOT be able to click on the links given below.\n\n\ud83e\udeaa *Volunteer Badges will be issued on Sunday, 17th December 2023 from 10 AM to 1 PM and 3 PM to 8 PM at Volunteer Care Cell inside Sridham Hall*. Please collect without fail.\n\n\ud83d\ude97 Vehicle parking is not allowed inside the temple on the festival day. Parking arrangement is made in _Pailvan Basavayya Community Hall_ in front of the temple. Entry into the parking area is allowed only with Volunteer Badge.\n\n1\ufe0f\u20e3 Every service has got a Single-Point-of-Contact (SPOC) volunteer. *Please call your SPOC and discuss the details of service*, dress code, etc. The contact numbers of SPOC(s) are mentioned in the link below.\n\n\ud83d\ude07 Please report to your services on time. Be responsible for your services.\n\n*Service Details:*\n\nNow please see your service details by clicking on the link given below:\n\n*","https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(e.name)),"*\n\n_Please re-check your service before the festival using the above link. Sometimes your service may change due to unavoidable circumstances._\n\nYou can reply here regarding any queries.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore").trim()))}))},"SPOC Info - VKE23":function(g){var e=g.data.services,I=["2023-12-23"];e=e.filter((function(g){return-1!=I.indexOf(g.date)}));var C={};return e.map((function(g){g.coordinator!=g.spoc&&""!=g.spoc&&""!=g.spocPhone&&(C[g.spoc]=C[g.spoc]||{spoc:g.spoc,spocPhone:g.spocPhone,services:[]},-1==C[g.spoc].services.indexOf(g.service)&&C[g.spoc].services.push({service:g.serviceName,date:g.date,coordinator:g.coordinator,coordinatorPhone:g.coordinatorPhone,timings:g.timings,supply:g.supply}))})),Object.keys(C).sort().map((function(g){var e=C[g];return"https://web.whatsapp.com/send?phone=91".concat(e.spocPhone,"&name=").concat(encodeURIComponent(e.spoc),"&text=").concat(encodeURIComponent("\n*SPOC for Vaikunta Ekadashi 2023 services*\n*Saturday, 23rd December 2023*\n\nHare Krishna \ud83d\ude4f. You are assigned as Single-Point-of-Contact (SPOC) for ".concat(e.services.length>1?e.services.length:"a"," service").concat(e.services.length>1?"s":"",". Kindly click on the below link and through the details of the service").concat(e.services.length>1?"s":""," carefully:\n\n*https://vol.iskconmysore.org/services?SPOC=").concat(encodeURIComponent(e.spoc),"*\n\nYour responsibilities:\n\u2022 Please discuss with the service coordinator").concat(e.services.length>1?"s":""," and understand all major and minor details of the service like dress code, timings etc.\n\u2022 Please call volunteers under you and communicate all the details of the service to them. Phone numbers of all volunteers are availbale in the link shared above.\n\u2022 Make sure that volunteers report at proper time and in appropriate dress code for their service.\n\nRegards,\nPankajanghri Dasa\nISKCON Mysore\n").trim()))}))}},$o={};$o.write=function(){var g=uo(mo.mark((function g(e){return mo.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,navigator.clipboard.writeText(e);case 2:case"end":return g.stop()}}),g)})));return function(e){return g.apply(this,arguments)}}(),$o.read=uo(mo.mark((function g(){return mo.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",navigator.clipboard.readText());case 1:case"end":return g.stop()}}),g)}))),$o.readSync=function(){throw new Error("`.readSync()` is not supported in browsers!")},$o.writeSync=function(){throw new Error("`.writeSync()` is not supported in browsers!")};var gc=$o;function ec(g){return g.map((function(g){return new URLSearchParams(new URL(g).search).get("name")}))}var Ic=function(e){var I=(0,g.useRef)(),C=(0,g.useRef)(),n=t((0,g.useState)([]),2),l=n[0],a=n[1],o=t((0,g.useState)(""),2),c=o[0],A=o[1],r=t((0,g.useState)(-1),2),i=r[0],d=r[1];return(0,g.useEffect)((function(){I.current&&(I.current.textContent=l.join("\n"),C.current.textContent=ec(l).join("\n"))}),[l]),e.isLoading?(0,s.jsx)("div",{children:"Loading"}):(0,s.jsxs)("div",{className:"msgRoot",children:[(0,s.jsxs)("div",{className:"msgOptions",children:[(0,s.jsx)("select",{className:"msgfunc",onChange:function(g){d(-1),A(""),a("None"!=g.target.value?qo[g.target.value](e):[])},children:["None"].concat(Object.keys(qo).sort()).map((function(g){return(0,s.jsx)("option",{value:g,children:g})}))}),(0,s.jsxs)("div",{className:"msgCount",children:["`","(".concat(l?l.length:0,")")]})]}),(0,s.jsxs)("div",{className:"msgmain",children:[(0,s.jsxs)("div",{className:"msgtxt",children:[(0,s.jsx)("div",{className:"links",ref:I,contentEditable:!0}),(0,s.jsx)("div",{className:"names",ref:C,contentEditable:!0})]}),(0,s.jsx)("div",{className:"msgnamesbuttons",children:ec(l).map((function(g,e){return(0,s.jsx)("div",{className:"msgnamebutton",onClick:function(){A(g),d(e)},children:g},g)}))}),(0,s.jsxs)("div",{className:"waholder",children:[(0,s.jsxs)("div",{className:"msgwa",children:[(0,s.jsx)("div",{className:"msgheader",children:c}),(0,s.jsx)("div",{className:"msgMsg",children:(0,s.jsx)("div",{className:"msgMsgTxt",dangerouslySetInnerHTML:{__html:-1==i?"":function(){for(var g=decodeURIComponent(new URLSearchParams(new URL(l[i]).search).get("text")).split(""),e=0,I=0,C=0;C<g.length;C++)"*"==g[C]?(g[C]=e%2==0?"<b>":"</b>",e++):"_"==g[C]&&(g[C]=I%2==0?"<i>":"</i>",I++);return g.join("")}()}})})]}),(0,s.jsx)("button",{className:"msgcopy",onClick:function(){gc.write(decodeURIComponent(new URLSearchParams(new URL(l[i]).search).get("text")))},children:"Copy Message"})]})]})]})};var Cc=function(e){var I=(0,g.useRef)();return(0,g.useState)((function(){I.current&&I.current.focus()}),[]),(0,s.jsxs)("div",{className:"home",children:[(0,s.jsx)("input",{className:"pin",type:"password",ref:I}),(0,s.jsx)("button",{className:"pingo",onClick:function(){"8379"==I.current.value&&(window.location.pathname="/ser")}})]})};var nc=function(e){var I=e.data,C=I.slots,n=I.services,l=I.volunteers,a=I.events,o=t((0,g.useState)(""),2),c=o[0],A=o[1],r=t((0,g.useState)(!1),2),i=r[0],d=r[1],u=t((0,g.useState)(!0),2),m=u[0],h=u[1];(0,g.useEffect)((function(){I&&I.events&&""==c&&A(a.map((function(g){return g.date})).sort()[0])}),[I]);var b={};(C=C||[]).map((function(g){b[g.slot]=b[g.slot]||{},b[g.slot].b=g.b,b[g.slot].l=g.l,b[g.slot].d=g.d})),l=(l||[]).filter((function(g){return g.date==c&&""!=g.volunteerName}));var Z={};l.map((function(g){Z[g.volunteerName]=0}));var G=Object.keys(Z).sort().map((function(g){var e=l.filter((function(e){return e.volunteerName==g})).sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0];return{name:g,service:e.service,spoc:e.spoc,phone:e.spocPhone,availability:e.availability,timings:e.timings}})),p={};G.map((function(g){p[g.spoc]=p[g.spoc]||{},p[g.spoc].phone=g.phone,p[g.spoc].availability=p[g.spoc].availability||[],p[g.spoc].availability.push("NOT AVAILABLE"==g.availability||"Default"==g.availability?"Whole Day":g.availability)}));var B=Object.keys(p).sort(),y=function(g,e){var I=p[g].availability.map((function(g){return b[g][e]})).reduce((function(g,e){return g+e}));0==I&&(I=2);var C=Math.ceil((m?.25:0)*I);return 0==C&&m&&(C=1),I+C},S=B.map((function(g){return{name:g,phone:p[g].phone,b:y(g,"b"),l:y(g,"l"),d:i?y(g,"d"):"2023-09-07"==c?0:y(g,"d")}}));return n?(0,s.jsxs)("div",{className:"bldroot",children:[(0,s.jsxs)("div",{className:"iph",children:[(0,s.jsxs)("div",{className:"spocdate",children:["Select date",(0,s.jsx)("input",{type:"date",className:"spocdateip",defaultValue:c,onChange:function(g){A(g.target.value)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"checkbox",onChange:function(g){d(g.target.checked)}}),"Include 7th night dinner count"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"checkbox",onChange:function(g){h(!g.target.checked)}}),"Exclude 25% extra count"]})]}),(0,s.jsxs)("div",{className:"spocbld",children:[(0,s.jsxs)("div",{className:"countrow",children:[(0,s.jsx)("div",{className:"spochead spocell",children:"#"}),(0,s.jsx)("div",{className:"spochead spocell spocname",children:"SPOC Name (".concat(S.length,")")}),(0,s.jsx)("div",{className:"spochead spocell spocb",children:"Breakfast (".concat(S.map((function(g){return g.b})).reduce((function(g,e){return g+e}),0),")")}),(0,s.jsx)("div",{className:"spochead spocell spocl",children:"Lunch (".concat(S.map((function(g){return g.l})).reduce((function(g,e){return g+e}),0),")")}),(0,s.jsx)("div",{className:"spochead spocell spocd",children:"Dinner (".concat(S.map((function(g){return g.d})).reduce((function(g,e){return g+e}),0),")")})]}),S.map((function(g,e){return(0,s.jsxs)("div",{className:"countrow",children:[(0,s.jsx)("div",{className:"spocell",children:e+1}),(0,s.jsx)("div",{className:"spocell spocname",children:(0,s.jsx)("a",{href:"tel:+91".concat(g.phone),children:g.name})}),(0,s.jsx)("div",{className:"spocell spocb",children:g.b}),(0,s.jsx)("div",{className:"spocell spocl",children:g.l}),(0,s.jsx)("div",{className:"spocell spocd",children:g.d})]})}))]})]}):null};var tc=function(e){var I=[],C=[{title:"Name".toUpperCase(),key:"volunteerName"},{title:"Date".toUpperCase(),key:"date"},{title:"Service".toUpperCase(),key:"service"},{title:"Service Timings".toUpperCase(),key:"timings"},{title:"SPOC".toUpperCase(),key:"spoc"},{title:"Co-Ordinator".toUpperCase(),key:"coordinator"}],n=function(g,e,I,C,n,t,l){return'\n            <div class="slpage">\n                <div class="sltitle">\n                    <div style="font-size: 1.5vw; font-weight: 900">Final Service List - Sri Krishna Janmashtami & Sri Vyasa Puja</div>\n                    <div style="margin-top: .3vw; font-size: 1.1vw; font-weight: 900">5th Sep - Pre-Arrangements \u2022 6th Sep - Janmashtami Day-1 \u2022 7th Sep - Janmashtami Day-2 \u2022 8th Sep - Sri Vyasa Puja \u2022 9th Sep - Winding Up</div>\n                </div>\n                <table class="sltable">\n                    <tbody>\n                        <thead class="slheader">\n                            <tr>\n                                '.concat(I.map((function(g,e){return'<th class="slcellhead slhead-'.concat(e+1,'">').concat(g.title,"</th>")})).join("\n").trim(),"\n                            </tr>\n                        </thead>\n                        ").concat(e.slice(C,n).map((function(g){return"<tr>\n                                    ".concat(g.map((function(g,e){return g.hide?"":'<td class="slcell slcell-'.concat(e+1,'" rowspan=').concat(g.span,">").concat(g.value,"</td>")})).join("\n").trim(),"                                \n                                </tr>").trim()})).join("\n").trim(),'\n                    </tbody>\n                </table>\n                <div class="page-num">',"Page ".concat(t+1," of ").concat(l),'</div>\n                <div class="page-break"/>\n            </div>\n        ').trim()};(0,g.useEffect)((function(){document.body.classList.add("sl-page")}),[]);var t=e.data,l=new URLSearchParams(window.location.search).get("date").trim(),o="*"==l?["*"]:l.split(" ").map((function(g){return a()(g,"YYYYMMDD").format("YYYY-MM-DD")}));return(0,g.useEffect)((function(){if(Object.keys(t).length){t.events.filter((function(g){return"*"==o[0]||o.includes(g.date)}))[0];I=t.volunteers.filter((function(g){return""!=g.volunteerName&&""!=g.date&&""!=g.service&&("*"==o[0]||o.includes(g.date))})).sort((function(g,e){return g.serviceStartTime-e.serviceStartTime})).sort((function(g,e){return g.date<e.date?-1:1})).sort((function(g,e){return g.volunteerName<e.volunteerName?-1:1})).map((function(g){return C.map((function(e){return{value:function(){switch(e.key){case"timings":return g[e.key].toTimingCase();case"date":return a()(g[e.key]).format("ddd, Do MMM");default:return g[e.key]}}(),span:1,hide:!1,index:1}}))}));for(var g=0;g<C.length;g++)for(var e=0,l=1;l<I.length;l++)if(I[l][g].value==I[e][g].value){I[e][g].span=l-e+1;for(var c=e+1;c<=l;c++)I[c][g].span=l-e+1;I[l][g].index=l-e+1,I[l][g].hide=!0}else e=l;var A=document.getElementsByClassName("slmain")[0],r=[],i=0,s=1;if(A)for(;;){for(var d=A.getBoundingClientRect().height;d<1020;){if(s>I.length){!0;break}A.innerHTML=n(0,I,C,i,s),d=A.getBoundingClientRect().height,s++}if(s-=2,r.push([i,s+1]),i=s+1,s+=2,i>=I.length)break;i<I.length-1&&s>I.length&&(s=I.length);for(var u=0;u<I[i].length;u++)if(I[i][u].hide){I[i][u].hide=!1,I[i][u].span=I[i][u].span-I[i][u].index+1,I[i][u].index=1;for(var m=1;m<I[i][u].span;m++)I[i+m][u].span=I[i][u].span,I[i+m][u].index=m+1}A.innerHTML=""}A.innerHTML=r.map((function(g,e,t){return n(0,I,C,g[0],g[1],e,t.length)})).join("\n")}}),[t]),t&&t.volunteers?(0,s.jsx)("div",{className:"slmain"}):(0,s.jsx)("div",{children:"Loading..."})};var lc=function(g){var e=g.details,I=g.i,C=g.sl;return(0,s.jsxs)("div",{className:"service",children:[(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"dark",children:"Service ".concat(C>1?I+1:"").trim()}),(0,s.jsx)("div",{className:"detailFeild",children:e.service})]}),(0,s.jsxs)("div",{className:"vol-section",children:[(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"light",children:"Timings"}),(0,s.jsx)("div",{className:"detailFeild",children:"\u23f1\ufe0f ".concat(e.timings.toTimingCase())})]}),(0,s.jsx)("vl",{className:"vol-sep"}),(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"light",children:"Your Slot"}),(0,s.jsx)("div",{className:"detailFeild",children:"\u23f1\ufe0f ".concat("Whole Day"==e.availability||"Default"==e.availability?e.timings.toTimingCase():e.availability)})]})]}),(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"light",children:"Co-Ordinator"}),(0,s.jsx)("div",{className:"detailFeild",children:"".concat(e.coordinator)})]}),(0,s.jsxs)("div",{className:"detailsDiv",children:[(0,s.jsx)("div",{className:"light",children:"In-charge (SPOC)"}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,s.jsxs)("div",{className:"spocdetholder",children:[(0,s.jsxs)("div",{className:"detailFeild",style:{marginRight:"2vw"},children:[(0,s.jsx)("div",{children:"".concat(e.spoc)}),(0,s.jsx)("div",{className:"spocdetphone",children:"".concat(e.spocPhone)})]}),(0,s.jsxs)("div",{className:"spocdeticons",children:[isNaN(e.spocPhone)?null:(0,s.jsx)("a",{href:"tel:+91".concat(e.spocPhone),children:(0,s.jsx)("i",{className:"bi bi-telephone-fill spocdeticon"})}),isNaN(e.spocPhone)?null:(0,s.jsx)("a",{href:"https://wa.me/91".concat(e.spocPhone),target:"_blank",children:(0,s.jsx)("i",{className:"bi bi-whatsapp spocdeticon"})})]})]})})]}),(0,s.jsx)(Z,{})]})};var ac=function(e){var I=t((0,g.useState)(""),2),C=I[0],n=I[1],l=t((0,g.useState)(!1),2),o=l[0],c=l[1],A=t((0,g.useState)(""),2),r=A[0],i=A[1],d=t((0,g.useState)([]),2),u=(d[0],d[1],e.data),Z=e.dates,G=u.volunteers,p=u.master,B=u.events;return(0,g.useEffect)((function(){var g=new URLSearchParams(window.location.search);n(g.get("name")),c(!!g.get("name"))}),[]),(0,g.useEffect)((function(){var g={};G&&p.map((function(e){""!=e.name&&(g[e.name]=0)})),i(Object.keys(g).sort())}),[u]),(0,s.jsxs)("div",{children:[(0,s.jsx)(m,{title:u.title,hideOptions:!0}),(0,s.jsxs)("div",{className:"vol",children:[o?(0,s.jsx)(h,{children:C}):(0,s.jsx)(f,{inputClass:"autoinvol",filter:function(g){return r.filter((function(e){return e.toLowerCase().includes(g.toLowerCase())}))},Drop:function(g){var e=g.item,I=g.value;return(0,s.jsx)("div",{className:"volnameauto",onClick:function(){n(I)},children:e})},placeholder:"Start typing volunteer's name"}),C&&Z.length?(0,s.jsxs)(h,{className:"serpaper",children:[!o&&(0,s.jsx)("div",{className:"volnameintab",children:"".concat(C," (").concat(p.filter((function(g){return g.name==C}))[0].phone,")")}),(0,s.jsx)(b,{tabs:B.map((function(g){return g.date})).sort().map((function(g){var e=G.filter((function(e){return e.volunteerName==C&&e.date==g})),I=e.sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0],n=e.map((function(g,e,C){return(0,s.jsx)(lc,{details:g,i:e,sl:C.length,mainService:I})})),t=p.filter((function(e){return e.date==g&&e.name==C})),l=t.length?t[0].availability:"Not Available";return{title:1==Z.length?a()(g,"YYYY-MM-DD").format("dddd, Do MMMM YYYY"):Z.length<5?a()(g,"YYYY-MM-DD").format("Do MMM"):a()(g,"YYYY-MM-DD").format("MMM D"),component:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"admin-info-event-name",children:[(0,s.jsx)("div",{children:"".concat(u.events.filter((function(e){return e.date==g}))[0].event," (").concat(n.length," service").concat(n.length>1?"s":"",")").trim()}),(0,s.jsx)("div",{children:"Availability: ".concat(l)})]}),n.length?(0,s.jsxs)("div",{className:"voldetholderv",children:[(0,s.jsx)("div",{style:{width:"100%"},children:n}),u.events.filter((function(e){return e.date==g}))[0].coupon&&(0,s.jsxs)("div",{className:"pracoup",children:[(0,s.jsx)("div",{className:"dark",children:"Collect Prasadam Coupon from"}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,s.jsxs)("div",{className:"spocdetholder",children:[(0,s.jsxs)("div",{className:"detailFeild",style:{marginRight:"2vw"},children:[(0,s.jsx)("div",{children:"".concat(I.spoc)}),(0,s.jsx)("div",{className:"spocdetphone",children:"".concat(I.spocPhone)})]}),(0,s.jsxs)("div",{className:"spocdeticons",children:[isNaN(I.spocPhone)?null:(0,s.jsx)("a",{href:"tel:+91".concat(I.spocPhone),children:(0,s.jsx)("i",{className:"bi bi-telephone-fill spocdeticon"})}),isNaN(I.spocPhone)?null:(0,s.jsx)("a",{href:"https://wa.me/91".concat(I.spocPhone),target:"_blank",children:(0,s.jsx)("i",{className:"bi bi-whatsapp spocdeticon"})})]})]})})]})]}):(0,s.jsx)("div",{className:"noserv",children:"Not Available"==l?"Volunteer has not filled the form for this date":"No services"})]})}}))})]}):C&&(0,s.jsx)(S,{style:{marginTop:"2vw"},size:2})]}),(0,s.jsx)("div",{style:{margin:"15vw"}})]})},oc=function(e){var I=e.data,C=t((0,g.useState)([]),2),n=C[0],l=C[1],a=(0,g.useRef)({});return(0,g.useEffect)((function(){if(I&&I.volunteers){var g=I.volunteers.filter((function(g){return"2023-11-14"==g.date&&""!=g.volunteerName&&""!=g.service})).map((function(g){return a.current[g.volunteerName]=g.idCardCollected,g.volunteerName})).unique().sort();console.log(g),l(g),console.log(g.deskShard(2),g.length)}}),[I]),n.shard(87).map((function(g){return(0,s.jsx)("div",{className:"badge-list-root",children:g.map((function(g,e){return(0,s.jsx)("div",{children:"".concat(a.current[g]?"\u2611":"\u2610"," (").concat(g[0],") ").concat(g.trim()," ").concat(I.volunteers.filter((function(e){return e.volunteerName==g}))[0].idCardPrinted?"":"(\u26a0\ufe0fNP)")},g)}))})}))};var cc=function(e){var I=e.data,C=I.slots,n=I.services,l=I.volunteers,o=I.events,c=t((0,g.useState)(""),2),A=c[0],r=c[1],i=t((0,g.useState)(!1),2),d=i[0];i[1],(0,g.useEffect)((function(){var g=new URLSearchParams(window.location.search);r(g.get("date"))})),(0,g.useEffect)((function(){I&&I.events&&""==A&&r(o.map((function(g){return g.date})).sort()[0])}),[I]);var u={};(C=C||[]).map((function(g){u[g.slot]=u[g.slot]||{},u[g.slot].b=g.b,u[g.slot].l=g.l,u[g.slot].d=g.d})),l=(l||[]).filter((function(g){return g.date==A&&""!=g.volunteerName}));var m={};l.map((function(g){m[g.volunteerName]=0}));var h=Object.keys(m).sort().map((function(g){var e=l.filter((function(e){return e.volunteerName==g})).sort((function(g,e){return e.serviceDuration-g.serviceDuration}))[0];return{name:g,service:e.service,spoc:e.spoc,phone:e.spocPhone,availability:e.availability,timings:e.timings}})),b={};h.map((function(g){b[g.spoc]=b[g.spoc]||{},b[g.spoc].phone=g.phone,b[g.spoc].availability=b[g.spoc].availability||[],b[g.spoc].availability.push("NOT AVAILABLE"==g.availability||"Default"==g.availability?"Whole Day":g.availability)}));var Z=Object.keys(b).sort(),G=function(g,e){var I=b[g].availability.map((function(g){return u[g][e]})).reduce((function(g,e){return g+e}));0==I&&(I=2);var C=Math.ceil(.25*I);return 0==C&&(C=1),I+C},p=Z.map((function(g){return{name:g,phone:b[g].phone,b:G(g,"b"),l:G(g,"l"),d:d?G(g,"d"):"2023-09-07"==A?0:G(g,"d")}}));return n?(0,s.jsx)("div",{className:"colabel-bldroot",children:(0,s.jsx)("div",{className:"colabel-Label",children:p.map((function(g,e){return(0,s.jsx)("div",{className:"colabel-countrow",children:(0,s.jsx)("table",{className:"colabel-cotable",children:(0,s.jsxs)("tbody",{children:[(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"colabel-cocell",colSpan:3,children:g.name})}),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"colabel-cocell",colSpan:3,children:a()(A).format("ddd, Do MMM")})}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"colabel-cocell",children:"B - ".concat(g.b)}),(0,s.jsx)("td",{className:"colabel-cocell",children:"L - ".concat(g.l)}),(0,s.jsx)("td",{className:"colabel-cocell",children:"D - ".concat(g.d)})]})]})})})}))})}):null};function Ac(g,e){var I="undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(!I){if(Array.isArray(g)||(I=n(g))||e&&g&&"number"===typeof g.length){I&&(g=I);var C=0,t=function(){};return{s:t,n:function(){return C>=g.length?{done:!0}:{done:!1,value:g[C++]}},e:function(g){throw g},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,o=!1;return{s:function(){I=I.call(g)},n:function(){var g=I.next();return a=g.done,g},e:function(g){o=!0,l=g},f:function(){try{a||null==I.return||I.return()}finally{if(o)throw l}}}}var rc,ic,sc=Object.defineProperty,dc=Object.getOwnPropertySymbols,uc=Object.prototype.hasOwnProperty,mc=Object.prototype.propertyIsEnumerable,hc=function(g,e,I){return e in g?sc(g,e,{enumerable:!0,configurable:!0,writable:!0,value:I}):g[e]=I},bc=function(g,e){for(var I in e||(e={}))uc.call(e,I)&&hc(g,I,e[I]);if(dc){var C,n=Ac(dc(e));try{for(n.s();!(C=n.n()).done;){I=C.value;mc.call(e,I)&&hc(g,I,e[I])}}catch(t){n.e(t)}finally{n.f()}}return g},Zc=function(g,e){var I={};for(var C in g)uc.call(g,C)&&e.indexOf(C)<0&&(I[C]=g[C]);if(null!=g&&dc){var n,t=Ac(dc(g));try{for(t.s();!(n=t.n()).done;){C=n.value;e.indexOf(C)<0&&mc.call(g,C)&&(I[C]=g[C])}}catch(l){t.e(l)}finally{t.f()}}return I};!function(g){var e=function(){function e(g,I,C,n){if(o(this,e),this.version=g,this.errorCorrectionLevel=I,this.modules=[],this.isFunction=[],g<e.MIN_VERSION||g>e.MAX_VERSION)throw new RangeError("Version value out of range");if(n<-1||n>7)throw new RangeError("Mask value out of range");this.size=4*g+17;for(var l=[],a=0;a<this.size;a++)l.push(!1);for(var c=0;c<this.size;c++)this.modules.push(l.slice()),this.isFunction.push(l.slice());this.drawFunctionPatterns();var A=this.addEccAndInterleave(C);if(this.drawCodewords(A),-1==n)for(var r=1e9,i=0;i<8;i++){this.applyMask(i),this.drawFormatBits(i);var s=this.getPenaltyScore();s<r&&(n=i,r=s),this.applyMask(i)}t(0<=n&&n<=7),this.mask=n,this.applyMask(n),this.drawFormatBits(n),this.isFunction=[]}return A(e,[{key:"getModule",value:function(g,e){return 0<=g&&g<this.size&&0<=e&&e<this.size&&this.modules[e][g]}},{key:"getModules",value:function(){return this.modules}},{key:"drawFunctionPatterns",value:function(){for(var g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var e=this.getAlignmentPatternPositions(),I=e.length,C=0;C<I;C++)for(var n=0;n<I;n++)0==C&&0==n||0==C&&n==I-1||C==I-1&&0==n||this.drawAlignmentPattern(e[C],e[n]);this.drawFormatBits(0),this.drawVersion()}},{key:"drawFormatBits",value:function(g){for(var e=this.errorCorrectionLevel.formatBits<<3|g,I=e,C=0;C<10;C++)I=I<<1^1335*(I>>>9);var l=21522^(e<<10|I);t(l>>>15==0);for(var a=0;a<=5;a++)this.setFunctionModule(8,a,n(l,a));this.setFunctionModule(8,7,n(l,6)),this.setFunctionModule(8,8,n(l,7)),this.setFunctionModule(7,8,n(l,8));for(var o=9;o<15;o++)this.setFunctionModule(14-o,8,n(l,o));for(var c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,n(l,c));for(var A=8;A<15;A++)this.setFunctionModule(8,this.size-15+A,n(l,A));this.setFunctionModule(8,this.size-8,!0)}},{key:"drawVersion",value:function(){if(!(this.version<7)){for(var g=this.version,e=0;e<12;e++)g=g<<1^7973*(g>>>11);var I=this.version<<12|g;t(I>>>18==0);for(var C=0;C<18;C++){var l=n(I,C),a=this.size-11+C%3,o=Math.floor(C/3);this.setFunctionModule(a,o,l),this.setFunctionModule(o,a,l)}}}},{key:"drawFinderPattern",value:function(g,e){for(var I=-4;I<=4;I++)for(var C=-4;C<=4;C++){var n=Math.max(Math.abs(C),Math.abs(I)),t=g+C,l=e+I;0<=t&&t<this.size&&0<=l&&l<this.size&&this.setFunctionModule(t,l,2!=n&&4!=n)}}},{key:"drawAlignmentPattern",value:function(g,e){for(var I=-2;I<=2;I++)for(var C=-2;C<=2;C++)this.setFunctionModule(g+C,e+I,1!=Math.max(Math.abs(C),Math.abs(I)))}},{key:"setFunctionModule",value:function(g,e,I){this.modules[e][g]=I,this.isFunction[e][g]=!0}},{key:"addEccAndInterleave",value:function(g){var I=this.version,C=this.errorCorrectionLevel;if(g.length!=e.getNumDataCodewords(I,C))throw new RangeError("Invalid argument");for(var n=e.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][I],l=e.ECC_CODEWORDS_PER_BLOCK[C.ordinal][I],a=Math.floor(e.getNumRawDataModules(I)/8),o=n-a%n,c=Math.floor(a/n),A=[],r=e.reedSolomonComputeDivisor(l),i=0,s=0;i<n;i++){var d=g.slice(s,s+c-l+(i<o?0:1));s+=d.length;var u=e.reedSolomonComputeRemainder(d,r);i<o&&d.push(0),A.push(d.concat(u))}for(var m=[],h=function(g){A.forEach((function(e,I){(g!=c-l||I>=o)&&m.push(e[g])}))},b=0;b<A[0].length;b++)h(b);return t(m.length==a),m}},{key:"drawCodewords",value:function(g){if(g.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var I=0,C=this.size-1;C>=1;C-=2){6==C&&(C=5);for(var l=0;l<this.size;l++)for(var a=0;a<2;a++){var o=C-a,c=0==(C+1&2)?this.size-1-l:l;!this.isFunction[c][o]&&I<8*g.length&&(this.modules[c][o]=n(g[I>>>3],7-(7&I)),I++)}}t(I==8*g.length)}},{key:"applyMask",value:function(g){if(g<0||g>7)throw new RangeError("Mask value out of range");for(var e=0;e<this.size;e++)for(var I=0;I<this.size;I++){var C=void 0;switch(g){case 0:C=(I+e)%2==0;break;case 1:C=e%2==0;break;case 2:C=I%3==0;break;case 3:C=(I+e)%3==0;break;case 4:C=(Math.floor(I/3)+Math.floor(e/2))%2==0;break;case 5:C=I*e%2+I*e%3==0;break;case 6:C=(I*e%2+I*e%3)%2==0;break;case 7:C=((I+e)%2+I*e%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[e][I]&&C&&(this.modules[e][I]=!this.modules[e][I])}}},{key:"getPenaltyScore",value:function(){for(var g=0,I=0;I<this.size;I++){for(var C=!1,n=0,l=[0,0,0,0,0,0,0],a=0;a<this.size;a++)this.modules[I][a]==C?5==++n?g+=e.PENALTY_N1:n>5&&g++:(this.finderPenaltyAddHistory(n,l),C||(g+=this.finderPenaltyCountPatterns(l)*e.PENALTY_N3),C=this.modules[I][a],n=1);g+=this.finderPenaltyTerminateAndCount(C,n,l)*e.PENALTY_N3}for(var o=0;o<this.size;o++){for(var c=!1,A=0,r=[0,0,0,0,0,0,0],i=0;i<this.size;i++)this.modules[i][o]==c?5==++A?g+=e.PENALTY_N1:A>5&&g++:(this.finderPenaltyAddHistory(A,r),c||(g+=this.finderPenaltyCountPatterns(r)*e.PENALTY_N3),c=this.modules[i][o],A=1);g+=this.finderPenaltyTerminateAndCount(c,A,r)*e.PENALTY_N3}for(var s=0;s<this.size-1;s++)for(var d=0;d<this.size-1;d++){var u=this.modules[s][d];u==this.modules[s][d+1]&&u==this.modules[s+1][d]&&u==this.modules[s+1][d+1]&&(g+=e.PENALTY_N2)}var m,h=0,b=Ac(this.modules);try{for(b.s();!(m=b.n()).done;){h=m.value.reduce((function(g,e){return g+(e?1:0)}),h)}}catch(p){b.e(p)}finally{b.f()}var Z=this.size*this.size,G=Math.ceil(Math.abs(20*h-10*Z)/Z)-1;return t(0<=G&&G<=9),t(0<=(g+=G*e.PENALTY_N4)&&g<=2568888),g}},{key:"getAlignmentPatternPositions",value:function(){if(1==this.version)return[];for(var g=Math.floor(this.version/7)+2,e=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*g-2)),I=[6],C=this.size-7;I.length<g;C-=e)I.splice(1,0,C);return I}},{key:"finderPenaltyCountPatterns",value:function(g){var e=g[1];t(e<=3*this.size);var I=e>0&&g[2]==e&&g[3]==3*e&&g[4]==e&&g[5]==e;return(I&&g[0]>=4*e&&g[6]>=e?1:0)+(I&&g[6]>=4*e&&g[0]>=e?1:0)}},{key:"finderPenaltyTerminateAndCount",value:function(g,e,I){return g&&(this.finderPenaltyAddHistory(e,I),e=0),e+=this.size,this.finderPenaltyAddHistory(e,I),this.finderPenaltyCountPatterns(I)}},{key:"finderPenaltyAddHistory",value:function(g,e){0==e[0]&&(g+=this.size),e.pop(),e.unshift(g)}}],[{key:"encodeText",value:function(I,C){var n=g.QrSegment.makeSegments(I);return e.encodeSegments(n,C)}},{key:"encodeBinary",value:function(I,C){var n=g.QrSegment.makeBytes(I);return e.encodeSegments([n],C)}},{key:"encodeSegments",value:function(g,I){var n,l,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,A=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(e.MIN_VERSION<=o&&o<=c&&c<=e.MAX_VERSION)||A<-1||A>7)throw new RangeError("Invalid value");for(n=o;;n++){var i=8*e.getNumDataCodewords(n,I),s=a.getTotalBits(g,n);if(s<=i){l=s;break}if(n>=c)throw new RangeError("Data too long")}for(var d=0,u=[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH];d<u.length;d++){var m=u[d];r&&l<=8*e.getNumDataCodewords(n,m)&&(I=m)}var h,b=[],Z=Ac(g);try{for(Z.s();!(h=Z.n()).done;){var G=h.value;C(G.mode.modeBits,4,b),C(G.numChars,G.mode.numCharCountBits(n),b);var p,B=Ac(G.getData());try{for(B.s();!(p=B.n()).done;){var y=p.value;b.push(y)}}catch(V){B.e(V)}finally{B.f()}}}catch(V){Z.e(V)}finally{Z.f()}t(b.length==l);var S=8*e.getNumDataCodewords(n,I);t(b.length<=S),C(0,Math.min(4,S-b.length),b),C(0,(8-b.length%8)%8,b),t(b.length%8==0);for(var f=236;b.length<S;f^=253)C(f,8,b);for(var W=[];8*W.length<b.length;)W.push(0);return b.forEach((function(g,e){return W[e>>>3]|=g<<7-(7&e)})),new e(n,I,W,A)}},{key:"getNumRawDataModules",value:function(g){if(g<e.MIN_VERSION||g>e.MAX_VERSION)throw new RangeError("Version number out of range");var I=(16*g+128)*g+64;if(g>=2){var C=Math.floor(g/7)+2;I-=(25*C-10)*C-55,g>=7&&(I-=36)}return t(208<=I&&I<=29648),I}},{key:"getNumDataCodewords",value:function(g,I){return Math.floor(e.getNumRawDataModules(g)/8)-e.ECC_CODEWORDS_PER_BLOCK[I.ordinal][g]*e.NUM_ERROR_CORRECTION_BLOCKS[I.ordinal][g]}},{key:"reedSolomonComputeDivisor",value:function(g){if(g<1||g>255)throw new RangeError("Degree out of range");for(var I=[],C=0;C<g-1;C++)I.push(0);I.push(1);for(var n=1,t=0;t<g;t++){for(var l=0;l<I.length;l++)I[l]=e.reedSolomonMultiply(I[l],n),l+1<I.length&&(I[l]^=I[l+1]);n=e.reedSolomonMultiply(n,2)}return I}},{key:"reedSolomonComputeRemainder",value:function(g,I){var C,n=I.map((function(g){return 0})),t=Ac(g);try{var l=function(){var g=C.value^n.shift();n.push(0),I.forEach((function(I,C){return n[C]^=e.reedSolomonMultiply(I,g)}))};for(t.s();!(C=t.n()).done;)l()}catch(a){t.e(a)}finally{t.f()}return n}},{key:"reedSolomonMultiply",value:function(g,e){if(g>>>8!=0||e>>>8!=0)throw new RangeError("Byte out of range");for(var I=0,C=7;C>=0;C--)I=I<<1^285*(I>>>7),I^=(e>>>C&1)*g;return t(I>>>8==0),I}}]),e}(),I=e;function C(g,e,I){if(e<0||e>31||g>>>e!=0)throw new RangeError("Value out of range");for(var C=e-1;C>=0;C--)I.push(g>>>C&1)}function n(g,e){return 0!=(g>>>e&1)}function t(g){if(!g)throw new Error("Assertion error")}I.MIN_VERSION=1,I.MAX_VERSION=40,I.PENALTY_N1=3,I.PENALTY_N2=3,I.PENALTY_N3=40,I.PENALTY_N4=10,I.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],I.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],g.QrCode=I;var l=function(){function g(e,I,C){if(o(this,g),this.mode=e,this.numChars=I,this.bitData=C,I<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}return A(g,[{key:"getData",value:function(){return this.bitData.slice()}}],[{key:"makeBytes",value:function(e){var I,n=[],t=Ac(e);try{for(t.s();!(I=t.n()).done;){C(I.value,8,n)}}catch(l){t.e(l)}finally{t.f()}return new g(g.Mode.BYTE,e.length,n)}},{key:"makeNumeric",value:function(e){if(!g.isNumeric(e))throw new RangeError("String contains non-numeric characters");for(var I=[],n=0;n<e.length;){var t=Math.min(e.length-n,3);C(parseInt(e.substr(n,t),10),3*t+1,I),n+=t}return new g(g.Mode.NUMERIC,e.length,I)}},{key:"makeAlphanumeric",value:function(e){if(!g.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");var I,n=[];for(I=0;I+2<=e.length;I+=2){var t=45*g.ALPHANUMERIC_CHARSET.indexOf(e.charAt(I));C(t+=g.ALPHANUMERIC_CHARSET.indexOf(e.charAt(I+1)),11,n)}return I<e.length&&C(g.ALPHANUMERIC_CHARSET.indexOf(e.charAt(I)),6,n),new g(g.Mode.ALPHANUMERIC,e.length,n)}},{key:"makeSegments",value:function(e){return""==e?[]:g.isNumeric(e)?[g.makeNumeric(e)]:g.isAlphanumeric(e)?[g.makeAlphanumeric(e)]:[g.makeBytes(g.toUtf8ByteArray(e))]}},{key:"makeEci",value:function(e){var I=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)C(e,8,I);else if(e<16384)C(2,2,I),C(e,14,I);else{if(!(e<1e6))throw new RangeError("ECI assignment value out of range");C(6,3,I),C(e,21,I)}return new g(g.Mode.ECI,0,I)}},{key:"isNumeric",value:function(e){return g.NUMERIC_REGEX.test(e)}},{key:"isAlphanumeric",value:function(e){return g.ALPHANUMERIC_REGEX.test(e)}},{key:"getTotalBits",value:function(g,e){var I,C=0,n=Ac(g);try{for(n.s();!(I=n.n()).done;){var t=I.value,l=t.mode.numCharCountBits(e);if(t.numChars>=1<<l)return 1/0;C+=4+l+t.bitData.length}}catch(a){n.e(a)}finally{n.f()}return C}},{key:"toUtf8ByteArray",value:function(g){g=encodeURI(g);for(var e=[],I=0;I<g.length;I++)"%"!=g.charAt(I)?e.push(g.charCodeAt(I)):(e.push(parseInt(g.substr(I+1,2),16)),I+=2);return e}}]),g}(),a=l;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",g.QrSegment=a}(rc||(rc={})),function(g){var e=A((function g(e,I){o(this,g),this.ordinal=e,this.formatBits=I})),I=e;I.LOW=new e(0,1),I.MEDIUM=new e(1,0),I.QUARTILE=new e(2,3),I.HIGH=new e(3,2),g.Ecc=I}((ic=rc||(rc={})).QrCode||(ic.QrCode={})),function(g){!function(g){var e=function(){function g(e,I){o(this,g),this.modeBits=e,this.numBitsCharCount=I}return A(g,[{key:"numCharCountBits",value:function(g){return this.numBitsCharCount[Math.floor((g+7)/17)]}}]),g}(),I=e;I.NUMERIC=new e(1,[10,12,14]),I.ALPHANUMERIC=new e(2,[9,11,13]),I.BYTE=new e(4,[8,16,16]),I.KANJI=new e(8,[8,10,12]),I.ECI=new e(7,[0,0,0]),g.Mode=I}(g.QrSegment||(g.QrSegment={}))}(rc||(rc={}));var Gc=rc,pc={L:Gc.QrCode.Ecc.LOW,M:Gc.QrCode.Ecc.MEDIUM,Q:Gc.QrCode.Ecc.QUARTILE,H:Gc.QrCode.Ecc.HIGH},Bc="#FFFFFF",yc="#000000";function Sc(g){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,I=[];return g.forEach((function(g,C){var n=null;g.forEach((function(t,l){if(!t&&null!==n)return I.push("M".concat(n+e," ").concat(C+e,"h").concat(l-n,"v1H").concat(n+e,"z")),void(n=null);if(l!==g.length-1)t&&null===n&&(n=l);else{if(!t)return;null===n?I.push("M".concat(l+e,",").concat(C+e," h1v1H").concat(l+e,"z")):I.push("M".concat(n+e,",").concat(C+e," h").concat(l+1-n,"v1H").concat(n+e,"z"))}}))})),I.join("")}function fc(g,e){return g.slice().map((function(g,I){return I<e.y||I>=e.y+e.h?g:g.map((function(g,I){return(I<e.x||I>=e.x+e.w)&&g}))}))}function Wc(g,e,I,C){if(null==C)return null;var n=I?4:0,t=g.length+2*n,l=Math.floor(.1*e),a=t/e,o=(C.width||l)*a,c=(C.height||l)*a,A=null==C.x?g.length/2-o/2:C.x*a,r=null==C.y?g.length/2-c/2:C.y*a,i=null;if(C.excavate){var s=Math.floor(A),d=Math.floor(r);i={x:s,y:d,w:Math.ceil(o+A-s),h:Math.ceil(c+r-d)}}return{x:A,y:r,h:c,w:o,excavation:i}}var Vc=function(){try{(new Path2D).addPath(new Path2D)}catch(g){return!1}return!0}();function vc(e){var I=e,C=I.value,n=I.size,l=void 0===n?128:n,a=I.level,o=void 0===a?"L":a,c=I.bgColor,A=void 0===c?Bc:c,r=I.fgColor,i=void 0===r?yc:r,s=I.includeMargin,d=void 0!==s&&s,u=I.style,m=I.imageSettings,h=Zc(I,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),b=null==m?void 0:m.src,Z=(0,g.useRef)(null),G=(0,g.useRef)(null),p=t((0,g.useState)(!1),2),B=(p[0],p[1]);(0,g.useEffect)((function(){if(null!=Z.current){var g=Z.current,e=g.getContext("2d");if(!e)return;var I=Gc.QrCode.encodeText(C,pc[o]).getModules(),n=d?4:0,t=I.length+2*n,a=Wc(I,l,d,m),c=G.current,r=null!=a&&null!==c&&c.complete&&0!==c.naturalHeight&&0!==c.naturalWidth;r&&null!=a.excavation&&(I=fc(I,a.excavation));var s=window.devicePixelRatio||1;g.height=g.width=l*s;var u=l/t*s;e.scale(u,u),e.fillStyle=A,e.fillRect(0,0,t,t),e.fillStyle=i,Vc?e.fill(new Path2D(Sc(I,n))):I.forEach((function(g,I){g.forEach((function(g,C){g&&e.fillRect(C+n,I+n,1,1)}))})),r&&e.drawImage(c,a.x+n,a.y+n,a.w,a.h)}})),(0,g.useEffect)((function(){B(!1)}),[b]);var y=bc({height:l,width:l},u),S=null;return null!=b&&(S=g.createElement("img",{src:b,key:b,style:{display:"none"},onLoad:function(){B(!0)},ref:G})),g.createElement(g.Fragment,null,g.createElement("canvas",bc({style:y,height:l,width:l,ref:Z},h)),S)}function Rc(e){var I=e,C=I.value,n=I.size,t=void 0===n?128:n,l=I.level,a=void 0===l?"L":l,o=I.bgColor,c=void 0===o?Bc:o,A=I.fgColor,r=void 0===A?yc:A,i=I.includeMargin,s=void 0!==i&&i,d=I.imageSettings,u=Zc(I,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),m=Gc.QrCode.encodeText(C,pc[a]).getModules(),h=s?4:0,b=m.length+2*h,Z=Wc(m,t,s,d),G=null;null!=d&&null!=Z&&(null!=Z.excavation&&(m=fc(m,Z.excavation)),G=g.createElement("image",{xlinkHref:d.src,height:Z.h,width:Z.w,x:Z.x+h,y:Z.y+h,preserveAspectRatio:"none"}));var p=Sc(m,h);return g.createElement("svg",bc({height:t,width:t,viewBox:"0 0 ".concat(b," ").concat(b)},u),g.createElement("path",{fill:c,d:"M0,0 h".concat(b,"v").concat(b,"H0z"),shapeRendering:"crispEdges"}),g.createElement("path",{fill:r,d:p,shapeRendering:"crispEdges"}),G)}var Xc=function(e){var I=e,C=I.renderAs,n=Zc(I,["renderAs"]);return"svg"===C?g.createElement(Rc,bc({},n)):g.createElement(vc,bc({},n))},kc=function(g){var e=g.details,I=e.name,C=e.seva,n=e.spoc,t=g.back;return(0,s.jsxs)("div",{className:"bp-badge",style:{backgroundImage:"url(".concat("","/img/").concat(t?"back":"front",".png)"),backgroundSize:"cover",backgroundPosition:"center",width:"3.75in",height:"5in"},children:[(0,s.jsxs)("div",{className:"bp-plus-holder",children:[(0,s.jsxs)("div",{className:"bp-plus-row-holder",children:[(0,s.jsx)("div",{className:"bp-plus bp-plus-lt"}),(0,s.jsx)("div",{className:"bp-plus bp-plus-rt"})]}),(0,s.jsxs)("div",{className:"bp-plus-row-holder",children:[(0,s.jsx)("div",{className:"bp-plus bp-plus-lb"}),(0,s.jsx)("div",{className:"bp-plus bp-plus-rb"})]})]}),t?(0,s.jsx)("div",{className:"bp-qr",children:(0,s.jsx)(Xc,{value:I?"https://vol.iskconmysore.org/vol?name=".concat(encodeURIComponent(I),"&date=2023-12-23"):"https://vol.iskconmysore.org/vol",size:230})}):(0,s.jsxs)("div",{className:"bp-details",children:[(0,s.jsxs)("div",{className:"bp-detail",children:[(0,s.jsx)("div",{className:"bp-detail-label",children:"NAME"}),(0,s.jsx)("div",{className:"bp-detail-text",children:I})]}),(0,s.jsxs)("div",{className:"bp-detail",children:[(0,s.jsx)("div",{className:"bp-detail-label",children:"SEVA"}),(0,s.jsx)("div",{className:"bp-detail-text",children:C})]}),(0,s.jsxs)("div",{className:"bp-detail",children:[(0,s.jsx)("div",{className:"bp-detail-label",children:"SPOC"}),(0,s.jsx)("div",{className:"bp-detail-text",children:n})]})]})]})},Jc=function(e){var I=e.data,C=t((0,g.useState)([]),2),n=C[0],l=C[1],a={};(0,g.useEffect)((function(){if(I&&Object.keys(I).length){var g=I.volunteers,e=I.services;g=g.filter((function(g){return!g.idCardPrinted&&g.volunteerName&&g.volunteerPhone&&g.service&&"2023-12-23"==g.date})),e=e.filter((function(g){return"2023-12-23"==g.date}));var C={};g.map((function(g){C[g.volunteerName]?g.serviceDuration>C[g.volunteerName].serviceDuration&&(C[g.volunteerName]=g):C[g.volunteerName]=g})),e.forEach((function(g){a[g.serviceName]=g.mainService})),l(Object.keys(C).sort().map((function(g){return{name:g,seva:a[C[g].service],spoc:C[g].spoc}})))}}),[I]);var o=n.shard(10,{name:"",seva:"",spoc:""});return(0,s.jsx)("div",{className:"bp-root",children:o.map((function(g,e){return[(0,s.jsxs)("div",{className:"bp-page",children:[(0,s.jsx)("div",{className:"bp-row",children:g.slice(0,g.length/2).map((function(g){return(0,s.jsx)(kc,{details:g})}))}),(0,s.jsx)("div",{className:"bp-row",children:g.slice(g.length/2,g.length).map((function(g){return(0,s.jsx)(kc,{details:g})}))}),(0,s.jsx)("div",{className:"page-break"})]},"s-".concat(e)),(0,s.jsxs)("div",{className:"bp-page",children:[(0,s.jsx)("div",{className:"bp-row",children:g.slice(0,g.length/2).reverse().map((function(g){return(0,s.jsx)(kc,{details:g,back:!0})}))}),(0,s.jsx)("div",{className:"bp-row",children:g.slice(g.length/2,g.length).reverse().map((function(g){return(0,s.jsx)(kc,{details:g,back:!0})}))}),e!=o.length-1?(0,s.jsx)("div",{className:"page-break"}):null]},"s-".concat(e))]}))})},Yc={"toggle-on":"M280-240q-100 0-170-70T40-480q0-100 70-170t170-70h400q100 0 170 70t70 170q0 100-70 170t-170 70H280Zm0-80h400q66 0 113-47t47-113q0-66-47-113t-113-47H280q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0-40q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm200-120Z","toggle-off":"M280-240q-100 0-170-70T40-480q0-100 70-170t170-70h400q100 0 170 70t70 170q0 100-70 170t-170 70H280Zm0-80h400q66 0 113-47t47-113q0-66-47-113t-113-47H280q-66 0-113 47t-47 113q0 66 47 113t113 47Zm400-40q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM480-480Z","rotate-360":"m360-160-56-56 70-72q-128-17-211-70T80-480q0-83 115.5-141.5T480-680q169 0 284.5 58.5T880-480q0 62-66.5 111T640-296v-82q77-20 118.5-49.5T800-480q0-32-85.5-76T480-600q-149 0-234.5 44T160-480q0 24 51 57.5T356-372l-52-52 56-56 160 160-160 160Z",trash:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"},Hc=function(g){var e=g.name,I=g.color,C=g.size,n=g.style,t=g.onClick;return C=C||"7vw",n=y({cursor:"pointer"},n=n||{}),(0,s.jsx)("svg",{onClick:t,style:n,fill:I||"black",xmlns:"http://www.w3.org/2000/svg",height:C,viewBox:"0 -960 960 960",width:C,children:(0,s.jsx)("path",{d:Yc[e]})})},wc=I(8),Nc=I.n(wc),Fc=function(e){var I=t((0,g.useState)(!0),2),C=I[0],n=I[1],l=t((0,g.useState)(!0),2),a=l[0],o=l[1],c=t((0,g.useState)(),2),A=(c[0],c[1],e.size),r=(e.onResult,e.style),i=e.className;e.debounce;A=A||"90vw",r=r||{},i=i||"";return(0,s.jsxs)("div",{className:"qr-holder ".concat(i),style:y({width:A,height:A},r),children:[(0,s.jsxs)("div",{className:"qr-options",children:[(0,s.jsx)(Hc,{name:C?"toggle-on":"toggle-off",color:C?"white":"grey",onClick:function(){n(!C)}}),(0,s.jsx)(Hc,{name:"rotate-360",onClick:C?function(){o(!a)}:function(){},color:C?"white":"grey"})]}),C?(0,s.jsx)(Nc(),{className:"qr-cam",delay:300,facingMode:a?"front":"rear"}):(0,s.jsx)("div",{className:"qr-cam-off-msg",children:"Camera is turned off"})]})},Kc=function(e){var I=e.data,C=t((0,g.useState)(),2),n=C[0],l=C[1],o=t((0,g.useState)(),2),c=o[0],A=o[1];(0,g.useEffect)((function(){if(I.events){var g=I.events.filter((function(g){return g.badge&&a()(g.date).isSameOrAfter(a()(),"day")})).map((function(g){return g.date}))[0];l(g),(new Zo).call("get-badge-issue",{edate:g}).then(A).catch((function(g){console.log(g)}))}}),[I]);return(0,s.jsxs)("div",{className:"pqr-main",children:[(0,s.jsx)(m,{title:"Badge issue for ".concat(a()(n).format("DD MMM 'YY")),hideOptions:!0}),(0,s.jsx)("div",{className:"pqr-root",children:(0,s.jsx)(Fc,{className:"bi-cam",size:"100vw",onResult:function(g,e){e?console.log("Invalid URL"):g?l((function(e){return(new Zo).call("set-badge-issue",{date:a()().format("YYYY-MM-DD HH:mm:ss"),edate:e,vname:g}).then(A).catch((function(g){console.log(g)})),e})):console.log("Empty name!")},debounce:!0})}),c?(0,s.jsxs)("div",{className:"bi-issued-holder",children:[(0,s.jsx)("div",{className:"bi-issued-label",children:"ISSUED BADGES"}),(0,s.jsx)("div",{className:"bi-issued-list",children:c.length?c.map((function(g){return(0,s.jsxs)("div",{className:"bi-list-item",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:g.vname}),(0,s.jsx)("div",{className:"bi-list-time",children:a()(g.date).format("DD MMM YYYY hh:mm A")})]}),(0,s.jsx)("div",{children:(0,s.jsx)(Hc,{name:"trash",color:"#aaa",size:"6vw",onClick:function(){var e;e=g.vname,window.confirm("Do you want to delete this entry of ".concat(e,"?"))?l((function(g){return(new Zo).call("unset-badge-issue",{edate:g,vname:e}).then((function(g){A(g)})).catch(console.log),g})):console.log("Deletion canceled")}})})]})})):(0,s.jsx)("div",{className:"bi-empty-list",children:"No badges are issued"})})]}):null]})},Ec=function(e){var I=(0,g.useRef)();return(0,s.jsx)("div",{ref:I,children:(0,s.jsx)(Xc,{value:"https://vol.iskconmysore.org/vol?name=asdasdasd",size:512})})};var Tc=function(){var e=t((0,g.useState)({}),2),I=e[0],C=e[1],n=t((0,g.useState)({}),2),l=n[0],o=n[1],c=t((0,g.useState)([]),2),A=c[0],r=c[1],i=t((0,g.useState)(!0),2),d=i[0],u=i[1],m=function(){(new Zo).call().then((function(g){C(g.data),o(g.timestamp),r(g.data.events.map((function(g){return g.date})).sort()),u(!1)})).catch((function(){}))};return(0,g.useEffect)((function(){m(),setInterval(m,15e4)}),[]),(0,s.jsxs)("div",{className:"App",children:[(0,s.jsx)(_o,{children:(0,s.jsxs)(No,{children:[(0,s.jsx)(Ho,{path:"/vol",element:(0,s.jsx)(W,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/volist",element:(0,s.jsx)(W,{data:I,dates:A,showList:!0})}),(0,s.jsx)(Ho,{path:"/admin-info",element:(0,s.jsx)(ac,{data:I,dates:A,showList:!0})}),(0,s.jsx)(Ho,{path:"/ser",element:(0,s.jsx)(io,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/services",element:(0,s.jsx)(io,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/util/msg",element:(0,s.jsx)(Ic,{data:I,isLoading:d})}),(0,s.jsx)(Ho,{path:"/util/coupons",element:(0,s.jsx)(nc,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/util/service-list",element:(0,s.jsx)(tc,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/util/badge-list",element:(0,s.jsx)(oc,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/util/badge-print",element:(0,s.jsx)(Jc,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/util/coupon-label",element:(0,s.jsx)(cc,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/util/badge-issue-qr",element:(0,s.jsx)(Kc,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/util/test",element:(0,s.jsx)(Ec,{data:I,dates:A})}),(0,s.jsx)(Ho,{path:"/",element:(0,s.jsx)(Cc,{})})]})}),"/util/service-list"!=window.location.pathname&&"/util/badge-list"!=window.location.pathname&&"/util/badge-print"!=window.location.pathname&&"/util/badge-issue-qr"!=window.location.pathname&&"/util/coupon-label"!=window.location.pathname&&(0,s.jsx)("div",{id:"update-epoch",children:"Data last updated at ".concat(a()(l).format("HH:mm A"))})]})};e.render((0,s.jsx)(g.StrictMode,{children:(0,s.jsx)(Tc,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.c6da4b9b.js.map